(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../default-constants.js", "../../assets/render-texture.js", "../../components/component.js", "../../data/class-decorator.js", "../../geometry/index.js", "../../gfx/define.js", "../../math/index.js", "../../pipeline/define.js", "../../platform/view.js", "../../renderer/scene/camera.js", "../../scene-graph/index.js", "../../value-types/index.js", "../../scene-graph/node-enum.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../default-constants.js"), require("../../assets/render-texture.js"), require("../../components/component.js"), require("../../data/class-decorator.js"), require("../../geometry/index.js"), require("../../gfx/define.js"), require("../../math/index.js"), require("../../pipeline/define.js"), require("../../platform/view.js"), require("../../renderer/scene/camera.js"), require("../../scene-graph/index.js"), require("../../value-types/index.js"), require("../../scene-graph/node-enum.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.defaultConstants, global.renderTexture, global.component, global.classDecorator, global.index, global.define, global.index, global.define, global.view, global.camera, global.index, global.index, global.nodeEnum);
    global.cameraComponent = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _defaultConstants, _renderTexture, _component, _classDecorator, _index, _define, _index2, _define2, _view, _camera, _index3, _index4, _nodeEnum) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.CameraComponent = void 0;

  var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _dec20, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _descriptor11, _descriptor12, _descriptor13, _descriptor14, _descriptor15, _descriptor16, _descriptor17, _descriptor18, _class3, _temp;

  function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

  function _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }

  function _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }

  var _temp_vec3_1 = new _index2.Vec3();
  /**
   * @en The projection type.
   * @zh 投影类型。
   */


  var ProjectionType = (0, _index4.Enum)(_camera.CameraProjection);
  var FOVAxis = (0, _index4.Enum)(_camera.CameraFOVAxis);
  var Aperture = (0, _index4.Enum)(_camera.CameraAperture);
  var Shutter = (0, _index4.Enum)(_camera.CameraShutter);
  var ISO = (0, _index4.Enum)(_camera.CameraISO);
  var ClearFlag = (0, _index4.Enum)({
    SKYBOX: _camera.SKYBOX_FLAG | _define.GFXClearFlag.DEPTH_STENCIL,
    SOLID_COLOR: _define.GFXClearFlag.ALL,
    DEPTH_ONLY: _define.GFXClearFlag.DEPTH_STENCIL,
    DONT_CLEAR: _define.GFXClearFlag.NONE
  });
  /**
   * @en The Camera Component.
   * @zh 相机组件。
   */

  var CameraComponent = (_dec = (0, _classDecorator.ccclass)('cc.CameraComponent'), _dec2 = (0, _classDecorator.help)('i18n:cc.CameraComponent'), _dec3 = (0, _classDecorator.menu)('Components/Camera'), _dec4 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.priority',
    displayOrder: 0
  }), _dec5 = (0, _classDecorator.property)({
    type: _index3.Layers.BitMask,
    tooltip: 'i18n:camera.visibility',
    displayOrder: 1
  }), _dec6 = (0, _classDecorator.property)({
    type: ClearFlag,
    tooltip: 'i18n:camera.clear_flags',
    displayOrder: 2
  }), _dec7 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.color',
    displayOrder: 3
  }), _dec8 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.depth',
    displayOrder: 4
  }), _dec9 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.stencil',
    displayOrder: 5
  }), _dec10 = (0, _classDecorator.property)({
    type: ProjectionType,
    tooltip: 'i18n:camera.projection',
    displayOrder: 6
  }), _dec11 = (0, _classDecorator.property)({
    type: FOVAxis,
    tooltip: 'i18n:camera.fov_axis',
    displayOrder: 7
  }), _dec12 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.fov',
    displayOrder: 8
  }), _dec13 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.ortho_height',
    displayOrder: 9
  }), _dec14 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.near',
    displayOrder: 10
  }), _dec15 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.far',
    displayOrder: 11
  }), _dec16 = (0, _classDecorator.property)({
    type: Aperture,
    tooltip: 'i18n:camera.aperture',
    displayOrder: 12
  }), _dec17 = (0, _classDecorator.property)({
    type: Shutter,
    tooltip: 'i18n:camera.shutter',
    displayOrder: 13
  }), _dec18 = (0, _classDecorator.property)({
    type: ISO,
    tooltip: 'i18n:camera.ISO',
    displayOrder: 14
  }), _dec19 = (0, _classDecorator.property)({
    tooltip: 'i18n:camera.rect',
    displayOrder: 15
  }), _dec20 = (0, _classDecorator.property)({
    type: _renderTexture.RenderTexture,
    tooltip: 'i18n:camera.target_texture',
    displayOrder: 16
  }), _dec(_class = _dec2(_class = _dec3(_class = (0, _classDecorator.executeInEditMode)(_class = (_class2 = (_temp = _class3 = /*#__PURE__*/function (_Component) {
    _inherits(CameraComponent, _Component);

    function CameraComponent() {
      var _getPrototypeOf2;

      var _this;

      _classCallCheck(this, CameraComponent);

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CameraComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));

      _initializerDefineProperty(_this, "_projection", _descriptor, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_priority", _descriptor2, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_fov", _descriptor3, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_fovAxis", _descriptor4, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_orthoHeight", _descriptor5, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_near", _descriptor6, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_far", _descriptor7, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_color", _descriptor8, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_depth", _descriptor9, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_stencil", _descriptor10, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_clearFlags", _descriptor11, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_rect", _descriptor12, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_aperture", _descriptor13, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_shutter", _descriptor14, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_iso", _descriptor15, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_screenScale", _descriptor16, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_visibility", _descriptor17, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_targetTexture", _descriptor18, _assertThisInitialized(_this));

      _this._camera = null;
      _this._inEditorMode = false;
      _this._flows = undefined;
      return _this;
    }

    _createClass(CameraComponent, [{
      key: "onLoad",
      value: function onLoad() {
        cc.director.on(cc.Director.EVENT_AFTER_SCENE_LAUNCH, this.onSceneChanged, this);

        this._createCamera();
      }
    }, {
      key: "onEnable",
      value: function onEnable() {
        this.node.hasChangedFlags |= _nodeEnum.TransformBit.POSITION; // trigger camera matrix update

        if (this._camera) {
          this._attachToScene();

          return;
        }
      }
    }, {
      key: "onDisable",
      value: function onDisable() {
        if (this._camera) {
          this._detachFromScene();
        }
      }
    }, {
      key: "onDestroy",
      value: function onDestroy() {
        if (this._camera) {
          cc.director.root.destroyCamera(this._camera);
          this._camera = null;
        }

        if (this._targetTexture) {
          this._targetTexture.off('resize');
        }
      }
    }, {
      key: "screenPointToRay",
      value: function screenPointToRay(x, y, out) {
        if (!out) {
          out = _index.ray.create();
        }

        if (this._camera) {
          this._camera.screenPointToRay(out, x, y);
        }

        return out;
      }
    }, {
      key: "worldToScreen",
      value: function worldToScreen(worldPos, out) {
        if (!out) {
          out = new _index2.Vec3();
        }

        if (this._camera) {
          this._camera.worldToScreen(out, worldPos);
        }

        return out;
      }
    }, {
      key: "screenToWorld",
      value: function screenToWorld(screenPos, out) {
        if (!out) {
          out = this.node.getWorldPosition();
        }

        if (this._camera) {
          this._camera.screenToWorld(out, screenPos);
        }

        return out;
      }
      /**
       * @zh 3D 节点转 UI 本地节点坐标。
       * 注意：千万不要设置负责做转换的 uiNode 和最终设置位置的 uiNode 是同一个 node，否则可能出现跳动现象。
       * @param wpos 3D 节点事件坐标
       * @param uiNode UI 节点
       * @param out 返回在当前传入的 UI 节点下的偏移量
       *
       * @example
       * ```typescript
       * this.convertToUINode(target.worldPosition, uiNode.parent, out);
       * uiNode.position = out;
       * ```
       */

    }, {
      key: "convertToUINode",
      value: function convertToUINode(wpos, uiNode, out) {
        if (!out) {
          out = new _index2.Vec3();
        }

        if (!this._camera) {
          return out;
        }

        this.worldToScreen(wpos, _temp_vec3_1);
        var cmp = uiNode.getComponent('cc.UITransformComponent');

        var designSize = _view.view.getVisibleSize();

        var xoffset = _temp_vec3_1.x - this._camera.width * 0.5;
        var yoffset = _temp_vec3_1.y - this._camera.height * 0.5;
        _temp_vec3_1.x = xoffset / cc.view.getScaleX() + designSize.width * 0.5;
        _temp_vec3_1.y = yoffset / cc.view.getScaleY() + designSize.height * 0.5;

        if (cmp) {
          cmp.convertToNodeSpaceAR(_temp_vec3_1, out);
        }

        return out;
      }
    }, {
      key: "_createCamera",
      value: function _createCamera() {
        this._camera = cc.director.root.createCamera();

        this._camera.initialize({
          name: this.node.name,
          node: this.node,
          projection: this._projection,
          window: this._inEditorMode ? cc.director.root && cc.director.root.mainWindow : cc.director.root && cc.director.root.tempWindow,
          priority: this._priority,
          flows: this._flows
        });

        if (this._camera) {
          this._camera.viewport = this._rect;
          this._camera.fovAxis = this._fovAxis;
          this._camera.fov = (0, _index2.toRadian)(this._fov);
          this._camera.orthoHeight = this._orthoHeight;
          this._camera.nearClip = this._near;
          this._camera.farClip = this._far;
          var r = this._color.x;
          var g = this._color.y;
          var b = this._color.z;
          var a = this._color.w;
          this._camera.clearColor = {
            r: r,
            g: g,
            b: b,
            a: a
          };
          this._camera.clearDepth = this._depth;
          this._camera.clearStencil = this._stencil;
          this._camera.clearFlag = this._clearFlags;
          this._camera.visibility = this._visibility;
          this._camera.aperture = this._aperture;
          this._camera.shutter = this._shutter;
          this._camera.iso = this._iso;
        }

        this._updateTargetTexture();
      }
    }, {
      key: "_attachToScene",
      value: function _attachToScene() {
        if (!this.node.scene || !this._camera) {
          return;
        }

        if (this._camera && this._camera.scene) {
          this._camera.scene.removeCamera(this._camera);
        }

        var scene = this._getRenderScene();

        scene.addCamera(this._camera);
      }
    }, {
      key: "_detachFromScene",
      value: function _detachFromScene() {
        if (this._camera && this._camera.scene) {
          this._camera.scene.removeCamera(this._camera);
        }
      }
    }, {
      key: "onSceneChanged",
      value: function onSceneChanged(scene) {
        // to handle scene switch of editor camera
        if (this._camera && this._camera.scene == null) {
          this._attachToScene();
        }
      }
    }, {
      key: "_chechTargetTextureEvent",
      value: function _chechTargetTextureEvent(old) {
        var _this2 = this;

        var resizeFunc = function resizeFunc(window) {
          if (_this2._camera) {
            _this2._camera.setFixedSize(window.width, window.height);
          }
        };

        if (old) {
          old.off('resize');
        }

        if (this._targetTexture) {
          this._targetTexture.on('resize', resizeFunc, this);
        }
      }
    }, {
      key: "_updateTargetTexture",
      value: function _updateTargetTexture() {
        if (!this._camera) {
          return;
        }

        if (this._targetTexture) {
          var window = this._targetTexture.getGFXWindow();

          this._camera.changeTargetWindow(window);

          this._camera.setFixedSize(window.width, window.height);
        }
      }
    }, {
      key: "camera",
      get: function get() {
        return this._camera;
      }
      /**
       * @en Render priority of the camera, in ascending-order.
       * @zh 相机的渲染优先级，值越小越优先渲染。
       */

    }, {
      key: "priority",
      get: function get() {
        return this._priority;
      },
      set: function set(val) {
        this._priority = val;

        if (this._camera) {
          this._camera.priority = val;
        }
      }
      /**
       * @en Visibility mask, declaring a set of node layers that will be visible to this camera.
       * @zh 可见性掩码，声明在当前相机中可见的节点层级集合。
       */

    }, {
      key: "visibility",
      get: function get() {
        return this._visibility;
      },
      set: function set(val) {
        this._visibility = val;

        if (this._camera) {
          this._camera.visibility = val;
        }
      }
      /**
       * @en Clearing flags of the camera, specifies which part of the framebuffer will be actually cleared every frame.
       * @zh 相机的缓冲清除标志位，指定帧缓冲的哪部分要每帧清除。
       */

    }, {
      key: "clearFlags",
      get: function get() {
        return this._clearFlags;
      },
      set: function set(val) {
        this._clearFlags = val;

        if (this._camera) {
          this._camera.clearFlag = val;
        }
      }
      /**
       * @en Clearing color of the camera.
       * @zh 相机的颜色缓冲默认值。
       */

    }, {
      key: "clearColor",
      get: function get() {
        return this._color;
      },
      set: function set(val) {
        this._color.set(val);

        if (this._camera) {
          this._camera.clearColor.r = this._color.x;
          this._camera.clearColor.g = this._color.y;
          this._camera.clearColor.b = this._color.z;
          this._camera.clearColor.a = this._color.w;
        }
      }
      /**
       * @en Clearing depth of the camera.
       * @zh 相机的深度缓冲默认值。
       */

    }, {
      key: "clearDepth",
      get: function get() {
        return this._depth;
      },
      set: function set(val) {
        this._depth = val;

        if (this._camera) {
          this._camera.clearDepth = val;
        }
      }
      /**
       * @en Clearing stencil of the camera.
       * @zh 相机的模板缓冲默认值。
       */

    }, {
      key: "clearStencil",
      get: function get() {
        return this._stencil;
      },
      set: function set(val) {
        this._stencil = val;

        if (this._camera) {
          this._camera.clearStencil = val;
        }
      }
      /**
       * @en Projection type of the camera.
       * @zh 相机的投影类型。
       */

    }, {
      key: "projection",
      get: function get() {
        return this._projection;
      },
      set: function set(val) {
        this._projection = val;

        if (this._camera) {
          this._camera.projectionType = val;
        }
      }
      /**
       * @en The axis on which the FOV would be fixed regardless of screen aspect changes.
       * @zh 指定视角的固定轴向，在此轴上不会跟随屏幕长宽比例变化。
       */

    }, {
      key: "fovAxis",
      get: function get() {
        return this._fovAxis;
      },
      set: function set(val) {
        if (val === this._fovAxis) {
          return;
        }

        this._fovAxis = val;

        if (this._camera) {
          this._camera.fovAxis = val;

          if (val === _camera.CameraFOVAxis.VERTICAL) {
            this.fov = this._fov * this._camera.aspect;
          } else {
            this.fov = this._fov / this._camera.aspect;
          }
        }
      }
      /**
       * @en Field of view of the camera.
       * @zh 相机的视角大小。
       */

    }, {
      key: "fov",
      get: function get() {
        return this._fov;
      },
      set: function set(val) {
        this._fov = val;

        if (this._camera) {
          this._camera.fov = (0, _index2.toRadian)(val);
        }
      }
      /**
       * @en Viewport height in orthographic mode.
       * @zh 正交模式下的相机视角高度。
       */

    }, {
      key: "orthoHeight",
      get: function get() {
        return this._orthoHeight;
      },
      set: function set(val) {
        this._orthoHeight = val;

        if (this._camera) {
          this._camera.orthoHeight = val;
        }
      }
      /**
       * @en Near clipping distance of the camera, should be as large as possible within acceptable range.
       * @zh 相机的近裁剪距离，应在可接受范围内尽量取最大。
       */

    }, {
      key: "near",
      get: function get() {
        return this._near;
      },
      set: function set(val) {
        this._near = val;

        if (this._camera) {
          this._camera.nearClip = val;
        }
      }
      /**
       * @en Far clipping distance of the camera, should be as small as possible within acceptable range.
       * @zh 相机的远裁剪距离，应在可接受范围内尽量取最小。
       */

    }, {
      key: "far",
      get: function get() {
        return this._far;
      },
      set: function set(val) {
        this._far = val;

        if (this._camera) {
          this._camera.farClip = val;
        }
      }
      /**
       * @en Camera aperture, controls the exposure parameter.
       * @zh 相机光圈，影响相机的曝光参数。
       */

    }, {
      key: "aperture",
      get: function get() {
        return this._aperture;
      },
      set: function set(val) {
        this._aperture = val;

        if (this._camera) {
          this._camera.aperture = val;
        }
      }
      /**
       * @en Camera shutter, controls the exposure parameter.
       * @zh 相机快门，影响相机的曝光参数。
       */

    }, {
      key: "shutter",
      get: function get() {
        return this._shutter;
      },
      set: function set(val) {
        this._shutter = val;

        if (this._camera) {
          this._camera.shutter = val;
        }
      }
      /**
       * @en Camera ISO, controls the exposure parameter.
       * @zh 相机感光度，影响相机的曝光参数。
       */

    }, {
      key: "iso",
      get: function get() {
        return this._iso;
      },
      set: function set(val) {
        this._iso = val;

        if (this._camera) {
          this._camera.iso = val;
        }
      }
      /**
       * @en Screen viewport of the camera wrt. the sceen size.
       * @zh 此相机最终渲染到屏幕上的视口位置和大小。
       */

    }, {
      key: "rect",
      get: function get() {
        return this._rect;
      },
      set: function set(val) {
        this._rect = val;

        if (this._camera) {
          this._camera.viewport = val;
        }
      }
      /**
       * @en Output render texture of the camera. Default to null, which outputs directly to screen.
       * @zh 指定此相机的渲染输出目标贴图，默认为空，直接渲染到屏幕。
       */

    }, {
      key: "targetTexture",
      get: function get() {
        return this._targetTexture;
      },
      set: function set(value) {
        if (this._targetTexture === value) {
          return;
        }

        var old = this._targetTexture;
        this._targetTexture = value;

        this._chechTargetTextureEvent(old);

        this._updateTargetTexture();

        if (!value && this._camera) {
          this._camera.changeTargetWindow(_defaultConstants.EDITOR ? cc.director.root.tempWindow : null);

          this._camera.isWindowSize = true;
        }
      }
      /**
       * @en Scale of the internal buffer size,
       * set to 1 to keep the same with the canvas size.
       * @zh 相机内部缓冲尺寸的缩放值, 1 为与 canvas 尺寸相同。
       */

    }, {
      key: "screenScale",
      get: function get() {
        return this._screenScale;
      },
      set: function set(val) {
        this._screenScale = val;

        if (this._camera) {
          this._camera.screenScale = val;
        }
      }
    }, {
      key: "inEditorMode",
      get: function get() {
        return this._inEditorMode;
      },
      set: function set(value) {
        this._inEditorMode = value;

        if (this._camera) {
          this._camera.changeTargetWindow(value ? cc.director.root && cc.director.root.mainWindow : cc.director.root && cc.director.root.tempWindow);
        }
      }
    }, {
      key: "flows",
      set: function set(val) {
        if (this._camera) {
          this._camera.flows = val;
        }

        this._flows = val;
      }
    }]);

    return CameraComponent;
  }(_component.Component), _class3.ProjectionType = ProjectionType, _class3.FOVAxis = FOVAxis, _class3.ClearFlag = ClearFlag, _class3.Aperture = Aperture, _class3.Shutter = Shutter, _class3.ISO = ISO, _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "_projection", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return ProjectionType.PERSPECTIVE;
    }
  }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "_priority", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "_fov", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 45;
    }
  }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "_fovAxis", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return FOVAxis.VERTICAL;
    }
  }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "_orthoHeight", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 10;
    }
  }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "_near", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 1;
    }
  }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "_far", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 1000;
    }
  }), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, "_color", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return new _index2.Color('#333333');
    }
  }), _descriptor9 = _applyDecoratedDescriptor(_class2.prototype, "_depth", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 1;
    }
  }), _descriptor10 = _applyDecoratedDescriptor(_class2.prototype, "_stencil", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor11 = _applyDecoratedDescriptor(_class2.prototype, "_clearFlags", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return ClearFlag.SOLID_COLOR;
    }
  }), _descriptor12 = _applyDecoratedDescriptor(_class2.prototype, "_rect", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return new _index2.Rect(0, 0, 1, 1);
    }
  }), _descriptor13 = _applyDecoratedDescriptor(_class2.prototype, "_aperture", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return Aperture.F16_0;
    }
  }), _descriptor14 = _applyDecoratedDescriptor(_class2.prototype, "_shutter", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return Shutter.D125;
    }
  }), _descriptor15 = _applyDecoratedDescriptor(_class2.prototype, "_iso", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return ISO.ISO100;
    }
  }), _descriptor16 = _applyDecoratedDescriptor(_class2.prototype, "_screenScale", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 1;
    }
  }), _descriptor17 = _applyDecoratedDescriptor(_class2.prototype, "_visibility", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return _define2.CAMERA_DEFAULT_MASK;
    }
  }), _descriptor18 = _applyDecoratedDescriptor(_class2.prototype, "_targetTexture", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return null;
    }
  }), _applyDecoratedDescriptor(_class2.prototype, "priority", [_dec4], Object.getOwnPropertyDescriptor(_class2.prototype, "priority"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "visibility", [_dec5], Object.getOwnPropertyDescriptor(_class2.prototype, "visibility"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "clearFlags", [_dec6], Object.getOwnPropertyDescriptor(_class2.prototype, "clearFlags"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "clearColor", [_dec7], Object.getOwnPropertyDescriptor(_class2.prototype, "clearColor"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "clearDepth", [_dec8], Object.getOwnPropertyDescriptor(_class2.prototype, "clearDepth"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "clearStencil", [_dec9], Object.getOwnPropertyDescriptor(_class2.prototype, "clearStencil"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "projection", [_dec10], Object.getOwnPropertyDescriptor(_class2.prototype, "projection"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "fovAxis", [_dec11], Object.getOwnPropertyDescriptor(_class2.prototype, "fovAxis"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "fov", [_dec12], Object.getOwnPropertyDescriptor(_class2.prototype, "fov"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "orthoHeight", [_dec13], Object.getOwnPropertyDescriptor(_class2.prototype, "orthoHeight"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "near", [_dec14], Object.getOwnPropertyDescriptor(_class2.prototype, "near"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "far", [_dec15], Object.getOwnPropertyDescriptor(_class2.prototype, "far"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "aperture", [_dec16], Object.getOwnPropertyDescriptor(_class2.prototype, "aperture"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "shutter", [_dec17], Object.getOwnPropertyDescriptor(_class2.prototype, "shutter"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "iso", [_dec18], Object.getOwnPropertyDescriptor(_class2.prototype, "iso"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "rect", [_dec19], Object.getOwnPropertyDescriptor(_class2.prototype, "rect"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "targetTexture", [_dec20], Object.getOwnPropertyDescriptor(_class2.prototype, "targetTexture"), _class2.prototype)), _class2)) || _class) || _class) || _class) || _class);
  _exports.CameraComponent = CameraComponent;

  (function (_CameraComponent) {})(CameraComponent || (_exports.CameraComponent = CameraComponent = {}));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkY6L2plbmtpbnMvd29ya3NwYWNlL0NyZWF0b3JfM0QvZWRpdG9yLTNkL3Jlc291cmNlcy8zZC9lbmdpbmUvY29jb3MvY29yZS8zZC9mcmFtZXdvcmsvY2FtZXJhLWNvbXBvbmVudC50cyJdLCJuYW1lcyI6WyJfdGVtcF92ZWMzXzEiLCJWZWMzIiwiUHJvamVjdGlvblR5cGUiLCJDYW1lcmFQcm9qZWN0aW9uIiwiRk9WQXhpcyIsIkNhbWVyYUZPVkF4aXMiLCJBcGVydHVyZSIsIkNhbWVyYUFwZXJ0dXJlIiwiU2h1dHRlciIsIkNhbWVyYVNodXR0ZXIiLCJJU08iLCJDYW1lcmFJU08iLCJDbGVhckZsYWciLCJTS1lCT1giLCJTS1lCT1hfRkxBRyIsIkdGWENsZWFyRmxhZyIsIkRFUFRIX1NURU5DSUwiLCJTT0xJRF9DT0xPUiIsIkFMTCIsIkRFUFRIX09OTFkiLCJET05UX0NMRUFSIiwiTk9ORSIsIkNhbWVyYUNvbXBvbmVudCIsInRvb2x0aXAiLCJkaXNwbGF5T3JkZXIiLCJ0eXBlIiwiTGF5ZXJzIiwiQml0TWFzayIsIlJlbmRlclRleHR1cmUiLCJleGVjdXRlSW5FZGl0TW9kZSIsIl9jYW1lcmEiLCJfaW5FZGl0b3JNb2RlIiwiX2Zsb3dzIiwidW5kZWZpbmVkIiwiY2MiLCJkaXJlY3RvciIsIm9uIiwiRGlyZWN0b3IiLCJFVkVOVF9BRlRFUl9TQ0VORV9MQVVOQ0giLCJvblNjZW5lQ2hhbmdlZCIsIl9jcmVhdGVDYW1lcmEiLCJub2RlIiwiaGFzQ2hhbmdlZEZsYWdzIiwiVHJhbnNmb3JtQml0IiwiUE9TSVRJT04iLCJfYXR0YWNoVG9TY2VuZSIsIl9kZXRhY2hGcm9tU2NlbmUiLCJyb290IiwiZGVzdHJveUNhbWVyYSIsIl90YXJnZXRUZXh0dXJlIiwib2ZmIiwieCIsInkiLCJvdXQiLCJyYXkiLCJjcmVhdGUiLCJzY3JlZW5Qb2ludFRvUmF5Iiwid29ybGRQb3MiLCJ3b3JsZFRvU2NyZWVuIiwic2NyZWVuUG9zIiwiZ2V0V29ybGRQb3NpdGlvbiIsInNjcmVlblRvV29ybGQiLCJ3cG9zIiwidWlOb2RlIiwiY21wIiwiZ2V0Q29tcG9uZW50IiwiZGVzaWduU2l6ZSIsInZpZXciLCJnZXRWaXNpYmxlU2l6ZSIsInhvZmZzZXQiLCJ3aWR0aCIsInlvZmZzZXQiLCJoZWlnaHQiLCJnZXRTY2FsZVgiLCJnZXRTY2FsZVkiLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsImNyZWF0ZUNhbWVyYSIsImluaXRpYWxpemUiLCJuYW1lIiwicHJvamVjdGlvbiIsIl9wcm9qZWN0aW9uIiwid2luZG93IiwibWFpbldpbmRvdyIsInRlbXBXaW5kb3ciLCJwcmlvcml0eSIsIl9wcmlvcml0eSIsImZsb3dzIiwidmlld3BvcnQiLCJfcmVjdCIsImZvdkF4aXMiLCJfZm92QXhpcyIsImZvdiIsIl9mb3YiLCJvcnRob0hlaWdodCIsIl9vcnRob0hlaWdodCIsIm5lYXJDbGlwIiwiX25lYXIiLCJmYXJDbGlwIiwiX2ZhciIsInIiLCJfY29sb3IiLCJnIiwiYiIsInoiLCJhIiwidyIsImNsZWFyQ29sb3IiLCJjbGVhckRlcHRoIiwiX2RlcHRoIiwiY2xlYXJTdGVuY2lsIiwiX3N0ZW5jaWwiLCJjbGVhckZsYWciLCJfY2xlYXJGbGFncyIsInZpc2liaWxpdHkiLCJfdmlzaWJpbGl0eSIsImFwZXJ0dXJlIiwiX2FwZXJ0dXJlIiwic2h1dHRlciIsIl9zaHV0dGVyIiwiaXNvIiwiX2lzbyIsIl91cGRhdGVUYXJnZXRUZXh0dXJlIiwic2NlbmUiLCJyZW1vdmVDYW1lcmEiLCJfZ2V0UmVuZGVyU2NlbmUiLCJhZGRDYW1lcmEiLCJvbGQiLCJyZXNpemVGdW5jIiwic2V0Rml4ZWRTaXplIiwiZ2V0R0ZYV2luZG93IiwiY2hhbmdlVGFyZ2V0V2luZG93IiwidmFsIiwic2V0IiwicHJvamVjdGlvblR5cGUiLCJWRVJUSUNBTCIsImFzcGVjdCIsInZhbHVlIiwiX2NoZWNoVGFyZ2V0VGV4dHVyZUV2ZW50IiwiRURJVE9SIiwiaXNXaW5kb3dTaXplIiwiX3NjcmVlblNjYWxlIiwic2NyZWVuU2NhbGUiLCJDb21wb25lbnQiLCJwcm9wZXJ0eSIsIlBFUlNQRUNUSVZFIiwiQ29sb3IiLCJSZWN0IiwiRjE2XzAiLCJEMTI1IiwiSVNPMTAwIiwiQ0FNRVJBX0RFRkFVTFRfTUFTSyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQStDQSxNQUFNQSxZQUFZLEdBQUcsSUFBSUMsWUFBSixFQUFyQjtBQUVBOzs7Ozs7QUFJQSxNQUFNQyxjQUFjLEdBQUcsa0JBQUtDLHdCQUFMLENBQXZCO0FBQ0EsTUFBTUMsT0FBTyxHQUFHLGtCQUFLQyxxQkFBTCxDQUFoQjtBQUNBLE1BQU1DLFFBQVEsR0FBRyxrQkFBS0Msc0JBQUwsQ0FBakI7QUFDQSxNQUFNQyxPQUFPLEdBQUcsa0JBQUtDLHFCQUFMLENBQWhCO0FBQ0EsTUFBTUMsR0FBRyxHQUFHLGtCQUFLQyxpQkFBTCxDQUFaO0FBRUEsTUFBTUMsU0FBUyxHQUFHLGtCQUFLO0FBQ25CQyxJQUFBQSxNQUFNLEVBQUVDLHNCQUFjQyxxQkFBYUMsYUFEaEI7QUFFbkJDLElBQUFBLFdBQVcsRUFBRUYscUJBQWFHLEdBRlA7QUFHbkJDLElBQUFBLFVBQVUsRUFBRUoscUJBQWFDLGFBSE47QUFJbkJJLElBQUFBLFVBQVUsRUFBRUwscUJBQWFNO0FBSk4sR0FBTCxDQUFsQjtBQU9BOzs7OztNQVFhQyxlLFdBSlosNkJBQVEsb0JBQVIsQyxVQUNBLDBCQUFLLHlCQUFMLEMsVUFDQSwwQkFBSyxtQkFBTCxDLFVBMkRJLDhCQUFTO0FBQ05DLElBQUFBLE9BQU8sRUFBRSxzQkFESDtBQUVOQyxJQUFBQSxZQUFZLEVBQUU7QUFGUixHQUFULEMsVUFtQkEsOEJBQVM7QUFDTkMsSUFBQUEsSUFBSSxFQUFFQyxlQUFPQyxPQURQO0FBRU5KLElBQUFBLE9BQU8sRUFBRSx3QkFGSDtBQUdOQyxJQUFBQSxZQUFZLEVBQUU7QUFIUixHQUFULEMsVUFvQkEsOEJBQVM7QUFDTkMsSUFBQUEsSUFBSSxFQUFFYixTQURBO0FB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a0ksUTs7bUZBQzVCUyx3Qjs7Ozs7YUFDd0IsRTs7NEVBQ3hCQSx3Qjs7Ozs7YUFDaUIsQzs7MkVBQ2pCQSx3Qjs7Ozs7YUFDZ0IsSTs7NkVBQ2hCQSx3Qjs7Ozs7YUFDa0IsSUFBSUUsYUFBSixDQUFVLFNBQVYsQzs7NkVBQ2xCRix3Qjs7Ozs7YUFDa0IsQzs7Z0ZBQ2xCQSx3Qjs7Ozs7YUFDb0IsQzs7bUZBQ3BCQSx3Qjs7Ozs7YUFDdUJuSSxTQUFTLENBQUNLLFc7OzZFQUNqQzhILHdCOzs7OzthQUNpQixJQUFJRyxZQUFKLENBQVMsQ0FBVCxFQUFZLENBQVosRUFBZSxDQUFmLEVBQWtCLENBQWxCLEM7O2lGQUNqQkgsd0I7Ozs7O2FBQ3FCekksUUFBUSxDQUFDNkksSzs7Z0ZBQzlCSix3Qjs7Ozs7YUFDb0J2SSxPQUFPLENBQUM0SSxJOzs0RUFDNUJMLHdCOzs7OzthQUNnQnJJLEdBQUcsQ0FBQzJJLE07O29GQUNwQk4sd0I7Ozs7O2FBQ3dCLEM7O21GQUN4QkEsd0I7Ozs7O2FBQ3VCTyw0Qjs7c0ZBQ3ZCUCx3Qjs7Ozs7YUFDZ0QsSTs7Ozs7bUNBdWhCcEN6SCxlLGdDQUFBQSxlIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuIENvcHlyaWdodCAoYykgMjAxMy0yMDE2IENodWtvbmcgVGVjaG5vbG9naWVzIEluYy5cclxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHA6Ly93d3cuY29jb3MyZC14Lm9yZ1xyXG5cclxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxuIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG4gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcbiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXHJcbiBUSEUgU09GVFdBUkUuXHJcbiovXHJcblxyXG4vKipcclxuICogQGNhdGVnb3J5IGNvbXBvbmVudC9jYW1lcmFcclxuICovXHJcblxyXG5pbXBvcnQgeyBFRElUT1IgfSBmcm9tICdpbnRlcm5hbDpjb25zdGFudHMnO1xyXG5pbXBvcnQgeyBSZW5kZXJUZXh0dXJlIH0gZnJvbSAnLi4vLi4vYXNzZXRzL3JlbmRlci10ZXh0dXJlJztcclxuaW1wb3J0IHsgVUlUcmFuc2Zvcm1Db21wb25lbnQgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzJztcclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBjY2NsYXNzLCBoZWxwLCBleGVjdXRlSW5FZGl0TW9kZSwgbWVudSwgcHJvcGVydHkgfSBmcm9tICcuLi8uLi9kYXRhL2NsYXNzLWRlY29yYXRvcic7XHJcbmltcG9ydCB7IHJheSB9IGZyb20gJy4uLy4uL2dlb21ldHJ5JztcclxuaW1wb3J0IHsgR0ZYQ2xlYXJGbGFnIH0gZnJvbSAnLi4vLi4vZ2Z4L2RlZmluZSc7XHJcbmltcG9ydCB7IEdGWFdpbmRvdyB9IGZyb20gJy4uLy4uL2dmeC93aW5kb3cnO1xyXG5pbXBvcnQgeyBDb2xvciwgUmVjdCwgdG9SYWRpYW4sIFZlYzMgfSBmcm9tICcuLi8uLi9tYXRoJztcclxuaW1wb3J0IHsgQ0FNRVJBX0RFRkFVTFRfTUFTSyB9IGZyb20gJy4uLy4uL3BpcGVsaW5lL2RlZmluZSc7XHJcbmltcG9ydCB7IHZpZXcgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS92aWV3JztcclxuaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSAnLi4vLi4vcmVuZGVyZXInO1xyXG5pbXBvcnQgeyBTS1lCT1hfRkxBRywgQ2FtZXJhUHJvamVjdGlvbiwgQ2FtZXJhRk9WQXhpcywgQ2FtZXJhQXBlcnR1cmUsIENhbWVyYUlTTywgQ2FtZXJhU2h1dHRlciB9IGZyb20gJy4uLy4uL3JlbmRlcmVyL3NjZW5lL2NhbWVyYSc7XHJcbmltcG9ydCB7IFJvb3QgfSBmcm9tICcuLi8uLi9yb290JztcclxuaW1wb3J0IHsgTGF5ZXJzLCBOb2RlLCBTY2VuZSB9IGZyb20gJy4uLy4uL3NjZW5lLWdyYXBoJztcclxuaW1wb3J0IHsgRW51bSB9IGZyb20gJy4uLy4uL3ZhbHVlLXR5cGVzJztcclxuaW1wb3J0IHsgVHJhbnNmb3JtQml0IH0gZnJvbSAnLi4vLi4vc2NlbmUtZ3JhcGgvbm9kZS1lbnVtJztcclxuXHJcbmNvbnN0IF90ZW1wX3ZlYzNfMSA9IG5ldyBWZWMzKCk7XHJcblxyXG4vKipcclxuICogQGVuIFRoZSBwcm9qZWN0aW9uIHR5cGUuXHJcbiAqIEB6aCDmipXlvbHnsbvlnovjgIJcclxuICovXHJcbmNvbnN0IFByb2plY3Rpb25UeXBlID0gRW51bShDYW1lcmFQcm9qZWN0aW9uKTtcclxuY29uc3QgRk9WQXhpcyA9IEVudW0oQ2FtZXJhRk9WQXhpcyk7XHJcbmNvbnN0IEFwZXJ0dXJlID0gRW51bShDYW1lcmFBcGVydHVyZSk7XHJcbmNvbnN0IFNodXR0ZXIgPSBFbnVtKENhbWVyYVNodXR0ZXIpO1xyXG5jb25zdCBJU08gPSBFbnVtKENhbWVyYUlTTyk7XHJcblxyXG5jb25zdCBDbGVhckZsYWcgPSBFbnVtKHtcclxuICAgIFNLWUJPWDogU0tZQk9YX0ZMQUcgfCBHRlhDbGVhckZsYWcuREVQVEhfU1RFTkNJTCxcclxuICAgIFNPTElEX0NPTE9SOiBHRlhDbGVhckZsYWcuQUxMLFxyXG4gICAgREVQVEhfT05MWTogR0ZYQ2xlYXJGbGFnLkRFUFRIX1NURU5DSUwsXHJcbiAgICBET05UX0NMRUFSOiBHRlhDbGVhckZsYWcuTk9ORSxcclxufSk7XHJcblxyXG4vKipcclxuICogQGVuIFRoZSBDYW1lcmEgQ29tcG9uZW50LlxyXG4gKiBAemgg55u45py657uE5Lu244CCXHJcbiAqL1xyXG5AY2NjbGFzcygnY2MuQ2FtZXJhQ29tcG9uZW50JylcclxuQGhlbHAoJ2kxOG46Y2MuQ2FtZXJhQ29tcG9uZW50JylcclxuQG1lbnUoJ0NvbXBvbmVudHMvQ2FtZXJhJylcclxuQGV4ZWN1dGVJbkVkaXRNb2RlXHJcbmV4cG9ydCBjbGFzcyBDYW1lcmFDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyBQcm9qZWN0aW9uVHlwZSA9IFByb2plY3Rpb25UeXBlO1xyXG4gICAgcHVibGljIHN0YXRpYyBGT1ZBeGlzID0gRk9WQXhpcztcclxuICAgIHB1YmxpYyBzdGF0aWMgQ2xlYXJGbGFnID0gQ2xlYXJGbGFnO1xyXG4gICAgcHVibGljIHN0YXRpYyBBcGVydHVyZSA9IEFwZXJ0dXJlO1xyXG4gICAgcHVibGljIHN0YXRpYyBTaHV0dGVyID0gU2h1dHRlcjtcclxuICAgIHB1YmxpYyBzdGF0aWMgSVNPID0gSVNPO1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9wcm9qZWN0aW9uID0gUHJvamVjdGlvblR5cGUuUEVSU1BFQ1RJVkU7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfcHJpb3JpdHkgPSAwO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX2ZvdiA9IDQ1O1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX2ZvdkF4aXMgPSBGT1ZBeGlzLlZFUlRJQ0FMO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX29ydGhvSGVpZ2h0ID0gMTA7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfbmVhciA9IDE7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfZmFyID0gMTAwMDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9jb2xvciA9IG5ldyBDb2xvcignIzMzMzMzMycpO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX2RlcHRoID0gMTtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9zdGVuY2lsID0gMDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9jbGVhckZsYWdzID0gQ2xlYXJGbGFnLlNPTElEX0NPTE9SO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX3JlY3QgPSBuZXcgUmVjdCgwLCAwLCAxLCAxKTtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9hcGVydHVyZSA9IEFwZXJ0dXJlLkYxNl8wO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX3NodXR0ZXIgPSBTaHV0dGVyLkQxMjU7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfaXNvID0gSVNPLklTTzEwMDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9zY3JlZW5TY2FsZSA9IDE7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfdmlzaWJpbGl0eSA9IENBTUVSQV9ERUZBVUxUX01BU0s7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfdGFyZ2V0VGV4dHVyZTogUmVuZGVyVGV4dHVyZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHByb3RlY3RlZCBfY2FtZXJhOiBDYW1lcmEgfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBfaW5FZGl0b3JNb2RlID0gZmFsc2U7XHJcbiAgICBwcm90ZWN0ZWQgX2Zsb3dzOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBnZXQgY2FtZXJhICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhITtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBSZW5kZXIgcHJpb3JpdHkgb2YgdGhlIGNhbWVyYSwgaW4gYXNjZW5kaW5nLW9yZGVyLlxyXG4gICAgICogQHpoIOebuOacuueahOa4suafk+S8mOWFiOe6p++8jOWAvOi2iuWwj+i2iuS8mOWFiOa4suafk+OAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5wcmlvcml0eScsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAwLFxyXG4gICAgfSlcclxuICAgIGdldCBwcmlvcml0eSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW9yaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwcmlvcml0eSAodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fcHJpb3JpdHkgPSB2YWw7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NhbWVyYSkge1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEucHJpb3JpdHkgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFZpc2liaWxpdHkgbWFzaywgZGVjbGFyaW5nIGEgc2V0IG9mIG5vZGUgbGF5ZXJzIHRoYXQgd2lsbCBiZSB2aXNpYmxlIHRvIHRoaXMgY2FtZXJhLlxyXG4gICAgICogQHpoIOWPr+ingeaAp+aOqeegge+8jOWjsOaYjuWcqOW9k+WJjeebuOacuuS4reWPr+ingeeahOiKgueCueWxgue6p+mbhuWQiOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHR5cGU6IExheWVycy5CaXRNYXNrLFxyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS52aXNpYmlsaXR5JyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDEsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHZpc2liaWxpdHkgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92aXNpYmlsaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB2aXNpYmlsaXR5ICh2YWwpIHtcclxuICAgICAgICB0aGlzLl92aXNpYmlsaXR5ID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLnZpc2liaWxpdHkgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIENsZWFyaW5nIGZsYWdzIG9mIHRoZSBjYW1lcmEsIHNwZWNpZmllcyB3aGljaCBwYXJ0IG9mIHRoZSBmcmFtZWJ1ZmZlciB3aWxsIGJlIGFjdHVhbGx5IGNsZWFyZWQgZXZlcnkgZnJhbWUuXHJcbiAgICAgKiBAemgg55u45py655qE57yT5Yay5riF6Zmk5qCH5b+X5L2N77yM5oyH5a6a5bin57yT5Yay55qE5ZOq6YOo5YiG6KaB5q+P5bin5riF6Zmk44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogQ2xlYXJGbGFnLFxyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5jbGVhcl9mbGFncycsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAyLFxyXG4gICAgfSlcclxuICAgIGdldCBjbGVhckZsYWdzICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2xlYXJGbGFncztcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY2xlYXJGbGFncyAodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJGbGFncyA9IHZhbDtcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7IHRoaXMuX2NhbWVyYS5jbGVhckZsYWcgPSB2YWw7IH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBDbGVhcmluZyBjb2xvciBvZiB0aGUgY2FtZXJhLlxyXG4gICAgICogQHpoIOebuOacuueahOminOiJsue8k+WGsum7mOiupOWAvOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5jb2xvcicsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAzLFxyXG4gICAgfSlcclxuICAgIC8vIEBjb25zdGdldFxyXG4gICAgZ2V0IGNsZWFyQ29sb3IgKCk6IFJlYWRvbmx5PENvbG9yPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjbGVhckNvbG9yICh2YWwpIHtcclxuICAgICAgICB0aGlzLl9jb2xvci5zZXQodmFsKTtcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5jbGVhckNvbG9yLnIgPSB0aGlzLl9jb2xvci54O1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEuY2xlYXJDb2xvci5nID0gdGhpcy5fY29sb3IueTtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLmNsZWFyQ29sb3IuYiA9IHRoaXMuX2NvbG9yLno7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5jbGVhckNvbG9yLmEgPSB0aGlzLl9jb2xvci53O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBDbGVhcmluZyBkZXB0aCBvZiB0aGUgY2FtZXJhLlxyXG4gICAgICogQHpoIOebuOacuueahOa3seW6pue8k+WGsum7mOiupOWAvOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5kZXB0aCcsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiA0LFxyXG4gICAgfSlcclxuICAgIGdldCBjbGVhckRlcHRoICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVwdGg7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNsZWFyRGVwdGggKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2RlcHRoID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLmNsZWFyRGVwdGggPSB2YWw7IH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBDbGVhcmluZyBzdGVuY2lsIG9mIHRoZSBjYW1lcmEuXHJcbiAgICAgKiBAemgg55u45py655qE5qih5p2/57yT5Yay6buY6K6k5YC844CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46Y2FtZXJhLnN0ZW5jaWwnLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogNSxcclxuICAgIH0pXHJcbiAgICBnZXQgY2xlYXJTdGVuY2lsICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RlbmNpbDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY2xlYXJTdGVuY2lsICh2YWwpIHtcclxuICAgICAgICB0aGlzLl9zdGVuY2lsID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLmNsZWFyU3RlbmNpbCA9IHZhbDsgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFByb2plY3Rpb24gdHlwZSBvZiB0aGUgY2FtZXJhLlxyXG4gICAgICogQHpoIOebuOacuueahOaKleW9seexu+Wei+OAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHR5cGU6IFByb2plY3Rpb25UeXBlLFxyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5wcm9qZWN0aW9uJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDYsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHByb2plY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9qZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwcm9qZWN0aW9uICh2YWwpIHtcclxuICAgICAgICB0aGlzLl9wcm9qZWN0aW9uID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLnByb2plY3Rpb25UeXBlID0gdmFsOyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gVGhlIGF4aXMgb24gd2hpY2ggdGhlIEZPViB3b3VsZCBiZSBmaXhlZCByZWdhcmRsZXNzIG9mIHNjcmVlbiBhc3BlY3QgY2hhbmdlcy5cclxuICAgICAqIEB6aCDmjIflrprop4bop5LnmoTlm7rlrprovbTlkJHvvIzlnKjmraTovbTkuIrkuI3kvJrot5/pmo/lsY/luZXplb/lrr3mr5Tkvovlj5jljJbjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBGT1ZBeGlzLFxyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5mb3ZfYXhpcycsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiA3LFxyXG4gICAgfSlcclxuICAgIGdldCBmb3ZBeGlzICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm92QXhpcztcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm92QXhpcyAodmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCA9PT0gdGhpcy5fZm92QXhpcykgeyByZXR1cm47IH1cclxuICAgICAgICB0aGlzLl9mb3ZBeGlzID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLmZvdkF4aXMgPSB2YWw7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09IENhbWVyYUZPVkF4aXMuVkVSVElDQUwpIHsgdGhpcy5mb3YgPSB0aGlzLl9mb3YgKiB0aGlzLl9jYW1lcmEuYXNwZWN0OyB9XHJcbiAgICAgICAgICAgIGVsc2UgeyB0aGlzLmZvdiA9IHRoaXMuX2ZvdiAvIHRoaXMuX2NhbWVyYS5hc3BlY3Q7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gRmllbGQgb2YgdmlldyBvZiB0aGUgY2FtZXJhLlxyXG4gICAgICogQHpoIOebuOacuueahOinhuinkuWkp+Wwj+OAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5mb3YnLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogOCxcclxuICAgIH0pXHJcbiAgICBnZXQgZm92ICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm92O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBmb3YgKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2ZvdiA9IHZhbDtcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7IHRoaXMuX2NhbWVyYS5mb3YgPSB0b1JhZGlhbih2YWwpOyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gVmlld3BvcnQgaGVpZ2h0IGluIG9ydGhvZ3JhcGhpYyBtb2RlLlxyXG4gICAgICogQHpoIOato+S6pOaooeW8j+S4i+eahOebuOacuuinhuinkumrmOW6puOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5vcnRob19oZWlnaHQnLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogOSxcclxuICAgIH0pXHJcbiAgICBnZXQgb3J0aG9IZWlnaHQgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcnRob0hlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgb3J0aG9IZWlnaHQgKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX29ydGhvSGVpZ2h0ID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLm9ydGhvSGVpZ2h0ID0gdmFsOyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gTmVhciBjbGlwcGluZyBkaXN0YW5jZSBvZiB0aGUgY2FtZXJhLCBzaG91bGQgYmUgYXMgbGFyZ2UgYXMgcG9zc2libGUgd2l0aGluIGFjY2VwdGFibGUgcmFuZ2UuXHJcbiAgICAgKiBAemgg55u45py655qE6L+R6KOB5Ymq6Led56a777yM5bqU5Zyo5Y+v5o6l5Y+X6IyD5Zu05YaF5bC96YeP5Y+W5pyA5aSn44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46Y2FtZXJhLm5lYXInLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMTAsXHJcbiAgICB9KVxyXG4gICAgZ2V0IG5lYXIgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uZWFyO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBuZWFyICh2YWwpIHtcclxuICAgICAgICB0aGlzLl9uZWFyID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLm5lYXJDbGlwID0gdmFsOyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gRmFyIGNsaXBwaW5nIGRpc3RhbmNlIG9mIHRoZSBjYW1lcmEsIHNob3VsZCBiZSBhcyBzbWFsbCBhcyBwb3NzaWJsZSB3aXRoaW4gYWNjZXB0YWJsZSByYW5nZS5cclxuICAgICAqIEB6aCDnm7jmnLrnmoTov5zoo4Hliarot53nprvvvIzlupTlnKjlj6/mjqXlj5fojIPlm7TlhoXlsL3ph4/lj5bmnIDlsI/jgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0b29sdGlwOiAnaTE4bjpjYW1lcmEuZmFyJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDExLFxyXG4gICAgfSlcclxuICAgIGdldCBmYXIgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mYXI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZhciAodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fZmFyID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLmZhckNsaXAgPSB2YWw7IH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBDYW1lcmEgYXBlcnR1cmUsIGNvbnRyb2xzIHRoZSBleHBvc3VyZSBwYXJhbWV0ZXIuXHJcbiAgICAgKiBAemgg55u45py65YWJ5ZyI77yM5b2x5ZON55u45py655qE5pud5YWJ5Y+C5pWw44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogQXBlcnR1cmUsXHJcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46Y2FtZXJhLmFwZXJ0dXJlJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDEyLFxyXG4gICAgfSlcclxuICAgIGdldCBhcGVydHVyZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwZXJ0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhcGVydHVyZSAodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fYXBlcnR1cmUgPSB2YWw7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NhbWVyYSkgeyB0aGlzLl9jYW1lcmEuYXBlcnR1cmUgPSB2YWw7IH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBDYW1lcmEgc2h1dHRlciwgY29udHJvbHMgdGhlIGV4cG9zdXJlIHBhcmFtZXRlci5cclxuICAgICAqIEB6aCDnm7jmnLrlv6vpl6jvvIzlvbHlk43nm7jmnLrnmoTmm53lhYnlj4LmlbDjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBTaHV0dGVyLFxyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5zaHV0dGVyJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDEzLFxyXG4gICAgfSlcclxuICAgIGdldCBzaHV0dGVyICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2h1dHRlcjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc2h1dHRlciAodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fc2h1dHRlciA9IHZhbDtcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7IHRoaXMuX2NhbWVyYS5zaHV0dGVyID0gdmFsOyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQ2FtZXJhIElTTywgY29udHJvbHMgdGhlIGV4cG9zdXJlIHBhcmFtZXRlci5cclxuICAgICAqIEB6aCDnm7jmnLrmhJ/lhYnluqbvvIzlvbHlk43nm7jmnLrnmoTmm53lhYnlj4LmlbDjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBJU08sXHJcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46Y2FtZXJhLklTTycsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAxNCxcclxuICAgIH0pXHJcbiAgICBnZXQgaXNvICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNvO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpc28gKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2lzbyA9IHZhbDtcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7IHRoaXMuX2NhbWVyYS5pc28gPSB2YWw7IH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBTY3JlZW4gdmlld3BvcnQgb2YgdGhlIGNhbWVyYSB3cnQuIHRoZSBzY2VlbiBzaXplLlxyXG4gICAgICogQHpoIOatpOebuOacuuacgOe7iOa4suafk+WIsOWxj+W5leS4iueahOinhuWPo+S9jee9ruWSjOWkp+Wwj+OAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNhbWVyYS5yZWN0JyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDE1LFxyXG4gICAgfSlcclxuICAgIGdldCByZWN0ICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVjdDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcmVjdCAodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fcmVjdCA9IHZhbDtcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7IHRoaXMuX2NhbWVyYS52aWV3cG9ydCA9IHZhbDsgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIE91dHB1dCByZW5kZXIgdGV4dHVyZSBvZiB0aGUgY2FtZXJhLiBEZWZhdWx0IHRvIG51bGwsIHdoaWNoIG91dHB1dHMgZGlyZWN0bHkgdG8gc2NyZWVuLlxyXG4gICAgICogQHpoIOaMh+WumuatpOebuOacuueahOa4suafk+i+k+WHuuebruagh+i0tOWbvu+8jOm7mOiupOS4uuepuu+8jOebtOaOpea4suafk+WIsOWxj+W5leOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHR5cGU6IFJlbmRlclRleHR1cmUsXHJcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46Y2FtZXJhLnRhcmdldF90ZXh0dXJlJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDE2LFxyXG4gICAgfSlcclxuICAgIGdldCB0YXJnZXRUZXh0dXJlICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VGV4dHVyZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdGFyZ2V0VGV4dHVyZSAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0VGV4dHVyZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgb2xkID0gdGhpcy5fdGFyZ2V0VGV4dHVyZTtcclxuICAgICAgICB0aGlzLl90YXJnZXRUZXh0dXJlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fY2hlY2hUYXJnZXRUZXh0dXJlRXZlbnQob2xkKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVUYXJnZXRUZXh0dXJlKCk7XHJcblxyXG4gICAgICAgIGlmICghdmFsdWUgJiYgdGhpcy5fY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5jaGFuZ2VUYXJnZXRXaW5kb3coRURJVE9SID8gY2MuZGlyZWN0b3Iucm9vdC50ZW1wV2luZG93IDogbnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5pc1dpbmRvd1NpemUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBTY2FsZSBvZiB0aGUgaW50ZXJuYWwgYnVmZmVyIHNpemUsXHJcbiAgICAgKiBzZXQgdG8gMSB0byBrZWVwIHRoZSBzYW1lIHdpdGggdGhlIGNhbnZhcyBzaXplLlxyXG4gICAgICogQHpoIOebuOacuuWGhemDqOe8k+WGsuWwuuWvuOeahOe8qeaUvuWAvCwgMSDkuLrkuI4gY2FudmFzIOWwuuWvuOebuOWQjOOAglxyXG4gICAgICovXHJcbiAgICBnZXQgc2NyZWVuU2NhbGUgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JlZW5TY2FsZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc2NyZWVuU2NhbGUgKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3NjcmVlblNjYWxlID0gdmFsO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLnNjcmVlblNjYWxlID0gdmFsOyB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGluRWRpdG9yTW9kZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luRWRpdG9yTW9kZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaW5FZGl0b3JNb2RlICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2luRWRpdG9yTW9kZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLmNoYW5nZVRhcmdldFdpbmRvdyh2YWx1ZSA/IGNjLmRpcmVjdG9yLnJvb3QgJiYgY2MuZGlyZWN0b3Iucm9vdC5tYWluV2luZG93IDogY2MuZGlyZWN0b3Iucm9vdCAmJiBjYy5kaXJlY3Rvci5yb290LnRlbXBXaW5kb3cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXQgZmxvd3MgKHZhbCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLmZsb3dzID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9mbG93cyA9IHZhbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25Mb2FkICgpIHtcclxuICAgICAgICBjYy5kaXJlY3Rvci5vbihjYy5EaXJlY3Rvci5FVkVOVF9BRlRFUl9TQ0VORV9MQVVOQ0gsIHRoaXMub25TY2VuZUNoYW5nZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZUNhbWVyYSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkVuYWJsZSAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmhhc0NoYW5nZWRGbGFncyB8PSBUcmFuc2Zvcm1CaXQuUE9TSVRJT047IC8vIHRyaWdnZXIgY2FtZXJhIG1hdHJpeCB1cGRhdGVcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2F0dGFjaFRvU2NlbmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25EaXNhYmxlICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RldGFjaEZyb21TY2VuZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25EZXN0cm95ICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLnJvb3QuZGVzdHJveUNhbWVyYSh0aGlzLl9jYW1lcmEpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3RhcmdldFRleHR1cmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFyZ2V0VGV4dHVyZS5vZmYoJ3Jlc2l6ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2NyZWVuUG9pbnRUb1JheSAoeDogbnVtYmVyLCB5OiBudW1iZXIsIG91dD86IHJheSkge1xyXG4gICAgICAgIGlmICghb3V0KSB7IG91dCA9IHJheS5jcmVhdGUoKTsgfVxyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLnNjcmVlblBvaW50VG9SYXkob3V0LCB4LCB5KTsgfVxyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHdvcmxkVG9TY3JlZW4gKHdvcmxkUG9zOiBWZWMzLCBvdXQ/OiBWZWMzKSB7XHJcbiAgICAgICAgaWYgKCFvdXQpIHsgb3V0ID0gbmV3IFZlYzMoKTsgfVxyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHsgdGhpcy5fY2FtZXJhLndvcmxkVG9TY3JlZW4ob3V0LCB3b3JsZFBvcyk7IH1cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY3JlZW5Ub1dvcmxkIChzY3JlZW5Qb3M6IFZlYzMsIG91dD86IFZlYzMpIHtcclxuICAgICAgICBpZiAoIW91dCkgeyBvdXQgPSB0aGlzLm5vZGUuZ2V0V29ybGRQb3NpdGlvbigpOyB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2NhbWVyYSkgeyB0aGlzLl9jYW1lcmEuc2NyZWVuVG9Xb3JsZChvdXQsIHNjcmVlblBvcyk7IH1cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHpoIDNEIOiKgueCuei9rCBVSSDmnKzlnLDoioLngrnlnZDmoIfjgIJcclxuICAgICAqIOazqOaEj++8muWNg+S4h+S4jeimgeiuvue9rui0n+i0o+WBmui9rOaNoueahCB1aU5vZGUg5ZKM5pyA57uI6K6+572u5L2N572u55qEIHVpTm9kZSDmmK/lkIzkuIDkuKogbm9kZe+8jOWQpuWImeWPr+iDveWHuueOsOi3s+WKqOeOsOixoeOAglxyXG4gICAgICogQHBhcmFtIHdwb3MgM0Qg6IqC54K55LqL5Lu25Z2Q5qCHXHJcbiAgICAgKiBAcGFyYW0gdWlOb2RlIFVJIOiKgueCuVxyXG4gICAgICogQHBhcmFtIG91dCDov5Tlm57lnKjlvZPliY3kvKDlhaXnmoQgVUkg6IqC54K55LiL55qE5YGP56e76YePXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYHR5cGVzY3JpcHRcclxuICAgICAqIHRoaXMuY29udmVydFRvVUlOb2RlKHRhcmdldC53b3JsZFBvc2l0aW9uLCB1aU5vZGUucGFyZW50LCBvdXQpO1xyXG4gICAgICogdWlOb2RlLnBvc2l0aW9uID0gb3V0O1xyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb252ZXJ0VG9VSU5vZGUgKHdwb3M6IFZlYzMsIHVpTm9kZTogTm9kZSwgb3V0PzogVmVjMykge1xyXG4gICAgICAgIGlmICghb3V0KSB7XHJcbiAgICAgICAgICAgIG91dCA9IG5ldyBWZWMzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5fY2FtZXJhKSB7IHJldHVybiBvdXQ7IH1cclxuXHJcbiAgICAgICAgdGhpcy53b3JsZFRvU2NyZWVuKHdwb3MsIF90ZW1wX3ZlYzNfMSk7XHJcbiAgICAgICAgY29uc3QgY21wID0gdWlOb2RlLmdldENvbXBvbmVudCgnY2MuVUlUcmFuc2Zvcm1Db21wb25lbnQnKSBhcyBVSVRyYW5zZm9ybUNvbXBvbmVudDtcclxuICAgICAgICBjb25zdCBkZXNpZ25TaXplID0gdmlldy5nZXRWaXNpYmxlU2l6ZSgpO1xyXG4gICAgICAgIGNvbnN0IHhvZmZzZXQgPSBfdGVtcF92ZWMzXzEueCAtIHRoaXMuX2NhbWVyYSEud2lkdGggKiAwLjU7XHJcbiAgICAgICAgY29uc3QgeW9mZnNldCA9IF90ZW1wX3ZlYzNfMS55IC0gdGhpcy5fY2FtZXJhIS5oZWlnaHQgKiAwLjU7XHJcbiAgICAgICAgX3RlbXBfdmVjM18xLnggPSB4b2Zmc2V0IC8gY2Mudmlldy5nZXRTY2FsZVgoKSArIGRlc2lnblNpemUud2lkdGggKiAwLjU7XHJcbiAgICAgICAgX3RlbXBfdmVjM18xLnkgPSB5b2Zmc2V0IC8gY2Mudmlldy5nZXRTY2FsZVkoKSArIGRlc2lnblNpemUuaGVpZ2h0ICogMC41O1xyXG5cclxuICAgICAgICBpZiAoY21wKSB7XHJcbiAgICAgICAgICAgIGNtcC5jb252ZXJ0VG9Ob2RlU3BhY2VBUihfdGVtcF92ZWMzXzEsIG91dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfY3JlYXRlQ2FtZXJhICgpIHtcclxuICAgICAgICB0aGlzLl9jYW1lcmEgPSAoY2MuZGlyZWN0b3Iucm9vdCBhcyBSb290KS5jcmVhdGVDYW1lcmEoKTtcclxuICAgICAgICB0aGlzLl9jYW1lcmEuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubm9kZS5uYW1lLFxyXG4gICAgICAgICAgICBub2RlOiB0aGlzLm5vZGUsXHJcbiAgICAgICAgICAgIHByb2plY3Rpb246IHRoaXMuX3Byb2plY3Rpb24sXHJcbiAgICAgICAgICAgIHdpbmRvdzogdGhpcy5faW5FZGl0b3JNb2RlID8gY2MuZGlyZWN0b3Iucm9vdCAmJiBjYy5kaXJlY3Rvci5yb290Lm1haW5XaW5kb3cgOiBjYy5kaXJlY3Rvci5yb290ICYmIGNjLmRpcmVjdG9yLnJvb3QudGVtcFdpbmRvdyxcclxuICAgICAgICAgICAgcHJpb3JpdHk6IHRoaXMuX3ByaW9yaXR5LFxyXG4gICAgICAgICAgICBmbG93czogdGhpcy5fZmxvd3MsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLnZpZXdwb3J0ID0gdGhpcy5fcmVjdDtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLmZvdkF4aXMgPSB0aGlzLl9mb3ZBeGlzO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEuZm92ID0gdG9SYWRpYW4odGhpcy5fZm92KTtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLm9ydGhvSGVpZ2h0ID0gdGhpcy5fb3J0aG9IZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5uZWFyQ2xpcCA9IHRoaXMuX25lYXI7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5mYXJDbGlwID0gdGhpcy5fZmFyO1xyXG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5fY29sb3IueDtcclxuICAgICAgICAgICAgY29uc3QgZyA9IHRoaXMuX2NvbG9yLnk7XHJcbiAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLl9jb2xvci56O1xyXG4gICAgICAgICAgICBjb25zdCBhID0gdGhpcy5fY29sb3IudztcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLmNsZWFyQ29sb3IgPSB7IHIsIGcsIGIsIGEgfTtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLmNsZWFyRGVwdGggPSB0aGlzLl9kZXB0aDtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLmNsZWFyU3RlbmNpbCA9IHRoaXMuX3N0ZW5jaWw7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5jbGVhckZsYWcgPSB0aGlzLl9jbGVhckZsYWdzO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEudmlzaWJpbGl0eSA9IHRoaXMuX3Zpc2liaWxpdHk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5hcGVydHVyZSA9IHRoaXMuX2FwZXJ0dXJlO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEuc2h1dHRlciA9IHRoaXMuX3NodXR0ZXI7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5pc28gPSB0aGlzLl9pc287XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVUYXJnZXRUZXh0dXJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9hdHRhY2hUb1NjZW5lICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMubm9kZS5zY2VuZSB8fCAhdGhpcy5fY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2NhbWVyYSAmJiB0aGlzLl9jYW1lcmEuc2NlbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLnNjZW5lLnJlbW92ZUNhbWVyYSh0aGlzLl9jYW1lcmEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2dldFJlbmRlclNjZW5lKCk7XHJcbiAgICAgICAgc2NlbmUuYWRkQ2FtZXJhKHRoaXMuX2NhbWVyYSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9kZXRhY2hGcm9tU2NlbmUgKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEgJiYgdGhpcy5fY2FtZXJhLnNjZW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5zY2VuZS5yZW1vdmVDYW1lcmEodGhpcy5fY2FtZXJhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG9uU2NlbmVDaGFuZ2VkIChzY2VuZTogU2NlbmUpIHtcclxuICAgICAgICAvLyB0byBoYW5kbGUgc2NlbmUgc3dpdGNoIG9mIGVkaXRvciBjYW1lcmFcclxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhICYmIHRoaXMuX2NhbWVyYS5zY2VuZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2F0dGFjaFRvU2NlbmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9jaGVjaFRhcmdldFRleHR1cmVFdmVudCAob2xkOiBSZW5kZXJUZXh0dXJlIHwgbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IHJlc2l6ZUZ1bmMgPSAod2luZG93OiBHRlhXaW5kb3cpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhbWVyYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FtZXJhLnNldEZpeGVkU2l6ZSh3aW5kb3cud2lkdGgsIHdpbmRvdy5oZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKG9sZCkge1xyXG4gICAgICAgICAgICBvbGQub2ZmKCdyZXNpemUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhcmdldFRleHR1cmUub24oJ3Jlc2l6ZScsIHJlc2l6ZUZ1bmMsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZVRhcmdldFRleHR1cmUgKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fY2FtZXJhKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdpbmRvdyA9IHRoaXMuX3RhcmdldFRleHR1cmUuZ2V0R0ZYV2luZG93KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5jaGFuZ2VUYXJnZXRXaW5kb3cod2luZG93KTtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLnNldEZpeGVkU2l6ZSh3aW5kb3chLndpZHRoLCB3aW5kb3chLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgbmFtZXNwYWNlIENhbWVyYUNvbXBvbmVudCB7XHJcbiAgICBleHBvcnQgdHlwZSBQcm9qZWN0aW9uVHlwZSA9IEVudW1BbGlhczx0eXBlb2YgUHJvamVjdGlvblR5cGU+O1xyXG4gICAgZXhwb3J0IHR5cGUgRk9WQXhpcyA9IEVudW1BbGlhczx0eXBlb2YgRk9WQXhpcz47XHJcbiAgICBleHBvcnQgdHlwZSBDbGVhckZsYWcgPSBFbnVtQWxpYXM8dHlwZW9mIENsZWFyRmxhZz47XHJcbiAgICBleHBvcnQgdHlwZSBBcGVydHVyZSA9IEVudW1BbGlhczx0eXBlb2YgQXBlcnR1cmU+O1xyXG4gICAgZXhwb3J0IHR5cGUgU2h1dHRlciA9IEVudW1BbGlhczx0eXBlb2YgU2h1dHRlcj47XHJcbiAgICBleHBvcnQgdHlwZSBJU08gPSBFbnVtQWxpYXM8dHlwZW9mIElTTz47XHJcbn1cclxuIl19