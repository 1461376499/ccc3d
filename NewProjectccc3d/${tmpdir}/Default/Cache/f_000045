(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "./components/system.js", "./data/object.js", "./event/event-target.js", "./game.js", "./load-pipeline/auto-release-utils.js", "./math/index.js", "./platform/event-manager/event-manager.js", "./root.js", "./scene-graph/index.js", "./scene-graph/component-scheduler.js", "./scene-graph/node-activator.js", "./scheduler.js", "./utils/index.js", "./default-constants.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("./components/system.js"), require("./data/object.js"), require("./event/event-target.js"), require("./game.js"), require("./load-pipeline/auto-release-utils.js"), require("./math/index.js"), require("./platform/event-manager/event-manager.js"), require("./root.js"), require("./scene-graph/index.js"), require("./scene-graph/component-scheduler.js"), require("./scene-graph/node-activator.js"), require("./scheduler.js"), require("./utils/index.js"), require("./default-constants.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.system, global.object, global.eventTarget, global.game, global.autoReleaseUtils, global.index, global.eventManager, global.root, global.index, global.componentScheduler, global.nodeActivator, global.scheduler, global.index, global.defaultConstants);
    global.director = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _system, _object, _eventTarget, _game, _autoReleaseUtils, _index, _eventManager, _root, _index2, _componentScheduler, _nodeActivator, _scheduler, _index3, _defaultConstants) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.director = _exports.Director = void 0;
  _system = _interopRequireDefault(_system);
  _eventManager = _interopRequireDefault(_eventManager);
  _nodeActivator = _interopRequireDefault(_nodeActivator);

  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

  function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  // ----------------------------------------------------------------------------------------------------------------------

  /**
   * @en
   * <p>
   *    ATTENTION: USE cc.director INSTEAD OF cc.Director.<br/>
   *    cc.director is a singleton object which manage your game's logic flow.<br/>
   *    Since the cc.director is a singleton, you don't need to call any constructor or create functions,<br/>
   *    the standard way to use it is by calling:<br/>
   *      - cc.director.methodName(); <br/>
   *
   *    It creates and handle the main Window and manages how and when to execute the Scenes.<br/>
   *    <br/>
   *    The cc.director is also responsible for:<br/>
   *      - initializing the OpenGL context<br/>
   *      - setting the OpenGL pixel format (default on is RGB565)<br/>
   *      - setting the OpenGL buffer depth (default on is 0-bit)<br/>
   *      - setting the color for clear screen (default one is BLACK)<br/>
   *      - setting the projection (default one is 3D)<br/>
   *      - setting the orientation (default one is Portrait)<br/>
   *      <br/>
   *    <br/>
   *    The cc.director also sets the default OpenGL context:<br/>
   *      - GL_TEXTURE_2D is enabled<br/>
   *      - GL_VERTEX_ARRAY is enabled<br/>
   *      - GL_COLOR_ARRAY is enabled<br/>
   *      - GL_TEXTURE_COORD_ARRAY is enabled<br/>
   * </p>
   * <p>
   *   cc.director also synchronizes timers with the refresh rate of the display.<br/>
   *   Features and Limitations:<br/>
   *      - Scheduled timers & drawing are synchronizes with the refresh rate of the display<br/>
   *      - Only supports animation intervals of 1/60 1/30 & 1/15<br/>
   * </p>
   *
   * @zh
   * <p>
   *     注意：用 cc.director 代替 cc.Director。<br/>
   *     cc.director 一个管理你的游戏的逻辑流程的单例对象。<br/>
   *     由于 cc.director 是一个单例，你不需要调用任何构造函数或创建函数，<br/>
   *     使用它的标准方法是通过调用：<br/>
   *       - cc.director.methodName();
   *     <br/>
   *     它创建和处理主窗口并且管理什么时候执行场景。<br/>
   *     <br/>
   *     cc.director 还负责：<br/>
   *      - 初始化 OpenGL 环境。<br/>
   *      - 设置OpenGL像素格式。(默认是 RGB565)<br/>
   *      - 设置OpenGL缓冲区深度 (默认是 0-bit)<br/>
   *      - 设置空白场景的颜色 (默认是 黑色)<br/>
   *      - 设置投影 (默认是 3D)<br/>
   *      - 设置方向 (默认是 Portrait)<br/>
   *    <br/>
   *    cc.director 设置了 OpenGL 默认环境 <br/>
   *      - GL_TEXTURE_2D   启用。<br/>
   *      - GL_VERTEX_ARRAY 启用。<br/>
   *      - GL_COLOR_ARRAY  启用。<br/>
   *      - GL_TEXTURE_COORD_ARRAY 启用。<br/>
   * </p>
   * <p>
   *   cc.director 也同步定时器与显示器的刷新速率。
   *   <br/>
   *   特点和局限性: <br/>
   *      - 将计时器 & 渲染与显示器的刷新频率同步。<br/>
   *      - 只支持动画的间隔 1/60 1/30 & 1/15。<br/>
   * </p>
   *
   * @class Director
   * @extends EventTarget
   */
  var Director = /*#__PURE__*/function (_EventTarget) {
    _inherits(Director, _EventTarget);

    /**
     * @en The event which will be triggered when the singleton of Director initialized.
     * @zh Director 单例初始化时触发的事件
     * @event Director.EVENT_INIT
     */

    /**
     * @en The event which will be triggered when the singleton of Director initialized.
     * @zh Director 单例初始化时触发的事件
     * @property {String} EVENT_INIT
     * @readonly
     */

    /**
     * @en The event which will be triggered when the singleton of Director reset.
     * @zh Director 单例重置时触发的事件
     * @event Director.EVENT_RESET
     */

    /**
     * @en The event which will be triggered when the singleton of Director reset.
     * @zh Director 单例重置时触发的事件
     * @property {String} EVENT_RESET
     * @readonly
     */

    /**
     * @en The event which will be triggered before loading a new scene.
     * @zh 加载新场景之前所触发的事件。
     * @event Director.EVENT_BEFORE_SCENE_LOADING
     * @param {String} sceneName - The loading scene name
     */

    /**
     * @en The event which will be triggered before loading a new scene.
     * @zh 加载新场景之前所触发的事件。
     * @property {String} EVENT_BEFORE_SCENE_LOADING
     * @readonly
     */

    /**
     * @en The event which will be triggered before launching a new scene.
     * @zh 运行新场景之前所触发的事件。
     * @event Director.EVENT_BEFORE_SCENE_LAUNCH
     * @param {String} sceneName - New scene which will be launched
     */

    /**
     * @en The event which will be triggered before launching a new scene.
     * @zh 运行新场景之前所触发的事件。
     * @property {String} EVENT_BEFORE_SCENE_LAUNCH
     * @readonly
     */

    /**
     * @en The event which will be triggered after launching a new scene.
     * @zh 运行新场景之后所触发的事件。
     * @event Director.EVENT_AFTER_SCENE_LAUNCH
     * @param {String} sceneName - New scene which is launched
     */

    /**
     * @en The event which will be triggered after launching a new scene.
     * @zh 运行新场景之后所触发的事件。
     * @property {String} EVENT_AFTER_SCENE_LAUNCH
     * @readonly
     */

    /**
     * @en The event which will be triggered at the beginning of every frame.
     * @zh 每个帧的开始时所触发的事件。
     * @event Director.EVENT_BEFORE_UPDATE
     */

    /**
     * @en The event which will be triggered at the beginning of every frame.
     * @zh 每个帧的开始时所触发的事件。
     * @property {String} EVENT_BEFORE_UPDATE
     * @readonly
     */

    /**
     * @en The event which will be triggered after engine and components update logic.
     * @zh 将在引擎和组件 “update” 逻辑之后所触发的事件。
     * @event Director.EVENT_AFTER_UPDATE
     */

    /**
     * @en The event which will be triggered after engine and components update logic.
     * @zh 将在引擎和组件 “update” 逻辑之后所触发的事件。
     * @property {String} EVENT_AFTER_UPDATE
     * @readonly
     */

    /**
     * @en The event which will be triggered before the rendering process.
     * @zh 渲染过程之前所触发的事件。
     * @event Director.EVENT_BEFORE_DRAW
     */

    /**
     * @en The event which will be triggered before the rendering process.
     * @zh 渲染过程之前所触发的事件。
     * @property {String} EVENT_BEFORE_DRAW
     * @readonly
     */

    /**
     * @en The event which will be triggered after the rendering process.
     * @zh 渲染过程之后所触发的事件。
     * @event Director.EVENT_AFTER_DRAW
     */

    /**
     * @en The event which will be triggered after the rendering process.
     * @zh 渲染过程之后所触发的事件。
     * @property {String} EVENT_AFTER_DRAW
     * @readonly
     */

    /**
     * The event which will be triggered before the physics process.<br/>
     * 物理过程之前所触发的事件。
     * @event Director.EVENT_BEFORE_PHYSICS
     * @readonly
     */

    /**
     * The event which will be triggered after the physics process.<br/>
     * 物理过程之后所触发的事件。
     * @event Director.EVENT_AFTER_PHYSICS
     * @readonly
     */
    function Director() {
      var _this;

      _classCallCheck(this, Director);

      _this = _possibleConstructorReturn(this, _getPrototypeOf(Director).call(this));
      _this._compScheduler = void 0;
      _this._nodeActivator = void 0;
      _this._invalid = void 0;
      _this._paused = void 0;
      _this._purgeDirectorInNextLoop = void 0;
      _this._root = void 0;
      _this._loadingScene = void 0;
      _this._scene = void 0;
      _this._totalFrames = void 0;
      _this._lastUpdate = void 0;
      _this._deltaTime = void 0;
      _this._scheduler = void 0;
      _this._systems = void 0;
      _this._invalid = false; // paused?

      _this._paused = false; // purge?

      _this._purgeDirectorInNextLoop = false; // root

      _this._root = null; // scenes

      _this._loadingScene = '';
      _this._scene = null; // FPS

      _this._totalFrames = 0;
      _this._lastUpdate = 0;
      _this._deltaTime = 0.0; // Scheduler for user registration update

      _this._scheduler = new _scheduler.Scheduler(); // Scheduler for life-cycle methods in component

      _this._compScheduler = new _componentScheduler.ComponentScheduler(); // Node activator

      _this._nodeActivator = new _nodeActivator.default();
      _this._systems = [];
      cc.game.once(_game.Game.EVENT_RENDERER_INITED, _this._initOnRendererInitialized, _assertThisInitialized(_this));
      return _this;
    }
    /**
     * calculates delta time since last time it was called
     */


    _createClass(Director, [{
      key: "calculateDeltaTime",
      value: function calculateDeltaTime() {
        var now = performance.now();
        this._deltaTime = (now - this._lastUpdate) / 1000;

        if (_defaultConstants.DEBUG && this._deltaTime > 1) {
          this._deltaTime = 1 / 60.0;
        }

        this._lastUpdate = now;
      }
      /**
       * @en
       * Converts a view coordinate to an WebGL coordinate<br/>
       * Useful to convert (multi) touches coordinates to the current layout (portrait or landscape)<br/>
       * Implementation can be found in directorWebGL.
       * @zh 将触摸点的屏幕坐标转换为 WebGL View 下的坐标。
       * @deprecated since v2.0
       */

    }, {
      key: "convertToGL",
      value: function convertToGL(uiPoint) {
        var container = cc.game.container;
        var view = cc.view;
        var box = container.getBoundingClientRect();
        var left = box.left + window.pageXOffset - container.clientLeft;
        var top = box.top + window.pageYOffset - container.clientTop;
        var x = view._devicePixelRatio * (uiPoint.x - left);
        var y = view._devicePixelRatio * (top + box.height - uiPoint.y);
        return view._isRotated ? (0, _index.v2)(view._viewportRect.width - y, x) : (0, _index.v2)(x, y);
      }
      /**
       * @en
       * Converts an OpenGL coordinate to a view coordinate<br/>
       * Useful to convert node points to window points for calls such as glScissor<br/>
       * Implementation can be found in directorWebGL.
       * @zh 将触摸点的 WebGL View 坐标转换为屏幕坐标。
       * @deprecated since v2.0
       */

    }, {
      key: "convertToUI",
      value: function convertToUI(glPoint) {
        var container = cc.game.container;
        var view = cc.view;
        var box = container.getBoundingClientRect();
        var left = box.left + window.pageXOffset - container.clientLeft;
        var top = box.top + window.pageYOffset - container.clientTop;
        var uiPoint = (0, _index.v2)(0, 0);

        if (view._isRotated) {
          uiPoint.x = left + glPoint.y / view._devicePixelRatio;
          uiPoint.y = top + box.height - (view._viewportRect.width - glPoint.x) / view._devicePixelRatio;
        } else {
          uiPoint.x = left + glPoint.x * view._devicePixelRatio;
          uiPoint.y = top + box.height - glPoint.y * view._devicePixelRatio;
        }

        return uiPoint;
      }
      /**
       * End the life of director in the next frame
       */

    }, {
      key: "end",
      value: function end() {
        this._purgeDirectorInNextLoop = true;
      }
      /**
       * @en
       * Returns the size of the WebGL view in points.<br/>
       * It takes into account any possible rotation (device orientation) of the window.
       * @zh 获取视图的大小，以点为单位。
       * @deprecated since v2.0
       */

    }, {
      key: "getWinSize",
      value: function getWinSize() {
        return (0, _index.size)(cc.winSize);
      }
      /**
       * @en
       * Returns the size of the OpenGL view in pixels.<br/>
       * It takes into account any possible rotation (device orientation) of the window.<br/>
       * On Mac winSize and winSizeInPixels return the same value.
       * (The pixel here refers to the resource resolution. If you want to get the physics resolution of device, you need to use cc.view.getFrameSize())
       * @zh
       * 获取视图大小，以像素为单位（这里的像素指的是资源分辨率。
       * 如果要获取屏幕物理分辨率，需要用 cc.view.getFrameSize()）
       * @deprecated since v2.0
       */

    }, {
      key: "getWinSizeInPixels",
      value: function getWinSizeInPixels() {
        return (0, _index.size)(cc.winSize);
      }
      /**
       * @en Pause the director's ticker, only involve the game logic execution.<br>
       * It won't pause the rendering process nor the event manager.<br>
       * If you want to pause the entire game including rendering, audio and event,<br>
       * please use cc.game.pause
       * @zh 暂停正在运行的场景，该暂停只会停止游戏逻辑执行，但是不会停止渲染和 UI 响应。<br>
       * 如果想要更彻底得暂停游戏，包含渲染，音频和事件，请使用 cc.game.pause 。
       */

    }, {
      key: "pause",
      value: function pause() {
        if (this._paused) {
          return;
        }

        this._paused = true;
      }
      /**
       * @en Removes cached all cocos2d cached data.
       * @zh 删除cocos2d所有的缓存数据
       * @deprecated since v2.0
       */

    }, {
      key: "purgeCachedData",
      value: function purgeCachedData() {
        cc.loader.releaseAll();
      }
      /**
       * @en Purge the cc.director itself, including unschedule all schedule,<br>
       * remove all event listeners, clean up and exit the running scene, stops all animations, clear cached data.
       * @zh 清除 cc.director 本身，包括停止所有的计时器，<br>
       * 移除所有的事件监听器，清理并退出当前运行的场景，停止所有动画，清理缓存数据。
       */

    }, {
      key: "purgeDirector",
      value: function purgeDirector() {
        // cleanup scheduler
        this._scheduler.unscheduleAll();

        this._compScheduler.unscheduleAll();

        this._nodeActivator.reset(); // Disable event dispatching


        if (_eventManager.default) {
          _eventManager.default.setEnabled(false);
        } // cc.renderer.clear();


        if (!_defaultConstants.EDITOR) {
          if (cc.isValid(this._scene)) {
            this._scene.destroy();
          }

          this._scene = null;
        }

        this.stopAnimation();

        if (this._root != null) {
          this._root.destroy();
        }

        this._root = null; // Clear all caches

        cc.loader.releaseAll();
      }
      /**
       * @en Reset the cc.director, can be used to restart the director after purge
       * @zh 重置 cc.director，可用于在清除后重启 director
       */

    }, {
      key: "reset",
      value: function reset() {
        this.purgeDirector();
        this.emit(Director.EVENT_RESET);

        if (_eventManager.default) {
          _eventManager.default.setEnabled(true);
        }

        this.startAnimation();
      }
      /**
       * @en
       * Run a scene. Replaces the running scene with a new one or enter the first scene.<br>
       * The new scene will be launched immediately.
       * @zh 运行指定场景。将正在运行的场景替换为（或重入为）新场景。新场景将立即启动。
       * @param scene - The need run scene.
       * @param onBeforeLoadScene - The function invoked at the scene before loading.
       * @param onLaunched - The function invoked at the scene after launch.
       */

    }, {
      key: "runSceneImmediate",
      value: function runSceneImmediate(scene, onBeforeLoadScene, onLaunched) {
        cc.assertID(scene instanceof cc.Scene, 1216);

        var uuid = cc.loader._getReferenceKey(scene.uuid); // Scene cannot be cached in loader, because it will be destroyed after switching.


        cc.loader.removeItem(uuid);

        if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
          console.time('InitScene');
        } // @ts-ignore


        scene._load(); // ensure scene initialized


        if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
          console.timeEnd('InitScene');
        } // Re-attach or replace persist nodes


        if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
          console.time('AttachPersist');
        }

        var persistNodeList = Object.keys(cc.game._persistRootNodes).map(function (x) {
          return cc.game._persistRootNodes[x];
        }); // tslint:disable-next-line: prefer-for-of

        for (var i = 0; i < persistNodeList.length; i++) {
          var node = persistNodeList[i];
          node.emit(cc.Node.SCENE_CHANGED_FOR_PERSISTS, scene.renderScene);
          var existNode = scene.getChildByUuid(node.uuid);

          if (existNode) {
            // scene also contains the persist node, select the old one
            var index = existNode.getSiblingIndex();

            existNode._destroyImmediate();

            scene.insertChild(node, index);
          } else {
            node.parent = scene;
          }
        }

        if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
          console.timeEnd('AttachPersist');
        }

        var oldScene = this._scene;

        if (!_defaultConstants.EDITOR) {
          // auto release assets
          if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
            console.time('AutoRelease');
          }

          var autoReleaseAssets = oldScene && oldScene.autoReleaseAssets && oldScene.dependAssets;
          (0, _autoReleaseUtils.autoRelease)(autoReleaseAssets, scene.dependAssets, persistNodeList);

          if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
            console.timeEnd('AutoRelease');
          }
        } // unload scene


        if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
          console.time('Destroy');
        }

        if (cc.isValid(oldScene)) {
          oldScene.destroy();
        }

        this._scene = null; // purge destroyed nodes belongs to old scene

        _object.CCObject._deferredDestroy();

        if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
          console.timeEnd('Destroy');
        }

        if (onBeforeLoadScene) {
          onBeforeLoadScene();
        }

        this.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH, scene); // Run an Entity Scene

        this._scene = scene;

        if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
          console.time('Activate');
        } // @ts-ignore


        scene._activate();

        if (_defaultConstants.BUILD && _defaultConstants.DEBUG) {
          console.timeEnd('Activate');
        } // start scene


        if (this._root) {
          this._root.resetCumulativeTime();
        }

        this.startAnimation();

        if (onLaunched) {
          onLaunched(null, scene);
        }

        this.emit(cc.Director.EVENT_AFTER_SCENE_LAUNCH, scene);
      }
      /**
       * @en
       * Run a scene. Replaces the running scene with a new one or enter the first scene.<br>
       * The new scene will be launched at the end of the current frame.<br>
       * @zh 运行指定场景。
       * @param scene - The need run scene.
       * @param onBeforeLoadScene - The function invoked at the scene before loading.
       * @param onLaunched - The function invoked at the scene after launch.
       * @private
       */

    }, {
      key: "runScene",
      value: function runScene(scene, onBeforeLoadScene, onLaunched) {
        var _this2 = this;

        cc.assertID(scene, 1205);
        cc.assertID(scene instanceof cc.Scene, 1216); // ensure scene initialized
        // @ts-ignore

        scene._load(); // Delay run / replace scene to the end of the frame


        this.once(cc.Director.EVENT_AFTER_UPDATE, function () {
          _this2.runSceneImmediate(scene, onBeforeLoadScene, onLaunched);
        });
      } //  @Scene loading section

    }, {
      key: "_getSceneUuid",
      value: function _getSceneUuid(key) {
        var scenes = cc.game._sceneInfos;

        if (typeof key === 'string') {
          if (!key.endsWith('.scene')) {
            key += '.scene';
          }

          if (key[0] !== '/' && !key.startsWith('db://')) {
            key = '/' + key; // 使用全名匹配
          } // search scene
          // tslint:disable-next-line: prefer-for-of


          for (var i = 0; i < scenes.length; i++) {
            var info = scenes[i];

            if (info.url.endsWith(key)) {
              return info;
            }
          }
        } else if (typeof key === 'number') {
          if (0 <= key && key < scenes.length) {
            return scenes[key];
          } else {
            cc.errorID(1206, key);
          }
        } else {
          cc.errorID(1207, key);
        }

        return null;
      }
      /**
       * @en Loads the scene by its name.
       * @zh 通过场景名称进行加载场景。
       *
       * @param sceneName - The name of the scene to load.
       * @param onLaunched - callback, will be called after scene launched.
       * @return if error, return false
       */

    }, {
      key: "loadScene",
      value: function loadScene(sceneName, onLaunched, onUnloaded) {
        if (this._loadingScene) {
          cc.errorID(1208, sceneName, this._loadingScene);
          return false;
        }

        var info = this._getSceneUuid(sceneName);

        if (info) {
          var _uuid = info.uuid;
          this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING, sceneName);
          this._loadingScene = sceneName;

          this._loadSceneByUuid(_uuid, onLaunched, onUnloaded);

          return true;
        } else {
          cc.errorID(1209, sceneName);
          return false;
        }
      }
      /**
       * @en
       * Pre-loads the scene to reduces loading time. You can call this method at any time you want.<br>
       * After calling this method, you still need to launch the scene by `cc.director.loadScene`.<br>
       * It will be totally fine to call `cc.director.loadScene` at any time even if the preloading is not<br>
       * yet finished, the scene will be launched after loaded automatically.
       * @zh 预加载场景，你可以在任何时候调用这个方法。
       * 调用完后，你仍然需要通过 `cc.director.loadScene` 来启动场景，因为这个方法不会执行场景加载操作。<br>
       * 就算预加载还没完成，你也可以直接调用 `cc.director.loadScene`，加载完成后场景就会启动。
       * @param sceneName 场景名称。
       * @param onLoaded 加载回调。
       */

    }, {
      key: "preloadScene",
      value: function preloadScene(sceneName, arg1, arg2) {
        var onProgress;
        var onLoaded;

        if (arg2 === undefined) {
          onLoaded = arg1;
          onProgress = void 0;
        } else {
          onLoaded = arg2;
          onProgress = arg1;
        }

        var info = this._getSceneUuid(sceneName);

        if (info) {
          this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING, sceneName);
          cc.loader.load({
            uuid: info.uuid,
            type: 'uuid'
          }, onProgress, function (error, asset) {
            if (error) {
              cc.errorID(1210, sceneName, error.message);
            }

            if (onLoaded) {
              onLoaded(error, asset);
            }
          });
        } else {
          var _error = 'Can not preload the scene "' + sceneName + '" because it is not in the build settings.';

          if (onLoaded) {
            onLoaded(new Error(_error));
          }

          cc.error('preloadScene: ' + _error);
        }
      }
      /**
       * @en Loads the scene by its uuid.
       * @zh 通过 uuid 加载场景。
       * @param uuid 场景资源的 uuid。
       * @param doNotRun 仅加载和初始化场景，但并不运行。此参数仅在编辑器环境中生效。
       */

    }, {
      key: "_loadSceneByUuid",
      value: function _loadSceneByUuid(uuid, arg1, arg2, arg3) {
        var onLaunched;
        var onUnloaded;
        var doNotRun;

        if (_defaultConstants.EDITOR && typeof arg1 === 'boolean') {
          doNotRun = arg1;
          onUnloaded = arg2;
        } else if (_defaultConstants.EDITOR && typeof arg2 === 'boolean') {
          doNotRun = arg2;
          onLaunched = arg1;
        } else {
          onLaunched = arg1;
          onUnloaded = arg2;
          doNotRun = arg3;
        } // cc.AssetLibrary.unloadAsset(uuid);     // force reload


        console.time('LoadScene ' + uuid);
        cc.AssetLibrary.loadAsset(uuid, function (error, sceneAsset) {
          console.timeEnd('LoadScene ' + uuid);
          var self = director;
          self._loadingScene = '';

          if (error) {
            error = 'Failed to load scene: ' + error;
            cc.error(error);
          } else {
            if (sceneAsset instanceof cc.SceneAsset) {
              var _scene = sceneAsset.scene;
              _scene._id = sceneAsset._uuid;
              _scene._name = sceneAsset._name;

              if (_defaultConstants.EDITOR) {
                if (!doNotRun) {
                  self.runSceneImmediate(_scene, onUnloaded, onLaunched);
                } else {
                  _scene._load();

                  if (onLaunched) {
                    onLaunched(null, _scene);
                  }
                }
              } else {
                self.runSceneImmediate(_scene, onUnloaded, onLaunched);
              }

              return;
            } else {
              error = 'The asset ' + uuid + ' is not a scene';
              cc.error(error);
            }
          }

          if (onLaunched) {
            onLaunched(error);
          }
        });
      }
      /**
       * @en Resume game logic execution after pause, if the current scene is not paused, nothing will happen.
       * @zh 恢复暂停场景的游戏逻辑，如果当前场景没有暂停将没任何事情发生。
       */

    }, {
      key: "resume",
      value: function resume() {
        if (!this._paused) {
          return;
        }

        this._lastUpdate = performance.now();

        if (!this._lastUpdate) {
          cc.logID(1200);
        }

        this._paused = false;
        this._deltaTime = 0;
      }
      /**
       * @en
       * Enables or disables WebGL depth test.<br>
       * Implementation can be found in directorCanvas.js/directorWebGL.js
       * @zh 启用/禁用深度测试（在 Canvas 渲染模式下不会生效）。
       * @deprecated since v2.0
       */

    }, {
      key: "setDepthTest",
      value: function setDepthTest(value) {
        if (!cc.Camera.main) {
          return;
        }

        cc.Camera.main.depth = !!value;
      }
      /**
       * @en
       * Set color for clear screen.<br>
       * (Implementation can be found in directorCanvas.js/directorWebGL.js)
       * @zh
       * 设置场景的默认擦除颜色。<br>
       * 支持全透明，但不支持透明度为中间值。要支持全透明需手工开启 cc.macro.ENABLE_TRANSPARENT_CANVAS。
       * @deprecated since v2.0
       */

    }, {
      key: "setClearColor",
      value: function setClearColor(clearColor) {
        if (!cc.Camera.main) {
          return;
        }

        cc.Camera.main.backgroundColor = clearColor;
      }
    }, {
      key: "getRunningScene",

      /**
       * @en Returns current logic Scene.
       * @zh 获取当前逻辑场景。
       * @deprecated Since v2.0.
       */
      value: function getRunningScene() {
        return this._scene;
      }
      /**
       * @en Returns current logic Scene.
       * @zh 获取当前逻辑场景。
       * @example
       * ```
       * import { director } from 'cc';
       * // This will help you to get the Canvas node in scene
       * director.getScene().getChildByName('Canvas');
       * ```
       */

    }, {
      key: "getScene",
      value: function getScene() {
        return this._scene;
      }
      /**
       * @en Returns the FPS value. Please use [[Game.setFrameRate]] to control animation interval.
       * @zh 获取单位帧执行时间。请使用 [[Game.setFrameRate]] 来控制游戏帧率。
       * @deprecated since v2.0.
       */

    }, {
      key: "getAnimationInterval",
      value: function getAnimationInterval() {
        return 1000 / cc.game.getFrameRate();
      }
      /**
       * @en Sets animation interval, this doesn't control the main loop.<br>
       * To control the game's frame rate overall, please use cc.game.setFrameRate
       * @zh 设置动画间隔，这不控制主循环。<br>
       * 要控制游戏的帧速率，请使用 cc.game.setFrameRate
       * @deprecated since v2.0
       * @param value - The animation interval desired.
       */

    }, {
      key: "setAnimationInterval",
      value: function setAnimationInterval(value) {
        cc.game.setFrameRate(Math.round(1000 / value));
      }
      /**
       * @en Returns the delta time since last frame.
       * @zh 获取上一帧的增量时间。
       */

    }, {
      key: "getDeltaTime",
      value: function getDeltaTime() {
        return this._deltaTime;
      }
      /**
       * @en Returns the current time.
       * @zh 获取当前帧的时间。
       */

    }, {
      key: "getCurrentTime",
      value: function getCurrentTime() {
        return this._lastUpdate;
      }
      /**
       * @en Returns how many frames were called since the director started.
       * @zh 获取 director 启动以来游戏运行的总帧数。
       */

    }, {
      key: "getTotalFrames",
      value: function getTotalFrames() {
        return this._totalFrames;
      }
      /**
       * @en Returns whether or not the Director is paused.
       * @zh 是否处于暂停状态。
       */

    }, {
      key: "isPaused",
      value: function isPaused() {
        return this._paused;
      }
      /**
       * @en Returns the cc.Scheduler associated with this director.
       * @zh 获取和 director 相关联的 cc.Scheduler。
       */

    }, {
      key: "getScheduler",
      value: function getScheduler() {
        return this._scheduler;
      }
      /**
       * @en Sets the cc.Scheduler associated with this director.
       * @zh 设置和 director 相关联的 cc.Scheduler。
       */

    }, {
      key: "setScheduler",
      value: function setScheduler(scheduler) {
        if (this._scheduler !== scheduler) {
          this.unregisterSystem(this._scheduler);
          this._scheduler = scheduler;
          this.registerSystem(_scheduler.Scheduler.ID, scheduler, 200);
        }
      }
      /**
       * @en register a system.
       * @zh 注册一个 system。
       */

    }, {
      key: "registerSystem",
      value: function registerSystem(name, sys, priority) {
        sys.id = name;
        sys.priority = priority;
        sys.init();

        this._systems.push(sys);

        this._systems.sort(_system.default.sortByPriority);
      }
    }, {
      key: "unregisterSystem",
      value: function unregisterSystem(sys) {
        _index3.js.array.fastRemove(this._systems, sys);

        this._systems.sort(_system.default.sortByPriority);
      }
      /**
       * @en get a system.
       * @zh 获取一个 system。
       */

    }, {
      key: "getSystem",
      value: function getSystem(name) {
        return this._systems.find(function (sys) {
          return sys.id === name;
        });
      }
      /**
       * @en Returns the cc.AnimationManager associated with this director. Please use getSystem(AnimationManager.ID)
       * @zh 获取和 director 相关联的 cc.AnimationManager（动画管理器）。请使用 getSystem(AnimationManager.ID) 来替代
       * @deprecated
       */

    }, {
      key: "getAnimationManager",
      value: function getAnimationManager() {
        return this.getSystem(cc.AnimationManager.ID);
      } // Loop management

      /**
       * @en Starts Animation
       * @zh 开始动画
       */

    }, {
      key: "startAnimation",
      value: function startAnimation() {
        this._invalid = false;
        this._lastUpdate = performance.now();
      }
      /**
       * @en Stops animation
       * @zh 停止动画
       */

    }, {
      key: "stopAnimation",
      value: function stopAnimation() {
        this._invalid = true;
      }
      /**
       * @en Run main loop of director
       * @zh 运行主循环
       */

    }, {
      key: "mainLoop",
      value: function mainLoop(time) {
        if (this._purgeDirectorInNextLoop) {
          this._purgeDirectorInNextLoop = false;
          this.purgeDirector();
        } else if (!this._invalid) {
          // calculate "global" dt
          this.calculateDeltaTime();
          var dt = this._deltaTime; // Update

          if (!this._paused) {
            this.emit(Director.EVENT_BEFORE_UPDATE); // Call start for new added components

            this._compScheduler.startPhase(); // Update for components


            this._compScheduler.updatePhase(dt); // Update systems


            for (var i = 0; i < this._systems.length; ++i) {
              this._systems[i].update(dt);
            } // Late update for components


            this._compScheduler.lateUpdatePhase(dt); // User can use this event to do things after update


            this.emit(Director.EVENT_AFTER_UPDATE); // Destroy entities that have been removed recently

            _object.CCObject._deferredDestroy(); // Post update systems


            for (var _i = 0; _i < this._systems.length; ++_i) {
              this._systems[_i].postUpdate(dt);
            }
          }

          this.emit(Director.EVENT_BEFORE_DRAW);

          this._root.frameMove(this._deltaTime); // Present current frame


          this._root.device.present();

          this.emit(Director.EVENT_AFTER_DRAW);

          _eventManager.default.frameUpdateListeners();

          _index2.Node.bookOfChange.clear();

          this._totalFrames++;
        }
      }
    }, {
      key: "_initOnRendererInitialized",
      value: function _initOnRendererInitialized() {
        this._totalFrames = 0;
        this._lastUpdate = performance.now();
        this._paused = false;
        this._purgeDirectorInNextLoop = false; // Event manager

        if (_eventManager.default) {
          _eventManager.default.setEnabled(true);
        } // Scheduler
        // TODO: have a solid organization of priority and expose to user


        this.registerSystem(_scheduler.Scheduler.ID, this._scheduler, 200);
        this.emit(Director.EVENT_INIT);
      }
    }, {
      key: "_init",
      value: function _init() {
        cc.loader.init(this);
        this._root = new _root.Root(cc.game._gfxDevice);
        var rootInfo = {};

        if (!this._root.initialize(rootInfo)) {
          return false;
        }

        return true;
      }
    }, {
      key: "root",
      get: function get() {
        return this._root;
      }
    }]);

    return Director;
  }(_eventTarget.EventTarget);

  _exports.Director = Director;
  Director.EVENT_INIT = 'director_init';
  Director.EVENT_RESET = 'director_reset';
  Director.EVENT_BEFORE_SCENE_LOADING = 'director_before_scene_loading';
  Director.EVENT_BEFORE_SCENE_LAUNCH = 'director_before_scene_launch';
  Director.EVENT_AFTER_SCENE_LAUNCH = 'director_after_scene_launch';
  Director.EVENT_BEFORE_UPDATE = 'director_before_update';
  Director.EVENT_AFTER_UPDATE = 'director_after_update';
  Director.EVENT_BEFORE_DRAW = 'director_before_draw';
  Director.EVENT_AFTER_DRAW = 'director_after_draw';
  Director.EVENT_BEFORE_PHYSICS = 'director_before_physics';
  Director.EVENT_AFTER_PHYSICS = 'director_after_physics';
  Director.instance = void 0;
  cc.Director = Director;
  /**
   * 导演类。
   * @property director
   */

  var director = Director.instance = cc.director = new Director();
  _exports.director = director;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkY6L2plbmtpbnMvd29ya3NwYWNlL0NyZWF0b3JfM0QvZWRpdG9yLTNkL3Jlc291cmNlcy8zZC9lbmdpbmUvY29jb3MvY29yZS9kaXJlY3Rvci50cyJdLCJuYW1lcyI6WyJEaXJlY3RvciIsIl9jb21wU2NoZWR1bGVyIiwiX25vZGVBY3RpdmF0b3IiLCJfaW52YWxpZCIsIl9wYXVzZWQiLCJfcHVyZ2VEaXJlY3RvckluTmV4dExvb3AiLCJfcm9vdCIsIl9sb2FkaW5nU2NlbmUiLCJfc2NlbmUiLCJfdG90YWxGcmFtZXMiLCJfbGFzdFVwZGF0ZSIsIl9kZWx0YVRpbWUiLCJfc2NoZWR1bGVyIiwiX3N5c3RlbXMiLCJTY2hlZHVsZXIiLCJDb21wb25lbnRTY2hlZHVsZXIiLCJOb2RlQWN0aXZhdG9yIiwiY2MiLCJnYW1lIiwib25jZSIsIkdhbWUiLCJFVkVOVF9SRU5ERVJFUl9JTklURUQiLCJfaW5pdE9uUmVuZGVyZXJJbml0aWFsaXplZCIsIm5vdyIsInBlcmZvcm1hbmNlIiwiREVCVUciLCJ1aVBvaW50IiwiY29udGFpbmVyIiwidmlldyIsImJveCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJ3aW5kb3ciLCJwYWdlWE9mZnNldCIsImNsaWVudExlZnQiLCJ0b3AiLCJwYWdlWU9mZnNldCIsImNsaWVudFRvcCIsIngiLCJfZGV2aWNlUGl4ZWxSYXRpbyIsInkiLCJoZWlnaHQiLCJfaXNSb3RhdGVkIiwiX3ZpZXdwb3J0UmVjdCIsIndpZHRoIiwiZ2xQb2ludCIsIndpblNpemUiLCJsb2FkZXIiLCJyZWxlYXNlQWxsIiwidW5zY2hlZHVsZUFsbCIsInJlc2V0IiwiZXZlbnRNYW5hZ2VyIiwic2V0RW5hYmxlZCIsIkVESVRPUiIsImlzVmFsaWQiLCJkZXN0cm95Iiwic3RvcEFuaW1hdGlvbiIsInB1cmdlRGlyZWN0b3IiLCJlbWl0IiwiRVZFTlRfUkVTRVQiLCJzdGFydEFuaW1hdGlvbiIsInNjZW5lIiwib25CZWZvcmVMb2FkU2NlbmUiLCJvbkxhdW5jaGVkIiwiYXNzZXJ0SUQiLCJTY2VuZSIsInV1aWQiLCJfZ2V0UmVmZXJlbmNlS2V5IiwicmVtb3ZlSXRlbSIsIkJVSUxEIiwiY29uc29sZSIsInRpbWUiLCJfbG9hZCIsInRpbWVFbmQiLCJwZXJzaXN0Tm9kZUxpc3QiLCJPYmplY3QiLCJrZXlzIiwiX3BlcnNpc3RSb290Tm9kZXMiLCJtYXAiLCJpIiwibGVuZ3RoIiwibm9kZSIsIk5vZGUiLCJTQ0VORV9DSEFOR0VEX0ZPUl9QRVJTSVNUUyIsInJlbmRlclNjZW5lIiwiZXhpc3ROb2RlIiwiZ2V0Q2hpbGRCeVV1aWQiLCJpbmRleCIsImdldFNpYmxpbmdJbmRleCIsIl9kZXN0cm95SW1tZWRpYXRlIiwiaW5zZXJ0Q2hpbGQiLCJwYXJlbnQiLCJvbGRTY2VuZSIsImF1dG9SZWxlYXNlQXNzZXRzIiwiZGVwZW5kQXNzZXRzIiwiQ0NPYmplY3QiLCJfZGVmZXJyZWREZXN0cm95IiwiRVZFTlRfQkVGT1JFX1NDRU5FX0xBVU5DSCIsIl9hY3RpdmF0ZSIsInJlc2V0Q3VtdWxhdGl2ZVRpbWUiLCJFVkVOVF9BRlRFUl9TQ0VORV9MQVVOQ0giLCJFVkVOVF9BRlRFUl9VUERBVEUiLCJydW5TY2VuZUltbWVkaWF0ZSIsImtleSIsInNjZW5lcyIsIl9zY2VuZUluZm9zIiwiZW5kc1dpdGgiLCJzdGFydHNXaXRoIiwiaW5mbyIsInVybCIsImVycm9ySUQiLCJzY2VuZU5hbWUiLCJvblVubG9hZGVkIiwiX2dldFNjZW5lVXVpZCIsIkVWRU5UX0JFRk9SRV9TQ0VORV9MT0FESU5HIiwiX2xvYWRTY2VuZUJ5VXVpZCIsImFyZzEiLCJhcmcyIiwib25Qcm9ncmVzcyIsIm9uTG9hZGVkIiwidW5kZWZpbmVkIiwibG9hZCIsInR5cGUiLCJlcnJvciIsImFzc2V0IiwibWVzc2FnZSIsIkVycm9yIiwiYXJnMyIsImRvTm90UnVuIiwiQXNzZXRMaWJyYXJ5IiwibG9hZEFzc2V0Iiwic2NlbmVBc3NldCIsInNlbGYiLCJkaXJlY3RvciIsIlNjZW5lQXNzZXQiLCJfaWQiLCJfdXVpZCIsIl9uYW1lIiwibG9nSUQiLCJ2YWx1ZSIsIkNhbWVyYSIsIm1haW4iLCJkZXB0aCIsImNsZWFyQ29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnZXRGcmFtZVJhdGUiLCJzZXRGcmFtZVJhdGUiLCJNYXRoIiwicm91bmQiLCJzY2hlZHVsZXIiLCJ1bnJlZ2lzdGVyU3lzdGVtIiwicmVnaXN0ZXJTeXN0ZW0iLCJJRCIsIm5hbWUiLCJzeXMiLCJwcmlvcml0eSIsImlkIiwiaW5pdCIsInB1c2giLCJzb3J0IiwiU3lzdGVtIiwic29ydEJ5UHJpb3JpdHkiLCJqcyIsImFycmF5IiwiZmFzdFJlbW92ZSIsImZpbmQiLCJnZXRTeXN0ZW0iLCJBbmltYXRpb25NYW5hZ2VyIiwiY2FsY3VsYXRlRGVsdGFUaW1lIiwiZHQiLCJFVkVOVF9CRUZPUkVfVVBEQVRFIiwic3RhcnRQaGFzZSIsInVwZGF0ZVBoYXNlIiwidXBkYXRlIiwibGF0ZVVwZGF0ZVBoYXNlIiwicG9zdFVwZGF0ZSIsIkVWRU5UX0JFRk9SRV9EUkFXIiwiZnJhbWVNb3ZlIiwiZGV2aWNlIiwicHJlc2VudCIsIkVWRU5UX0FGVEVSX0RSQVciLCJmcmFtZVVwZGF0ZUxpc3RlbmVycyIsImJvb2tPZkNoYW5nZSIsImNsZWFyIiwiRVZFTlRfSU5JVCIsIlJvb3QiLCJfZ2Z4RGV2aWNlIiwicm9vdEluZm8iLCJpbml0aWFsaXplIiwiRXZlbnRUYXJnZXQiLCJFVkVOVF9CRUZPUkVfUEhZU0lDUyIsIkVWRU5UX0FGVEVSX1BIWVNJQ1MiLCJpbnN0YW5jZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlEQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7TUFvRWFBLFE7OztBQUVUOzs7Ozs7QUFLQTs7Ozs7OztBQVFBOzs7Ozs7QUFLQTs7Ozs7OztBQVFBOzs7Ozs7O0FBTUE7Ozs7Ozs7QUFRQTs7Ozs7OztBQU1BOzs7Ozs7O0FBUUE7Ozs7Ozs7QUFNQTs7Ozs7OztBQVFBOzs7Ozs7QUFLQTs7Ozs7OztBQVFBOzs7Ozs7QUFLQTs7Ozs7OztBQVFBOzs7Ozs7QUFLQTs7Ozs7OztBQVFBOzs7Ozs7QUFLQTs7Ozs7OztBQVFBOzs7Ozs7O0FBUUE7Ozs7OztBQXdCQSx3QkFBZTtBQUFBOztBQUFBOztBQUNYO0FBRFcsWUFkUkMsY0FjUTtBQUFBLFlBYlJDLGNBYVE7QUFBQSxZQVpQQyxRQVlPO0FBQUEsWUFYUEMsT0FXTztBQUFBLFlBVlBDLHdCQVVPO0FBQUEsWUFUUEMsS0FTTztBQUFBLFlBUlBDLGFBUU87QUFBQSxZQVBQQyxNQU9PO0FBQUEsWUFOUEMsWUFNTztBQUFBLFlBTFBDLFdBS087QUFBQSxZQUpQQyxVQUlPO0FBQUEsWUFIUEMsVUFHTztBQUFBLFlBRlBDLFFBRU87QUFHWCxZQUFLVixRQUFMLEdBQWdCLEtBQWhCLENBSFcsQ0FJWDs7QUFDQSxZQUFLQyxPQUFMLEdBQWUsS0FBZixDQUxXLENBTVg7O0FBQ0EsWUFBS0Msd0JBQUwsR0FBZ0MsS0FBaEMsQ0FQVyxDQVNYOztBQUNBLFlBQUtDLEtBQUwsR0FBYSxJQUFiLENBVlcsQ0FZWDs7QUFDQSxZQUFLQyxhQUFMLEdBQXFCLEVBQXJCO0FBQ0EsWUFBS0MsTUFBTCxHQUFjLElBQWQsQ0FkVyxDQWdCWDs7QUFDQSxZQUFLQyxZQUFMLEdBQW9CLENBQXBCO0FBQ0EsWUFBS0MsV0FBTCxHQUFtQixDQUFuQjtBQUNBLFlBQUtDLFVBQUwsR0FBa0IsR0FBbEIsQ0FuQlcsQ0FxQlg7O0FBQ0EsWUFBS0MsVUFBTCxHQUFrQixJQUFJRSxvQkFBSixFQUFsQixDQXRCVyxDQXVCWDs7QUFDQSxZQUFLYixjQUFMLEdBQXNCLElBQUljLHNDQUFKLEVBQXRCLENBeEJXLENBeUJYOztBQUNBLFlBQUtiLGNBQUwsR0FBc0IsSUFBSWMsc0JBQUosRUFBdEI7QUFFQSxZQUFLSCxRQUFMLEdBQWdCLEVBQWhCO0FBRUFJLE1BQUFBLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRQyxJQUFSLENBQWFDLFdBQUtDLHFCQUFsQixFQUF5QyxNQUFLQywwQkFBOUM7QUE5Qlc7QUErQmQ7QUFFRDs7Ozs7OzsyQ0FHNkI7QUFDekIsWUFBTUMsR0FBRyxHQUFHQyxXQUFXLENBQUNELEdBQVosRUFBWjtBQUVBLGFBQUtaLFVBQUwsR0FBa0IsQ0FBQ1ksR0FBRyxHQUFHLEtBQUtiLFdBQVosSUFBMkIsSUFBN0M7O0FBQ0EsWUFBSWUsMkJBQVUsS0FBS2QsVUFBTCxHQUFrQixDQUFoQyxFQUFvQztBQUNoQyxlQUFLQSxVQUFMLEdBQWtCLElBQUksSUFBdEI7QUFDSDs7QUFFRCxhQUFLRCxXQUFMLEdBQW1CYSxHQUFuQjtBQUNIO0FBRUQ7Ozs7Ozs7Ozs7O2tDQVFvQkcsTyxFQUFlO0FBQy9CLFlBQU1DLFNBQVMsR0FBR1YsRUFBRSxDQUFDQyxJQUFILENBQVFTLFNBQTFCO0FBQ0EsWUFBTUMsSUFBSSxHQUFHWCxFQUFFLENBQUNXLElBQWhCO0FBQ0EsWUFBTUMsR0FBRyxHQUFHRixTQUFTLENBQUNHLHFCQUFWLEVBQVo7QUFDQSxZQUFNQyxJQUFJLEdBQUdGLEdBQUcsQ0FBQ0UsSUFBSixHQUFXQyxNQUFNLENBQUNDLFdBQWxCLEdBQWdDTixTQUFTLENBQUNPLFVBQXZEO0FBQ0EsWUFBTUMsR0FBRyxHQUFHTixHQUFHLENBQUNNLEdBQUosR0FBVUgsTUFBTSxDQUFDSSxXQUFqQixHQUErQlQsU0FBUyxDQUFDVSxTQUFyRDtBQUNBLFlBQU1DLENBQUMsR0FBR1YsSUFBSSxDQUFDVyxpQkFBTCxJQUEwQmIsT0FBTyxDQUFDWSxDQUFSLEdBQVlQLElBQXRDLENBQVY7QUFDQSxZQUFNUyxDQUFDLEdBQUdaLElBQUksQ0FBQ1csaUJBQUwsSUFBMEJKLEdBQUcsR0FBR04sR0FBRyxDQUFDWSxNQUFWLEdBQW1CZixPQUFPLENBQUNjLENBQXJELENBQVY7QUFDQSxlQUFPWixJQUFJLENBQUNjLFVBQUwsR0FBa0IsZUFBR2QsSUFBSSxDQUFDZSxhQUFMLENBQW1CQyxLQUFuQixHQUEyQkosQ0FBOUIsRUFBaUNGLENBQWpDLENBQWxCLEdBQXdELGVBQUdBLENBQUgsRUFBTUUsQ0FBTixDQUEvRDtBQUNIO0FBRUQ7Ozs7Ozs7Ozs7O2tDQVFvQkssTyxFQUFlO0FBQy9CLFlBQU1sQixTQUFTLEdBQUdWLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRUyxTQUExQjtBQUNBLFlBQU1DLElBQUksR0FBR1gsRUFBRSxDQUFDVyxJQUFoQjtBQUNBLFlBQU1DLEdBQUcsR0FBR0YsU0FBUyxDQUFDRyxxQkFBVixFQUFaO0FBQ0EsWUFBTUMsSUFBSSxHQUFHRixHQUFHLENBQUNFLElBQUosR0FBV0MsTUFBTSxDQUFDQyxXQUFsQixHQUFnQ04sU0FBUyxDQUFDTyxVQUF2RDtBQUNBLFlBQU1DLEdBQUcsR0FBR04sR0FBRyxDQUFDTSxHQUFKLEdBQVVILE1BQU0sQ0FBQ0ksV0FBakIsR0FBK0JULFNBQVMsQ0FBQ1UsU0FBckQ7QUFDQSxZQUFNWCxPQUFPLEdBQUcsZUFBRyxDQUFILEVBQU0sQ0FBTixDQUFoQjs7QUFDQSxZQUFJRSxJQUFJLENBQUNjLFVBQVQsRUFBcUI7QUFDakJoQixVQUFBQSxPQUFPLENBQUNZLENBQVIsR0FBWVAsSUFBSSxHQUFHYyxPQUFPLENBQUNMLENBQVIsR0FBWVosSUFBSSxDQUFDVyxpQkFBcEM7QUFDQWIsVUFBQUEsT0FBTyxDQUFDYyxDQUFSLEdBQVlMLEdBQUcsR0FBR04sR0FBRyxDQUFDWSxNQUFWLEdBQW1CLENBQUNiLElBQUksQ0FBQ2UsYUFBTCxDQUFtQkMsS0FBbkIsR0FBMkJDLE9BQU8sQ0FBQ1AsQ0FBcEMsSUFBeUNWLElBQUksQ0FBQ1csaUJBQTdFO0FBQ0gsU0FIRCxNQUlLO0FBQ0RiLFVBQUFBLE9BQU8sQ0FBQ1ksQ0FBUixHQUFZUCxJQUFJLEdBQUdjLE9BQU8sQ0FBQ1AsQ0FBUixHQUFZVixJQUFJLENBQUNXLGlCQUFwQztBQUNBYixVQUFBQSxPQUFPLENBQUNjLENBQVIsR0FBWUwsR0FBRyxHQUFHTixHQUFHLENBQUNZLE1BQVYsR0FBbUJJLE9BQU8sQ0FBQ0wsQ0FBUixHQUFZWixJQUFJLENBQUNXLGlCQUFoRDtBQUNIOztBQUNELGVBQU9iLE9BQVA7QUFDSDtBQUVEOzs7Ozs7NEJBR2M7QUFDVixhQUFLckIsd0JBQUwsR0FBZ0MsSUFBaEM7QUFDSDtBQUVEOzs7Ozs7Ozs7O21DQU9xQjtBQUNqQixlQUFPLGlCQUFLWSxFQUFFLENBQUM2QixPQUFSLENBQVA7QUFDSDtBQUVEOzs7Ozs7Ozs7Ozs7OzsyQ0FXNkI7QUFDekIsZUFBTyxpQkFBSzdCLEVBQUUsQ0FBQzZCLE9BQVIsQ0FBUDtBQUNIO0FBRUQ7Ozs7Ozs7Ozs7OzhCQVFnQjtBQUNaLFlBQUksS0FBSzFDLE9BQVQsRUFBa0I7QUFDZDtBQUNIOztBQUNELGFBQUtBLE9BQUwsR0FBZSxJQUFmO0FBQ0g7QUFFRDs7Ozs7Ozs7d0NBSzBCO0FBQ3RCYSxRQUFBQSxFQUFFLENBQUM4QixNQUFILENBQVVDLFVBQVY7QUFDSDtBQUVEOzs7Ozs7Ozs7c0NBTXdCO0FBQ3BCO0FBQ0EsYUFBS3BDLFVBQUwsQ0FBZ0JxQyxhQUFoQjs7QUFDQSxhQUFLaEQsY0FBTCxDQUFvQmdELGFBQXBCOztBQUVBLGFBQUsvQyxjQUFMLENBQW9CZ0QsS0FBcEIsR0FMb0IsQ0FPcEI7OztBQUNBLFlBQUlDLHFCQUFKLEVBQWtCO0FBQ2RBLGdDQUFhQyxVQUFiLENBQXdCLEtBQXhCO0FBQ0gsU0FWbUIsQ0FZcEI7OztBQUVBLFlBQUksQ0FBQ0Msd0JBQUwsRUFBYTtBQUNULGNBQUlwQyxFQUFFLENBQUNxQyxPQUFILENBQVcsS0FBSzlDLE1BQWhCLENBQUosRUFBNkI7QUFDekIsaUJBQUtBLE1BQUwsQ0FBYStDLE9BQWI7QUFDSDs7QUFDRCxlQUFLL0MsTUFBTCxHQUFjLElBQWQ7QUFDSDs7QUFFRCxhQUFLZ0QsYUFBTDs7QUFFQSxZQUFJLEtBQUtsRCxLQUFMLElBQWMsSUFBbEIsRUFBd0I7QUFDcEIsZUFBS0EsS0FBTCxDQUFXaUQsT0FBWDtBQUNIOztBQUNELGFBQUtqRCxLQUFMLEdBQWEsSUFBYixDQTFCb0IsQ0E0QnBCOztBQUNBVyxRQUFBQSxFQUFFLENBQUM4QixNQUFILENBQVVDLFVBQVY7QUFDSDtBQUVEOzs7Ozs7OzhCQUlnQjtBQUNaLGFBQUtTLGFBQUw7QUFFQSxhQUFLQyxJQUFMLENBQVUxRCxRQUFRLENBQUMyRCxXQUFuQjs7QUFFQSxZQUFJUixxQkFBSixFQUFrQjtBQUNkQSxnQ0FBYUMsVUFBYixDQUF3QixJQUF4QjtBQUNIOztBQUVELGFBQUtRLGNBQUw7QUFDSDtBQUVEOzs7Ozs7Ozs7Ozs7d0NBUzBCQyxLLEVBQWNDLGlCLEVBQWdEQyxVLEVBQXVDO0FBQzNIOUMsUUFBQUEsRUFBRSxDQUFDK0MsUUFBSCxDQUFZSCxLQUFLLFlBQVk1QyxFQUFFLENBQUNnRCxLQUFoQyxFQUF1QyxJQUF2Qzs7QUFFQSxZQUFNQyxJQUFJLEdBQUdqRCxFQUFFLENBQUM4QixNQUFILENBQVVvQixnQkFBVixDQUEyQk4sS0FBSyxDQUFDSyxJQUFqQyxDQUFiLENBSDJILENBSTNIOzs7QUFDQWpELFFBQUFBLEVBQUUsQ0FBQzhCLE1BQUgsQ0FBVXFCLFVBQVYsQ0FBcUJGLElBQXJCOztBQUVBLFlBQUlHLDJCQUFTNUMsdUJBQWIsRUFBb0I7QUFDaEI2QyxVQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYSxXQUFiO0FBQ0gsU0FUMEgsQ0FVM0g7OztBQUNBVixRQUFBQSxLQUFLLENBQUNXLEtBQU4sR0FYMkgsQ0FXM0c7OztBQUNoQixZQUFJSCwyQkFBUzVDLHVCQUFiLEVBQW9CO0FBQ2hCNkMsVUFBQUEsT0FBTyxDQUFDRyxPQUFSLENBQWdCLFdBQWhCO0FBQ0gsU0FkMEgsQ0FlM0g7OztBQUNBLFlBQUlKLDJCQUFTNUMsdUJBQWIsRUFBb0I7QUFDaEI2QyxVQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYSxlQUFiO0FBQ0g7O0FBQ0QsWUFBTUcsZUFBZSxHQUFHQyxNQUFNLENBQUNDLElBQVAsQ0FBWTNELEVBQUUsQ0FBQ0MsSUFBSCxDQUFRMkQsaUJBQXBCLEVBQXVDQyxHQUF2QyxDQUEyQyxVQUFDeEMsQ0FBRCxFQUFPO0FBQ3RFLGlCQUFPckIsRUFBRSxDQUFDQyxJQUFILENBQVEyRCxpQkFBUixDQUEwQnZDLENBQTFCLENBQVA7QUFDSCxTQUZ1QixDQUF4QixDQW5CMkgsQ0FzQjNIOztBQUNBLGFBQUssSUFBSXlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdMLGVBQWUsQ0FBQ00sTUFBcEMsRUFBNENELENBQUMsRUFBN0MsRUFBaUQ7QUFDN0MsY0FBTUUsSUFBSSxHQUFHUCxlQUFlLENBQUNLLENBQUQsQ0FBNUI7QUFDQUUsVUFBQUEsSUFBSSxDQUFDdkIsSUFBTCxDQUFVekMsRUFBRSxDQUFDaUUsSUFBSCxDQUFRQywwQkFBbEIsRUFBOEN0QixLQUFLLENBQUN1QixXQUFwRDtBQUNBLGNBQU1DLFNBQVMsR0FBR3hCLEtBQUssQ0FBQ3lCLGNBQU4sQ0FBcUJMLElBQUksQ0FBQ2YsSUFBMUIsQ0FBbEI7O0FBQ0EsY0FBSW1CLFNBQUosRUFBZTtBQUNYO0FBQ0EsZ0JBQU1FLEtBQUssR0FBR0YsU0FBUyxDQUFDRyxlQUFWLEVBQWQ7O0FBQ0FILFlBQUFBLFNBQVMsQ0FBQ0ksaUJBQVY7O0FBQ0E1QixZQUFBQSxLQUFLLENBQUM2QixXQUFOLENBQWtCVCxJQUFsQixFQUF3Qk0sS0FBeEI7QUFDSCxXQUxELE1BTUs7QUFDRE4sWUFBQUEsSUFBSSxDQUFDVSxNQUFMLEdBQWM5QixLQUFkO0FBQ0g7QUFDSjs7QUFDRCxZQUFJUSwyQkFBUzVDLHVCQUFiLEVBQW9CO0FBQ2hCNkMsVUFBQUEsT0FBTyxDQUFDRyxPQUFSLENBQWdCLGVBQWhCO0FBQ0g7O0FBQ0QsWUFBTW1CLFFBQVEsR0FBRyxLQUFLcEYsTUFBdEI7O0FBQ0EsWUFBSSxDQUFDNkMsd0JBQUwsRUFBYTtBQUNUO0FBQ0EsY0FBSWdCLDJCQUFTNUMsdUJBQWIsRUFBb0I7QUFDaEI2QyxZQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYSxhQUFiO0FBQ0g7O0FBQ0QsY0FBTXNCLGlCQUFpQixHQUFHRCxRQUFRLElBQUlBLFFBQVEsQ0FBQ0MsaUJBQXJCLElBQTBDRCxRQUFRLENBQUNFLFlBQTdFO0FBQ0EsNkNBQVlELGlCQUFaLEVBQStCaEMsS0FBSyxDQUFDaUMsWUFBckMsRUFBbURwQixlQUFuRDs7QUFDQSxjQUFJTCwyQkFBUzVDLHVCQUFiLEVBQW9CO0FBQ2hCNkMsWUFBQUEsT0FBTyxDQUFDRyxPQUFSLENBQWdCLGFBQWhCO0FBQ0g7QUFDSixTQW5EMEgsQ0FxRDNIOzs7QUFDQSxZQUFJSiwyQkFBUzVDLHVCQUFiLEVBQW9CO0FBQ2hCNkMsVUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsU0FBYjtBQUNIOztBQUNELFlBQUl0RCxFQUFFLENBQUNxQyxPQUFILENBQVdzQyxRQUFYLENBQUosRUFBMEI7QUFDdEJBLFVBQUFBLFFBQVEsQ0FBRXJDLE9BQVY7QUFDSDs7QUFFRCxhQUFLL0MsTUFBTCxHQUFjLElBQWQsQ0E3RDJILENBK0QzSDs7QUFDQXVGLHlCQUFTQyxnQkFBVDs7QUFDQSxZQUFJM0IsMkJBQVM1Qyx1QkFBYixFQUFvQjtBQUFFNkMsVUFBQUEsT0FBTyxDQUFDRyxPQUFSLENBQWdCLFNBQWhCO0FBQTZCOztBQUVuRCxZQUFJWCxpQkFBSixFQUF1QjtBQUNuQkEsVUFBQUEsaUJBQWlCO0FBQ3BCOztBQUNELGFBQUtKLElBQUwsQ0FBVXpDLEVBQUUsQ0FBQ2pCLFFBQUgsQ0FBWWlHLHlCQUF0QixFQUFpRHBDLEtBQWpELEVBdEUySCxDQXdFM0g7O0FBQ0EsYUFBS3JELE1BQUwsR0FBY3FELEtBQWQ7O0FBRUEsWUFBSVEsMkJBQVM1Qyx1QkFBYixFQUFvQjtBQUNoQjZDLFVBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLFVBQWI7QUFDSCxTQTdFMEgsQ0E4RTNIOzs7QUFDQVYsUUFBQUEsS0FBSyxDQUFDcUMsU0FBTjs7QUFDQSxZQUFJN0IsMkJBQVM1Qyx1QkFBYixFQUFvQjtBQUNoQjZDLFVBQUFBLE9BQU8sQ0FBQ0csT0FBUixDQUFnQixVQUFoQjtBQUNILFNBbEYwSCxDQW1GM0g7OztBQUNBLFlBQUksS0FBS25FLEtBQVQsRUFBZ0I7QUFDWixlQUFLQSxLQUFMLENBQVc2RixtQkFBWDtBQUNIOztBQUNELGFBQUt2QyxjQUFMOztBQUVBLFlBQUlHLFVBQUosRUFBZ0I7QUFDWkEsVUFBQUEsVUFBVSxDQUFDLElBQUQsRUFBT0YsS0FBUCxDQUFWO0FBQ0g7O0FBQ0QsYUFBS0gsSUFBTCxDQUFVekMsRUFBRSxDQUFDakIsUUFBSCxDQUFZb0csd0JBQXRCLEVBQWdEdkMsS0FBaEQ7QUFDSDtBQUVEOzs7Ozs7Ozs7Ozs7OytCQVVpQkEsSyxFQUFjQyxpQixFQUFnREMsVSxFQUF1QztBQUFBOztBQUNsSDlDLFFBQUFBLEVBQUUsQ0FBQytDLFFBQUgsQ0FBWUgsS0FBWixFQUFtQixJQUFuQjtBQUNBNUMsUUFBQUEsRUFBRSxDQUFDK0MsUUFBSCxDQUFZSCxLQUFLLFlBQVk1QyxFQUFFLENBQUNnRCxLQUFoQyxFQUF1QyxJQUF2QyxFQUZrSCxDQUlsSDtBQUNBOztBQUNBSixRQUFBQSxLQUFLLENBQUNXLEtBQU4sR0FOa0gsQ0FRbEg7OztBQUNBLGFBQUtyRCxJQUFMLENBQVVGLEVBQUUsQ0FBQ2pCLFFBQUgsQ0FBWXFHLGtCQUF0QixFQUEwQyxZQUFNO0FBQzVDLFVBQUEsTUFBSSxDQUFDQyxpQkFBTCxDQUF1QnpDLEtBQXZCLEVBQThCQyxpQkFBOUIsRUFBaURDLFVBQWpEO0FBQ0gsU0FGRDtBQUdILE8sQ0FFRDs7OztvQ0FFc0J3QyxHLEVBQXNCO0FBQ3hDLFlBQU1DLE1BQU0sR0FBR3ZGLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRdUYsV0FBdkI7O0FBQ0EsWUFBSSxPQUFPRixHQUFQLEtBQWUsUUFBbkIsRUFBNkI7QUFDekIsY0FBSSxDQUFDQSxHQUFHLENBQUNHLFFBQUosQ0FBYSxRQUFiLENBQUwsRUFBNkI7QUFDekJILFlBQUFBLEdBQUcsSUFBSSxRQUFQO0FBQ0g7O0FBQ0QsY0FBSUEsR0FBRyxDQUFDLENBQUQsQ0FBSCxLQUFXLEdBQVgsSUFBa0IsQ0FBQ0EsR0FBRyxDQUFDSSxVQUFKLENBQWUsT0FBZixDQUF2QixFQUFnRDtBQUM1Q0osWUFBQUEsR0FBRyxHQUFHLE1BQU1BLEdBQVosQ0FENEMsQ0FDeEI7QUFDdkIsV0FOd0IsQ0FPekI7QUFDQTs7O0FBQ0EsZUFBSyxJQUFJeEIsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR3lCLE1BQU0sQ0FBQ3hCLE1BQTNCLEVBQW1DRCxDQUFDLEVBQXBDLEVBQXdDO0FBQ3BDLGdCQUFNNkIsSUFBSSxHQUFHSixNQUFNLENBQUN6QixDQUFELENBQW5COztBQUNBLGdCQUFJNkIsSUFBSSxDQUFDQyxHQUFMLENBQVNILFFBQVQsQ0FBa0JILEdBQWxCLENBQUosRUFBNEI7QUFDeEIscUJBQU9LLElBQVA7QUFDSDtBQUNKO0FBQ0osU0FmRCxNQWdCSyxJQUFJLE9BQU9MLEdBQVAsS0FBZSxRQUFuQixFQUE2QjtBQUM5QixjQUFJLEtBQUtBLEdBQUwsSUFBWUEsR0FBRyxHQUFHQyxNQUFNLENBQUN4QixNQUE3QixFQUFxQztBQUNqQyxtQkFBT3dCLE1BQU0sQ0FBQ0QsR0FBRCxDQUFiO0FBQ0gsV0FGRCxNQUdLO0FBQ0R0RixZQUFBQSxFQUFFLENBQUM2RixPQUFILENBQVcsSUFBWCxFQUFpQlAsR0FBakI7QUFDSDtBQUNKLFNBUEksTUFRQTtBQUNEdEYsVUFBQUEsRUFBRSxDQUFDNkYsT0FBSCxDQUFXLElBQVgsRUFBaUJQLEdBQWpCO0FBQ0g7O0FBQ0QsZUFBTyxJQUFQO0FBQ0g7QUFFRDs7Ozs7Ozs7Ozs7Z0NBUWtCUSxTLEVBQW1CaEQsVSxFQUF1Q2lELFUsRUFBZ0M7QUFDeEcsWUFBSSxLQUFLekcsYUFBVCxFQUF3QjtBQUNwQlUsVUFBQUEsRUFBRSxDQUFDNkYsT0FBSCxDQUFXLElBQVgsRUFBaUJDLFNBQWpCLEVBQTRCLEtBQUt4RyxhQUFqQztBQUNBLGlCQUFPLEtBQVA7QUFDSDs7QUFDRCxZQUFNcUcsSUFBSSxHQUFHLEtBQUtLLGFBQUwsQ0FBbUJGLFNBQW5CLENBQWI7O0FBQ0EsWUFBSUgsSUFBSixFQUFVO0FBQ04sY0FBTTFDLEtBQUksR0FBRzBDLElBQUksQ0FBQzFDLElBQWxCO0FBQ0EsZUFBS1IsSUFBTCxDQUFVekMsRUFBRSxDQUFDakIsUUFBSCxDQUFZa0gsMEJBQXRCLEVBQWtESCxTQUFsRDtBQUNBLGVBQUt4RyxhQUFMLEdBQXFCd0csU0FBckI7O0FBQ0EsZUFBS0ksZ0JBQUwsQ0FBc0JqRCxLQUF0QixFQUE0QkgsVUFBNUIsRUFBd0NpRCxVQUF4Qzs7QUFDQSxpQkFBTyxJQUFQO0FBQ0gsU0FORCxNQU9LO0FBQ0QvRixVQUFBQSxFQUFFLENBQUM2RixPQUFILENBQVcsSUFBWCxFQUFpQkMsU0FBakI7QUFDQSxpQkFBTyxLQUFQO0FBQ0g7QUFDSjtBQUVEOzs7Ozs7Ozs7Ozs7Ozs7bUNBK0JJQSxTLEVBQ0FLLEksRUFDQUMsSSxFQUErQjtBQUMvQixZQUFJQyxVQUFKO0FBQ0EsWUFBSUMsUUFBSjs7QUFFQSxZQUFJRixJQUFJLEtBQUtHLFNBQWIsRUFBd0I7QUFDcEJELFVBQUFBLFFBQVEsR0FBR0gsSUFBWDtBQUNBRSxVQUFBQSxVQUFVLEdBQUcsS0FBSyxDQUFsQjtBQUNILFNBSEQsTUFHTztBQUNIQyxVQUFBQSxRQUFRLEdBQUdGLElBQVg7QUFDQUMsVUFBQUEsVUFBVSxHQUFHRixJQUFiO0FBQ0g7O0FBRUQsWUFBTVIsSUFBSSxHQUFHLEtBQUtLLGFBQUwsQ0FBbUJGLFNBQW5CLENBQWI7O0FBQ0EsWUFBSUgsSUFBSixFQUFVO0FBQ04sZUFBS2xELElBQUwsQ0FBVXpDLEVBQUUsQ0FBQ2pCLFFBQUgsQ0FBWWtILDBCQUF0QixFQUFrREgsU0FBbEQ7QUFDQTlGLFVBQUFBLEVBQUUsQ0FBQzhCLE1BQUgsQ0FBVTBFLElBQVYsQ0FBZTtBQUFFdkQsWUFBQUEsSUFBSSxFQUFFMEMsSUFBSSxDQUFDMUMsSUFBYjtBQUFtQndELFlBQUFBLElBQUksRUFBRTtBQUF6QixXQUFmLEVBQ0lKLFVBREosRUFFSSxVQUFDSyxLQUFELEVBQXNCQyxLQUF0QixFQUE0QztBQUN4QyxnQkFBSUQsS0FBSixFQUFXO0FBQ1AxRyxjQUFBQSxFQUFFLENBQUM2RixPQUFILENBQVcsSUFBWCxFQUFpQkMsU0FBakIsRUFBNEJZLEtBQUssQ0FBQ0UsT0FBbEM7QUFDSDs7QUFDRCxnQkFBSU4sUUFBSixFQUFjO0FBQ1ZBLGNBQUFBLFFBQVEsQ0FBQ0ksS0FBRCxFQUFRQyxLQUFSLENBQVI7QUFDSDtBQUNKLFdBVEw7QUFVSCxTQVpELE1BYUs7QUFDRCxjQUFNRCxNQUFLLEdBQUcsZ0NBQWdDWixTQUFoQyxHQUE0Qyw0Q0FBMUQ7O0FBQ0EsY0FBSVEsUUFBSixFQUFjO0FBQ1ZBLFlBQUFBLFFBQVEsQ0FBQyxJQUFJTyxLQUFKLENBQVVILE1BQVYsQ0FBRCxDQUFSO0FBQ0g7O0FBQ0QxRyxVQUFBQSxFQUFFLENBQUMwRyxLQUFILENBQVMsbUJBQW1CQSxNQUE1QjtBQUNIO0FBQ0o7QUFFRDs7Ozs7Ozs7O3VDQWFJekQsSSxFQUNBa0QsSSxFQUNBQyxJLEVBQ0FVLEksRUFBZ0I7QUFDaEIsWUFBSWhFLFVBQUo7QUFDQSxZQUFJaUQsVUFBSjtBQUNBLFlBQUlnQixRQUFKOztBQUVBLFlBQUkzRSw0QkFBVSxPQUFPK0QsSUFBUCxLQUFnQixTQUE5QixFQUF5QztBQUNyQ1ksVUFBQUEsUUFBUSxHQUFHWixJQUFYO0FBQ0FKLFVBQUFBLFVBQVUsR0FBR0ssSUFBYjtBQUNILFNBSEQsTUFHTyxJQUFJaEUsNEJBQVUsT0FBT2dFLElBQVAsS0FBZ0IsU0FBOUIsRUFBeUM7QUFDNUNXLFVBQUFBLFFBQVEsR0FBR1gsSUFBWDtBQUNBdEQsVUFBQUEsVUFBVSxHQUFHcUQsSUFBYjtBQUNILFNBSE0sTUFHQTtBQUNIckQsVUFBQUEsVUFBVSxHQUFHcUQsSUFBYjtBQUNBSixVQUFBQSxVQUFVLEdBQUdLLElBQWI7QUFDQVcsVUFBQUEsUUFBUSxHQUFHRCxJQUFYO0FBQ0gsU0FmZSxDQWlCaEI7OztBQUNBekQsUUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsZUFBZUwsSUFBNUI7QUFDQWpELFFBQUFBLEVBQUUsQ0FBQ2dILFlBQUgsQ0FBZ0JDLFNBQWhCLENBQTBCaEUsSUFBMUIsRUFBZ0MsVUFBQ3lELEtBQUQsRUFBUVEsVUFBUixFQUF1QjtBQUNuRDdELFVBQUFBLE9BQU8sQ0FBQ0csT0FBUixDQUFnQixlQUFlUCxJQUEvQjtBQUNBLGNBQU1rRSxJQUFJLEdBQUdDLFFBQWI7QUFDQUQsVUFBQUEsSUFBSSxDQUFDN0gsYUFBTCxHQUFxQixFQUFyQjs7QUFDQSxjQUFJb0gsS0FBSixFQUFXO0FBQ1BBLFlBQUFBLEtBQUssR0FBRywyQkFBMkJBLEtBQW5DO0FBQ0ExRyxZQUFBQSxFQUFFLENBQUMwRyxLQUFILENBQVNBLEtBQVQ7QUFDSCxXQUhELE1BSUs7QUFDRCxnQkFBSVEsVUFBVSxZQUFZbEgsRUFBRSxDQUFDcUgsVUFBN0IsRUFBeUM7QUFDckMsa0JBQU16RSxNQUFLLEdBQUdzRSxVQUFVLENBQUN0RSxLQUF6QjtBQUNBQSxjQUFBQSxNQUFLLENBQUMwRSxHQUFOLEdBQVlKLFVBQVUsQ0FBQ0ssS0FBdkI7QUFDQTNFLGNBQUFBLE1BQUssQ0FBQzRFLEtBQU4sR0FBY04sVUFBVSxDQUFDTSxLQUF6Qjs7QUFDQSxrQkFBSXBGLHdCQUFKLEVBQVk7QUFDUixvQkFBSSxDQUFDMkUsUUFBTCxFQUFlO0FBQ1hJLGtCQUFBQSxJQUFJLENBQUM5QixpQkFBTCxDQUF1QnpDLE1BQXZCLEVBQThCbUQsVUFBOUIsRUFBMENqRCxVQUExQztBQUNILGlCQUZELE1BR0s7QUFDREYsa0JBQUFBLE1BQUssQ0FBQ1csS0FBTjs7QUFDQSxzQkFBSVQsVUFBSixFQUFnQjtBQUNaQSxvQkFBQUEsVUFBVSxDQUFDLElBQUQsRUFBT0YsTUFBUCxDQUFWO0FBQ0g7QUFDSjtBQUNKLGVBVkQsTUFXSztBQUNEdUUsZ0JBQUFBLElBQUksQ0FBQzlCLGlCQUFMLENBQXVCekMsTUFBdkIsRUFBOEJtRCxVQUE5QixFQUEwQ2pELFVBQTFDO0FBQ0g7O0FBQ0Q7QUFDSCxhQW5CRCxNQW9CSztBQUNENEQsY0FBQUEsS0FBSyxHQUFHLGVBQWV6RCxJQUFmLEdBQXNCLGlCQUE5QjtBQUNBakQsY0FBQUEsRUFBRSxDQUFDMEcsS0FBSCxDQUFTQSxLQUFUO0FBQ0g7QUFDSjs7QUFDRCxjQUFJNUQsVUFBSixFQUFnQjtBQUNaQSxZQUFBQSxVQUFVLENBQUM0RCxLQUFELENBQVY7QUFDSDtBQUNKLFNBckNEO0FBc0NIO0FBRUQ7Ozs7Ozs7K0JBSWlCO0FBQ2IsWUFBSSxDQUFDLEtBQUt2SCxPQUFWLEVBQW1CO0FBQ2Y7QUFDSDs7QUFFRCxhQUFLTSxXQUFMLEdBQW1CYyxXQUFXLENBQUNELEdBQVosRUFBbkI7O0FBQ0EsWUFBSSxDQUFDLEtBQUtiLFdBQVYsRUFBdUI7QUFDbkJPLFVBQUFBLEVBQUUsQ0FBQ3lILEtBQUgsQ0FBUyxJQUFUO0FBQ0g7O0FBRUQsYUFBS3RJLE9BQUwsR0FBZSxLQUFmO0FBQ0EsYUFBS08sVUFBTCxHQUFrQixDQUFsQjtBQUNIO0FBRUQ7Ozs7Ozs7Ozs7bUNBT3FCZ0ksSyxFQUFnQjtBQUNqQyxZQUFJLENBQUMxSCxFQUFFLENBQUMySCxNQUFILENBQVVDLElBQWYsRUFBcUI7QUFDakI7QUFDSDs7QUFDRDVILFFBQUFBLEVBQUUsQ0FBQzJILE1BQUgsQ0FBVUMsSUFBVixDQUFlQyxLQUFmLEdBQXVCLENBQUMsQ0FBQ0gsS0FBekI7QUFDSDtBQUVEOzs7Ozs7Ozs7Ozs7b0NBU3NCSSxVLEVBQW1CO0FBQ3JDLFlBQUksQ0FBQzlILEVBQUUsQ0FBQzJILE1BQUgsQ0FBVUMsSUFBZixFQUFxQjtBQUNqQjtBQUNIOztBQUNENUgsUUFBQUEsRUFBRSxDQUFDMkgsTUFBSCxDQUFVQyxJQUFWLENBQWVHLGVBQWYsR0FBaUNELFVBQWpDO0FBQ0g7Ozs7QUFNRDs7Ozs7d0NBSzBCO0FBQ3RCLGVBQU8sS0FBS3ZJLE1BQVo7QUFDSDtBQUVEOzs7Ozs7Ozs7Ozs7O2lDQVVpQztBQUM3QixlQUFPLEtBQUtBLE1BQVo7QUFDSDtBQUVEOzs7Ozs7Ozs2Q0FLK0I7QUFDM0IsZUFBTyxPQUFPUyxFQUFFLENBQUNDLElBQUgsQ0FBUStILFlBQVIsRUFBZDtBQUNIO0FBRUQ7Ozs7Ozs7Ozs7OzJDQVE2Qk4sSyxFQUFlO0FBQ3hDMUgsUUFBQUEsRUFBRSxDQUFDQyxJQUFILENBQVFnSSxZQUFSLENBQXFCQyxJQUFJLENBQUNDLEtBQUwsQ0FBVyxPQUFPVCxLQUFsQixDQUFyQjtBQUNIO0FBRUQ7Ozs7Ozs7cUNBSXVCO0FBQ25CLGVBQU8sS0FBS2hJLFVBQVo7QUFDSDtBQUVEOzs7Ozs7O3VDQUl5QjtBQUNyQixlQUFPLEtBQUtELFdBQVo7QUFDSDtBQUVEOzs7Ozs7O3VDQUl5QjtBQUNyQixlQUFPLEtBQUtELFlBQVo7QUFDSDtBQUVEOzs7Ozs7O2lDQUltQjtBQUNmLGVBQU8sS0FBS0wsT0FBWjtBQUNIO0FBRUQ7Ozs7Ozs7cUNBSXVCO0FBQ25CLGVBQU8sS0FBS1EsVUFBWjtBQUNIO0FBRUQ7Ozs7Ozs7bUNBSXFCeUksUyxFQUFzQjtBQUN2QyxZQUFJLEtBQUt6SSxVQUFMLEtBQW9CeUksU0FBeEIsRUFBbUM7QUFDL0IsZUFBS0MsZ0JBQUwsQ0FBc0IsS0FBSzFJLFVBQTNCO0FBQ0EsZUFBS0EsVUFBTCxHQUFrQnlJLFNBQWxCO0FBQ0EsZUFBS0UsY0FBTCxDQUFvQnpJLHFCQUFVMEksRUFBOUIsRUFBa0NILFNBQWxDLEVBQTZDLEdBQTdDO0FBQ0g7QUFDSjtBQUVEOzs7Ozs7O3FDQUl1QkksSSxFQUFjQyxHLEVBQWFDLFEsRUFBa0I7QUFDaEVELFFBQUFBLEdBQUcsQ0FBQ0UsRUFBSixHQUFTSCxJQUFUO0FBQ0FDLFFBQUFBLEdBQUcsQ0FBQ0MsUUFBSixHQUFlQSxRQUFmO0FBQ0FELFFBQUFBLEdBQUcsQ0FBQ0csSUFBSjs7QUFDQSxhQUFLaEosUUFBTCxDQUFjaUosSUFBZCxDQUFtQkosR0FBbkI7O0FBQ0EsYUFBSzdJLFFBQUwsQ0FBY2tKLElBQWQsQ0FBbUJDLGdCQUFPQyxjQUExQjtBQUNIOzs7dUNBRXdCUCxHLEVBQWE7QUFDbENRLG1CQUFHQyxLQUFILENBQVNDLFVBQVQsQ0FBb0IsS0FBS3ZKLFFBQXpCLEVBQW1DNkksR0FBbkM7O0FBQ0EsYUFBSzdJLFFBQUwsQ0FBY2tKLElBQWQsQ0FBbUJDLGdCQUFPQyxjQUExQjtBQUNIO0FBRUQ7Ozs7Ozs7Z0NBSWtCUixJLEVBQWM7QUFDNUIsZUFBTyxLQUFLNUksUUFBTCxDQUFjd0osSUFBZCxDQUFtQixVQUFDWCxHQUFELEVBQVM7QUFDL0IsaUJBQU9BLEdBQUcsQ0FBQ0UsRUFBSixLQUFXSCxJQUFsQjtBQUNILFNBRk0sQ0FBUDtBQUdIO0FBRUQ7Ozs7Ozs7OzRDQUttQztBQUMvQixlQUFPLEtBQUthLFNBQUwsQ0FBZXJKLEVBQUUsQ0FBQ3NKLGdCQUFILENBQW9CZixFQUFuQyxDQUFQO0FBQ0gsTyxDQUVEOztBQUNBOzs7Ozs7O3VDQUl5QjtBQUNyQixhQUFLckosUUFBTCxHQUFnQixLQUFoQjtBQUNBLGFBQUtPLFdBQUwsR0FBbUJjLFdBQVcsQ0FBQ0QsR0FBWixFQUFuQjtBQUNIO0FBRUQ7Ozs7Ozs7c0NBSXdCO0FBQ3BCLGFBQUtwQixRQUFMLEdBQWdCLElBQWhCO0FBQ0g7QUFFRDs7Ozs7OzsrQkFJaUJvRSxJLEVBQWM7QUFDM0IsWUFBSSxLQUFLbEUsd0JBQVQsRUFBbUM7QUFDL0IsZUFBS0Esd0JBQUwsR0FBZ0MsS0FBaEM7QUFDQSxlQUFLb0QsYUFBTDtBQUNILFNBSEQsTUFJSyxJQUFJLENBQUMsS0FBS3RELFFBQVYsRUFBb0I7QUFDckI7QUFDQSxlQUFLcUssa0JBQUw7QUFDQSxjQUFNQyxFQUFFLEdBQUcsS0FBSzlKLFVBQWhCLENBSHFCLENBS3JCOztBQUNBLGNBQUksQ0FBQyxLQUFLUCxPQUFWLEVBQW1CO0FBQ2YsaUJBQUtzRCxJQUFMLENBQVUxRCxRQUFRLENBQUMwSyxtQkFBbkIsRUFEZSxDQUVmOztBQUNBLGlCQUFLekssY0FBTCxDQUFvQjBLLFVBQXBCLEdBSGUsQ0FJZjs7O0FBQ0EsaUJBQUsxSyxjQUFMLENBQW9CMkssV0FBcEIsQ0FBZ0NILEVBQWhDLEVBTGUsQ0FNZjs7O0FBQ0EsaUJBQUssSUFBSTFGLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUcsS0FBS2xFLFFBQUwsQ0FBY21FLE1BQWxDLEVBQTBDLEVBQUVELENBQTVDLEVBQStDO0FBQzNDLG1CQUFLbEUsUUFBTCxDQUFja0UsQ0FBZCxFQUFpQjhGLE1BQWpCLENBQXdCSixFQUF4QjtBQUNILGFBVGMsQ0FVZjs7O0FBQ0EsaUJBQUt4SyxjQUFMLENBQW9CNkssZUFBcEIsQ0FBb0NMLEVBQXBDLEVBWGUsQ0FZZjs7O0FBQ0EsaUJBQUsvRyxJQUFMLENBQVUxRCxRQUFRLENBQUNxRyxrQkFBbkIsRUFiZSxDQWNmOztBQUNBTiw2QkFBU0MsZ0JBQVQsR0FmZSxDQWlCZjs7O0FBQ0EsaUJBQUssSUFBSWpCLEVBQUMsR0FBRyxDQUFiLEVBQWdCQSxFQUFDLEdBQUcsS0FBS2xFLFFBQUwsQ0FBY21FLE1BQWxDLEVBQTBDLEVBQUVELEVBQTVDLEVBQStDO0FBQzNDLG1CQUFLbEUsUUFBTCxDQUFja0UsRUFBZCxFQUFpQmdHLFVBQWpCLENBQTRCTixFQUE1QjtBQUNIO0FBQ0o7O0FBRUQsZUFBSy9HLElBQUwsQ0FBVTFELFFBQVEsQ0FBQ2dMLGlCQUFuQjs7QUFDQSxlQUFLMUssS0FBTCxDQUFZMkssU0FBWixDQUFzQixLQUFLdEssVUFBM0IsRUE5QnFCLENBK0JyQjs7O0FBQ0EsZUFBS0wsS0FBTCxDQUFZNEssTUFBWixDQUFtQkMsT0FBbkI7O0FBQ0EsZUFBS3pILElBQUwsQ0FBVTFELFFBQVEsQ0FBQ29MLGdCQUFuQjs7QUFFQWpJLGdDQUFha0ksb0JBQWI7O0FBQ0FuRyx1QkFBS29HLFlBQUwsQ0FBa0JDLEtBQWxCOztBQUNBLGVBQUs5SyxZQUFMO0FBQ0g7QUFDSjs7O21EQUVxQztBQUNsQyxhQUFLQSxZQUFMLEdBQW9CLENBQXBCO0FBQ0EsYUFBS0MsV0FBTCxHQUFtQmMsV0FBVyxDQUFDRCxHQUFaLEVBQW5CO0FBQ0EsYUFBS25CLE9BQUwsR0FBZSxLQUFmO0FBQ0EsYUFBS0Msd0JBQUwsR0FBZ0MsS0FBaEMsQ0FKa0MsQ0FNbEM7O0FBQ0EsWUFBSThDLHFCQUFKLEVBQWtCO0FBQ2RBLGdDQUFhQyxVQUFiLENBQXdCLElBQXhCO0FBQ0gsU0FUaUMsQ0FXbEM7QUFDQTs7O0FBQ0EsYUFBS21HLGNBQUwsQ0FBb0J6SSxxQkFBVTBJLEVBQTlCLEVBQWtDLEtBQUs1SSxVQUF2QyxFQUFtRCxHQUFuRDtBQUVBLGFBQUs4QyxJQUFMLENBQVUxRCxRQUFRLENBQUN3TCxVQUFuQjtBQUNIOzs7OEJBRWdCO0FBQ2J2SyxRQUFBQSxFQUFFLENBQUM4QixNQUFILENBQVU4RyxJQUFWLENBQWUsSUFBZjtBQUNBLGFBQUt2SixLQUFMLEdBQWEsSUFBSW1MLFVBQUosQ0FBU3hLLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRd0ssVUFBakIsQ0FBYjtBQUNBLFlBQU1DLFFBQVEsR0FBRyxFQUFqQjs7QUFDQSxZQUFJLENBQUMsS0FBS3JMLEtBQUwsQ0FBV3NMLFVBQVgsQ0FBc0JELFFBQXRCLENBQUwsRUFBc0M7QUFDbEMsaUJBQU8sS0FBUDtBQUNIOztBQUVELGVBQU8sSUFBUDtBQUNIOzs7MEJBdk9XO0FBQ1IsZUFBTyxLQUFLckwsS0FBWjtBQUNIOzs7O0lBbnVCeUJ1TCx3Qjs7O0FBQWpCN0wsRUFBQUEsUSxDQWFjd0wsVSxHQUFhLGU7QUFiM0J4TCxFQUFBQSxRLENBMEJjMkQsVyxHQUFjLGdCO0FBMUI1QjNELEVBQUFBLFEsQ0F3Q2NrSCwwQixHQUE2QiwrQjtBQXhDM0NsSCxFQUFBQSxRLENBc0RjaUcseUIsR0FBNEIsOEI7QUF0RDFDakcsRUFBQUEsUSxDQW9FY29HLHdCLEdBQTJCLDZCO0FBcEV6Q3BHLEVBQUFBLFEsQ0FpRmMwSyxtQixHQUFzQix3QjtBQWpGcEMxSyxFQUFBQSxRLENBOEZjcUcsa0IsR0FBcUIsdUI7QUE5Rm5DckcsRUFBQUEsUSxDQTJHY2dMLGlCLEdBQW9CLHNCO0FBM0dsQ2hMLEVBQUFBLFEsQ0F3SGNvTCxnQixHQUFtQixxQjtBQXhIakNwTCxFQUFBQSxRLENBZ0ljOEwsb0IsR0FBdUIseUI7QUFoSXJDOUwsRUFBQUEsUSxDQXdJYytMLG1CLEdBQXNCLHdCO0FBeElwQy9MLEVBQUFBLFEsQ0EwSUtnTSxRO0FBazFCbEIvSyxFQUFBQSxFQUFFLENBQUNqQixRQUFILEdBQWNBLFFBQWQ7QUFFQTs7Ozs7QUFJTyxNQUFNcUksUUFBa0IsR0FBR3JJLFFBQVEsQ0FBQ2dNLFFBQVQsR0FBb0IvSyxFQUFFLENBQUNvSCxRQUFILEdBQWMsSUFBSXJJLFFBQUosRUFBN0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gQ29weXJpZ2h0IChjKSAyMDA4LTIwMTAgUmljYXJkbyBRdWVzYWRhXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTEtMjAxMiBjb2NvczJkLXgub3JnXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNiBDaHVrb25nIFRlY2hub2xvZ2llcyBJbmMuXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cclxuXHJcbiBodHRwOi8vd3d3LmNvY29zMmQteC5vcmdcclxuXHJcbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG4gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cclxuIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG5cclxuLyogc3BlbGwtY2hlY2tlcjp3b3JkcyBDT09SRCwgUXVlc2FkYSwgSU5JVEVELCBSZW5lcmVyICovXHJcblxyXG4vKipcclxuICogQGNhdGVnb3J5IGNvcmVcclxuICovXHJcblxyXG5pbXBvcnQgeyBTY2VuZUFzc2V0IH0gZnJvbSAnLi9hc3NldHMnO1xyXG5pbXBvcnQgU3lzdGVtIGZyb20gJy4vY29tcG9uZW50cy9zeXN0ZW0nO1xyXG5pbXBvcnQgeyBDQ09iamVjdCB9IGZyb20gJy4vZGF0YS9vYmplY3QnO1xyXG5pbXBvcnQgeyBFdmVudFRhcmdldCB9IGZyb20gJy4vZXZlbnQvZXZlbnQtdGFyZ2V0JztcclxuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vZ2FtZSc7XHJcbmltcG9ydCB7IGF1dG9SZWxlYXNlIH0gZnJvbSAnLi9sb2FkLXBpcGVsaW5lL2F1dG8tcmVsZWFzZS11dGlscyc7XHJcbmltcG9ydCB7IENvbG9yLCBzaXplLCB2MiwgVmVjMiB9IGZyb20gJy4vbWF0aCc7XHJcbmltcG9ydCBldmVudE1hbmFnZXIgZnJvbSAnLi9wbGF0Zm9ybS9ldmVudC1tYW5hZ2VyL2V2ZW50LW1hbmFnZXInO1xyXG5pbXBvcnQgeyBSb290IH0gZnJvbSAnLi9yb290JztcclxuaW1wb3J0IHsgTm9kZSwgU2NlbmUgfSBmcm9tICcuL3NjZW5lLWdyYXBoJztcclxuaW1wb3J0IHsgQ29tcG9uZW50U2NoZWR1bGVyIH0gZnJvbSAnLi9zY2VuZS1ncmFwaC9jb21wb25lbnQtc2NoZWR1bGVyJztcclxuaW1wb3J0IE5vZGVBY3RpdmF0b3IgZnJvbSAnLi9zY2VuZS1ncmFwaC9ub2RlLWFjdGl2YXRvcic7XHJcbmltcG9ydCB7IFNjaGVkdWxlciB9IGZyb20gJy4vc2NoZWR1bGVyJztcclxuaW1wb3J0IHsganMgfSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHsgREVCVUcsIEVESVRPUiwgQlVJTEQgfSBmcm9tICdpbnRlcm5hbDpjb25zdGFudHMnO1xyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuLyoqXHJcbiAqIEBlblxyXG4gKiA8cD5cclxuICogICAgQVRURU5USU9OOiBVU0UgY2MuZGlyZWN0b3IgSU5TVEVBRCBPRiBjYy5EaXJlY3Rvci48YnIvPlxyXG4gKiAgICBjYy5kaXJlY3RvciBpcyBhIHNpbmdsZXRvbiBvYmplY3Qgd2hpY2ggbWFuYWdlIHlvdXIgZ2FtZSdzIGxvZ2ljIGZsb3cuPGJyLz5cclxuICogICAgU2luY2UgdGhlIGNjLmRpcmVjdG9yIGlzIGEgc2luZ2xldG9uLCB5b3UgZG9uJ3QgbmVlZCB0byBjYWxsIGFueSBjb25zdHJ1Y3RvciBvciBjcmVhdGUgZnVuY3Rpb25zLDxici8+XHJcbiAqICAgIHRoZSBzdGFuZGFyZCB3YXkgdG8gdXNlIGl0IGlzIGJ5IGNhbGxpbmc6PGJyLz5cclxuICogICAgICAtIGNjLmRpcmVjdG9yLm1ldGhvZE5hbWUoKTsgPGJyLz5cclxuICpcclxuICogICAgSXQgY3JlYXRlcyBhbmQgaGFuZGxlIHRoZSBtYWluIFdpbmRvdyBhbmQgbWFuYWdlcyBob3cgYW5kIHdoZW4gdG8gZXhlY3V0ZSB0aGUgU2NlbmVzLjxici8+XHJcbiAqICAgIDxici8+XHJcbiAqICAgIFRoZSBjYy5kaXJlY3RvciBpcyBhbHNvIHJlc3BvbnNpYmxlIGZvcjo8YnIvPlxyXG4gKiAgICAgIC0gaW5pdGlhbGl6aW5nIHRoZSBPcGVuR0wgY29udGV4dDxici8+XHJcbiAqICAgICAgLSBzZXR0aW5nIHRoZSBPcGVuR0wgcGl4ZWwgZm9ybWF0IChkZWZhdWx0IG9uIGlzIFJHQjU2NSk8YnIvPlxyXG4gKiAgICAgIC0gc2V0dGluZyB0aGUgT3BlbkdMIGJ1ZmZlciBkZXB0aCAoZGVmYXVsdCBvbiBpcyAwLWJpdCk8YnIvPlxyXG4gKiAgICAgIC0gc2V0dGluZyB0aGUgY29sb3IgZm9yIGNsZWFyIHNjcmVlbiAoZGVmYXVsdCBvbmUgaXMgQkxBQ0spPGJyLz5cclxuICogICAgICAtIHNldHRpbmcgdGhlIHByb2plY3Rpb24gKGRlZmF1bHQgb25lIGlzIDNEKTxici8+XHJcbiAqICAgICAgLSBzZXR0aW5nIHRoZSBvcmllbnRhdGlvbiAoZGVmYXVsdCBvbmUgaXMgUG9ydHJhaXQpPGJyLz5cclxuICogICAgICA8YnIvPlxyXG4gKiAgICA8YnIvPlxyXG4gKiAgICBUaGUgY2MuZGlyZWN0b3IgYWxzbyBzZXRzIHRoZSBkZWZhdWx0IE9wZW5HTCBjb250ZXh0Ojxici8+XHJcbiAqICAgICAgLSBHTF9URVhUVVJFXzJEIGlzIGVuYWJsZWQ8YnIvPlxyXG4gKiAgICAgIC0gR0xfVkVSVEVYX0FSUkFZIGlzIGVuYWJsZWQ8YnIvPlxyXG4gKiAgICAgIC0gR0xfQ09MT1JfQVJSQVkgaXMgZW5hYmxlZDxici8+XHJcbiAqICAgICAgLSBHTF9URVhUVVJFX0NPT1JEX0FSUkFZIGlzIGVuYWJsZWQ8YnIvPlxyXG4gKiA8L3A+XHJcbiAqIDxwPlxyXG4gKiAgIGNjLmRpcmVjdG9yIGFsc28gc3luY2hyb25pemVzIHRpbWVycyB3aXRoIHRoZSByZWZyZXNoIHJhdGUgb2YgdGhlIGRpc3BsYXkuPGJyLz5cclxuICogICBGZWF0dXJlcyBhbmQgTGltaXRhdGlvbnM6PGJyLz5cclxuICogICAgICAtIFNjaGVkdWxlZCB0aW1lcnMgJiBkcmF3aW5nIGFyZSBzeW5jaHJvbml6ZXMgd2l0aCB0aGUgcmVmcmVzaCByYXRlIG9mIHRoZSBkaXNwbGF5PGJyLz5cclxuICogICAgICAtIE9ubHkgc3VwcG9ydHMgYW5pbWF0aW9uIGludGVydmFscyBvZiAxLzYwIDEvMzAgJiAxLzE1PGJyLz5cclxuICogPC9wPlxyXG4gKlxyXG4gKiBAemhcclxuICogPHA+XHJcbiAqICAgICDms6jmhI/vvJrnlKggY2MuZGlyZWN0b3Ig5Luj5pu/IGNjLkRpcmVjdG9y44CCPGJyLz5cclxuICogICAgIGNjLmRpcmVjdG9yIOS4gOS4queuoeeQhuS9oOeahOa4uOaIj+eahOmAu+i+kea1geeoi+eahOWNleS+i+WvueixoeOAgjxici8+XHJcbiAqICAgICDnlLHkuo4gY2MuZGlyZWN0b3Ig5piv5LiA5Liq5Y2V5L6L77yM5L2g5LiN6ZyA6KaB6LCD55So5Lu75L2V5p6E6YCg5Ye95pWw5oiW5Yib5bu65Ye95pWw77yMPGJyLz5cclxuICogICAgIOS9v+eUqOWug+eahOagh+WHhuaWueazleaYr+mAmui/h+iwg+eUqO+8mjxici8+XHJcbiAqICAgICAgIC0gY2MuZGlyZWN0b3IubWV0aG9kTmFtZSgpO1xyXG4gKiAgICAgPGJyLz5cclxuICogICAgIOWug+WIm+W7uuWSjOWkhOeQhuS4u+eql+WPo+W5tuS4lOeuoeeQhuS7gOS5iOaXtuWAmeaJp+ihjOWcuuaZr+OAgjxici8+XHJcbiAqICAgICA8YnIvPlxyXG4gKiAgICAgY2MuZGlyZWN0b3Ig6L+Y6LSf6LSj77yaPGJyLz5cclxuICogICAgICAtIOWIneWni+WMliBPcGVuR0wg546v5aKD44CCPGJyLz5cclxuICogICAgICAtIOiuvue9rk9wZW5HTOWDj+e0oOagvOW8j+OAgijpu5jorqTmmK8gUkdCNTY1KTxici8+XHJcbiAqICAgICAgLSDorr7nva5PcGVuR0znvJPlhrLljLrmt7HluqYgKOm7mOiupOaYryAwLWJpdCk8YnIvPlxyXG4gKiAgICAgIC0g6K6+572u56m655m95Zy65pmv55qE6aKc6ImyICjpu5jorqTmmK8g6buR6ImyKTxici8+XHJcbiAqICAgICAgLSDorr7nva7mipXlvbEgKOm7mOiupOaYryAzRCk8YnIvPlxyXG4gKiAgICAgIC0g6K6+572u5pa55ZCRICjpu5jorqTmmK8gUG9ydHJhaXQpPGJyLz5cclxuICogICAgPGJyLz5cclxuICogICAgY2MuZGlyZWN0b3Ig6K6+572u5LqGIE9wZW5HTCDpu5jorqTnjq/looMgPGJyLz5cclxuICogICAgICAtIEdMX1RFWFRVUkVfMkQgICDlkK/nlKjjgII8YnIvPlxyXG4gKiAgICAgIC0gR0xfVkVSVEVYX0FSUkFZIOWQr+eUqOOAgjxici8+XHJcbiAqICAgICAgLSBHTF9DT0xPUl9BUlJBWSAg5ZCv55So44CCPGJyLz5cclxuICogICAgICAtIEdMX1RFWFRVUkVfQ09PUkRfQVJSQVkg5ZCv55So44CCPGJyLz5cclxuICogPC9wPlxyXG4gKiA8cD5cclxuICogICBjYy5kaXJlY3RvciDkuZ/lkIzmraXlrprml7blmajkuI7mmL7npLrlmajnmoTliLfmlrDpgJ/njofjgIJcclxuICogICA8YnIvPlxyXG4gKiAgIOeJueeCueWSjOWxgOmZkOaApzogPGJyLz5cclxuICogICAgICAtIOWwhuiuoeaXtuWZqCAmIOa4suafk+S4juaYvuekuuWZqOeahOWIt+aWsOmikeeOh+WQjOatpeOAgjxici8+XHJcbiAqICAgICAgLSDlj6rmlK/mjIHliqjnlLvnmoTpl7TpmpQgMS82MCAxLzMwICYgMS8xNeOAgjxici8+XHJcbiAqIDwvcD5cclxuICpcclxuICogQGNsYXNzIERpcmVjdG9yXHJcbiAqIEBleHRlbmRzIEV2ZW50VGFyZ2V0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGlyZWN0b3IgZXh0ZW5kcyBFdmVudFRhcmdldCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gVGhlIGV2ZW50IHdoaWNoIHdpbGwgYmUgdHJpZ2dlcmVkIHdoZW4gdGhlIHNpbmdsZXRvbiBvZiBEaXJlY3RvciBpbml0aWFsaXplZC5cclxuICAgICAqIEB6aCBEaXJlY3RvciDljZXkvovliJ3lp4vljJbml7bop6blj5HnmoTkuovku7ZcclxuICAgICAqIEBldmVudCBEaXJlY3Rvci5FVkVOVF9JTklUXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCB3aGVuIHRoZSBzaW5nbGV0b24gb2YgRGlyZWN0b3IgaW5pdGlhbGl6ZWQuXHJcbiAgICAgKiBAemggRGlyZWN0b3Ig5Y2V5L6L5Yid5aeL5YyW5pe26Kem5Y+R55qE5LqL5Lu2XHJcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ30gRVZFTlRfSU5JVFxyXG4gICAgICogQHJlYWRvbmx5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRVZFTlRfSU5JVCA9ICdkaXJlY3Rvcl9pbml0JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgZXZlbnQgd2hpY2ggd2lsbCBiZSB0cmlnZ2VyZWQgd2hlbiB0aGUgc2luZ2xldG9uIG9mIERpcmVjdG9yIHJlc2V0LlxyXG4gICAgICogQHpoIERpcmVjdG9yIOWNleS+i+mHjee9ruaXtuinpuWPkeeahOS6i+S7tlxyXG4gICAgICogQGV2ZW50IERpcmVjdG9yLkVWRU5UX1JFU0VUXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCB3aGVuIHRoZSBzaW5nbGV0b24gb2YgRGlyZWN0b3IgcmVzZXQuXHJcbiAgICAgKiBAemggRGlyZWN0b3Ig5Y2V5L6L6YeN572u5pe26Kem5Y+R55qE5LqL5Lu2XHJcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ30gRVZFTlRfUkVTRVRcclxuICAgICAqIEByZWFkb25seVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEVWRU5UX1JFU0VUID0gJ2RpcmVjdG9yX3Jlc2V0JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgZXZlbnQgd2hpY2ggd2lsbCBiZSB0cmlnZ2VyZWQgYmVmb3JlIGxvYWRpbmcgYSBuZXcgc2NlbmUuXHJcbiAgICAgKiBAemgg5Yqg6L295paw5Zy65pmv5LmL5YmN5omA6Kem5Y+R55qE5LqL5Lu244CCXHJcbiAgICAgKiBAZXZlbnQgRGlyZWN0b3IuRVZFTlRfQkVGT1JFX1NDRU5FX0xPQURJTkdcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzY2VuZU5hbWUgLSBUaGUgbG9hZGluZyBzY2VuZSBuYW1lXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBiZWZvcmUgbG9hZGluZyBhIG5ldyBzY2VuZS5cclxuICAgICAqIEB6aCDliqDovb3mlrDlnLrmma/kuYvliY3miYDop6blj5HnmoTkuovku7bjgIJcclxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFVkVOVF9CRUZPUkVfU0NFTkVfTE9BRElOR1xyXG4gICAgICogQHJlYWRvbmx5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRVZFTlRfQkVGT1JFX1NDRU5FX0xPQURJTkcgPSAnZGlyZWN0b3JfYmVmb3JlX3NjZW5lX2xvYWRpbmcnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBiZWZvcmUgbGF1bmNoaW5nIGEgbmV3IHNjZW5lLlxyXG4gICAgICogQHpoIOi/kOihjOaWsOWcuuaZr+S5i+WJjeaJgOinpuWPkeeahOS6i+S7tuOAglxyXG4gICAgICogQGV2ZW50IERpcmVjdG9yLkVWRU5UX0JFRk9SRV9TQ0VORV9MQVVOQ0hcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzY2VuZU5hbWUgLSBOZXcgc2NlbmUgd2hpY2ggd2lsbCBiZSBsYXVuY2hlZFxyXG4gICAgICovXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgZXZlbnQgd2hpY2ggd2lsbCBiZSB0cmlnZ2VyZWQgYmVmb3JlIGxhdW5jaGluZyBhIG5ldyBzY2VuZS5cclxuICAgICAqIEB6aCDov5DooYzmlrDlnLrmma/kuYvliY3miYDop6blj5HnmoTkuovku7bjgIJcclxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFVkVOVF9CRUZPUkVfU0NFTkVfTEFVTkNIXHJcbiAgICAgKiBAcmVhZG9ubHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBFVkVOVF9CRUZPUkVfU0NFTkVfTEFVTkNIID0gJ2RpcmVjdG9yX2JlZm9yZV9zY2VuZV9sYXVuY2gnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBhZnRlciBsYXVuY2hpbmcgYSBuZXcgc2NlbmUuXHJcbiAgICAgKiBAemgg6L+Q6KGM5paw5Zy65pmv5LmL5ZCO5omA6Kem5Y+R55qE5LqL5Lu244CCXHJcbiAgICAgKiBAZXZlbnQgRGlyZWN0b3IuRVZFTlRfQUZURVJfU0NFTkVfTEFVTkNIXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2NlbmVOYW1lIC0gTmV3IHNjZW5lIHdoaWNoIGlzIGxhdW5jaGVkXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBhZnRlciBsYXVuY2hpbmcgYSBuZXcgc2NlbmUuXHJcbiAgICAgKiBAemgg6L+Q6KGM5paw5Zy65pmv5LmL5ZCO5omA6Kem5Y+R55qE5LqL5Lu244CCXHJcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ30gRVZFTlRfQUZURVJfU0NFTkVfTEFVTkNIXHJcbiAgICAgKiBAcmVhZG9ubHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBFVkVOVF9BRlRFUl9TQ0VORV9MQVVOQ0ggPSAnZGlyZWN0b3JfYWZ0ZXJfc2NlbmVfbGF1bmNoJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgZXZlbnQgd2hpY2ggd2lsbCBiZSB0cmlnZ2VyZWQgYXQgdGhlIGJlZ2lubmluZyBvZiBldmVyeSBmcmFtZS5cclxuICAgICAqIEB6aCDmr4/kuKrluKfnmoTlvIDlp4vml7bmiYDop6blj5HnmoTkuovku7bjgIJcclxuICAgICAqIEBldmVudCBEaXJlY3Rvci5FVkVOVF9CRUZPUkVfVVBEQVRFXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBhdCB0aGUgYmVnaW5uaW5nIG9mIGV2ZXJ5IGZyYW1lLlxyXG4gICAgICogQHpoIOavj+S4quW4p+eahOW8gOWni+aXtuaJgOinpuWPkeeahOS6i+S7tuOAglxyXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd9IEVWRU5UX0JFRk9SRV9VUERBVEVcclxuICAgICAqIEByZWFkb25seVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEVWRU5UX0JFRk9SRV9VUERBVEUgPSAnZGlyZWN0b3JfYmVmb3JlX3VwZGF0ZSc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gVGhlIGV2ZW50IHdoaWNoIHdpbGwgYmUgdHJpZ2dlcmVkIGFmdGVyIGVuZ2luZSBhbmQgY29tcG9uZW50cyB1cGRhdGUgbG9naWMuXHJcbiAgICAgKiBAemgg5bCG5Zyo5byV5pOO5ZKM57uE5Lu2IOKAnHVwZGF0ZeKAnSDpgLvovpHkuYvlkI7miYDop6blj5HnmoTkuovku7bjgIJcclxuICAgICAqIEBldmVudCBEaXJlY3Rvci5FVkVOVF9BRlRFUl9VUERBVEVcclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gVGhlIGV2ZW50IHdoaWNoIHdpbGwgYmUgdHJpZ2dlcmVkIGFmdGVyIGVuZ2luZSBhbmQgY29tcG9uZW50cyB1cGRhdGUgbG9naWMuXHJcbiAgICAgKiBAemgg5bCG5Zyo5byV5pOO5ZKM57uE5Lu2IOKAnHVwZGF0ZeKAnSDpgLvovpHkuYvlkI7miYDop6blj5HnmoTkuovku7bjgIJcclxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFVkVOVF9BRlRFUl9VUERBVEVcclxuICAgICAqIEByZWFkb25seVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEVWRU5UX0FGVEVSX1VQREFURSA9ICdkaXJlY3Rvcl9hZnRlcl91cGRhdGUnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIHJlbmRlcmluZyBwcm9jZXNzLlxyXG4gICAgICogQHpoIOa4suafk+i/h+eoi+S5i+WJjeaJgOinpuWPkeeahOS6i+S7tuOAglxyXG4gICAgICogQGV2ZW50IERpcmVjdG9yLkVWRU5UX0JFRk9SRV9EUkFXXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIHJlbmRlcmluZyBwcm9jZXNzLlxyXG4gICAgICogQHpoIOa4suafk+i/h+eoi+S5i+WJjeaJgOinpuWPkeeahOS6i+S7tuOAglxyXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd9IEVWRU5UX0JFRk9SRV9EUkFXXHJcbiAgICAgKiBAcmVhZG9ubHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBFVkVOVF9CRUZPUkVfRFJBVyA9ICdkaXJlY3Rvcl9iZWZvcmVfZHJhdyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gVGhlIGV2ZW50IHdoaWNoIHdpbGwgYmUgdHJpZ2dlcmVkIGFmdGVyIHRoZSByZW5kZXJpbmcgcHJvY2Vzcy5cclxuICAgICAqIEB6aCDmuLLmn5Pov4fnqIvkuYvlkI7miYDop6blj5HnmoTkuovku7bjgIJcclxuICAgICAqIEBldmVudCBEaXJlY3Rvci5FVkVOVF9BRlRFUl9EUkFXXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBhZnRlciB0aGUgcmVuZGVyaW5nIHByb2Nlc3MuXHJcbiAgICAgKiBAemgg5riy5p+T6L+H56iL5LmL5ZCO5omA6Kem5Y+R55qE5LqL5Lu244CCXHJcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ30gRVZFTlRfQUZURVJfRFJBV1xyXG4gICAgICogQHJlYWRvbmx5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRVZFTlRfQUZURVJfRFJBVyA9ICdkaXJlY3Rvcl9hZnRlcl9kcmF3JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIHBoeXNpY3MgcHJvY2Vzcy48YnIvPlxyXG4gICAgICog54mp55CG6L+H56iL5LmL5YmN5omA6Kem5Y+R55qE5LqL5Lu244CCXHJcbiAgICAgKiBAZXZlbnQgRGlyZWN0b3IuRVZFTlRfQkVGT1JFX1BIWVNJQ1NcclxuICAgICAqIEByZWFkb25seVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEVWRU5UX0JFRk9SRV9QSFlTSUNTID0gJ2RpcmVjdG9yX2JlZm9yZV9waHlzaWNzJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBldmVudCB3aGljaCB3aWxsIGJlIHRyaWdnZXJlZCBhZnRlciB0aGUgcGh5c2ljcyBwcm9jZXNzLjxici8+XHJcbiAgICAgKiDniannkIbov4fnqIvkuYvlkI7miYDop6blj5HnmoTkuovku7bjgIJcclxuICAgICAqIEBldmVudCBEaXJlY3Rvci5FVkVOVF9BRlRFUl9QSFlTSUNTXHJcbiAgICAgKiBAcmVhZG9ubHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBFVkVOVF9BRlRFUl9QSFlTSUNTID0gJ2RpcmVjdG9yX2FmdGVyX3BoeXNpY3MnO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgaW5zdGFuY2U6IERpcmVjdG9yO1xyXG5cclxuICAgIHB1YmxpYyBfY29tcFNjaGVkdWxlcjogQ29tcG9uZW50U2NoZWR1bGVyO1xyXG4gICAgcHVibGljIF9ub2RlQWN0aXZhdG9yOiBOb2RlQWN0aXZhdG9yO1xyXG4gICAgcHJpdmF0ZSBfaW52YWxpZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX3BhdXNlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX3B1cmdlRGlyZWN0b3JJbk5leHRMb29wOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfcm9vdDogUm9vdCB8IG51bGw7XHJcbiAgICBwcml2YXRlIF9sb2FkaW5nU2NlbmU6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3NjZW5lOiBTY2VuZSB8IG51bGw7XHJcbiAgICBwcml2YXRlIF90b3RhbEZyYW1lczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfbGFzdFVwZGF0ZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfZGVsdGFUaW1lOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9zY2hlZHVsZXI6IFNjaGVkdWxlcjtcclxuICAgIHByaXZhdGUgX3N5c3RlbXM6IFN5c3RlbVtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gcGF1c2VkP1xyXG4gICAgICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIHB1cmdlP1xyXG4gICAgICAgIHRoaXMuX3B1cmdlRGlyZWN0b3JJbk5leHRMb29wID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIHJvb3RcclxuICAgICAgICB0aGlzLl9yb290ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gc2NlbmVzXHJcbiAgICAgICAgdGhpcy5fbG9hZGluZ1NjZW5lID0gJyc7XHJcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBGUFNcclxuICAgICAgICB0aGlzLl90b3RhbEZyYW1lcyA9IDA7XHJcbiAgICAgICAgdGhpcy5fbGFzdFVwZGF0ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5fZGVsdGFUaW1lID0gMC4wO1xyXG5cclxuICAgICAgICAvLyBTY2hlZHVsZXIgZm9yIHVzZXIgcmVnaXN0cmF0aW9uIHVwZGF0ZVxyXG4gICAgICAgIHRoaXMuX3NjaGVkdWxlciA9IG5ldyBTY2hlZHVsZXIoKTtcclxuICAgICAgICAvLyBTY2hlZHVsZXIgZm9yIGxpZmUtY3ljbGUgbWV0aG9kcyBpbiBjb21wb25lbnRcclxuICAgICAgICB0aGlzLl9jb21wU2NoZWR1bGVyID0gbmV3IENvbXBvbmVudFNjaGVkdWxlcigpO1xyXG4gICAgICAgIC8vIE5vZGUgYWN0aXZhdG9yXHJcbiAgICAgICAgdGhpcy5fbm9kZUFjdGl2YXRvciA9IG5ldyBOb2RlQWN0aXZhdG9yKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3N5c3RlbXMgPSBbXTtcclxuXHJcbiAgICAgICAgY2MuZ2FtZS5vbmNlKEdhbWUuRVZFTlRfUkVOREVSRVJfSU5JVEVELCB0aGlzLl9pbml0T25SZW5kZXJlckluaXRpYWxpemVkLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNhbGN1bGF0ZXMgZGVsdGEgdGltZSBzaW5jZSBsYXN0IHRpbWUgaXQgd2FzIGNhbGxlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2FsY3VsYXRlRGVsdGFUaW1lICgpIHtcclxuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZGVsdGFUaW1lID0gKG5vdyAtIHRoaXMuX2xhc3RVcGRhdGUpIC8gMTAwMDtcclxuICAgICAgICBpZiAoREVCVUcgJiYgKHRoaXMuX2RlbHRhVGltZSA+IDEpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbHRhVGltZSA9IDEgLyA2MC4wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbGFzdFVwZGF0ZSA9IG5vdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogQ29udmVydHMgYSB2aWV3IGNvb3JkaW5hdGUgdG8gYW4gV2ViR0wgY29vcmRpbmF0ZTxici8+XHJcbiAgICAgKiBVc2VmdWwgdG8gY29udmVydCAobXVsdGkpIHRvdWNoZXMgY29vcmRpbmF0ZXMgdG8gdGhlIGN1cnJlbnQgbGF5b3V0IChwb3J0cmFpdCBvciBsYW5kc2NhcGUpPGJyLz5cclxuICAgICAqIEltcGxlbWVudGF0aW9uIGNhbiBiZSBmb3VuZCBpbiBkaXJlY3RvcldlYkdMLlxyXG4gICAgICogQHpoIOWwhuinpuaRuOeCueeahOWxj+W5leWdkOagh+i9rOaNouS4uiBXZWJHTCBWaWV3IOS4i+eahOWdkOagh+OAglxyXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgdjIuMFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29udmVydFRvR0wgKHVpUG9pbnQ6IFZlYzIpIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBjYy5nYW1lLmNvbnRhaW5lcjtcclxuICAgICAgICBjb25zdCB2aWV3ID0gY2MudmlldztcclxuICAgICAgICBjb25zdCBib3ggPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IGJveC5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0IC0gY29udGFpbmVyLmNsaWVudExlZnQ7XHJcbiAgICAgICAgY29uc3QgdG9wID0gYm94LnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCAtIGNvbnRhaW5lci5jbGllbnRUb3A7XHJcbiAgICAgICAgY29uc3QgeCA9IHZpZXcuX2RldmljZVBpeGVsUmF0aW8gKiAodWlQb2ludC54IC0gbGVmdCk7XHJcbiAgICAgICAgY29uc3QgeSA9IHZpZXcuX2RldmljZVBpeGVsUmF0aW8gKiAodG9wICsgYm94LmhlaWdodCAtIHVpUG9pbnQueSk7XHJcbiAgICAgICAgcmV0dXJuIHZpZXcuX2lzUm90YXRlZCA/IHYyKHZpZXcuX3ZpZXdwb3J0UmVjdC53aWR0aCAtIHksIHgpIDogdjIoeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIENvbnZlcnRzIGFuIE9wZW5HTCBjb29yZGluYXRlIHRvIGEgdmlldyBjb29yZGluYXRlPGJyLz5cclxuICAgICAqIFVzZWZ1bCB0byBjb252ZXJ0IG5vZGUgcG9pbnRzIHRvIHdpbmRvdyBwb2ludHMgZm9yIGNhbGxzIHN1Y2ggYXMgZ2xTY2lzc29yPGJyLz5cclxuICAgICAqIEltcGxlbWVudGF0aW9uIGNhbiBiZSBmb3VuZCBpbiBkaXJlY3RvcldlYkdMLlxyXG4gICAgICogQHpoIOWwhuinpuaRuOeCueeahCBXZWJHTCBWaWV3IOWdkOagh+i9rOaNouS4uuWxj+W5leWdkOagh+OAglxyXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgdjIuMFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29udmVydFRvVUkgKGdsUG9pbnQ6IFZlYzIpIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBjYy5nYW1lLmNvbnRhaW5lcjtcclxuICAgICAgICBjb25zdCB2aWV3ID0gY2MudmlldztcclxuICAgICAgICBjb25zdCBib3ggPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IGJveC5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0IC0gY29udGFpbmVyLmNsaWVudExlZnQ7XHJcbiAgICAgICAgY29uc3QgdG9wID0gYm94LnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCAtIGNvbnRhaW5lci5jbGllbnRUb3A7XHJcbiAgICAgICAgY29uc3QgdWlQb2ludCA9IHYyKDAsIDApO1xyXG4gICAgICAgIGlmICh2aWV3Ll9pc1JvdGF0ZWQpIHtcclxuICAgICAgICAgICAgdWlQb2ludC54ID0gbGVmdCArIGdsUG9pbnQueSAvIHZpZXcuX2RldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgIHVpUG9pbnQueSA9IHRvcCArIGJveC5oZWlnaHQgLSAodmlldy5fdmlld3BvcnRSZWN0LndpZHRoIC0gZ2xQb2ludC54KSAvIHZpZXcuX2RldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB1aVBvaW50LnggPSBsZWZ0ICsgZ2xQb2ludC54ICogdmlldy5fZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICAgICAgdWlQb2ludC55ID0gdG9wICsgYm94LmhlaWdodCAtIGdsUG9pbnQueSAqIHZpZXcuX2RldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1aVBvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5kIHRoZSBsaWZlIG9mIGRpcmVjdG9yIGluIHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBlbmQgKCkge1xyXG4gICAgICAgIHRoaXMuX3B1cmdlRGlyZWN0b3JJbk5leHRMb29wID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgV2ViR0wgdmlldyBpbiBwb2ludHMuPGJyLz5cclxuICAgICAqIEl0IHRha2VzIGludG8gYWNjb3VudCBhbnkgcG9zc2libGUgcm90YXRpb24gKGRldmljZSBvcmllbnRhdGlvbikgb2YgdGhlIHdpbmRvdy5cclxuICAgICAqIEB6aCDojrflj5bop4blm77nmoTlpKflsI/vvIzku6XngrnkuLrljZXkvY3jgIJcclxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIHYyLjBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFdpblNpemUgKCkge1xyXG4gICAgICAgIHJldHVybiBzaXplKGNjLndpblNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBzaXplIG9mIHRoZSBPcGVuR0wgdmlldyBpbiBwaXhlbHMuPGJyLz5cclxuICAgICAqIEl0IHRha2VzIGludG8gYWNjb3VudCBhbnkgcG9zc2libGUgcm90YXRpb24gKGRldmljZSBvcmllbnRhdGlvbikgb2YgdGhlIHdpbmRvdy48YnIvPlxyXG4gICAgICogT24gTWFjIHdpblNpemUgYW5kIHdpblNpemVJblBpeGVscyByZXR1cm4gdGhlIHNhbWUgdmFsdWUuXHJcbiAgICAgKiAoVGhlIHBpeGVsIGhlcmUgcmVmZXJzIHRvIHRoZSByZXNvdXJjZSByZXNvbHV0aW9uLiBJZiB5b3Ugd2FudCB0byBnZXQgdGhlIHBoeXNpY3MgcmVzb2x1dGlvbiBvZiBkZXZpY2UsIHlvdSBuZWVkIHRvIHVzZSBjYy52aWV3LmdldEZyYW1lU2l6ZSgpKVxyXG4gICAgICogQHpoXHJcbiAgICAgKiDojrflj5bop4blm77lpKflsI/vvIzku6Xlg4/ntKDkuLrljZXkvY3vvIjov5nph4znmoTlg4/ntKDmjIfnmoTmmK/otYTmupDliIbovqjnjofjgIJcclxuICAgICAqIOWmguaenOimgeiOt+WPluWxj+W5leeJqeeQhuWIhui+qOeOh++8jOmcgOimgeeUqCBjYy52aWV3LmdldEZyYW1lU2l6ZSgp77yJXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSB2Mi4wXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRXaW5TaXplSW5QaXhlbHMgKCkge1xyXG4gICAgICAgIHJldHVybiBzaXplKGNjLndpblNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFBhdXNlIHRoZSBkaXJlY3RvcidzIHRpY2tlciwgb25seSBpbnZvbHZlIHRoZSBnYW1lIGxvZ2ljIGV4ZWN1dGlvbi48YnI+XHJcbiAgICAgKiBJdCB3b24ndCBwYXVzZSB0aGUgcmVuZGVyaW5nIHByb2Nlc3Mgbm9yIHRoZSBldmVudCBtYW5hZ2VyLjxicj5cclxuICAgICAqIElmIHlvdSB3YW50IHRvIHBhdXNlIHRoZSBlbnRpcmUgZ2FtZSBpbmNsdWRpbmcgcmVuZGVyaW5nLCBhdWRpbyBhbmQgZXZlbnQsPGJyPlxyXG4gICAgICogcGxlYXNlIHVzZSBjYy5nYW1lLnBhdXNlXHJcbiAgICAgKiBAemgg5pqC5YGc5q2j5Zyo6L+Q6KGM55qE5Zy65pmv77yM6K+l5pqC5YGc5Y+q5Lya5YGc5q2i5ri45oiP6YC76L6R5omn6KGM77yM5L2G5piv5LiN5Lya5YGc5q2i5riy5p+T5ZKMIFVJIOWTjeW6lOOAgjxicj5cclxuICAgICAqIOWmguaenOaDs+imgeabtOW9u+W6leW+l+aaguWBnOa4uOaIj++8jOWMheWQq+a4suafk++8jOmfs+mikeWSjOS6i+S7tu+8jOivt+S9v+eUqCBjYy5nYW1lLnBhdXNlIOOAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcGF1c2UgKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wYXVzZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9wYXVzZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFJlbW92ZXMgY2FjaGVkIGFsbCBjb2NvczJkIGNhY2hlZCBkYXRhLlxyXG4gICAgICogQHpoIOWIoOmZpGNvY29zMmTmiYDmnInnmoTnvJPlrZjmlbDmja5cclxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIHYyLjBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHB1cmdlQ2FjaGVkRGF0YSAoKSB7XHJcbiAgICAgICAgY2MubG9hZGVyLnJlbGVhc2VBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBQdXJnZSB0aGUgY2MuZGlyZWN0b3IgaXRzZWxmLCBpbmNsdWRpbmcgdW5zY2hlZHVsZSBhbGwgc2NoZWR1bGUsPGJyPlxyXG4gICAgICogcmVtb3ZlIGFsbCBldmVudCBsaXN0ZW5lcnMsIGNsZWFuIHVwIGFuZCBleGl0IHRoZSBydW5uaW5nIHNjZW5lLCBzdG9wcyBhbGwgYW5pbWF0aW9ucywgY2xlYXIgY2FjaGVkIGRhdGEuXHJcbiAgICAgKiBAemgg5riF6ZmkIGNjLmRpcmVjdG9yIOacrOi6q++8jOWMheaLrOWBnOatouaJgOacieeahOiuoeaXtuWZqO+8jDxicj5cclxuICAgICAqIOenu+mZpOaJgOacieeahOS6i+S7tuebkeWQrOWZqO+8jOa4heeQhuW5tumAgOWHuuW9k+WJjei/kOihjOeahOWcuuaZr++8jOWBnOatouaJgOacieWKqOeUu++8jOa4heeQhue8k+WtmOaVsOaNruOAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHVyZ2VEaXJlY3RvciAoKSB7XHJcbiAgICAgICAgLy8gY2xlYW51cCBzY2hlZHVsZXJcclxuICAgICAgICB0aGlzLl9zY2hlZHVsZXIudW5zY2hlZHVsZUFsbCgpO1xyXG4gICAgICAgIHRoaXMuX2NvbXBTY2hlZHVsZXIudW5zY2hlZHVsZUFsbCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9ub2RlQWN0aXZhdG9yLnJlc2V0KCk7XHJcblxyXG4gICAgICAgIC8vIERpc2FibGUgZXZlbnQgZGlzcGF0Y2hpbmdcclxuICAgICAgICBpZiAoZXZlbnRNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIGV2ZW50TWFuYWdlci5zZXRFbmFibGVkKGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNjLnJlbmRlcmVyLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIGlmICghRURJVE9SKSB7XHJcbiAgICAgICAgICAgIGlmIChjYy5pc1ZhbGlkKHRoaXMuX3NjZW5lKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2NlbmUhLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zY2VuZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0b3BBbmltYXRpb24oKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3Jvb3QgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9yb290LmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcm9vdCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIENsZWFyIGFsbCBjYWNoZXNcclxuICAgICAgICBjYy5sb2FkZXIucmVsZWFzZUFsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFJlc2V0IHRoZSBjYy5kaXJlY3RvciwgY2FuIGJlIHVzZWQgdG8gcmVzdGFydCB0aGUgZGlyZWN0b3IgYWZ0ZXIgcHVyZ2VcclxuICAgICAqIEB6aCDph43nva4gY2MuZGlyZWN0b3LvvIzlj6/nlKjkuo7lnKjmuIXpmaTlkI7ph43lkK8gZGlyZWN0b3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2V0ICgpIHtcclxuICAgICAgICB0aGlzLnB1cmdlRGlyZWN0b3IoKTtcclxuXHJcbiAgICAgICAgdGhpcy5lbWl0KERpcmVjdG9yLkVWRU5UX1JFU0VUKTtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50TWFuYWdlcikge1xyXG4gICAgICAgICAgICBldmVudE1hbmFnZXIuc2V0RW5hYmxlZCh0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnRBbmltYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogUnVuIGEgc2NlbmUuIFJlcGxhY2VzIHRoZSBydW5uaW5nIHNjZW5lIHdpdGggYSBuZXcgb25lIG9yIGVudGVyIHRoZSBmaXJzdCBzY2VuZS48YnI+XHJcbiAgICAgKiBUaGUgbmV3IHNjZW5lIHdpbGwgYmUgbGF1bmNoZWQgaW1tZWRpYXRlbHkuXHJcbiAgICAgKiBAemgg6L+Q6KGM5oyH5a6a5Zy65pmv44CC5bCG5q2j5Zyo6L+Q6KGM55qE5Zy65pmv5pu/5o2i5Li677yI5oiW6YeN5YWl5Li677yJ5paw5Zy65pmv44CC5paw5Zy65pmv5bCG56uL5Y2z5ZCv5Yqo44CCXHJcbiAgICAgKiBAcGFyYW0gc2NlbmUgLSBUaGUgbmVlZCBydW4gc2NlbmUuXHJcbiAgICAgKiBAcGFyYW0gb25CZWZvcmVMb2FkU2NlbmUgLSBUaGUgZnVuY3Rpb24gaW52b2tlZCBhdCB0aGUgc2NlbmUgYmVmb3JlIGxvYWRpbmcuXHJcbiAgICAgKiBAcGFyYW0gb25MYXVuY2hlZCAtIFRoZSBmdW5jdGlvbiBpbnZva2VkIGF0IHRoZSBzY2VuZSBhZnRlciBsYXVuY2guXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBydW5TY2VuZUltbWVkaWF0ZSAoc2NlbmU6IFNjZW5lLCBvbkJlZm9yZUxvYWRTY2VuZT86IERpcmVjdG9yLk9uQmVmb3JlTG9hZFNjZW5lLCBvbkxhdW5jaGVkPzogRGlyZWN0b3IuT25TY2VuZUxhdW5jaGVkKSB7XHJcbiAgICAgICAgY2MuYXNzZXJ0SUQoc2NlbmUgaW5zdGFuY2VvZiBjYy5TY2VuZSwgMTIxNik7XHJcblxyXG4gICAgICAgIGNvbnN0IHV1aWQgPSBjYy5sb2FkZXIuX2dldFJlZmVyZW5jZUtleShzY2VuZS51dWlkKTtcclxuICAgICAgICAvLyBTY2VuZSBjYW5ub3QgYmUgY2FjaGVkIGluIGxvYWRlciwgYmVjYXVzZSBpdCB3aWxsIGJlIGRlc3Ryb3llZCBhZnRlciBzd2l0Y2hpbmcuXHJcbiAgICAgICAgY2MubG9hZGVyLnJlbW92ZUl0ZW0odXVpZCk7XHJcblxyXG4gICAgICAgIGlmIChCVUlMRCAmJiBERUJVRykge1xyXG4gICAgICAgICAgICBjb25zb2xlLnRpbWUoJ0luaXRTY2VuZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgc2NlbmUuX2xvYWQoKTsgIC8vIGVuc3VyZSBzY2VuZSBpbml0aWFsaXplZFxyXG4gICAgICAgIGlmIChCVUlMRCAmJiBERUJVRykge1xyXG4gICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ0luaXRTY2VuZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZS1hdHRhY2ggb3IgcmVwbGFjZSBwZXJzaXN0IG5vZGVzXHJcbiAgICAgICAgaWYgKEJVSUxEICYmIERFQlVHKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUudGltZSgnQXR0YWNoUGVyc2lzdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwZXJzaXN0Tm9kZUxpc3QgPSBPYmplY3Qua2V5cyhjYy5nYW1lLl9wZXJzaXN0Um9vdE5vZGVzKS5tYXAoKHgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNjLmdhbWUuX3BlcnNpc3RSb290Tm9kZXNbeF07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBwcmVmZXItZm9yLW9mXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZXJzaXN0Tm9kZUxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHBlcnNpc3ROb2RlTGlzdFtpXTtcclxuICAgICAgICAgICAgbm9kZS5lbWl0KGNjLk5vZGUuU0NFTkVfQ0hBTkdFRF9GT1JfUEVSU0lTVFMsIHNjZW5lLnJlbmRlclNjZW5lKTtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3ROb2RlID0gc2NlbmUuZ2V0Q2hpbGRCeVV1aWQobm9kZS51dWlkKTtcclxuICAgICAgICAgICAgaWYgKGV4aXN0Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2NlbmUgYWxzbyBjb250YWlucyB0aGUgcGVyc2lzdCBub2RlLCBzZWxlY3QgdGhlIG9sZCBvbmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZXhpc3ROb2RlLmdldFNpYmxpbmdJbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgZXhpc3ROb2RlLl9kZXN0cm95SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBzY2VuZS5pbnNlcnRDaGlsZChub2RlLCBpbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLnBhcmVudCA9IHNjZW5lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChCVUlMRCAmJiBERUJVRykge1xyXG4gICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ0F0dGFjaFBlcnNpc3QnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkU2NlbmUgPSB0aGlzLl9zY2VuZTtcclxuICAgICAgICBpZiAoIUVESVRPUikge1xyXG4gICAgICAgICAgICAvLyBhdXRvIHJlbGVhc2UgYXNzZXRzXHJcbiAgICAgICAgICAgIGlmIChCVUlMRCAmJiBERUJVRykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS50aW1lKCdBdXRvUmVsZWFzZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dG9SZWxlYXNlQXNzZXRzID0gb2xkU2NlbmUgJiYgb2xkU2NlbmUuYXV0b1JlbGVhc2VBc3NldHMgJiYgb2xkU2NlbmUuZGVwZW5kQXNzZXRzO1xyXG4gICAgICAgICAgICBhdXRvUmVsZWFzZShhdXRvUmVsZWFzZUFzc2V0cywgc2NlbmUuZGVwZW5kQXNzZXRzLCBwZXJzaXN0Tm9kZUxpc3QpO1xyXG4gICAgICAgICAgICBpZiAoQlVJTEQgJiYgREVCVUcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUudGltZUVuZCgnQXV0b1JlbGVhc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdW5sb2FkIHNjZW5lXHJcbiAgICAgICAgaWYgKEJVSUxEICYmIERFQlVHKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUudGltZSgnRGVzdHJveScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2MuaXNWYWxpZChvbGRTY2VuZSkpIHtcclxuICAgICAgICAgICAgb2xkU2NlbmUhLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NjZW5lID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gcHVyZ2UgZGVzdHJveWVkIG5vZGVzIGJlbG9uZ3MgdG8gb2xkIHNjZW5lXHJcbiAgICAgICAgQ0NPYmplY3QuX2RlZmVycmVkRGVzdHJveSgpO1xyXG4gICAgICAgIGlmIChCVUlMRCAmJiBERUJVRykgeyBjb25zb2xlLnRpbWVFbmQoJ0Rlc3Ryb3knKTsgfVxyXG5cclxuICAgICAgICBpZiAob25CZWZvcmVMb2FkU2NlbmUpIHtcclxuICAgICAgICAgICAgb25CZWZvcmVMb2FkU2NlbmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbWl0KGNjLkRpcmVjdG9yLkVWRU5UX0JFRk9SRV9TQ0VORV9MQVVOQ0gsIHNjZW5lKTtcclxuXHJcbiAgICAgICAgLy8gUnVuIGFuIEVudGl0eSBTY2VuZVxyXG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XHJcblxyXG4gICAgICAgIGlmIChCVUlMRCAmJiBERUJVRykge1xyXG4gICAgICAgICAgICBjb25zb2xlLnRpbWUoJ0FjdGl2YXRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBzY2VuZS5fYWN0aXZhdGUoKTtcclxuICAgICAgICBpZiAoQlVJTEQgJiYgREVCVUcpIHtcclxuICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKCdBY3RpdmF0ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzdGFydCBzY2VuZVxyXG4gICAgICAgIGlmICh0aGlzLl9yb290KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jvb3QucmVzZXRDdW11bGF0aXZlVGltZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0YXJ0QW5pbWF0aW9uKCk7XHJcblxyXG4gICAgICAgIGlmIChvbkxhdW5jaGVkKSB7XHJcbiAgICAgICAgICAgIG9uTGF1bmNoZWQobnVsbCwgc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXQoY2MuRGlyZWN0b3IuRVZFTlRfQUZURVJfU0NFTkVfTEFVTkNILCBzY2VuZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFJ1biBhIHNjZW5lLiBSZXBsYWNlcyB0aGUgcnVubmluZyBzY2VuZSB3aXRoIGEgbmV3IG9uZSBvciBlbnRlciB0aGUgZmlyc3Qgc2NlbmUuPGJyPlxyXG4gICAgICogVGhlIG5ldyBzY2VuZSB3aWxsIGJlIGxhdW5jaGVkIGF0IHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgZnJhbWUuPGJyPlxyXG4gICAgICogQHpoIOi/kOihjOaMh+WumuWcuuaZr+OAglxyXG4gICAgICogQHBhcmFtIHNjZW5lIC0gVGhlIG5lZWQgcnVuIHNjZW5lLlxyXG4gICAgICogQHBhcmFtIG9uQmVmb3JlTG9hZFNjZW5lIC0gVGhlIGZ1bmN0aW9uIGludm9rZWQgYXQgdGhlIHNjZW5lIGJlZm9yZSBsb2FkaW5nLlxyXG4gICAgICogQHBhcmFtIG9uTGF1bmNoZWQgLSBUaGUgZnVuY3Rpb24gaW52b2tlZCBhdCB0aGUgc2NlbmUgYWZ0ZXIgbGF1bmNoLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJ1blNjZW5lIChzY2VuZTogU2NlbmUsIG9uQmVmb3JlTG9hZFNjZW5lPzogRGlyZWN0b3IuT25CZWZvcmVMb2FkU2NlbmUsIG9uTGF1bmNoZWQ/OiBEaXJlY3Rvci5PblNjZW5lTGF1bmNoZWQpIHtcclxuICAgICAgICBjYy5hc3NlcnRJRChzY2VuZSwgMTIwNSk7XHJcbiAgICAgICAgY2MuYXNzZXJ0SUQoc2NlbmUgaW5zdGFuY2VvZiBjYy5TY2VuZSwgMTIxNik7XHJcblxyXG4gICAgICAgIC8vIGVuc3VyZSBzY2VuZSBpbml0aWFsaXplZFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBzY2VuZS5fbG9hZCgpO1xyXG5cclxuICAgICAgICAvLyBEZWxheSBydW4gLyByZXBsYWNlIHNjZW5lIHRvIHRoZSBlbmQgb2YgdGhlIGZyYW1lXHJcbiAgICAgICAgdGhpcy5vbmNlKGNjLkRpcmVjdG9yLkVWRU5UX0FGVEVSX1VQREFURSwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJ1blNjZW5lSW1tZWRpYXRlKHNjZW5lLCBvbkJlZm9yZUxvYWRTY2VuZSwgb25MYXVuY2hlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gIEBTY2VuZSBsb2FkaW5nIHNlY3Rpb25cclxuXHJcbiAgICBwdWJsaWMgX2dldFNjZW5lVXVpZCAoa2V5OiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBzY2VuZXMgPSBjYy5nYW1lLl9zY2VuZUluZm9zO1xyXG4gICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBpZiAoIWtleS5lbmRzV2l0aCgnLnNjZW5lJykpIHtcclxuICAgICAgICAgICAgICAgIGtleSArPSAnLnNjZW5lJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoa2V5WzBdICE9PSAnLycgJiYgIWtleS5zdGFydHNXaXRoKCdkYjovLycpKSB7XHJcbiAgICAgICAgICAgICAgICBrZXkgPSAnLycgKyBrZXk7ICAgIC8vIOS9v+eUqOWFqOWQjeWMuemFjVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNlYXJjaCBzY2VuZVxyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHByZWZlci1mb3Itb2ZcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBzY2VuZXNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5mby51cmwuZW5kc1dpdGgoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmZvO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBrZXkgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIGlmICgwIDw9IGtleSAmJiBrZXkgPCBzY2VuZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NlbmVzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYy5lcnJvcklEKDEyMDYsIGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNjLmVycm9ySUQoMTIwNywga2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gTG9hZHMgdGhlIHNjZW5lIGJ5IGl0cyBuYW1lLlxyXG4gICAgICogQHpoIOmAmui/h+WcuuaZr+WQjeensOi/m+ihjOWKoOi9veWcuuaZr+OAglxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzY2VuZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgc2NlbmUgdG8gbG9hZC5cclxuICAgICAqIEBwYXJhbSBvbkxhdW5jaGVkIC0gY2FsbGJhY2ssIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHNjZW5lIGxhdW5jaGVkLlxyXG4gICAgICogQHJldHVybiBpZiBlcnJvciwgcmV0dXJuIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBsb2FkU2NlbmUgKHNjZW5lTmFtZTogc3RyaW5nLCBvbkxhdW5jaGVkPzogRGlyZWN0b3IuT25TY2VuZUxhdW5jaGVkLCBvblVubG9hZGVkPzogRGlyZWN0b3IuT25VbmxvYWQpIHtcclxuICAgICAgICBpZiAodGhpcy5fbG9hZGluZ1NjZW5lKSB7XHJcbiAgICAgICAgICAgIGNjLmVycm9ySUQoMTIwOCwgc2NlbmVOYW1lLCB0aGlzLl9sb2FkaW5nU2NlbmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLl9nZXRTY2VuZVV1aWQoc2NlbmVOYW1lKTtcclxuICAgICAgICBpZiAoaW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCB1dWlkID0gaW5mby51dWlkO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXQoY2MuRGlyZWN0b3IuRVZFTlRfQkVGT1JFX1NDRU5FX0xPQURJTkcsIHNjZW5lTmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvYWRpbmdTY2VuZSA9IHNjZW5lTmFtZTtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZFNjZW5lQnlVdWlkKHV1aWQsIG9uTGF1bmNoZWQsIG9uVW5sb2FkZWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNjLmVycm9ySUQoMTIwOSwgc2NlbmVOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogUHJlLWxvYWRzIHRoZSBzY2VuZSB0byByZWR1Y2VzIGxvYWRpbmcgdGltZS4gWW91IGNhbiBjYWxsIHRoaXMgbWV0aG9kIGF0IGFueSB0aW1lIHlvdSB3YW50Ljxicj5cclxuICAgICAqIEFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QsIHlvdSBzdGlsbCBuZWVkIHRvIGxhdW5jaCB0aGUgc2NlbmUgYnkgYGNjLmRpcmVjdG9yLmxvYWRTY2VuZWAuPGJyPlxyXG4gICAgICogSXQgd2lsbCBiZSB0b3RhbGx5IGZpbmUgdG8gY2FsbCBgY2MuZGlyZWN0b3IubG9hZFNjZW5lYCBhdCBhbnkgdGltZSBldmVuIGlmIHRoZSBwcmVsb2FkaW5nIGlzIG5vdDxicj5cclxuICAgICAqIHlldCBmaW5pc2hlZCwgdGhlIHNjZW5lIHdpbGwgYmUgbGF1bmNoZWQgYWZ0ZXIgbG9hZGVkIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgKiBAemgg6aKE5Yqg6L295Zy65pmv77yM5L2g5Y+v5Lul5Zyo5Lu75L2V5pe25YCZ6LCD55So6L+Z5Liq5pa55rOV44CCXHJcbiAgICAgKiDosIPnlKjlrozlkI7vvIzkvaDku43nhLbpnIDopoHpgJrov4cgYGNjLmRpcmVjdG9yLmxvYWRTY2VuZWAg5p2l5ZCv5Yqo5Zy65pmv77yM5Zug5Li66L+Z5Liq5pa55rOV5LiN5Lya5omn6KGM5Zy65pmv5Yqg6L295pON5L2c44CCPGJyPlxyXG4gICAgICog5bCx566X6aKE5Yqg6L296L+Y5rKh5a6M5oiQ77yM5L2g5Lmf5Y+v5Lul55u05o6l6LCD55SoIGBjYy5kaXJlY3Rvci5sb2FkU2NlbmVg77yM5Yqg6L295a6M5oiQ5ZCO5Zy65pmv5bCx5Lya5ZCv5Yqo44CCXHJcbiAgICAgKiBAcGFyYW0gc2NlbmVOYW1lIOWcuuaZr+WQjeensOOAglxyXG4gICAgICogQHBhcmFtIG9uTG9hZGVkIOWKoOi9veWbnuiwg+OAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJlbG9hZFNjZW5lIChzY2VuZU5hbWU6IHN0cmluZywgb25Mb2FkZWQ/OiBEaXJlY3Rvci5PblNjZW5lTG9hZGVkKTogdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogUHJlLWxvYWRzIHRoZSBzY2VuZSB0byByZWR1Y2VzIGxvYWRpbmcgdGltZS4gWW91IGNhbiBjYWxsIHRoaXMgbWV0aG9kIGF0IGFueSB0aW1lIHlvdSB3YW50Ljxicj5cclxuICAgICAqIEFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QsIHlvdSBzdGlsbCBuZWVkIHRvIGxhdW5jaCB0aGUgc2NlbmUgYnkgYGNjLmRpcmVjdG9yLmxvYWRTY2VuZWAuPGJyPlxyXG4gICAgICogSXQgd2lsbCBiZSB0b3RhbGx5IGZpbmUgdG8gY2FsbCBgY2MuZGlyZWN0b3IubG9hZFNjZW5lYCBhdCBhbnkgdGltZSBldmVuIGlmIHRoZSBwcmVsb2FkaW5nIGlzIG5vdDxicj5cclxuICAgICAqIHlldCBmaW5pc2hlZCwgdGhlIHNjZW5lIHdpbGwgYmUgbGF1bmNoZWQgYWZ0ZXIgbG9hZGVkIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgKiBAemgg6aKE5Yqg6L295Zy65pmv77yM5L2g5Y+v5Lul5Zyo5Lu75L2V5pe25YCZ6LCD55So6L+Z5Liq5pa55rOV44CCXHJcbiAgICAgKiDosIPnlKjlrozlkI7vvIzkvaDku43nhLbpnIDopoHpgJrov4cgYGNjLmRpcmVjdG9yLmxvYWRTY2VuZWAg5p2l5ZCv5Yqo5Zy65pmv77yM5Zug5Li66L+Z5Liq5pa55rOV5LiN5Lya5omn6KGM5Zy65pmv5Yqg6L295pON5L2c44CCPGJyPlxyXG4gICAgICog5bCx566X6aKE5Yqg6L296L+Y5rKh5a6M5oiQ77yM5L2g5Lmf5Y+v5Lul55u05o6l6LCD55SoIGBjYy5kaXJlY3Rvci5sb2FkU2NlbmVg77yM5Yqg6L295a6M5oiQ5ZCO5Zy65pmv5bCx5Lya5ZCv5Yqo44CCXHJcbiAgICAgKiBAcGFyYW0gc2NlbmVOYW1lIOWcuuaZr+WQjeensOOAglxyXG4gICAgICogQHBhcmFtIG9uUHJvZ3Jlc3Mg5Yqg6L296L+b5bqm5Zue6LCD44CCXHJcbiAgICAgKiBAcGFyYW0gb25Mb2FkZWQg5Yqg6L295Zue6LCD44CCXHJcbiAgICAgKi9cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5pZmllZC1zaWduYXR1cmVzXHJcbiAgICBwdWJsaWMgcHJlbG9hZFNjZW5lIChzY2VuZU5hbWU6IHN0cmluZywgb25Qcm9ncmVzczogRGlyZWN0b3IuT25Mb2FkU2NlbmVQcm9ncmVzcywgb25Mb2FkZWQ6IERpcmVjdG9yLk9uU2NlbmVMb2FkZWQpOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBwcmVsb2FkU2NlbmUgKFxyXG4gICAgICAgIHNjZW5lTmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGFyZzE/OiBEaXJlY3Rvci5PbkxvYWRTY2VuZVByb2dyZXNzIHwgRGlyZWN0b3IuT25TY2VuZUxvYWRlZCxcclxuICAgICAgICBhcmcyPzogRGlyZWN0b3IuT25TY2VuZUxvYWRlZCkge1xyXG4gICAgICAgIGxldCBvblByb2dyZXNzOiBEaXJlY3Rvci5PbkxvYWRTY2VuZVByb2dyZXNzIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBvbkxvYWRlZDogRGlyZWN0b3IuT25TY2VuZUxvYWRlZCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKGFyZzIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvbkxvYWRlZCA9IGFyZzEgYXMgRGlyZWN0b3IuT25TY2VuZUxvYWRlZDtcclxuICAgICAgICAgICAgb25Qcm9ncmVzcyA9IHZvaWQgMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvbkxvYWRlZCA9IGFyZzI7XHJcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3MgPSBhcmcxIGFzIERpcmVjdG9yLk9uTG9hZFNjZW5lUHJvZ3Jlc3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5fZ2V0U2NlbmVVdWlkKHNjZW5lTmFtZSk7XHJcbiAgICAgICAgaWYgKGluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KGNjLkRpcmVjdG9yLkVWRU5UX0JFRk9SRV9TQ0VORV9MT0FESU5HLCBzY2VuZU5hbWUpO1xyXG4gICAgICAgICAgICBjYy5sb2FkZXIubG9hZCh7IHV1aWQ6IGluZm8udXVpZCwgdHlwZTogJ3V1aWQnIH0sXHJcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzLFxyXG4gICAgICAgICAgICAgICAgKGVycm9yOiBudWxsIHwgRXJyb3IsIGFzc2V0OiBTY2VuZUFzc2V0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmVycm9ySUQoMTIxMCwgc2NlbmVOYW1lLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZGVkKGVycm9yLCBhc3NldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9ICdDYW4gbm90IHByZWxvYWQgdGhlIHNjZW5lIFwiJyArIHNjZW5lTmFtZSArICdcIiBiZWNhdXNlIGl0IGlzIG5vdCBpbiB0aGUgYnVpbGQgc2V0dGluZ3MuJztcclxuICAgICAgICAgICAgaWYgKG9uTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBvbkxvYWRlZChuZXcgRXJyb3IoZXJyb3IpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5lcnJvcigncHJlbG9hZFNjZW5lOiAnICsgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBMb2FkcyB0aGUgc2NlbmUgYnkgaXRzIHV1aWQuXHJcbiAgICAgKiBAemgg6YCa6L+HIHV1aWQg5Yqg6L295Zy65pmv44CCXHJcbiAgICAgKiBAcGFyYW0gdXVpZCDlnLrmma/otYTmupDnmoQgdXVpZOOAglxyXG4gICAgICogQHBhcmFtIGRvTm90UnVuIOS7heWKoOi9veWSjOWIneWni+WMluWcuuaZr++8jOS9huW5tuS4jei/kOihjOOAguatpOWPguaVsOS7heWcqOe8lui+keWZqOeOr+Wig+S4reeUn+aViOOAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgX2xvYWRTY2VuZUJ5VXVpZCAodXVpZDogc3RyaW5nLCBkb05vdFJ1bj86IGJvb2xlYW4pOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBfbG9hZFNjZW5lQnlVdWlkICh1dWlkOiBzdHJpbmcsIG9uTGF1bmNoZWQ/OiBEaXJlY3Rvci5PblNjZW5lTGF1bmNoZWQsIGRvTm90UnVuPzogYm9vbGVhbik6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIF9sb2FkU2NlbmVCeVV1aWQgKHV1aWQ6IHN0cmluZywgb25MYXVuY2hlZD86IERpcmVjdG9yLk9uU2NlbmVMYXVuY2hlZCwgb25VbmxvYWRlZD86IERpcmVjdG9yLk9uVW5sb2FkLCBkb05vdFJ1bj86IGJvb2xlYW4pOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBfbG9hZFNjZW5lQnlVdWlkIChcclxuICAgICAgICB1dWlkOiBzdHJpbmcsXHJcbiAgICAgICAgYXJnMT86IERpcmVjdG9yLk9uU2NlbmVMYXVuY2hlZCB8IGJvb2xlYW4sXHJcbiAgICAgICAgYXJnMj86IERpcmVjdG9yLk9uVW5sb2FkIHwgYm9vbGVhbixcclxuICAgICAgICBhcmczPzogYm9vbGVhbikge1xyXG4gICAgICAgIGxldCBvbkxhdW5jaGVkOiBEaXJlY3Rvci5PblNjZW5lTGF1bmNoZWQgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IG9uVW5sb2FkZWQ6IERpcmVjdG9yLk9uVW5sb2FkIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBkb05vdFJ1bjogYm9vbGVhbiB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKEVESVRPUiAmJiB0eXBlb2YgYXJnMSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIGRvTm90UnVuID0gYXJnMTtcclxuICAgICAgICAgICAgb25VbmxvYWRlZCA9IGFyZzIgYXMgKERpcmVjdG9yLk9uVW5sb2FkIHwgdW5kZWZpbmVkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKEVESVRPUiAmJiB0eXBlb2YgYXJnMiA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIGRvTm90UnVuID0gYXJnMjtcclxuICAgICAgICAgICAgb25MYXVuY2hlZCA9IGFyZzEgYXMgKERpcmVjdG9yLk9uU2NlbmVMYXVuY2hlZCB8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb25MYXVuY2hlZCA9IGFyZzEgYXMgKERpcmVjdG9yLk9uU2NlbmVMYXVuY2hlZCB8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIG9uVW5sb2FkZWQgPSBhcmcyIGFzIChEaXJlY3Rvci5PblVubG9hZCB8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIGRvTm90UnVuID0gYXJnMztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNjLkFzc2V0TGlicmFyeS51bmxvYWRBc3NldCh1dWlkKTsgICAgIC8vIGZvcmNlIHJlbG9hZFxyXG4gICAgICAgIGNvbnNvbGUudGltZSgnTG9hZFNjZW5lICcgKyB1dWlkKTtcclxuICAgICAgICBjYy5Bc3NldExpYnJhcnkubG9hZEFzc2V0KHV1aWQsIChlcnJvciwgc2NlbmVBc3NldCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ0xvYWRTY2VuZSAnICsgdXVpZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSBkaXJlY3RvcjtcclxuICAgICAgICAgICAgc2VsZi5fbG9hZGluZ1NjZW5lID0gJyc7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgZXJyb3IgPSAnRmFpbGVkIHRvIGxvYWQgc2NlbmU6ICcgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgIGNjLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChzY2VuZUFzc2V0IGluc3RhbmNlb2YgY2MuU2NlbmVBc3NldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gc2NlbmVBc3NldC5zY2VuZTtcclxuICAgICAgICAgICAgICAgICAgICBzY2VuZS5faWQgPSBzY2VuZUFzc2V0Ll91dWlkO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lLl9uYW1lID0gc2NlbmVBc3NldC5fbmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRURJVE9SKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZG9Ob3RSdW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucnVuU2NlbmVJbW1lZGlhdGUoc2NlbmUsIG9uVW5sb2FkZWQsIG9uTGF1bmNoZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUuX2xvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkxhdW5jaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25MYXVuY2hlZChudWxsLCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucnVuU2NlbmVJbW1lZGlhdGUoc2NlbmUsIG9uVW5sb2FkZWQsIG9uTGF1bmNoZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvciA9ICdUaGUgYXNzZXQgJyArIHV1aWQgKyAnIGlzIG5vdCBhIHNjZW5lJztcclxuICAgICAgICAgICAgICAgICAgICBjYy5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9uTGF1bmNoZWQpIHtcclxuICAgICAgICAgICAgICAgIG9uTGF1bmNoZWQoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gUmVzdW1lIGdhbWUgbG9naWMgZXhlY3V0aW9uIGFmdGVyIHBhdXNlLCBpZiB0aGUgY3VycmVudCBzY2VuZSBpcyBub3QgcGF1c2VkLCBub3RoaW5nIHdpbGwgaGFwcGVuLlxyXG4gICAgICogQHpoIOaBouWkjeaaguWBnOWcuuaZr+eahOa4uOaIj+mAu+i+ke+8jOWmguaenOW9k+WJjeWcuuaZr+ayoeacieaaguWBnOWwhuayoeS7u+S9leS6i+aDheWPkeeUn+OAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVzdW1lICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3BhdXNlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9sYXN0VXBkYXRlID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9sYXN0VXBkYXRlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZ0lEKDEyMDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fZGVsdGFUaW1lID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogRW5hYmxlcyBvciBkaXNhYmxlcyBXZWJHTCBkZXB0aCB0ZXN0Ljxicj5cclxuICAgICAqIEltcGxlbWVudGF0aW9uIGNhbiBiZSBmb3VuZCBpbiBkaXJlY3RvckNhbnZhcy5qcy9kaXJlY3RvcldlYkdMLmpzXHJcbiAgICAgKiBAemgg5ZCv55SoL+emgeeUqOa3seW6pua1i+ivle+8iOWcqCBDYW52YXMg5riy5p+T5qih5byP5LiL5LiN5Lya55Sf5pWI77yJ44CCXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSB2Mi4wXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXREZXB0aFRlc3QgKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKCFjYy5DYW1lcmEubWFpbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNjLkNhbWVyYS5tYWluLmRlcHRoID0gISF2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogU2V0IGNvbG9yIGZvciBjbGVhciBzY3JlZW4uPGJyPlxyXG4gICAgICogKEltcGxlbWVudGF0aW9uIGNhbiBiZSBmb3VuZCBpbiBkaXJlY3RvckNhbnZhcy5qcy9kaXJlY3RvcldlYkdMLmpzKVxyXG4gICAgICogQHpoXHJcbiAgICAgKiDorr7nva7lnLrmma/nmoTpu5jorqTmk6bpmaTpopzoibLjgII8YnI+XHJcbiAgICAgKiDmlK/mjIHlhajpgI/mmI7vvIzkvYbkuI3mlK/mjIHpgI/mmI7luqbkuLrkuK3pl7TlgLzjgILopoHmlK/mjIHlhajpgI/mmI7pnIDmiYvlt6XlvIDlkK8gY2MubWFjcm8uRU5BQkxFX1RSQU5TUEFSRU5UX0NBTlZBU+OAglxyXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgdjIuMFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0Q2xlYXJDb2xvciAoY2xlYXJDb2xvcjogQ29sb3IpIHtcclxuICAgICAgICBpZiAoIWNjLkNhbWVyYS5tYWluKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2MuQ2FtZXJhLm1haW4uYmFja2dyb3VuZENvbG9yID0gY2xlYXJDb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcm9vdCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jvb3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gUmV0dXJucyBjdXJyZW50IGxvZ2ljIFNjZW5lLlxyXG4gICAgICogQHpoIOiOt+WPluW9k+WJjemAu+i+keWcuuaZr+OAglxyXG4gICAgICogQGRlcHJlY2F0ZWQgU2luY2UgdjIuMC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJ1bm5pbmdTY2VuZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFJldHVybnMgY3VycmVudCBsb2dpYyBTY2VuZS5cclxuICAgICAqIEB6aCDojrflj5blvZPliY3pgLvovpHlnLrmma/jgIJcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBcclxuICAgICAqIGltcG9ydCB7IGRpcmVjdG9yIH0gZnJvbSAnY2MnO1xyXG4gICAgICogLy8gVGhpcyB3aWxsIGhlbHAgeW91IHRvIGdldCB0aGUgQ2FudmFzIG5vZGUgaW4gc2NlbmVcclxuICAgICAqIGRpcmVjdG9yLmdldFNjZW5lKCkuZ2V0Q2hpbGRCeU5hbWUoJ0NhbnZhcycpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTY2VuZSAoKTogU2NlbmUgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gUmV0dXJucyB0aGUgRlBTIHZhbHVlLiBQbGVhc2UgdXNlIFtbR2FtZS5zZXRGcmFtZVJhdGVdXSB0byBjb250cm9sIGFuaW1hdGlvbiBpbnRlcnZhbC5cclxuICAgICAqIEB6aCDojrflj5bljZXkvY3luKfmiafooYzml7bpl7TjgILor7fkvb/nlKggW1tHYW1lLnNldEZyYW1lUmF0ZV1dIOadpeaOp+WItua4uOaIj+W4p+eOh+OAglxyXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgdjIuMC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEFuaW1hdGlvbkludGVydmFsICgpIHtcclxuICAgICAgICByZXR1cm4gMTAwMCAvIGNjLmdhbWUuZ2V0RnJhbWVSYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gU2V0cyBhbmltYXRpb24gaW50ZXJ2YWwsIHRoaXMgZG9lc24ndCBjb250cm9sIHRoZSBtYWluIGxvb3AuPGJyPlxyXG4gICAgICogVG8gY29udHJvbCB0aGUgZ2FtZSdzIGZyYW1lIHJhdGUgb3ZlcmFsbCwgcGxlYXNlIHVzZSBjYy5nYW1lLnNldEZyYW1lUmF0ZVxyXG4gICAgICogQHpoIOiuvue9ruWKqOeUu+mXtOmalO+8jOi/meS4jeaOp+WItuS4u+W+queOr+OAgjxicj5cclxuICAgICAqIOimgeaOp+WItua4uOaIj+eahOW4p+mAn+eOh++8jOivt+S9v+eUqCBjYy5nYW1lLnNldEZyYW1lUmF0ZVxyXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgdjIuMFxyXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIGFuaW1hdGlvbiBpbnRlcnZhbCBkZXNpcmVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0QW5pbWF0aW9uSW50ZXJ2YWwgKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBjYy5nYW1lLnNldEZyYW1lUmF0ZShNYXRoLnJvdW5kKDEwMDAgLyB2YWx1ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFJldHVybnMgdGhlIGRlbHRhIHRpbWUgc2luY2UgbGFzdCBmcmFtZS5cclxuICAgICAqIEB6aCDojrflj5bkuIrkuIDluKfnmoTlop7ph4/ml7bpl7TjgIJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldERlbHRhVGltZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbHRhVGltZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBSZXR1cm5zIHRoZSBjdXJyZW50IHRpbWUuXHJcbiAgICAgKiBAemgg6I635Y+W5b2T5YmN5bin55qE5pe26Ze044CCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDdXJyZW50VGltZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhc3RVcGRhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gUmV0dXJucyBob3cgbWFueSBmcmFtZXMgd2VyZSBjYWxsZWQgc2luY2UgdGhlIGRpcmVjdG9yIHN0YXJ0ZWQuXHJcbiAgICAgKiBAemgg6I635Y+WIGRpcmVjdG9yIOWQr+WKqOS7peadpea4uOaIj+i/kOihjOeahOaAu+W4p+aVsOOAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VG90YWxGcmFtZXMgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90b3RhbEZyYW1lcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBEaXJlY3RvciBpcyBwYXVzZWQuXHJcbiAgICAgKiBAemgg5piv5ZCm5aSE5LqO5pqC5YGc54q25oCB44CCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc1BhdXNlZCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhdXNlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBSZXR1cm5zIHRoZSBjYy5TY2hlZHVsZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZGlyZWN0b3IuXHJcbiAgICAgKiBAemgg6I635Y+W5ZKMIGRpcmVjdG9yIOebuOWFs+iBlOeahCBjYy5TY2hlZHVsZXLjgIJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFNjaGVkdWxlciAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBTZXRzIHRoZSBjYy5TY2hlZHVsZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZGlyZWN0b3IuXHJcbiAgICAgKiBAemgg6K6+572u5ZKMIGRpcmVjdG9yIOebuOWFs+iBlOeahCBjYy5TY2hlZHVsZXLjgIJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFNjaGVkdWxlciAoc2NoZWR1bGVyOiBTY2hlZHVsZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fc2NoZWR1bGVyICE9PSBzY2hlZHVsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyU3lzdGVtKHRoaXMuX3NjaGVkdWxlcik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN5c3RlbShTY2hlZHVsZXIuSUQsIHNjaGVkdWxlciwgMjAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gcmVnaXN0ZXIgYSBzeXN0ZW0uXHJcbiAgICAgKiBAemgg5rOo5YaM5LiA5LiqIHN5c3RlbeOAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVnaXN0ZXJTeXN0ZW0gKG5hbWU6IHN0cmluZywgc3lzOiBTeXN0ZW0sIHByaW9yaXR5OiBudW1iZXIpIHtcclxuICAgICAgICBzeXMuaWQgPSBuYW1lO1xyXG4gICAgICAgIHN5cy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICAgIHN5cy5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5fc3lzdGVtcy5wdXNoKHN5cyk7XHJcbiAgICAgICAgdGhpcy5fc3lzdGVtcy5zb3J0KFN5c3RlbS5zb3J0QnlQcmlvcml0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVucmVnaXN0ZXJTeXN0ZW0gKHN5czogU3lzdGVtKSB7XHJcbiAgICAgICAganMuYXJyYXkuZmFzdFJlbW92ZSh0aGlzLl9zeXN0ZW1zLCBzeXMpO1xyXG4gICAgICAgIHRoaXMuX3N5c3RlbXMuc29ydChTeXN0ZW0uc29ydEJ5UHJpb3JpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIGdldCBhIHN5c3RlbS5cclxuICAgICAqIEB6aCDojrflj5bkuIDkuKogc3lzdGVt44CCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTeXN0ZW0gKG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zeXN0ZW1zLmZpbmQoKHN5cykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3lzLmlkID09PSBuYW1lO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFJldHVybnMgdGhlIGNjLkFuaW1hdGlvbk1hbmFnZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZGlyZWN0b3IuIFBsZWFzZSB1c2UgZ2V0U3lzdGVtKEFuaW1hdGlvbk1hbmFnZXIuSUQpXHJcbiAgICAgKiBAemgg6I635Y+W5ZKMIGRpcmVjdG9yIOebuOWFs+iBlOeahCBjYy5BbmltYXRpb25NYW5hZ2Vy77yI5Yqo55S7566h55CG5Zmo77yJ44CC6K+35L2/55SoIGdldFN5c3RlbShBbmltYXRpb25NYW5hZ2VyLklEKSDmnaXmm7/ku6NcclxuICAgICAqIEBkZXByZWNhdGVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRBbmltYXRpb25NYW5hZ2VyICgpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFN5c3RlbShjYy5BbmltYXRpb25NYW5hZ2VyLklEKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb29wIG1hbmFnZW1lbnRcclxuICAgIC8qKlxyXG4gICAgICogQGVuIFN0YXJ0cyBBbmltYXRpb25cclxuICAgICAqIEB6aCDlvIDlp4vliqjnlLtcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXJ0QW5pbWF0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pbnZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbGFzdFVwZGF0ZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFN0b3BzIGFuaW1hdGlvblxyXG4gICAgICogQHpoIOWBnOatouWKqOeUu1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RvcEFuaW1hdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faW52YWxpZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gUnVuIG1haW4gbG9vcCBvZiBkaXJlY3RvclxyXG4gICAgICogQHpoIOi/kOihjOS4u+W+queOr1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbWFpbkxvb3AgKHRpbWU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9wdXJnZURpcmVjdG9ySW5OZXh0TG9vcCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wdXJnZURpcmVjdG9ySW5OZXh0TG9vcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnB1cmdlRGlyZWN0b3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuX2ludmFsaWQpIHtcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIFwiZ2xvYmFsXCIgZHRcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVEZWx0YVRpbWUoKTtcclxuICAgICAgICAgICAgY29uc3QgZHQgPSB0aGlzLl9kZWx0YVRpbWU7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGVcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9wYXVzZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChEaXJlY3Rvci5FVkVOVF9CRUZPUkVfVVBEQVRFKTtcclxuICAgICAgICAgICAgICAgIC8vIENhbGwgc3RhcnQgZm9yIG5ldyBhZGRlZCBjb21wb25lbnRzXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb21wU2NoZWR1bGVyLnN0YXJ0UGhhc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBmb3IgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29tcFNjaGVkdWxlci51cGRhdGVQaGFzZShkdCk7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgc3lzdGVtc1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9zeXN0ZW1zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3lzdGVtc1tpXS51cGRhdGUoZHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTGF0ZSB1cGRhdGUgZm9yIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBTY2hlZHVsZXIubGF0ZVVwZGF0ZVBoYXNlKGR0KTtcclxuICAgICAgICAgICAgICAgIC8vIFVzZXIgY2FuIHVzZSB0aGlzIGV2ZW50IHRvIGRvIHRoaW5ncyBhZnRlciB1cGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChEaXJlY3Rvci5FVkVOVF9BRlRFUl9VUERBVEUpO1xyXG4gICAgICAgICAgICAgICAgLy8gRGVzdHJveSBlbnRpdGllcyB0aGF0IGhhdmUgYmVlbiByZW1vdmVkIHJlY2VudGx5XHJcbiAgICAgICAgICAgICAgICBDQ09iamVjdC5fZGVmZXJyZWREZXN0cm95KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUG9zdCB1cGRhdGUgc3lzdGVtc1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9zeXN0ZW1zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3lzdGVtc1tpXS5wb3N0VXBkYXRlKGR0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5lbWl0KERpcmVjdG9yLkVWRU5UX0JFRk9SRV9EUkFXKTtcclxuICAgICAgICAgICAgdGhpcy5fcm9vdCEuZnJhbWVNb3ZlKHRoaXMuX2RlbHRhVGltZSk7XHJcbiAgICAgICAgICAgIC8vIFByZXNlbnQgY3VycmVudCBmcmFtZVxyXG4gICAgICAgICAgICB0aGlzLl9yb290IS5kZXZpY2UucHJlc2VudCgpO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXQoRGlyZWN0b3IuRVZFTlRfQUZURVJfRFJBVyk7XHJcblxyXG4gICAgICAgICAgICBldmVudE1hbmFnZXIuZnJhbWVVcGRhdGVMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgTm9kZS5ib29rT2ZDaGFuZ2UuY2xlYXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fdG90YWxGcmFtZXMrKztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdE9uUmVuZGVyZXJJbml0aWFsaXplZCAoKSB7XHJcbiAgICAgICAgdGhpcy5fdG90YWxGcmFtZXMgPSAwO1xyXG4gICAgICAgIHRoaXMuX2xhc3RVcGRhdGUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wdXJnZURpcmVjdG9ySW5OZXh0TG9vcCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBFdmVudCBtYW5hZ2VyXHJcbiAgICAgICAgaWYgKGV2ZW50TWFuYWdlcikge1xyXG4gICAgICAgICAgICBldmVudE1hbmFnZXIuc2V0RW5hYmxlZCh0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNjaGVkdWxlclxyXG4gICAgICAgIC8vIFRPRE86IGhhdmUgYSBzb2xpZCBvcmdhbml6YXRpb24gb2YgcHJpb3JpdHkgYW5kIGV4cG9zZSB0byB1c2VyXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclN5c3RlbShTY2hlZHVsZXIuSUQsIHRoaXMuX3NjaGVkdWxlciwgMjAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5lbWl0KERpcmVjdG9yLkVWRU5UX0lOSVQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2luaXQgKCkge1xyXG4gICAgICAgIGNjLmxvYWRlci5pbml0KHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX3Jvb3QgPSBuZXcgUm9vdChjYy5nYW1lLl9nZnhEZXZpY2UpO1xyXG4gICAgICAgIGNvbnN0IHJvb3RJbmZvID0ge307XHJcbiAgICAgICAgaWYgKCF0aGlzLl9yb290LmluaXRpYWxpemUocm9vdEluZm8pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgRGlyZWN0b3Ige1xyXG4gICAgZXhwb3J0IHR5cGUgT25CZWZvcmVMb2FkU2NlbmUgPSAoKSA9PiB2b2lkO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIE9uVW5sb2FkID0gKCkgPT4gdm9pZDtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBPblNjZW5lTG9hZGVkID0gKGVycm9yOiBudWxsIHwgRXJyb3IsIHNjZW5lQXNzZXQ/OiBTY2VuZUFzc2V0KSA9PiB2b2lkO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIE9uU2NlbmVMYXVuY2hlZCA9IChlcnJvcjogbnVsbCB8IEVycm9yLCBzY2VuZT86IFNjZW5lKSA9PiB2b2lkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNvbXBsZXRlZENvdW50IC0gVGhlIG51bWJlciBvZiB0aGUgaXRlbXMgdGhhdCBhcmUgYWxyZWFkeSBjb21wbGV0ZWQuXHJcbiAgICAgKiBAcGFyYW0gdG90YWxDb3VudCAtIFRoZSB0b3RhbCBudW1iZXIgb2YgdGhlIGl0ZW1zLlxyXG4gICAgICogQHBhcmFtIGl0ZW0gLSBUaGUgbGF0ZXN0IGl0ZW0gd2hpY2ggZmxvdyBvdXQgdGhlIHBpcGVsaW5lLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgdHlwZSBPbkxvYWRTY2VuZVByb2dyZXNzID0gKGNvbXBsZXRlZENvdW50OiBudW1iZXIsIHRvdGFsQ291bnQ6IG51bWJlciwgaXRlbTogYW55KSA9PiB2b2lkO1xyXG59XHJcblxyXG5jYy5EaXJlY3RvciA9IERpcmVjdG9yO1xyXG5cclxuLyoqXHJcbiAqIOWvvOa8lOexu+OAglxyXG4gKiBAcHJvcGVydHkgZGlyZWN0b3JcclxuICovXHJcbmV4cG9ydCBjb25zdCBkaXJlY3RvcjogRGlyZWN0b3IgPSBEaXJlY3Rvci5pbnN0YW5jZSA9IGNjLmRpcmVjdG9yID0gbmV3IERpcmVjdG9yKCk7XHJcbiJdfQ==