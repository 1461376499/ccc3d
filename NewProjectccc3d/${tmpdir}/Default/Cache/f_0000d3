(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../../core/index.js", "../../../core/assets/sprite-frame.js", "../../../core/components/component.js", "../../../core/components/component-event-handler.js", "../../../core/data/class-decorator.js", "../../../core/math/index.js", "../../../core/platform/event-manager/event-enum.js", "../../../core/scene-graph/node.js", "../label-component.js", "../sprite-component.js", "./edit-box-impl.js", "./edit-box-impl-base.js", "./types.js", "../../../core/platform/sys.js", "../../../core/default-constants.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../../core/index.js"), require("../../../core/assets/sprite-frame.js"), require("../../../core/components/component.js"), require("../../../core/components/component-event-handler.js"), require("../../../core/data/class-decorator.js"), require("../../../core/math/index.js"), require("../../../core/platform/event-manager/event-enum.js"), require("../../../core/scene-graph/node.js"), require("../label-component.js"), require("../sprite-component.js"), require("./edit-box-impl.js"), require("./edit-box-impl-base.js"), require("./types.js"), require("../../../core/platform/sys.js"), require("../../../core/default-constants.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.index, global.spriteFrame, global.component, global.componentEventHandler, global.classDecorator, global.index, global.eventEnum, global.node, global.labelComponent, global.spriteComponent, global.editBoxImpl, global.editBoxImplBase, global.types, global.sys, global.defaultConstants);
    global.editBoxComponent = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _index, _spriteFrame, _component, _componentEventHandler, _classDecorator, _index2, _eventEnum, _node, _labelComponent, _spriteComponent, _editBoxImpl, _editBoxImplBase, _types, _sys, _defaultConstants) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.EditBoxComponent = void 0;

  var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _dec20, _dec21, _dec22, _dec23, _dec24, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _descriptor11, _descriptor12, _descriptor13, _descriptor14, _class3, _temp;

  function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

  function _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  function _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }

  function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }

  var LEFT_PADDING = 2;

  function capitalize(str) {
    return str.replace(/(?:^|\s)\S/g, function (a) {
      return a.toUpperCase();
    });
  }

  function capitalizeFirstLetter(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }

  var EventType;
  /**
   * @en
   * cc.EditBoxComponent is a component for inputing text, you can use it to gather small amounts of text from users.
   *
   * @zh
   * EditBoxComponent 组件，用于获取用户的输入文本。
   */

  (function (EventType) {
    EventType["EDITING_DID_BEGAN"] = "editing-did-began";
    EventType["EDITING_DID_ENDED"] = "editing-did-ended";
    EventType["TEXT_CHANGED"] = "text-changed";
    EventType["EDITING_RETURN"] = "editing-return";
  })(EventType || (EventType = {}));

  var EditBoxComponent = (_dec = (0, _classDecorator.ccclass)('cc.EditBoxComponent'), _dec2 = (0, _classDecorator.help)('i18n:cc.EditBoxComponent'), _dec3 = (0, _classDecorator.executionOrder)(100), _dec4 = (0, _classDecorator.menu)('UI/EditBox'), _dec5 = (0, _classDecorator.property)({
    tooltip: '输入框的初始输入内容，如果为空则会显示占位符的文本',
    displayOrder: 1
  }), _dec6 = (0, _classDecorator.property)({
    tooltip: '输入框文本的字体大小',
    displayOrder: 2
  }), _dec7 = (0, _classDecorator.property)({
    type: _index2.Color,
    tooltip: '输入框文本的颜色',
    displayOrder: 3
  }), _dec8 = (0, _classDecorator.property)({
    type: _types.InputFlag,
    tooltip: '指定输入标志位，可以指定输入方式为密码或者单词首字母大写',
    displayOrder: 4
  }), _dec9 = (0, _classDecorator.property)({
    type: _types.InputMode,
    tooltip: '指定输入模式: ANY 表示多行输入，其它都是单行输入，移动平台上还可以指定键盘样式',
    displayOrder: 5
  }), _dec10 = (0, _classDecorator.property)({
    type: _types.KeyboardReturnType,
    tooltip: '指定移动设备上面回车按钮的样式',
    displayOrder: 6
  }), _dec11 = (0, _classDecorator.property)({
    tooltip: '输入框最大允许输入的字符个数',
    displayOrder: 7
  }), _dec12 = (0, _classDecorator.property)({
    tooltip: '输入框文本的行高',
    displayOrder: 8
  }), _dec13 = (0, _classDecorator.property)({
    type: _spriteFrame.SpriteFrame,
    tooltip: '输入框的背景图片',
    displayOrder: 10
  }), _dec14 = (0, _classDecorator.property)({
    tooltip: '输入框输入文本节点上挂载的 Label 组件对象',
    type: _labelComponent.LabelComponent,
    displayOrder: 11
  }), _dec15 = (0, _classDecorator.property)({
    tooltip: '输入框占位符节点上挂载的 Label 组件对象',
    type: _labelComponent.LabelComponent,
    displayOrder: 12
  }), _dec16 = (0, _classDecorator.property)({
    tooltip: '输入框占位符的文本内容',
    displayOrder: 13
  }), _dec17 = (0, _classDecorator.property)({
    tooltip: '输入框占位符的字体大小',
    displayOrder: 14
  }), _dec18 = (0, _classDecorator.property)({
    tooltip: '输入框占位符的字体颜色',
    displayOrder: 15
  }), _dec19 = (0, _classDecorator.property)({
    tooltip: '输入框总是可见，并且永远在游戏视图的上面（这个属性只有在 Web 上面修改有意义）',
    displayOrder: 21
  }), _dec20 = (0, _classDecorator.property)({
    tooltip: '修改 DOM 输入元素的 tabIndex（这个属性只有在 Web 上面修改有意义）',
    displayOrder: 22
  }), _dec21 = (0, _classDecorator.property)({
    type: [_componentEventHandler.EventHandler],
    tooltip: '该事件在用户点击输入框获取焦点的时候被触发',
    displayOrder: 31
  }), _dec22 = (0, _classDecorator.property)({
    type: [_componentEventHandler.EventHandler],
    tooltip: '编辑文本输入框时触发的事件回调',
    displayOrder: 32
  }), _dec23 = (0, _classDecorator.property)({
    type: [_componentEventHandler.EventHandler],
    tooltip: '在单行模式下面，一般是在用户按下回车或者点击屏幕输入框以外的地方调用该函数。 如果是多行输入，一般是在用户点击屏幕输入框以外的地方调用该函数',
    displayOrder: 33
  }), _dec24 = (0, _classDecorator.property)({
    type: [_componentEventHandler.EventHandler],
    tooltip: '该事件在用户按下回车键的时候被触发, 如果是单行输入框，按回车键还会使输入框失去焦点',
    displayOrder: 34
  }), _dec(_class = _dec2(_class = _dec3(_class = _dec4(_class = (0, _classDecorator.executeInEditMode)(_class = (_class2 = (_temp = _class3 = /*#__PURE__*/function (_Component) {
    _inherits(EditBoxComponent, _Component);

    function EditBoxComponent() {
      var _getPrototypeOf2;

      var _this;

      _classCallCheck(this, EditBoxComponent);

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditBoxComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));

      _initializerDefineProperty(_this, "editingDidBegan", _descriptor, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "textChanged", _descriptor2, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "editingDidEnded", _descriptor3, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "editingReturn", _descriptor4, _assertThisInitialized(_this));

      _this._impl = null;
      _this._background = null;

      _initializerDefineProperty(_this, "_textLabel", _descriptor5, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_placeholderLabel", _descriptor6, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_returnType", _descriptor7, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_useOriginalSize", _descriptor8, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_string", _descriptor9, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_tabIndex", _descriptor10, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_backgroundImage", _descriptor11, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_inputFlag", _descriptor12, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_inputMode", _descriptor13, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_maxLength", _descriptor14, _assertThisInitialized(_this));

      _this._isLabelVisible = false;
      return _this;
    }

    _createClass(EditBoxComponent, [{
      key: "__preload",
      value: function __preload() {
        this._init();
      }
    }, {
      key: "onEnable",
      value: function onEnable() {
        if (!_defaultConstants.EDITOR) {
          this._registerEvent();
        }

        if (this._impl) {
          this._impl.onEnable();
        }
      }
    }, {
      key: "update",
      value: function update() {
        if (this._impl) {
          this._impl.update();
        }
      }
    }, {
      key: "onDisable",
      value: function onDisable() {
        if (!_defaultConstants.EDITOR) {
          this._unregisterEvent();
        }

        if (this._impl) {
          this._impl.onDisable();
        }
      }
    }, {
      key: "onDestroy",
      value: function onDestroy() {
        if (this._impl) {
          this._impl.clear();
        }
      }
      /**
       * @en Let the EditBox get focus
       * @zh 让当前 EditBox 获得焦点。
       */

    }, {
      key: "setFocus",
      value: function setFocus() {
        if (this._impl) {
          this._impl.setFocus(true);
        }
      }
      /**
       * @en Let the EditBox get focus
       * @zh 让当前 EditBox 获得焦点
       */

    }, {
      key: "focus",
      value: function focus() {
        if (this._impl) {
          this._impl.setFocus(true);
        }
      }
      /**
       * @en Let the EditBox lose focus
       * @zh 让当前 EditBox 失去焦点
       */

    }, {
      key: "blur",
      value: function blur() {
        if (this._impl) {
          this._impl.setFocus(false);
        }
      }
      /**
       * @en Determine whether EditBox is getting focus or not.
       * @zh 判断 EditBox 是否获得了焦点。
       * Note: only available on Web at the moment.
       */

    }, {
      key: "isFocused",
      value: function isFocused() {
        if (this._impl) {
          return this._impl.isFocused();
        }

        return false;
      }
    }, {
      key: "_editBoxEditingDidBegan",
      value: function _editBoxEditingDidBegan() {
        _componentEventHandler.EventHandler.emitEvents(this.editingDidBegan, this);

        this.node.emit(EventType.EDITING_DID_BEGAN, this);
      }
    }, {
      key: "_editBoxEditingDidEnded",
      value: function _editBoxEditingDidEnded() {
        _componentEventHandler.EventHandler.emitEvents(this.editingDidEnded, this);

        this.node.emit(EventType.EDITING_DID_ENDED, this);
      }
    }, {
      key: "_editBoxTextChanged",
      value: function _editBoxTextChanged(text) {
        text = this._updateLabelStringStyle(text, true);
        this.string = text;

        _componentEventHandler.EventHandler.emitEvents(this.textChanged, text, this);

        this.node.emit(EventType.TEXT_CHANGED, this);
      }
    }, {
      key: "_editBoxEditingReturn",
      value: function _editBoxEditingReturn() {
        _componentEventHandler.EventHandler.emitEvents(this.editingReturn, this);

        this.node.emit(EventType.EDITING_RETURN, this);
      }
    }, {
      key: "_showLabels",
      value: function _showLabels() {
        this._isLabelVisible = true;

        this._updateLabels();
      }
    }, {
      key: "_hideLabels",
      value: function _hideLabels() {
        this._isLabelVisible = false;

        if (this._textLabel) {
          this._textLabel.node.active = false;
        }

        if (this._placeholderLabel) {
          this._placeholderLabel.node.active = false;
        }
      }
    }, {
      key: "_onTouchBegan",
      value: function _onTouchBegan(event) {
        event.propagationStopped = true;
      }
    }, {
      key: "_onTouchCancel",
      value: function _onTouchCancel(event) {
        event.propagationStopped = true;
      }
    }, {
      key: "_onTouchEnded",
      value: function _onTouchEnded(event) {
        if (this._impl) {
          this._impl.beginEditing();
        }

        event.propagationStopped = true;
      }
    }, {
      key: "_init",
      value: function _init() {
        this._createBackgroundSprite();

        this._updatePlaceholderLabel();

        this._updateTextLabel();

        this._isLabelVisible = true;
        this.node.on(_eventEnum.SystemEventType.SIZE_CHANGED, this._resizeChildNodes, this);
        var impl = this._impl = new EditBoxComponent._EditBoxImpl();
        impl.init(this);

        this._updateString(this._string);

        this._syncSize();
      }
    }, {
      key: "_createBackgroundSprite",
      value: function _createBackgroundSprite() {
        if (!this._background) {
          this._background = this.node.getComponent(_spriteComponent.SpriteComponent);

          if (!this._background) {
            this._background = this.node.addComponent(_spriteComponent.SpriteComponent);
          }
        }

        this._background.type = _spriteComponent.SpriteComponent.Type.SLICED;
        this._background.spriteFrame = this._backgroundImage;
      }
    }, {
      key: "_updateTextLabel",
      value: function _updateTextLabel() {
        var textLabel = this._textLabel; // If textLabel doesn't exist, create one.

        if (!textLabel) {
          var node = this.node.getChildByName('TEXT_LABEL');

          if (!node) {
            node = new _node.Node('TEXT_LABEL');
          }

          textLabel = node.getComponent(_labelComponent.LabelComponent);

          if (!textLabel) {
            textLabel = node.addComponent(_labelComponent.LabelComponent);
          }

          node.parent = this.node;
          this._textLabel = textLabel;
        } // update


        var transformComp = this._textLabel.node._uiProps.uiTransformComp;
        transformComp.setAnchorPoint(0, 1);
        textLabel.overflow = _labelComponent.LabelComponent.Overflow.CLAMP;

        if (this._inputMode === _types.InputMode.ANY) {
          textLabel.verticalAlign = _labelComponent.VerticalTextAlignment.TOP;
          textLabel.enableWrapText = true;
        } else {
          textLabel.verticalAlign = _labelComponent.VerticalTextAlignment.CENTER;
          textLabel.enableWrapText = false;
        }

        textLabel.string = this._updateLabelStringStyle(this._string);
      }
    }, {
      key: "_updatePlaceholderLabel",
      value: function _updatePlaceholderLabel() {
        var placeholderLabel = this._placeholderLabel; // If placeholderLabel doesn't exist, create one.

        if (!placeholderLabel) {
          var node = this.node.getChildByName('PLACEHOLDER_LABEL');

          if (!node) {
            node = new _node.Node('PLACEHOLDER_LABEL');
          }

          placeholderLabel = node.getComponent(_labelComponent.LabelComponent);

          if (!placeholderLabel) {
            placeholderLabel = node.addComponent(_labelComponent.LabelComponent);
          }

          node.parent = this.node;
          this._placeholderLabel = placeholderLabel;
        } // update


        var transform = this._placeholderLabel.node._uiProps.uiTransformComp;
        transform.setAnchorPoint(0, 1);
        placeholderLabel.overflow = _labelComponent.LabelComponent.Overflow.CLAMP;

        if (this._inputMode === _types.InputMode.ANY) {
          placeholderLabel.verticalAlign = _labelComponent.VerticalTextAlignment.TOP;
          placeholderLabel.enableWrapText = true;
        } else {
          placeholderLabel.verticalAlign = _labelComponent.VerticalTextAlignment.CENTER;
          placeholderLabel.enableWrapText = false;
        }

        placeholderLabel.string = this.placeholder;
      }
    }, {
      key: "_syncSize",
      value: function _syncSize() {
        var size = this.node.getContentSize();

        if (this._background) {
          this._background.node._uiProps.uiTransformComp.anchorPoint = this.node._uiProps.uiTransformComp.anchorPoint;

          this._background.node.setContentSize(size);
        }

        this._updateLabelPosition(size);

        if (this._impl) {
          this._impl.setSize(size.width, size.height);
        }
      }
    }, {
      key: "_updateLabels",
      value: function _updateLabels() {
        if (this._isLabelVisible) {
          var content = this._string;

          if (this._textLabel) {
            this._textLabel.node.active = content !== '';
          }

          if (this._placeholderLabel) {
            this._placeholderLabel.node.active = content === '';
          }
        }
      }
    }, {
      key: "_updateString",
      value: function _updateString(text) {
        var textLabel = this._textLabel; // Not inited yet

        if (!textLabel) {
          return;
        }

        var displayText = text;

        if (displayText) {
          displayText = this._updateLabelStringStyle(displayText);
        }

        textLabel.string = displayText;

        this._updateLabels();
      }
    }, {
      key: "_updateLabelStringStyle",
      value: function _updateLabelStringStyle(text) {
        var ignorePassword = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
        var inputFlag = this._inputFlag;

        if (!ignorePassword && inputFlag === _types.InputFlag.PASSWORD) {
          var passwordString = '';
          var len = text.length;

          for (var i = 0; i < len; ++i) {
            passwordString += "\u25CF";
          }

          text = passwordString;
        } else if (inputFlag === _types.InputFlag.INITIAL_CAPS_ALL_CHARACTERS) {
          text = text.toUpperCase();
        } else if (inputFlag === _types.InputFlag.INITIAL_CAPS_WORD) {
          text = capitalize(text);
        } else if (inputFlag === _types.InputFlag.INITIAL_CAPS_SENTENCE) {
          text = capitalizeFirstLetter(text);
        }

        return text;
      }
    }, {
      key: "_registerEvent",
      value: function _registerEvent() {
        this.node.on(_eventEnum.SystemEventType.TOUCH_START, this._onTouchBegan, this);
        this.node.on(_eventEnum.SystemEventType.TOUCH_END, this._onTouchEnded, this);
      }
    }, {
      key: "_unregisterEvent",
      value: function _unregisterEvent() {
        this.node.off(_eventEnum.SystemEventType.TOUCH_START, this._onTouchBegan, this);
        this.node.off(_eventEnum.SystemEventType.TOUCH_END, this._onTouchEnded, this);
      }
    }, {
      key: "_updateLabelPosition",
      value: function _updateLabelPosition(size) {
        var node = this.node;
        var offX = -node.anchorX * node.width;
        var offY = -node.anchorY * node.height;
        var placeholderLabel = this._placeholderLabel;
        var textLabel = this._textLabel;

        if (textLabel) {
          textLabel.node.setContentSize(size.width - LEFT_PADDING, size.height);
          textLabel.node.position = new _index2.Vec3(offX + LEFT_PADDING, offY + size.height, textLabel.node.position.z);
          textLabel.verticalAlign = this._inputMode === _types.InputMode.ANY ? _labelComponent.VerticalTextAlignment.TOP : _labelComponent.VerticalTextAlignment.CENTER;
          textLabel.enableWrapText = this._inputMode === _types.InputMode.ANY ? true : false;
        }

        if (placeholderLabel) {
          placeholderLabel.node.setContentSize(size.width - LEFT_PADDING, size.height);
          placeholderLabel.lineHeight = size.height;
          placeholderLabel.node.position = new _index2.Vec3(offX + LEFT_PADDING, offY + size.height, placeholderLabel.node.position.z);
          placeholderLabel.verticalAlign = this._inputMode === _types.InputMode.ANY ? _labelComponent.VerticalTextAlignment.TOP : _labelComponent.VerticalTextAlignment.CENTER;
          placeholderLabel.enableWrapText = this._inputMode === _types.InputMode.ANY ? true : false;
        }
      }
    }, {
      key: "_resizeChildNodes",
      value: function _resizeChildNodes() {
        var textLabelNode = this._textLabel && this._textLabel.node;

        if (textLabelNode) {
          textLabelNode.position = new _index2.Vec3(-this.node.width / 2, this.node.height / 2, textLabelNode.position.z);
          textLabelNode.width = this.node.width;
          textLabelNode.height = this.node.height;
        }

        var placeholderLabelNode = this._placeholderLabel && this._placeholderLabel.node;

        if (placeholderLabelNode) {
          placeholderLabelNode.position = new _index2.Vec3(-this.node.width / 2, this.node.height / 2, placeholderLabelNode.position.z);
          placeholderLabelNode.width = this.node.width;
          placeholderLabelNode.height = this.node.height;
        }

        var backgroundNode = this._background && this._background.node;

        if (backgroundNode) {
          backgroundNode.width = this.node.width;
          backgroundNode.height = this.node.height;
        }
      }
    }, {
      key: "string",

      /**
       * @en
       * Input string of EditBox.
       *
       * @zh
       * 输入框的初始输入内容，如果为空则会显示占位符的文本。
       */
      get: function get() {
        return this._string;
      },
      set: function set(value) {
        if (this._maxLength >= 0 && value.length >= this._maxLength) {
          value = value.slice(0, this._maxLength);
        }

        this._string = value;

        this._updateString(value);
      }
      /**
       * @en
       * Font size of the input text.
       *
       * @zh
       * 输入框文本的字体大小。该属性会在将来的版本中移除，请使用 editBox.textLabel.fontSize。
       */

    }, {
      key: "fontSize",
      get: function get() {
        if (!this._textLabel) {
          return 20;
        }

        return this._textLabel.fontSize;
      },
      set: function set(value) {
        if (this._textLabel) {
          this._textLabel.fontSize = value;
        }
      }
      /**
       * @en
       * Font color of the input text.
       *
       * @zh
       * 输入框文本的颜色。该属性会在将来的版本中移除，请使用 editBox.textLabel.color
       */

    }, {
      key: "fontColor",
      get: function get() {
        if (!this._textLabel) {
          return _index.math.Color.WHITE.clone();
        }

        return this._textLabel.color;
      },
      set: function set(value) {
        if (this._textLabel) {
          this._textLabel.color = value;
        }
      }
      /**
       * @en
       * Set the input flags that are to be applied to the EditBox.
       *
       * @zh
       * 指定输入标志位，可以指定输入方式为密码或者单词首字母大写。
       */

    }, {
      key: "inputFlag",
      get: function get() {
        return this._inputFlag;
      },
      set: function set(value) {
        this._inputFlag = value;

        this._updateString(this._string);
      }
      /**
       * @en
       * Set the input mode of the edit box.
       * If you pass ANY, it will create a multiline EditBox.
       *
       * @zh
       * 指定输入模式: ANY表示多行输入，其它都是单行输入，移动平台上还可以指定键盘样式。
       */

    }, {
      key: "inputMode",
      get: function get() {
        return this._inputMode;
      },
      set: function set(oldValue) {
        if (this._inputMode !== oldValue) {
          this._inputMode = oldValue;

          this._updateTextLabel();

          this._updatePlaceholderLabel();
        }
      }
      /**
       * @en
       * The return key type of EditBox.
       * Note: it is meaningless for web platforms and desktop platforms.
       *
       * @zh
       * 指定移动设备上面回车按钮的样式。
       * 注意：这个选项对 web 平台与 desktop 平台无效。
       */

    }, {
      key: "returnType",
      get: function get() {
        return this._returnType;
      },
      set: function set(value) {
        this._returnType = value;
      }
      /**
       * @en
       * The maximize input length of EditBox.
       * - If pass a value less than 0, it won't limit the input number of characters.
       * - If pass 0, it doesn't allow input any characters.
       *
       * @zh
       * 输入框最大允许输入的字符个数。
       * - 如果值为小于 0 的值，则不会限制输入字符个数。
       * - 如果值为 0，则不允许用户进行任何输入。
       */

    }, {
      key: "maxLength",
      get: function get() {
        return this._maxLength;
      },
      set: function set(value) {
        this._maxLength = value;
      }
      /**
       * @en
       * Change the lineHeight of displayed text.
       *
       * @zh
       * 输入框文本的行高。
       */

    }, {
      key: "lineHeight",
      get: function get() {
        if (!this._textLabel) {
          return 40;
        }

        return this._textLabel.lineHeight;
      },
      set: function set(value) {
        if (this._textLabel) {
          this._textLabel.lineHeight = value;
        }
      }
      /**
       * @en
       * The background image of EditBox.
       *
       * @zh
       * 输入框的背景图片。
       */

    }, {
      key: "backgroundImage",
      get: function get() {
        return this._backgroundImage;
      },
      set: function set(value) {
        if (this._backgroundImage === value) {
          return;
        }

        this._backgroundImage = value;

        this._createBackgroundSprite();
      }
      /**
       * @en
       * The Label component attached to the node for EditBox's input text label
       *
       * @zh
       * 输入框输入文本节点上挂载的 Label 组件对象
       */

    }, {
      key: "textLabel",
      get: function get() {
        return this._textLabel;
      },
      set: function set(oldValue) {
        if (this._textLabel !== oldValue) {
          this._textLabel = oldValue;

          if (this._textLabel) {
            this._updateTextLabel();

            this._updateLabels();
          }
        }
      }
      /**
       * @en
       * The Label component attached to the node for EditBox's placeholder text label.
       *
       * @zh
       * 输入框占位符节点上挂载的 Label 组件对象。
       */

    }, {
      key: "placeholderLabel",
      get: function get() {
        return this._placeholderLabel;
      },
      set: function set(oldValue) {
        if (this._placeholderLabel !== oldValue) {
          this._placeholderLabel = oldValue;

          if (this._placeholderLabel) {
            this._updatePlaceholderLabel();

            this._updateLabels();
          }
        }
      }
      /**
       * @en
       * The display text of placeholder.
       *
       * @zh
       * 输入框占位符的文本内容。
       */

    }, {
      key: "placeholder",
      get: function get() {
        if (!this._placeholderLabel) {
          return '';
        }

        return this._placeholderLabel.string;
      },
      set: function set(value) {
        if (this._placeholderLabel) {
          this._placeholderLabel.string = value;
        }
      }
      /**
       * @en
       * The font size of placeholder.
       *
       * @zh
       * 输入框占位符的字体大小。该属性会在将来的版本中移除，请使用 editBox.placeholderLabel.fontSize
       */

    }, {
      key: "placeholderFontSize",
      get: function get() {
        if (!this._placeholderLabel) {
          return 20;
        }

        return this._placeholderLabel.fontSize;
      },
      set: function set(value) {
        if (this._placeholderLabel) {
          this._placeholderLabel.fontSize = value;
        }
      }
      /**
       * @en
       * The font color of placeholder.
       *
       * @zh
       * 输入框占位符的字体颜色。该属性会在将来的版本中移除，请使用 editBox.placeholderLabel.color
       */

    }, {
      key: "placeholderFontColor",
      get: function get() {
        if (!this._placeholderLabel) {
          return _index.math.Color.GRAY.clone();
        }

        return this._placeholderLabel.color;
      },
      set: function set(value) {
        if (this._placeholderLabel) {
          this._placeholderLabel.color = value;
        }
      }
      /**
       * @en
       * The input is always visible and be on top of the game view (only useful on Web).
       *
       * @zh
       * 输入框总是可见，并且永远在游戏视图的上面（这个属性只有在 Web 上面修改有意义）
       * Note: only available on Web at the moment.
       *
       * @deprecated
       */

    }, {
      key: "stayOnTop",
      get: function get() {
        return;
      },
      set: function set(value) {
        console.warn('stayOnTop is removed.');
      }
      /**
       * @en
       * Set the tabIndex of the DOM input element (only useful on Web).
       *
       * @zh
       * 修改 DOM 输入元素的 tabIndex（这个属性只有在 Web 上面修改有意义）。
       */

    }, {
      key: "tabIndex",
      get: function get() {
        return this._tabIndex;
      },
      set: function set(value) {
        if (this._tabIndex !== value) {
          this._tabIndex = value;

          if (this._impl) {
            this._impl.setTabIndex(value);
          }
        }
      }
    }]);

    return EditBoxComponent;
  }(_component.Component), _class3._EditBoxImpl = _editBoxImplBase.EditBoxImplBase, _class3.KeyboardReturnType = _types.KeyboardReturnType, _class3.InputFlag = _types.InputFlag, _class3.InputMode = _types.InputMode, _class3.EventType = EventType, _temp), (_applyDecoratedDescriptor(_class2.prototype, "string", [_dec5], Object.getOwnPropertyDescriptor(_class2.prototype, "string"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "fontSize", [_dec6], Object.getOwnPropertyDescriptor(_class2.prototype, "fontSize"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "fontColor", [_dec7], Object.getOwnPropertyDescriptor(_class2.prototype, "fontColor"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "inputFlag", [_dec8], Object.getOwnPropertyDescriptor(_class2.prototype, "inputFlag"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "inputMode", [_dec9], Object.getOwnPropertyDescriptor(_class2.prototype, "inputMode"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "returnType", [_dec10], Object.getOwnPropertyDescriptor(_class2.prototype, "returnType"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "maxLength", [_dec11], Object.getOwnPropertyDescriptor(_class2.prototype, "maxLength"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "lineHeight", [_dec12], Object.getOwnPropertyDescriptor(_class2.prototype, "lineHeight"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "backgroundImage", [_dec13], Object.getOwnPropertyDescriptor(_class2.prototype, "backgroundImage"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "textLabel", [_dec14], Object.getOwnPropertyDescriptor(_class2.prototype, "textLabel"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "placeholderLabel", [_dec15], Object.getOwnPropertyDescriptor(_class2.prototype, "placeholderLabel"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "placeholder", [_dec16], Object.getOwnPropertyDescriptor(_class2.prototype, "placeholder"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "placeholderFontSize", [_dec17], Object.getOwnPropertyDescriptor(_class2.prototype, "placeholderFontSize"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "placeholderFontColor", [_dec18], Object.getOwnPropertyDescriptor(_class2.prototype, "placeholderFontColor"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "stayOnTop", [_dec19], Object.getOwnPropertyDescriptor(_class2.prototype, "stayOnTop"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "tabIndex", [_dec20], Object.getOwnPropertyDescriptor(_class2.prototype, "tabIndex"), _class2.prototype), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "editingDidBegan", [_dec21], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return [];
    }
  }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "textChanged", [_dec22], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return [];
    }
  }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "editingDidEnded", [_dec23], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return [];
    }
  }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "editingReturn", [_dec24], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return [];
    }
  }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "_textLabel", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return null;
    }
  }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "_placeholderLabel", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return null;
    }
  }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "_returnType", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return _types.KeyboardReturnType.DEFAULT;
    }
  }), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, "_useOriginalSize", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return true;
    }
  }), _descriptor9 = _applyDecoratedDescriptor(_class2.prototype, "_string", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return '';
    }
  }), _descriptor10 = _applyDecoratedDescriptor(_class2.prototype, "_tabIndex", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor11 = _applyDecoratedDescriptor(_class2.prototype, "_backgroundImage", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return null;
    }
  }), _descriptor12 = _applyDecoratedDescriptor(_class2.prototype, "_inputFlag", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return _types.InputFlag.DEFAULT;
    }
  }), _descriptor13 = _applyDecoratedDescriptor(_class2.prototype, "_inputMode", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return _types.InputMode.ANY;
    }
  }), _descriptor14 = _applyDecoratedDescriptor(_class2.prototype, "_maxLength", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 20;
    }
  })), _class2)) || _class) || _class) || _class) || _class) || _class);
  _exports.EditBoxComponent = EditBoxComponent;

  if (_sys.sys.isBrowser) {
    EditBoxComponent._EditBoxImpl = _editBoxImpl.EditBoxImpl;
  }

  cc.EditBoxComponent = EditBoxComponent;
  /**
   * @en
   * Note: This event is emitted from the node to which the component belongs.
   * @zh
   * 注意：此事件是从该组件所属的 Node 上面派发出来的，需要用 node.on 来监听。
   * @event editing-did-began
   * @param {Event.EventCustom} event
   * @param {EditBox} editbox - The EditBox component.
   */

  /**
   * @en
   * Note: This event is emitted from the node to which the component belongs.
   * @zh
   * 注意：此事件是从该组件所属的 Node 上面派发出来的，需要用 node.on 来监听。
   * @event editing-did-ended
   * @param {Event.EventCustom} event
   * @param {EditBox} editbox - The EditBox component.
   */

  /**
   * @en
   * Note: This event is emitted from the node to which the component belongs.
   * @zh
   * 注意：此事件是从该组件所属的 Node 上面派发出来的，需要用 node.on 来监听。
   * @event text-changed
   * @param {Event.EventCustom} event
   * @param {EditBox} editbox - The EditBox component.
   */

  /**
   * @en
   * Note: This event is emitted from the node to which the component belongs.
   * @zh
   * 注意：此事件是从该组件所属的 Node 上面派发出来的，需要用 node.on 来监听。
   * @event editing-return
   * @param {Event.EventCustom} event
   * @param {EditBox} editbox - The EditBox component.
   */

  /**
   * @en if you don't need the EditBox and it isn't in any running Scene, you should
   * call the destroy method on this component or the associated node explicitly.
   * Otherwise, the created DOM element won't be removed from web page.
   * @zh
   * 如果你不再使用 EditBox，并且组件未添加到场景中，那么你必须手动对组件或所在节点调用 destroy。
   * 这样才能移除网页上的 DOM 节点，避免 Web 平台内存泄露。
   * @example
   * ```
   * editbox.node.parent = null;  // or  editbox.node.removeFromParent(false);
   * // when you don't need editbox anymore
   * editbox.node.destroy();
   * ```
   * @return {Boolean} whether it is the first time the destroy being called
   */
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkY6L2plbmtpbnMvd29ya3NwYWNlL0NyZWF0b3JfM0QvZWRpdG9yLTNkL3Jlc291cmNlcy8zZC9lbmdpbmUvY29jb3MvdWkvY29tcG9uZW50cy9lZGl0Ym94L2VkaXQtYm94LWNvbXBvbmVudC50cyJdLCJuYW1lcyI6WyJMRUZUX1BBRERJTkciLCJjYXBpdGFsaXplIiwic3RyIiwicmVwbGFjZSIsImEiLCJ0b1VwcGVyQ2FzZSIsImNhcGl0YWxpemVGaXJzdExldHRlciIsImNoYXJBdCIsInNsaWNlIiwiRXZlbnRUeXBlIiwiRWRpdEJveENvbXBvbmVudCIsInRvb2x0aXAiLCJkaXNwbGF5T3JkZXIiLCJ0eXBlIiwiQ29sb3IiLCJJbnB1dEZsYWciLCJJbnB1dE1vZGUiLCJLZXlib2FyZFJldHVyblR5cGUiLCJTcHJpdGVGcmFtZSIsIkxhYmVsQ29tcG9uZW50IiwiQ29tcG9uZW50RXZlbnRIYW5kbGVyIiwiZXhlY3V0ZUluRWRpdE1vZGUiLCJfaW1wbCIsIl9iYWNrZ3JvdW5kIiwiX2lzTGFiZWxWaXNpYmxlIiwiX2luaXQiLCJFRElUT1IiLCJfcmVnaXN0ZXJFdmVudCIsIm9uRW5hYmxlIiwidXBkYXRlIiwiX3VucmVnaXN0ZXJFdmVudCIsIm9uRGlzYWJsZSIsImNsZWFyIiwic2V0Rm9jdXMiLCJpc0ZvY3VzZWQiLCJlbWl0RXZlbnRzIiwiZWRpdGluZ0RpZEJlZ2FuIiwibm9kZSIsImVtaXQiLCJFRElUSU5HX0RJRF9CRUdBTiIsImVkaXRpbmdEaWRFbmRlZCIsIkVESVRJTkdfRElEX0VOREVEIiwidGV4dCIsIl91cGRhdGVMYWJlbFN0cmluZ1N0eWxlIiwic3RyaW5nIiwidGV4dENoYW5nZWQiLCJURVhUX0NIQU5HRUQiLCJlZGl0aW5nUmV0dXJuIiwiRURJVElOR19SRVRVUk4iLCJfdXBkYXRlTGFiZWxzIiwiX3RleHRMYWJlbCIsImFjdGl2ZSIsIl9wbGFjZWhvbGRlckxhYmVsIiwiZXZlbnQiLCJwcm9wYWdhdGlvblN0b3BwZWQiLCJiZWdpbkVkaXRpbmciLCJfY3JlYXRlQmFja2dyb3VuZFNwcml0ZSIsIl91cGRhdGVQbGFjZWhvbGRlckxhYmVsIiwiX3VwZGF0ZVRleHRMYWJlbCIsIm9uIiwiU3lzdGVtRXZlbnRUeXBlIiwiU0laRV9DSEFOR0VEIiwiX3Jlc2l6ZUNoaWxkTm9kZXMiLCJpbXBsIiwiX0VkaXRCb3hJbXBsIiwiaW5pdCIsIl91cGRhdGVTdHJpbmciLCJfc3RyaW5nIiwiX3N5bmNTaXplIiwiZ2V0Q29tcG9uZW50IiwiU3ByaXRlQ29tcG9uZW50IiwiYWRkQ29tcG9uZW50IiwiVHlwZSIsIlNMSUNFRCIsInNwcml0ZUZyYW1lIiwiX2JhY2tncm91bmRJbWFnZSIsInRleHRMYWJlbCIsImdldENoaWxkQnlOYW1lIiwiTm9kZSIsInBhcmVudCIsInRyYW5zZm9ybUNvbXAiLCJfdWlQcm9wcyIsInVpVHJhbnNmb3JtQ29tcCIsInNldEFuY2hvclBvaW50Iiwib3ZlcmZsb3ciLCJPdmVyZmxvdyIsIkNMQU1QIiwiX2lucHV0TW9kZSIsIkFOWSIsInZlcnRpY2FsQWxpZ24iLCJWZXJ0aWNhbFRleHRBbGlnbm1lbnQiLCJUT1AiLCJlbmFibGVXcmFwVGV4dCIsIkNFTlRFUiIsInBsYWNlaG9sZGVyTGFiZWwiLCJ0cmFuc2Zvcm0iLCJwbGFjZWhvbGRlciIsInNpemUiLCJnZXRDb250ZW50U2l6ZSIsImFuY2hvclBvaW50Iiwic2V0Q29udGVudFNpemUiLCJfdXBkYXRlTGFiZWxQb3NpdGlvbiIsInNldFNpemUiLCJ3aWR0aCIsImhlaWdodCIsImNvbnRlbnQiLCJkaXNwbGF5VGV4dCIsImlnbm9yZVBhc3N3b3JkIiwiaW5wdXRGbGFnIiwiX2lucHV0RmxhZyIsIlBBU1NXT1JEIiwicGFzc3dvcmRTdHJpbmciLCJsZW4iLCJsZW5ndGgiLCJpIiwiSU5JVElBTF9DQVBTX0FMTF9DSEFSQUNURVJTIiwiSU5JVElBTF9DQVBTX1dPUkQiLCJJTklUSUFMX0NBUFNfU0VOVEVOQ0UiLCJUT1VDSF9TVEFSVCIsIl9vblRvdWNoQmVnYW4iLCJUT1VDSF9FTkQiLCJfb25Ub3VjaEVuZGVkIiwib2ZmIiwib2ZmWCIsImFuY2hvclgiLCJvZmZZIiwiYW5jaG9yWSIsInBvc2l0aW9uIiwiVmVjMyIsInoiLCJsaW5lSGVpZ2h0IiwidGV4dExhYmVsTm9kZSIsInBsYWNlaG9sZGVyTGFiZWxOb2RlIiwiYmFja2dyb3VuZE5vZGUiLCJ2YWx1ZSIsIl9tYXhMZW5ndGgiLCJmb250U2l6ZSIsIm1hdGgiLCJXSElURSIsImNsb25lIiwiY29sb3IiLCJvbGRWYWx1ZSIsIl9yZXR1cm5UeXBlIiwiR1JBWSIsImNvbnNvbGUiLCJ3YXJuIiwiX3RhYkluZGV4Iiwic2V0VGFiSW5kZXgiLCJDb21wb25lbnQiLCJFZGl0Qm94SW1wbEJhc2UiLCJwcm9wZXJ0eSIsIkRFRkFVTFQiLCJzeXMiLCJpc0Jyb3dzZXIiLCJFZGl0Qm94SW1wbCIsImNjIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBK0NBLE1BQU1BLFlBQVksR0FBRyxDQUFyQjs7QUFFQSxXQUFTQyxVQUFULENBQXFCQyxHQUFyQixFQUFrQztBQUM5QixXQUFPQSxHQUFHLENBQUNDLE9BQUosQ0FBWSxhQUFaLEVBQTJCLFVBQUNDLENBQUQsRUFBTztBQUNyQyxhQUFPQSxDQUFDLENBQUNDLFdBQUYsRUFBUDtBQUNILEtBRk0sQ0FBUDtBQUdIOztBQUVELFdBQVNDLHFCQUFULENBQWdDSixHQUFoQyxFQUE2QztBQUN6QyxXQUFPQSxHQUFHLENBQUNLLE1BQUosQ0FBVyxDQUFYLEVBQWNGLFdBQWQsS0FBOEJILEdBQUcsQ0FBQ00sS0FBSixDQUFVLENBQVYsQ0FBckM7QUFDSDs7TUFFSUMsUztBQU1MOzs7Ozs7OzthQU5LQSxTO0FBQUFBLElBQUFBLFM7QUFBQUEsSUFBQUEsUztBQUFBQSxJQUFBQSxTO0FBQUFBLElBQUFBLFM7S0FBQUEsUyxLQUFBQSxTOztNQW1CUUMsZ0IsV0FMWiw2QkFBUSxxQkFBUixDLFVBQ0EsMEJBQUssMEJBQUwsQyxVQUNB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Y0ksRTs7Ozs7OzthQWNGLEU7O2lGQUsvQzZJLHdCOzs7OzthQUM2QyxJOzt3RkFDN0NBLHdCOzs7OzthQUNvRCxJOztrRkFDcERBLHdCOzs7OzthQUN3QnJJLDBCQUFtQnNJLE87O3VGQUMzQ0Qsd0I7Ozs7O2FBQzZCLEk7OzhFQUM3QkEsd0I7Ozs7O2FBQ29CLEU7O2lGQUNwQkEsd0I7Ozs7O2FBQ3NCLEM7O3dGQUN0QkEsd0I7Ozs7O2FBQ2lELEk7O2tGQUNqREEsd0I7Ozs7O2FBQ3VCdkksaUJBQVV3SSxPOztrRkFDakNELHdCOzs7OzthQUN1QnRJLGlCQUFVd0UsRzs7a0ZBQ2pDOEQsd0I7Ozs7O2FBQ3VCLEU7Ozs7O0FBb1Y1QixNQUFJRSxTQUFJQyxTQUFSLEVBQWtCO0FBQ2QvSSxJQUFBQSxnQkFBZ0IsQ0FBQ3NELFlBQWpCLEdBQWdDMEYsd0JBQWhDO0FBQ0g7O0FBRURDLEVBQUFBLEVBQUUsQ0FBQ2pKLGdCQUFILEdBQXNCQSxnQkFBdEI7QUFFQTs7Ozs7Ozs7OztBQVVBOzs7Ozs7Ozs7O0FBVUE7Ozs7Ozs7Ozs7QUFVQTs7Ozs7Ozs7OztBQVVBIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuIENvcHlyaWdodCAoYykgMjAxMy0yMDE2IENodWtvbmcgVGVjaG5vbG9naWVzIEluYy5cclxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHA6Ly93d3cuY29jb3MuY29tXHJcblxyXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBlbmdpbmUgc291cmNlIGNvZGUgKHRoZSBcIlNvZnR3YXJlXCIpLCBhIGxpbWl0ZWQsXHJcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXHJcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxyXG4gbm90IHVzZSBDb2NvcyBDcmVhdG9yIHNvZnR3YXJlIGZvciBkZXZlbG9waW5nIG90aGVyIHNvZnR3YXJlIG9yIHRvb2xzIHRoYXQnc1xyXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxyXG4gc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXHJcblxyXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cclxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXHJcblxyXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXHJcbiBUSEUgU09GVFdBUkUuXHJcbiovXHJcblxyXG4vKipcclxuICogQGNhdGVnb3J5IHVpXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgbWF0aCB9IGZyb20gJy4uLy4uLy4uL2NvcmUnO1xyXG5pbXBvcnQgeyBTcHJpdGVGcmFtZSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvYXNzZXRzL3Nwcml0ZS1mcmFtZSc7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvY29tcG9uZW50cy9jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBFdmVudEhhbmRsZXIgYXMgQ29tcG9uZW50RXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9jb21wb25lbnRzL2NvbXBvbmVudC1ldmVudC1oYW5kbGVyJztcclxuaW1wb3J0IHsgY2NjbGFzcywgaGVscCwgZXhlY3V0ZUluRWRpdE1vZGUsIGV4ZWN1dGlvbk9yZGVyLCBtZW51LCBwcm9wZXJ0eSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvZGF0YS9jbGFzcy1kZWNvcmF0b3InO1xyXG5pbXBvcnQgeyBDb2xvciwgU2l6ZSwgVmVjMyB9IGZyb20gJy4uLy4uLy4uL2NvcmUvbWF0aCc7XHJcbmltcG9ydCB7IEV2ZW50VG91Y2ggfSBmcm9tICcuLi8uLi8uLi9jb3JlL3BsYXRmb3JtJztcclxuaW1wb3J0IHsgU3lzdGVtRXZlbnRUeXBlIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9wbGF0Zm9ybS9ldmVudC1tYW5hZ2VyL2V2ZW50LWVudW0nO1xyXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9zY2VuZS1ncmFwaC9ub2RlJztcclxuaW1wb3J0IHsgTGFiZWxDb21wb25lbnQsIFZlcnRpY2FsVGV4dEFsaWdubWVudCB9IGZyb20gJy4uL2xhYmVsLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFNwcml0ZUNvbXBvbmVudCB9IGZyb20gJy4uL3Nwcml0ZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBFZGl0Qm94SW1wbCB9IGZyb20gJy4vZWRpdC1ib3gtaW1wbCc7XHJcbmltcG9ydCB7IEVkaXRCb3hJbXBsQmFzZSB9IGZyb20gJy4vZWRpdC1ib3gtaW1wbC1iYXNlJztcclxuaW1wb3J0IHsgSW5wdXRGbGFnLCBJbnB1dE1vZGUsIEtleWJvYXJkUmV0dXJuVHlwZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBzeXMgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3BsYXRmb3JtL3N5cyc7XHJcbmltcG9ydCB7IEVESVRPUiB9IGZyb20gJ2ludGVybmFsOmNvbnN0YW50cyc7XHJcblxyXG5jb25zdCBMRUZUX1BBRERJTkcgPSAyO1xyXG5cclxuZnVuY3Rpb24gY2FwaXRhbGl6ZSAoc3RyOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBzdHIucmVwbGFjZSgvKD86XnxcXHMpXFxTL2csIChhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGEudG9VcHBlckNhc2UoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgKHN0cjogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xyXG59XHJcblxyXG5lbnVtIEV2ZW50VHlwZSB7XHJcbiAgICBFRElUSU5HX0RJRF9CRUdBTiA9ICdlZGl0aW5nLWRpZC1iZWdhbicsXHJcbiAgICBFRElUSU5HX0RJRF9FTkRFRCA9ICdlZGl0aW5nLWRpZC1lbmRlZCcsXHJcbiAgICBURVhUX0NIQU5HRUQgPSAndGV4dC1jaGFuZ2VkJyxcclxuICAgIEVESVRJTkdfUkVUVVJOID0gJ2VkaXRpbmctcmV0dXJuJyxcclxufVxyXG4vKipcclxuICogQGVuXHJcbiAqIGNjLkVkaXRCb3hDb21wb25lbnQgaXMgYSBjb21wb25lbnQgZm9yIGlucHV0aW5nIHRleHQsIHlvdSBjYW4gdXNlIGl0IHRvIGdhdGhlciBzbWFsbCBhbW91bnRzIG9mIHRleHQgZnJvbSB1c2Vycy5cclxuICpcclxuICogQHpoXHJcbiAqIEVkaXRCb3hDb21wb25lbnQg57uE5Lu277yM55So5LqO6I635Y+W55So5oi355qE6L6T5YWl5paH5pys44CCXHJcbiAqL1xyXG5cclxuQGNjY2xhc3MoJ2NjLkVkaXRCb3hDb21wb25lbnQnKVxyXG5AaGVscCgnaTE4bjpjYy5FZGl0Qm94Q29tcG9uZW50JylcclxuQGV4ZWN1dGlvbk9yZGVyKDEwMClcclxuQG1lbnUoJ1VJL0VkaXRCb3gnKVxyXG5AZXhlY3V0ZUluRWRpdE1vZGVcclxuZXhwb3J0IGNsYXNzIEVkaXRCb3hDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBJbnB1dCBzdHJpbmcgb2YgRWRpdEJveC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOi+k+WFpeahhueahOWIneWni+i+k+WFpeWGheWuue+8jOWmguaenOS4uuepuuWImeS8muaYvuekuuWNoOS9jeespueahOaWh+acrOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICfovpPlhaXmoYbnmoTliJ3lp4vovpPlhaXlhoXlrrnvvIzlpoLmnpzkuLrnqbrliJnkvJrmmL7npLrljaDkvY3nrKbnmoTmlofmnKwnLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMSxcclxuICAgIH0pXHJcbiAgICBnZXQgc3RyaW5nICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzdHJpbmcgKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21heExlbmd0aCA+PSAwICYmIHZhbHVlLmxlbmd0aCA+PSB0aGlzLl9tYXhMZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCB0aGlzLl9tYXhMZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc3RyaW5nID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RyaW5nKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogRm9udCBzaXplIG9mIHRoZSBpbnB1dCB0ZXh0LlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog6L6T5YWl5qGG5paH5pys55qE5a2X5L2T5aSn5bCP44CC6K+l5bGe5oCn5Lya5Zyo5bCG5p2l55qE54mI5pys5Lit56e76Zmk77yM6K+35L2/55SoIGVkaXRCb3gudGV4dExhYmVsLmZvbnRTaXpl44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ+i+k+WFpeahhuaWh+acrOeahOWtl+S9k+Wkp+WwjycsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAyLFxyXG4gICAgfSlcclxuICAgIGdldCBmb250U2l6ZSAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl90ZXh0TGFiZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDIwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dExhYmVsIS5mb250U2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm9udFNpemUgKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3RleHRMYWJlbCkge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXh0TGFiZWwuZm9udFNpemUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIEZvbnQgY29sb3Igb2YgdGhlIGlucHV0IHRleHQuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDovpPlhaXmoYbmlofmnKznmoTpopzoibLjgILor6XlsZ7mgKfkvJrlnKjlsIbmnaXnmoTniYjmnKzkuK3np7vpmaTvvIzor7fkvb/nlKggZWRpdEJveC50ZXh0TGFiZWwuY29sb3JcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBDb2xvcixcclxuICAgICAgICB0b29sdGlwOiAn6L6T5YWl5qGG5paH5pys55qE6aKc6ImyJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDMsXHJcbiAgICB9KVxyXG4gICAgZ2V0IGZvbnRDb2xvciAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl90ZXh0TGFiZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGguQ29sb3IuV0hJVEUuY2xvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHRMYWJlbCEuY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZvbnRDb2xvciAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fdGV4dExhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRMYWJlbC5jb2xvciA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogU2V0IHRoZSBpbnB1dCBmbGFncyB0aGF0IGFyZSB0byBiZSBhcHBsaWVkIHRvIHRoZSBFZGl0Qm94LlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5oyH5a6a6L6T5YWl5qCH5b+X5L2N77yM5Y+v5Lul5oyH5a6a6L6T5YWl5pa55byP5Li65a+G56CB5oiW6ICF5Y2V6K+N6aaW5a2X5q+N5aSn5YaZ44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogSW5wdXRGbGFnLFxyXG4gICAgICAgIHRvb2x0aXA6ICfmjIflrprovpPlhaXmoIflv5fkvY3vvIzlj6/ku6XmjIflrprovpPlhaXmlrnlvI/kuLrlr4bnoIHmiJbogIXljZXor43pppblrZfmr43lpKflhpknLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogNCxcclxuICAgIH0pXHJcbiAgICBnZXQgaW5wdXRGbGFnICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRGbGFnO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpbnB1dEZsYWcgKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRGbGFnID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RyaW5nKHRoaXMuX3N0cmluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFNldCB0aGUgaW5wdXQgbW9kZSBvZiB0aGUgZWRpdCBib3guXHJcbiAgICAgKiBJZiB5b3UgcGFzcyBBTlksIGl0IHdpbGwgY3JlYXRlIGEgbXVsdGlsaW5lIEVkaXRCb3guXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDmjIflrprovpPlhaXmqKHlvI86IEFOWeihqOekuuWkmuihjOi+k+WFpe+8jOWFtuWug+mDveaYr+WNleihjOi+k+WFpe+8jOenu+WKqOW5s+WPsOS4iui/mOWPr+S7peaMh+WumumUruebmOagt+W8j+OAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHR5cGU6IElucHV0TW9kZSxcclxuICAgICAgICB0b29sdGlwOiAn5oyH5a6a6L6T5YWl5qih5byPOiBBTlkg6KGo56S65aSa6KGM6L6T5YWl77yM5YW25a6D6YO95piv5Y2V6KGM6L6T5YWl77yM56e75Yqo5bmz5Y+w5LiK6L+Y5Y+v5Lul5oyH5a6a6ZSu55uY5qC35byPJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDUsXHJcbiAgICB9KVxyXG4gICAgZ2V0IGlucHV0TW9kZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TW9kZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaW5wdXRNb2RlIChvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pbnB1dE1vZGUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0TW9kZSA9IG9sZFZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVUZXh0TGFiZWwoKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGxhY2Vob2xkZXJMYWJlbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIHJldHVybiBrZXkgdHlwZSBvZiBFZGl0Qm94LlxyXG4gICAgICogTm90ZTogaXQgaXMgbWVhbmluZ2xlc3MgZm9yIHdlYiBwbGF0Zm9ybXMgYW5kIGRlc2t0b3AgcGxhdGZvcm1zLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5oyH5a6a56e75Yqo6K6+5aSH5LiK6Z2i5Zue6L2m5oyJ6ZKu55qE5qC35byP44CCXHJcbiAgICAgKiDms6jmhI/vvJrov5nkuKrpgInpobnlr7kgd2ViIOW5s+WPsOS4jiBkZXNrdG9wIOW5s+WPsOaXoOaViOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHR5cGU6IEtleWJvYXJkUmV0dXJuVHlwZSxcclxuICAgICAgICB0b29sdGlwOiAn5oyH5a6a56e75Yqo6K6+5aSH5LiK6Z2i5Zue6L2m5oyJ6ZKu55qE5qC35byPJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDYsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHJldHVyblR5cGUgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5UeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCByZXR1cm5UeXBlICh2YWx1ZTogS2V5Ym9hcmRSZXR1cm5UeXBlKSB7XHJcbiAgICAgICAgdGhpcy5fcmV0dXJuVHlwZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgbWF4aW1pemUgaW5wdXQgbGVuZ3RoIG9mIEVkaXRCb3guXHJcbiAgICAgKiAtIElmIHBhc3MgYSB2YWx1ZSBsZXNzIHRoYW4gMCwgaXQgd29uJ3QgbGltaXQgdGhlIGlucHV0IG51bWJlciBvZiBjaGFyYWN0ZXJzLlxyXG4gICAgICogLSBJZiBwYXNzIDAsIGl0IGRvZXNuJ3QgYWxsb3cgaW5wdXQgYW55IGNoYXJhY3RlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDovpPlhaXmoYbmnIDlpKflhYHorrjovpPlhaXnmoTlrZfnrKbkuKrmlbDjgIJcclxuICAgICAqIC0g5aaC5p6c5YC85Li65bCP5LqOIDAg55qE5YC877yM5YiZ5LiN5Lya6ZmQ5Yi26L6T5YWl5a2X56ym5Liq5pWw44CCXHJcbiAgICAgKiAtIOWmguaenOWAvOS4uiAw77yM5YiZ5LiN5YWB6K6455So5oi36L+b6KGM5Lu75L2V6L6T5YWl44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ+i+k+WFpeahhuacgOWkp+WFgeiuuOi+k+WFpeeahOWtl+espuS4quaVsCcsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiA3LFxyXG4gICAgfSlcclxuICAgIGdldCBtYXhMZW5ndGggKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhMZW5ndGg7XHJcbiAgICB9XHJcbiAgICBzZXQgbWF4TGVuZ3RoICh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fbWF4TGVuZ3RoID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIENoYW5nZSB0aGUgbGluZUhlaWdodCBvZiBkaXNwbGF5ZWQgdGV4dC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOi+k+WFpeahhuaWh+acrOeahOihjOmrmOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICfovpPlhaXmoYbmlofmnKznmoTooYzpq5gnLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogOCxcclxuICAgIH0pXHJcbiAgICBnZXQgbGluZUhlaWdodCAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl90ZXh0TGFiZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDQwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dExhYmVsIS5saW5lSGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgc2V0IGxpbmVIZWlnaHQgKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fdGV4dExhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRMYWJlbC5saW5lSGVpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgYmFja2dyb3VuZCBpbWFnZSBvZiBFZGl0Qm94LlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog6L6T5YWl5qGG55qE6IOM5pmv5Zu+54mH44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgdG9vbHRpcDogJ+i+k+WFpeahhueahOiDjOaZr+WbvueJhycsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAxMCxcclxuICAgIH0pXHJcbiAgICBnZXQgYmFja2dyb3VuZEltYWdlICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2dyb3VuZEltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBiYWNrZ3JvdW5kSW1hZ2UgKHZhbHVlOiBTcHJpdGVGcmFtZSB8IG51bGwpIHtcclxuICAgICAgICBpZiAodGhpcy5fYmFja2dyb3VuZEltYWdlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9iYWNrZ3JvdW5kSW1hZ2UgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl9jcmVhdGVCYWNrZ3JvdW5kU3ByaXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBMYWJlbCBjb21wb25lbnQgYXR0YWNoZWQgdG8gdGhlIG5vZGUgZm9yIEVkaXRCb3gncyBpbnB1dCB0ZXh0IGxhYmVsXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDovpPlhaXmoYbovpPlhaXmlofmnKzoioLngrnkuIrmjILovb3nmoQgTGFiZWwg57uE5Lu25a+56LGhXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ+i+k+WFpeahhui+k+WFpeaWh+acrOiKgueCueS4iuaMgui9veeahCBMYWJlbCDnu4Tku7blr7nosaEnLFxyXG4gICAgICAgIHR5cGU6IExhYmVsQ29tcG9uZW50LFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMTEsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHRleHRMYWJlbCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHRMYWJlbDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdGV4dExhYmVsIChvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl90ZXh0TGFiZWwgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRMYWJlbCA9IG9sZFZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fdGV4dExhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUZXh0TGFiZWwoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxhYmVscygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBMYWJlbCBjb21wb25lbnQgYXR0YWNoZWQgdG8gdGhlIG5vZGUgZm9yIEVkaXRCb3gncyBwbGFjZWhvbGRlciB0ZXh0IGxhYmVsLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog6L6T5YWl5qGG5Y2g5L2N56ym6IqC54K55LiK5oyC6L2955qEIExhYmVsIOe7hOS7tuWvueixoeOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICfovpPlhaXmoYbljaDkvY3nrKboioLngrnkuIrmjILovb3nmoQgTGFiZWwg57uE5Lu25a+56LGhJyxcclxuICAgICAgICB0eXBlOiBMYWJlbENvbXBvbmVudCxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDEyLFxyXG4gICAgfSlcclxuICAgIGdldCBwbGFjZWhvbGRlckxhYmVsICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXJMYWJlbDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGxhY2Vob2xkZXJMYWJlbCAob2xkVmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fcGxhY2Vob2xkZXJMYWJlbCAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXJMYWJlbCA9IG9sZFZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcGxhY2Vob2xkZXJMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGxhY2Vob2xkZXJMYWJlbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTGFiZWxzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBkaXNwbGF5IHRleHQgb2YgcGxhY2Vob2xkZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDovpPlhaXmoYbljaDkvY3nrKbnmoTmlofmnKzlhoXlrrnjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0b29sdGlwOiAn6L6T5YWl5qGG5Y2g5L2N56ym55qE5paH5pys5YaF5a65JyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDEzLFxyXG4gICAgfSlcclxuICAgIGdldCBwbGFjZWhvbGRlciAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9wbGFjZWhvbGRlckxhYmVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYWNlaG9sZGVyTGFiZWwuc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwbGFjZWhvbGRlciAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fcGxhY2Vob2xkZXJMYWJlbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGFjZWhvbGRlckxhYmVsLnN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIGZvbnQgc2l6ZSBvZiBwbGFjZWhvbGRlci5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOi+k+WFpeahhuWNoOS9jeespueahOWtl+S9k+Wkp+Wwj+OAguivpeWxnuaAp+S8muWcqOWwhuadpeeahOeJiOacrOS4reenu+mZpO+8jOivt+S9v+eUqCBlZGl0Qm94LnBsYWNlaG9sZGVyTGFiZWwuZm9udFNpemVcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0b29sdGlwOiAn6L6T5YWl5qGG5Y2g5L2N56ym55qE5a2X5L2T5aSn5bCPJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDE0LFxyXG4gICAgfSlcclxuICAgIGdldCBwbGFjZWhvbGRlckZvbnRTaXplICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3BsYWNlaG9sZGVyTGFiZWwpe1xyXG4gICAgICAgICAgICByZXR1cm4gMjA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9wbGFjZWhvbGRlckxhYmVsIS5mb250U2l6ZTtcclxuICAgIH1cclxuICAgIHNldCBwbGFjZWhvbGRlckZvbnRTaXplICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wbGFjZWhvbGRlckxhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyTGFiZWwuZm9udFNpemUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBmb250IGNvbG9yIG9mIHBsYWNlaG9sZGVyLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog6L6T5YWl5qGG5Y2g5L2N56ym55qE5a2X5L2T6aKc6Imy44CC6K+l5bGe5oCn5Lya5Zyo5bCG5p2l55qE54mI5pys5Lit56e76Zmk77yM6K+35L2/55SoIGVkaXRCb3gucGxhY2Vob2xkZXJMYWJlbC5jb2xvclxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICfovpPlhaXmoYbljaDkvY3nrKbnmoTlrZfkvZPpopzoibInLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMTUsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHBsYWNlaG9sZGVyRm9udENvbG9yICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3BsYWNlaG9sZGVyTGFiZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGguQ29sb3IuR1JBWS5jbG9uZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXJMYWJlbCEuY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBsYWNlaG9sZGVyRm9udENvbG9yICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wbGFjZWhvbGRlckxhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyTGFiZWwuY29sb3IgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBpbnB1dCBpcyBhbHdheXMgdmlzaWJsZSBhbmQgYmUgb24gdG9wIG9mIHRoZSBnYW1lIHZpZXcgKG9ubHkgdXNlZnVsIG9uIFdlYikuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDovpPlhaXmoYbmgLvmmK/lj6/op4HvvIzlubbkuJTmsLjov5zlnKjmuLjmiI/op4blm77nmoTkuIrpnaLvvIjov5nkuKrlsZ7mgKflj6rmnInlnKggV2ViIOS4iumdouS/ruaUueacieaEj+S5ie+8iVxyXG4gICAgICogTm90ZTogb25seSBhdmFpbGFibGUgb24gV2ViIGF0IHRoZSBtb21lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQGRlcHJlY2F0ZWRcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0b29sdGlwOiAn6L6T5YWl5qGG5oC75piv5Y+v6KeB77yM5bm25LiU5rC46L+c5Zyo5ri45oiP6KeG5Zu+55qE5LiK6Z2i77yI6L+Z5Liq5bGe5oCn5Y+q5pyJ5ZyoIFdlYiDkuIrpnaLkv67mlLnmnInmhI/kuYnvvIknLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMjEsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHN0YXlPblRvcCAoKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzdGF5T25Ub3AgKHZhbHVlKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdzdGF5T25Ub3AgaXMgcmVtb3ZlZC4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogU2V0IHRoZSB0YWJJbmRleCBvZiB0aGUgRE9NIGlucHV0IGVsZW1lbnQgKG9ubHkgdXNlZnVsIG9uIFdlYikuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDkv67mlLkgRE9NIOi+k+WFpeWFg+e0oOeahCB0YWJJbmRleO+8iOi/meS4quWxnuaAp+WPquacieWcqCBXZWIg5LiK6Z2i5L+u5pS55pyJ5oSP5LmJ77yJ44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ+S/ruaUuSBET00g6L6T5YWl5YWD57Sg55qEIHRhYkluZGV477yI6L+Z5Liq5bGe5oCn5Y+q5pyJ5ZyoIFdlYiDkuIrpnaLkv67mlLnmnInmhI/kuYnvvIknLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMjIsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHRhYkluZGV4ICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGFiSW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHRhYkluZGV4ICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl90YWJJbmRleCAhPT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFiSW5kZXggPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2ltcGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ltcGwuc2V0VGFiSW5kZXgodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgX0VkaXRCb3hJbXBsID0gRWRpdEJveEltcGxCYXNlO1xyXG4gICAgcHVibGljIHN0YXRpYyBLZXlib2FyZFJldHVyblR5cGUgPSBLZXlib2FyZFJldHVyblR5cGU7XHJcbiAgICBwdWJsaWMgc3RhdGljIElucHV0RmxhZyA9IElucHV0RmxhZztcclxuICAgIHB1YmxpYyBzdGF0aWMgSW5wdXRNb2RlID0gSW5wdXRNb2RlO1xyXG4gICAgcHVibGljIHN0YXRpYyBFdmVudFR5cGUgPSBFdmVudFR5cGU7XHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIGV2ZW50IGhhbmRsZXIgdG8gYmUgY2FsbGVkIHdoZW4gRWRpdEJveCBiZWdhbiB0byBlZGl0IHRleHQuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDlvIDlp4vnvJbovpHmlofmnKzovpPlhaXmoYbop6blj5HnmoTkuovku7blm57osIPjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBbQ29tcG9uZW50RXZlbnRIYW5kbGVyXSxcclxuICAgICAgICB0b29sdGlwOiAn6K+l5LqL5Lu25Zyo55So5oi354K55Ye76L6T5YWl5qGG6I635Y+W54Sm54K555qE5pe25YCZ6KKr6Kem5Y+RJyxcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDMxLFxyXG4gICAgfSlcclxuICAgIHB1YmxpYyBlZGl0aW5nRGlkQmVnYW46IENvbXBvbmVudEV2ZW50SGFuZGxlcltdID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBldmVudCBoYW5kbGVyIHRvIGJlIGNhbGxlZCB3aGVuIEVkaXRCb3ggdGV4dCBjaGFuZ2VzLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog57yW6L6R5paH5pys6L6T5YWl5qGG5pe26Kem5Y+R55qE5LqL5Lu25Zue6LCD44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogW0NvbXBvbmVudEV2ZW50SGFuZGxlcl0sXHJcbiAgICAgICAgdG9vbHRpcDogJ+e8lui+keaWh+acrOi+k+WFpeahhuaXtuinpuWPkeeahOS6i+S7tuWbnuiwgycsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAzMixcclxuICAgIH0pXHJcbiAgICBwdWJsaWMgdGV4dENoYW5nZWQ6IENvbXBvbmVudEV2ZW50SGFuZGxlcltdID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBldmVudCBoYW5kbGVyIHRvIGJlIGNhbGxlZCB3aGVuIEVkaXRCb3ggZWRpdCBlbmRzLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog57uT5p2f57yW6L6R5paH5pys6L6T5YWl5qGG5pe26Kem5Y+R55qE5LqL5Lu25Zue6LCD44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogW0NvbXBvbmVudEV2ZW50SGFuZGxlcl0sXHJcbiAgICAgICAgdG9vbHRpcDogJ+WcqOWNleihjOaooeW8j+S4i+mdou+8jOS4gOiIrOaYr+WcqOeUqOaIt+aMieS4i+Wbnui9puaIluiAheeCueWHu+Wxj+W5lei+k+WFpeahhuS7peWklueahOWcsOaWueiwg+eUqOivpeWHveaVsOOAgiDlpoLmnpzmmK/lpJrooYzovpPlhaXvvIzkuIDoiKzmmK/lnKjnlKjmiLfngrnlh7vlsY/luZXovpPlhaXmoYbku6XlpJbnmoTlnLDmlrnosIPnlKjor6Xlh73mlbAnLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMzMsXHJcbiAgICB9KVxyXG4gICAgcHVibGljIGVkaXRpbmdEaWRFbmRlZDogQ29tcG9uZW50RXZlbnRIYW5kbGVyW10gPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIGV2ZW50IGhhbmRsZXIgdG8gYmUgY2FsbGVkIHdoZW4gcmV0dXJuIGtleSBpcyBwcmVzc2VkLiBXaW5kb3dzIGlzIG5vdCBzdXBwb3J0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDlvZPnlKjmiLfmjInkuIvlm57ovabmjInplK7ml7bnmoTkuovku7blm57osIPvvIznm67liY3kuI3mlK/mjIEgd2luZG93cyDlubPlj7BcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBbQ29tcG9uZW50RXZlbnRIYW5kbGVyXSxcclxuICAgICAgICB0b29sdGlwOiAn6K+l5LqL5Lu25Zyo55So5oi35oyJ5LiL5Zue6L2m6ZSu55qE5pe25YCZ6KKr6Kem5Y+RLCDlpoLmnpzmmK/ljZXooYzovpPlhaXmoYbvvIzmjInlm57ovabplK7ov5jkvJrkvb/ovpPlhaXmoYblpLHljrvnhKbngrknLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMzQsXHJcbiAgICB9KVxyXG4gICAgcHVibGljIGVkaXRpbmdSZXR1cm46IENvbXBvbmVudEV2ZW50SGFuZGxlcltdID0gW107XHJcblxyXG4gICAgcHVibGljIF9pbXBsOiBFZGl0Qm94SW1wbEJhc2UgfCBudWxsID0gbnVsbDtcclxuICAgIHB1YmxpYyBfYmFja2dyb3VuZDogU3ByaXRlQ29tcG9uZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX3RleHRMYWJlbDogTGFiZWxDb21wb25lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9wbGFjZWhvbGRlckxhYmVsOiBMYWJlbENvbXBvbmVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgIF9yZXR1cm5UeXBlID0gS2V5Ym9hcmRSZXR1cm5UeXBlLkRFRkFVTFQ7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCAgX3VzZU9yaWdpbmFsU2l6ZSA9IHRydWU7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCAgX3N0cmluZyA9ICcnO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgIF90YWJJbmRleCA9IDA7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCAgX2JhY2tncm91bmRJbWFnZTogU3ByaXRlRnJhbWUgfCBudWxsID0gbnVsbDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkICBfaW5wdXRGbGFnID0gSW5wdXRGbGFnLkRFRkFVTFQ7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCAgX2lucHV0TW9kZSA9IElucHV0TW9kZS5BTlk7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCAgX21heExlbmd0aCA9IDIwO1xyXG5cclxuICAgIHByaXZhdGUgX2lzTGFiZWxWaXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIF9fcHJlbG9hZCAoKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkVuYWJsZSAoKSB7XHJcbiAgICAgICAgaWYgKCFFRElUT1IpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5faW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbXBsLm9uRW5hYmxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUgKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pbXBsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ltcGwudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkRpc2FibGUgKCkge1xyXG4gICAgICAgIGlmICghRURJVE9SKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5faW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbXBsLm9uRGlzYWJsZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25EZXN0cm95ICgpIHtcclxuICAgICAgICBpZiAodGhpcy5faW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbXBsLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIExldCB0aGUgRWRpdEJveCBnZXQgZm9jdXNcclxuICAgICAqIEB6aCDorqnlvZPliY0gRWRpdEJveCDojrflvpfnhKbngrnjgIJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEZvY3VzICgpIHtcclxuICAgICAgICBpZiAodGhpcy5faW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbXBsLnNldEZvY3VzKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBMZXQgdGhlIEVkaXRCb3ggZ2V0IGZvY3VzXHJcbiAgICAgKiBAemgg6K6p5b2T5YmNIEVkaXRCb3gg6I635b6X54Sm54K5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmb2N1cyAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2ltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5faW1wbC5zZXRGb2N1cyh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gTGV0IHRoZSBFZGl0Qm94IGxvc2UgZm9jdXNcclxuICAgICAqIEB6aCDorqnlvZPliY0gRWRpdEJveCDlpLHljrvnhKbngrlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGJsdXIgKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pbXBsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ltcGwuc2V0Rm9jdXMoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBEZXRlcm1pbmUgd2hldGhlciBFZGl0Qm94IGlzIGdldHRpbmcgZm9jdXMgb3Igbm90LlxyXG4gICAgICogQHpoIOWIpOaWrSBFZGl0Qm94IOaYr+WQpuiOt+W+l+S6hueEpueCueOAglxyXG4gICAgICogTm90ZTogb25seSBhdmFpbGFibGUgb24gV2ViIGF0IHRoZSBtb21lbnQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0ZvY3VzZWQgKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pbXBsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbXBsLmlzRm9jdXNlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9lZGl0Qm94RWRpdGluZ0RpZEJlZ2FuICgpIHtcclxuICAgICAgICBDb21wb25lbnRFdmVudEhhbmRsZXIuZW1pdEV2ZW50cyh0aGlzLmVkaXRpbmdEaWRCZWdhbiwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmVtaXQoRXZlbnRUeXBlLkVESVRJTkdfRElEX0JFR0FOLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX2VkaXRCb3hFZGl0aW5nRGlkRW5kZWQgKCkge1xyXG4gICAgICAgIENvbXBvbmVudEV2ZW50SGFuZGxlci5lbWl0RXZlbnRzKHRoaXMuZWRpdGluZ0RpZEVuZGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm5vZGUuZW1pdChFdmVudFR5cGUuRURJVElOR19ESURfRU5ERUQsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfZWRpdEJveFRleHRDaGFuZ2VkICh0ZXh0OiBzdHJpbmcpIHtcclxuICAgICAgICB0ZXh0ID0gdGhpcy5fdXBkYXRlTGFiZWxTdHJpbmdTdHlsZSh0ZXh0LCB0cnVlKTtcclxuICAgICAgICB0aGlzLnN0cmluZyA9IHRleHQ7XHJcbiAgICAgICAgQ29tcG9uZW50RXZlbnRIYW5kbGVyLmVtaXRFdmVudHModGhpcy50ZXh0Q2hhbmdlZCwgdGV4dCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmVtaXQoRXZlbnRUeXBlLlRFWFRfQ0hBTkdFRCwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9lZGl0Qm94RWRpdGluZ1JldHVybiAoKSB7XHJcbiAgICAgICAgQ29tcG9uZW50RXZlbnRIYW5kbGVyLmVtaXRFdmVudHModGhpcy5lZGl0aW5nUmV0dXJuLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm5vZGUuZW1pdChFdmVudFR5cGUuRURJVElOR19SRVRVUk4sIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfc2hvd0xhYmVscyAoKSB7XHJcbiAgICAgICAgdGhpcy5faXNMYWJlbFZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUxhYmVscygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfaGlkZUxhYmVscyAoKSB7XHJcbiAgICAgICAgdGhpcy5faXNMYWJlbFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fdGV4dExhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRMYWJlbC5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fcGxhY2Vob2xkZXJMYWJlbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGFjZWhvbGRlckxhYmVsLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfb25Ub3VjaEJlZ2FuIChldmVudDogRXZlbnRUb3VjaCkge1xyXG4gICAgICAgIGV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9vblRvdWNoQ2FuY2VsIChldmVudDogRXZlbnRUb3VjaCkge1xyXG4gICAgICAgIGV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9vblRvdWNoRW5kZWQgKGV2ZW50OiBFdmVudFRvdWNoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2ltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5faW1wbC5iZWdpbkVkaXRpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQucHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2luaXQgKCkge1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZUJhY2tncm91bmRTcHJpdGUoKTtcclxuICAgICAgICB0aGlzLl91cGRhdGVQbGFjZWhvbGRlckxhYmVsKCk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlVGV4dExhYmVsKCk7XHJcbiAgICAgICAgdGhpcy5faXNMYWJlbFZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihTeXN0ZW1FdmVudFR5cGUuU0laRV9DSEFOR0VELCB0aGlzLl9yZXNpemVDaGlsZE5vZGVzLCB0aGlzKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW1wbCA9IHRoaXMuX2ltcGwgPSBuZXcgRWRpdEJveENvbXBvbmVudC5fRWRpdEJveEltcGwoKTtcclxuICAgICAgICBpbXBsLmluaXQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RyaW5nKHRoaXMuX3N0cmluZyk7XHJcbiAgICAgICAgdGhpcy5fc3luY1NpemUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2NyZWF0ZUJhY2tncm91bmRTcHJpdGUgKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fYmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9iYWNrZ3JvdW5kID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChTcHJpdGVDb21wb25lbnQpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2JhY2tncm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JhY2tncm91bmQgPSB0aGlzLm5vZGUuYWRkQ29tcG9uZW50KFNwcml0ZUNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9iYWNrZ3JvdW5kIS50eXBlID0gU3ByaXRlQ29tcG9uZW50LlR5cGUuU0xJQ0VEO1xyXG4gICAgICAgIHRoaXMuX2JhY2tncm91bmQhLnNwcml0ZUZyYW1lID0gdGhpcy5fYmFja2dyb3VuZEltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdXBkYXRlVGV4dExhYmVsICgpIHtcclxuICAgICAgICBsZXQgdGV4dExhYmVsID0gdGhpcy5fdGV4dExhYmVsO1xyXG5cclxuICAgICAgICAvLyBJZiB0ZXh0TGFiZWwgZG9lc24ndCBleGlzdCwgY3JlYXRlIG9uZS5cclxuICAgICAgICBpZiAoIXRleHRMYWJlbCkge1xyXG4gICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZSgnVEVYVF9MQUJFTCcpO1xyXG4gICAgICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgTm9kZSgnVEVYVF9MQUJFTCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHRMYWJlbCA9IG5vZGUhLmdldENvbXBvbmVudChMYWJlbENvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIGlmICghdGV4dExhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0TGFiZWwgPSBub2RlIS5hZGRDb21wb25lbnQoTGFiZWxDb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGUhLnBhcmVudCA9IHRoaXMubm9kZTtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dExhYmVsID0gdGV4dExhYmVsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlXHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtQ29tcCA9IHRoaXMuX3RleHRMYWJlbCEubm9kZS5fdWlQcm9wcy51aVRyYW5zZm9ybUNvbXA7XHJcbiAgICAgICAgdHJhbnNmb3JtQ29tcCEuc2V0QW5jaG9yUG9pbnQoMCwgMSk7XHJcbiAgICAgICAgdGV4dExhYmVsIS5vdmVyZmxvdyA9IExhYmVsQ29tcG9uZW50Lk92ZXJmbG93LkNMQU1QO1xyXG4gICAgICAgIGlmICh0aGlzLl9pbnB1dE1vZGUgPT09IElucHV0TW9kZS5BTlkpIHtcclxuICAgICAgICAgICAgdGV4dExhYmVsIS52ZXJ0aWNhbEFsaWduID0gVmVydGljYWxUZXh0QWxpZ25tZW50LlRPUDtcclxuICAgICAgICAgICAgdGV4dExhYmVsIS5lbmFibGVXcmFwVGV4dCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0ZXh0TGFiZWwhLnZlcnRpY2FsQWxpZ24gPSBWZXJ0aWNhbFRleHRBbGlnbm1lbnQuQ0VOVEVSO1xyXG4gICAgICAgICAgICB0ZXh0TGFiZWwhLmVuYWJsZVdyYXBUZXh0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRleHRMYWJlbCEuc3RyaW5nID0gdGhpcy5fdXBkYXRlTGFiZWxTdHJpbmdTdHlsZSh0aGlzLl9zdHJpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdXBkYXRlUGxhY2Vob2xkZXJMYWJlbCAoKSB7XHJcbiAgICAgICAgbGV0IHBsYWNlaG9sZGVyTGFiZWwgPSB0aGlzLl9wbGFjZWhvbGRlckxhYmVsO1xyXG5cclxuICAgICAgICAvLyBJZiBwbGFjZWhvbGRlckxhYmVsIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBvbmUuXHJcbiAgICAgICAgaWYgKCFwbGFjZWhvbGRlckxhYmVsKSB7XHJcbiAgICAgICAgICAgIGxldCBub2RlID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKCdQTEFDRUhPTERFUl9MQUJFTCcpO1xyXG4gICAgICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgTm9kZSgnUExBQ0VIT0xERVJfTEFCRUwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlckxhYmVsID0gbm9kZSEuZ2V0Q29tcG9uZW50KExhYmVsQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgaWYgKCFwbGFjZWhvbGRlckxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlckxhYmVsID0gbm9kZSEuYWRkQ29tcG9uZW50KExhYmVsQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBub2RlIS5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyTGFiZWwgPSBwbGFjZWhvbGRlckxhYmVsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlXHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gdGhpcy5fcGxhY2Vob2xkZXJMYWJlbCEubm9kZS5fdWlQcm9wcy51aVRyYW5zZm9ybUNvbXA7XHJcbiAgICAgICAgdHJhbnNmb3JtIS5zZXRBbmNob3JQb2ludCgwLCAxKTtcclxuICAgICAgICBwbGFjZWhvbGRlckxhYmVsIS5vdmVyZmxvdyA9IExhYmVsQ29tcG9uZW50Lk92ZXJmbG93LkNMQU1QO1xyXG4gICAgICAgIGlmICh0aGlzLl9pbnB1dE1vZGUgPT09IElucHV0TW9kZS5BTlkpIHtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXJMYWJlbCEudmVydGljYWxBbGlnbiA9IFZlcnRpY2FsVGV4dEFsaWdubWVudC5UT1A7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyTGFiZWwhLmVuYWJsZVdyYXBUZXh0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyTGFiZWwhLnZlcnRpY2FsQWxpZ24gPSBWZXJ0aWNhbFRleHRBbGlnbm1lbnQuQ0VOVEVSO1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlckxhYmVsIS5lbmFibGVXcmFwVGV4dCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwbGFjZWhvbGRlckxhYmVsIS5zdHJpbmcgPSB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfc3luY1NpemUgKCkge1xyXG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLm5vZGUuZ2V0Q29udGVudFNpemUoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2JhY2tncm91bmQpIHtcclxuICAgICAgICAgICAgdGhpcy5fYmFja2dyb3VuZC5ub2RlLl91aVByb3BzLnVpVHJhbnNmb3JtQ29tcCEuYW5jaG9yUG9pbnQgPSB0aGlzLm5vZGUuX3VpUHJvcHMudWlUcmFuc2Zvcm1Db21wIS5hbmNob3JQb2ludDtcclxuICAgICAgICAgICAgdGhpcy5fYmFja2dyb3VuZC5ub2RlLnNldENvbnRlbnRTaXplKHNpemUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTGFiZWxQb3NpdGlvbihzaXplKTtcclxuICAgICAgICBpZiAodGhpcy5faW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbXBsLnNldFNpemUoc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZUxhYmVscyAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzTGFiZWxWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9zdHJpbmc7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90ZXh0TGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RleHRMYWJlbC5ub2RlLmFjdGl2ZSA9IChjb250ZW50ICE9PSAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3BsYWNlaG9sZGVyTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyTGFiZWwubm9kZS5hY3RpdmUgPSAoY29udGVudCA9PT0gJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdXBkYXRlU3RyaW5nICh0ZXh0OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCB0ZXh0TGFiZWwgPSB0aGlzLl90ZXh0TGFiZWw7XHJcbiAgICAgICAgLy8gTm90IGluaXRlZCB5ZXRcclxuICAgICAgICBpZiAoIXRleHRMYWJlbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZGlzcGxheVRleHQgPSB0ZXh0O1xyXG4gICAgICAgIGlmIChkaXNwbGF5VGV4dCkge1xyXG4gICAgICAgICAgICBkaXNwbGF5VGV4dCA9IHRoaXMuX3VwZGF0ZUxhYmVsU3RyaW5nU3R5bGUoZGlzcGxheVRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGV4dExhYmVsLnN0cmluZyA9IGRpc3BsYXlUZXh0O1xyXG5cclxuICAgICAgICB0aGlzLl91cGRhdGVMYWJlbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZUxhYmVsU3RyaW5nU3R5bGUgKHRleHQ6IHN0cmluZywgaWdub3JlUGFzc3dvcmQ6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0RmxhZyA9IHRoaXMuX2lucHV0RmxhZztcclxuICAgICAgICBpZiAoIWlnbm9yZVBhc3N3b3JkICYmIGlucHV0RmxhZyA9PT0gSW5wdXRGbGFnLlBBU1NXT1JEKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXNzd29yZFN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBsZW4gPSB0ZXh0Lmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRTdHJpbmcgKz0gJ1xcdTI1Q0YnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHQgPSBwYXNzd29yZFN0cmluZztcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0RmxhZyA9PT0gSW5wdXRGbGFnLklOSVRJQUxfQ0FQU19BTExfQ0hBUkFDVEVSUykge1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXRGbGFnID09PSBJbnB1dEZsYWcuSU5JVElBTF9DQVBTX1dPUkQpIHtcclxuICAgICAgICAgICAgdGV4dCA9IGNhcGl0YWxpemUodGV4dCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dEZsYWcgPT09IElucHV0RmxhZy5JTklUSUFMX0NBUFNfU0VOVEVOQ0UpIHtcclxuICAgICAgICAgICAgdGV4dCA9IGNhcGl0YWxpemVGaXJzdExldHRlcih0ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfcmVnaXN0ZXJFdmVudCAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKFN5c3RlbUV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5fb25Ub3VjaEJlZ2FuLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm5vZGUub24oU3lzdGVtRXZlbnRUeXBlLlRPVUNIX0VORCwgdGhpcy5fb25Ub3VjaEVuZGVkLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VucmVnaXN0ZXJFdmVudCAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9mZihTeXN0ZW1FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMuX29uVG91Y2hCZWdhbiwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9mZihTeXN0ZW1FdmVudFR5cGUuVE9VQ0hfRU5ELCB0aGlzLl9vblRvdWNoRW5kZWQsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdXBkYXRlTGFiZWxQb3NpdGlvbiAoc2l6ZTogU2l6ZSkge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgY29uc3Qgb2ZmWCA9IC1ub2RlLmFuY2hvclggKiBub2RlLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IG9mZlkgPSAtbm9kZS5hbmNob3JZICogbm9kZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyTGFiZWwgPSB0aGlzLl9wbGFjZWhvbGRlckxhYmVsO1xyXG4gICAgICAgIGNvbnN0IHRleHRMYWJlbCA9IHRoaXMuX3RleHRMYWJlbDtcclxuICAgICAgICBpZiAodGV4dExhYmVsKSB7XHJcbiAgICAgICAgICAgIHRleHRMYWJlbC5ub2RlLnNldENvbnRlbnRTaXplKHNpemUud2lkdGggLSBMRUZUX1BBRERJTkcsIHNpemUuaGVpZ2h0KTtcclxuICAgICAgICAgICAgdGV4dExhYmVsLm5vZGUucG9zaXRpb24gPSBuZXcgVmVjMyAob2ZmWCArIExFRlRfUEFERElORywgb2ZmWSArIHNpemUuaGVpZ2h0LCB0ZXh0TGFiZWwubm9kZS5wb3NpdGlvbi56KTtcclxuICAgICAgICAgICAgdGV4dExhYmVsLnZlcnRpY2FsQWxpZ24gPSB0aGlzLl9pbnB1dE1vZGUgPT09IElucHV0TW9kZS5BTlkgPyBWZXJ0aWNhbFRleHRBbGlnbm1lbnQuVE9QIDogVmVydGljYWxUZXh0QWxpZ25tZW50LkNFTlRFUjtcclxuICAgICAgICAgICAgdGV4dExhYmVsLmVuYWJsZVdyYXBUZXh0ID0gdGhpcy5faW5wdXRNb2RlID09PSBJbnB1dE1vZGUuQU5ZID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBsYWNlaG9sZGVyTGFiZWwpIHtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXJMYWJlbC5ub2RlLnNldENvbnRlbnRTaXplKHNpemUud2lkdGggLSBMRUZUX1BBRERJTkcsIHNpemUuaGVpZ2h0KTtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXJMYWJlbC5saW5lSGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyTGFiZWwubm9kZS5wb3NpdGlvbiA9IG5ldyBWZWMzIChvZmZYICsgTEVGVF9QQURESU5HLCBvZmZZICsgc2l6ZS5oZWlnaHQsIHBsYWNlaG9sZGVyTGFiZWwubm9kZS5wb3NpdGlvbi56KTtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXJMYWJlbC52ZXJ0aWNhbEFsaWduID0gdGhpcy5faW5wdXRNb2RlID09PSBJbnB1dE1vZGUuQU5ZID9cclxuICAgICAgICAgICAgICAgIFZlcnRpY2FsVGV4dEFsaWdubWVudC5UT1AgOiBWZXJ0aWNhbFRleHRBbGlnbm1lbnQuQ0VOVEVSO1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlckxhYmVsLmVuYWJsZVdyYXBUZXh0ID0gdGhpcy5faW5wdXRNb2RlID09PSBJbnB1dE1vZGUuQU5ZID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3Jlc2l6ZUNoaWxkTm9kZXMgKCkge1xyXG4gICAgICAgIGNvbnN0IHRleHRMYWJlbE5vZGUgPSB0aGlzLl90ZXh0TGFiZWwgJiYgdGhpcy5fdGV4dExhYmVsLm5vZGU7XHJcbiAgICAgICAgaWYgKHRleHRMYWJlbE5vZGUpIHtcclxuICAgICAgICAgICAgdGV4dExhYmVsTm9kZS5wb3NpdGlvbiA9IG5ldyBWZWMzKC10aGlzLm5vZGUud2lkdGggLyAyLCB0aGlzLm5vZGUuaGVpZ2h0IC8gMiwgdGV4dExhYmVsTm9kZS5wb3NpdGlvbi56KTtcclxuICAgICAgICAgICAgdGV4dExhYmVsTm9kZS53aWR0aCA9IHRoaXMubm9kZS53aWR0aDtcclxuICAgICAgICAgICAgdGV4dExhYmVsTm9kZS5oZWlnaHQgPSB0aGlzLm5vZGUuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlckxhYmVsTm9kZSA9IHRoaXMuX3BsYWNlaG9sZGVyTGFiZWwgJiYgdGhpcy5fcGxhY2Vob2xkZXJMYWJlbC5ub2RlO1xyXG4gICAgICAgIGlmIChwbGFjZWhvbGRlckxhYmVsTm9kZSkge1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlckxhYmVsTm9kZS5wb3NpdGlvbiA9IG5ldyBWZWMzKC10aGlzLm5vZGUud2lkdGggLyAyLCB0aGlzLm5vZGUuaGVpZ2h0IC8gMiwgcGxhY2Vob2xkZXJMYWJlbE5vZGUucG9zaXRpb24ueik7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyTGFiZWxOb2RlLndpZHRoID0gdGhpcy5ub2RlLndpZHRoO1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlckxhYmVsTm9kZS5oZWlnaHQgPSB0aGlzLm5vZGUuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBiYWNrZ3JvdW5kTm9kZSA9IHRoaXMuX2JhY2tncm91bmQgJiYgdGhpcy5fYmFja2dyb3VuZC5ub2RlO1xyXG4gICAgICAgIGlmIChiYWNrZ3JvdW5kTm9kZSkge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kTm9kZS53aWR0aCA9IHRoaXMubm9kZS53aWR0aDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZE5vZGUuaGVpZ2h0ID0gdGhpcy5ub2RlLmhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmIChzeXMuaXNCcm93c2VyKXtcclxuICAgIEVkaXRCb3hDb21wb25lbnQuX0VkaXRCb3hJbXBsID0gRWRpdEJveEltcGw7XHJcbn1cclxuXHJcbmNjLkVkaXRCb3hDb21wb25lbnQgPSBFZGl0Qm94Q29tcG9uZW50O1xyXG5cclxuLyoqXHJcbiAqIEBlblxyXG4gKiBOb3RlOiBUaGlzIGV2ZW50IGlzIGVtaXR0ZWQgZnJvbSB0aGUgbm9kZSB0byB3aGljaCB0aGUgY29tcG9uZW50IGJlbG9uZ3MuXHJcbiAqIEB6aFxyXG4gKiDms6jmhI/vvJrmraTkuovku7bmmK/ku47or6Xnu4Tku7bmiYDlsZ7nmoQgTm9kZSDkuIrpnaLmtL7lj5Hlh7rmnaXnmoTvvIzpnIDopoHnlKggbm9kZS5vbiDmnaXnm5HlkKzjgIJcclxuICogQGV2ZW50IGVkaXRpbmctZGlkLWJlZ2FuXHJcbiAqIEBwYXJhbSB7RXZlbnQuRXZlbnRDdXN0b219IGV2ZW50XHJcbiAqIEBwYXJhbSB7RWRpdEJveH0gZWRpdGJveCAtIFRoZSBFZGl0Qm94IGNvbXBvbmVudC5cclxuICovXHJcblxyXG4vKipcclxuICogQGVuXHJcbiAqIE5vdGU6IFRoaXMgZXZlbnQgaXMgZW1pdHRlZCBmcm9tIHRoZSBub2RlIHRvIHdoaWNoIHRoZSBjb21wb25lbnQgYmVsb25ncy5cclxuICogQHpoXHJcbiAqIOazqOaEj++8muatpOS6i+S7tuaYr+S7juivpee7hOS7tuaJgOWxnueahCBOb2RlIOS4iumdoua0vuWPkeWHuuadpeeahO+8jOmcgOimgeeUqCBub2RlLm9uIOadpeebkeWQrOOAglxyXG4gKiBAZXZlbnQgZWRpdGluZy1kaWQtZW5kZWRcclxuICogQHBhcmFtIHtFdmVudC5FdmVudEN1c3RvbX0gZXZlbnRcclxuICogQHBhcmFtIHtFZGl0Qm94fSBlZGl0Ym94IC0gVGhlIEVkaXRCb3ggY29tcG9uZW50LlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAZW5cclxuICogTm90ZTogVGhpcyBldmVudCBpcyBlbWl0dGVkIGZyb20gdGhlIG5vZGUgdG8gd2hpY2ggdGhlIGNvbXBvbmVudCBiZWxvbmdzLlxyXG4gKiBAemhcclxuICog5rOo5oSP77ya5q2k5LqL5Lu25piv5LuO6K+l57uE5Lu25omA5bGe55qEIE5vZGUg5LiK6Z2i5rS+5Y+R5Ye65p2l55qE77yM6ZyA6KaB55SoIG5vZGUub24g5p2l55uR5ZCs44CCXHJcbiAqIEBldmVudCB0ZXh0LWNoYW5nZWRcclxuICogQHBhcmFtIHtFdmVudC5FdmVudEN1c3RvbX0gZXZlbnRcclxuICogQHBhcmFtIHtFZGl0Qm94fSBlZGl0Ym94IC0gVGhlIEVkaXRCb3ggY29tcG9uZW50LlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAZW5cclxuICogTm90ZTogVGhpcyBldmVudCBpcyBlbWl0dGVkIGZyb20gdGhlIG5vZGUgdG8gd2hpY2ggdGhlIGNvbXBvbmVudCBiZWxvbmdzLlxyXG4gKiBAemhcclxuICog5rOo5oSP77ya5q2k5LqL5Lu25piv5LuO6K+l57uE5Lu25omA5bGe55qEIE5vZGUg5LiK6Z2i5rS+5Y+R5Ye65p2l55qE77yM6ZyA6KaB55SoIG5vZGUub24g5p2l55uR5ZCs44CCXHJcbiAqIEBldmVudCBlZGl0aW5nLXJldHVyblxyXG4gKiBAcGFyYW0ge0V2ZW50LkV2ZW50Q3VzdG9tfSBldmVudFxyXG4gKiBAcGFyYW0ge0VkaXRCb3h9IGVkaXRib3ggLSBUaGUgRWRpdEJveCBjb21wb25lbnQuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBlbiBpZiB5b3UgZG9uJ3QgbmVlZCB0aGUgRWRpdEJveCBhbmQgaXQgaXNuJ3QgaW4gYW55IHJ1bm5pbmcgU2NlbmUsIHlvdSBzaG91bGRcclxuICogY2FsbCB0aGUgZGVzdHJveSBtZXRob2Qgb24gdGhpcyBjb21wb25lbnQgb3IgdGhlIGFzc29jaWF0ZWQgbm9kZSBleHBsaWNpdGx5LlxyXG4gKiBPdGhlcndpc2UsIHRoZSBjcmVhdGVkIERPTSBlbGVtZW50IHdvbid0IGJlIHJlbW92ZWQgZnJvbSB3ZWIgcGFnZS5cclxuICogQHpoXHJcbiAqIOWmguaenOS9oOS4jeWGjeS9v+eUqCBFZGl0Qm9477yM5bm25LiU57uE5Lu25pyq5re75Yqg5Yiw5Zy65pmv5Lit77yM6YKj5LmI5L2g5b+F6aG75omL5Yqo5a+557uE5Lu25oiW5omA5Zyo6IqC54K56LCD55SoIGRlc3Ryb3njgIJcclxuICog6L+Z5qC35omN6IO956e76Zmk572R6aG15LiK55qEIERPTSDoioLngrnvvIzpgb/lhY0gV2ViIOW5s+WPsOWGheWtmOazhOmcsuOAglxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogZWRpdGJveC5ub2RlLnBhcmVudCA9IG51bGw7ICAvLyBvciAgZWRpdGJveC5ub2RlLnJlbW92ZUZyb21QYXJlbnQoZmFsc2UpO1xyXG4gKiAvLyB3aGVuIHlvdSBkb24ndCBuZWVkIGVkaXRib3ggYW55bW9yZVxyXG4gKiBlZGl0Ym94Lm5vZGUuZGVzdHJveSgpO1xyXG4gKiBgYGBcclxuICogQHJldHVybiB7Qm9vbGVhbn0gd2hldGhlciBpdCBpcyB0aGUgZmlyc3QgdGltZSB0aGUgZGVzdHJveSBiZWluZyBjYWxsZWRcclxuICovXHJcbiJdfQ==