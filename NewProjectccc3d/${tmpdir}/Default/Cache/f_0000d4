(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../core/assets/index.js", "../../core/data/class-decorator.js", "../../core/value-types/enum.js", "../assembler/label/font-utils.js", "../../core/components/ui-base/ui-render-component.js", "../../core/platform/debug.js", "../../core/platform/sys.js", "../../core/default-constants.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../core/assets/index.js"), require("../../core/data/class-decorator.js"), require("../../core/value-types/enum.js"), require("../assembler/label/font-utils.js"), require("../../core/components/ui-base/ui-render-component.js"), require("../../core/platform/debug.js"), require("../../core/platform/sys.js"), require("../../core/default-constants.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.index, global.classDecorator, global._enum, global.fontUtils, global.uiRenderComponent, global.debug, global.sys, global.defaultConstants);
    global.labelComponent = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _index, _classDecorator, _enum, _fontUtils, _uiRenderComponent, _debug, _sys, _defaultConstants) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.LabelComponent = _exports.Overflow = _exports.VerticalTextAlignment = _exports.HorizontalTextAlignment = void 0;

  var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _descriptor11, _descriptor12, _descriptor13, _descriptor14, _descriptor15, _descriptor16, _class3, _temp;

  function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

  function _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

  function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  function _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }

  function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }

  /**
   * @en Enum for horizontal text alignment.
   *
   * @zh 文本横向对齐类型。
   */
  var HorizontalTextAlignment;
  _exports.HorizontalTextAlignment = HorizontalTextAlignment;

  (function (HorizontalTextAlignment) {
    HorizontalTextAlignment[HorizontalTextAlignment["LEFT"] = 0] = "LEFT";
    HorizontalTextAlignment[HorizontalTextAlignment["CENTER"] = 1] = "CENTER";
    HorizontalTextAlignment[HorizontalTextAlignment["RIGHT"] = 2] = "RIGHT";
  })(HorizontalTextAlignment || (_exports.HorizontalTextAlignment = HorizontalTextAlignment = {}));

  (0, _enum.ccenum)(HorizontalTextAlignment);
  /**
   * @en Enum for vertical text alignment.
   *
   * @zh 文本垂直对齐类型。
   */

  var VerticalTextAlignment;
  _exports.VerticalTextAlignment = VerticalTextAlignment;

  (function (VerticalTextAlignment) {
    VerticalTextAlignment[VerticalTextAlignment["TOP"] = 0] = "TOP";
    VerticalTextAlignment[VerticalTextAlignment["CENTER"] = 1] = "CENTER";
    VerticalTextAlignment[VerticalTextAlignment["BOTTOM"] = 2] = "BOTTOM";
  })(VerticalTextAlignment || (_exports.VerticalTextAlignment = VerticalTextAlignment = {}));

  (0, _enum.ccenum)(VerticalTextAlignment);
  /**
   * @en Enum for Overflow.
   *
   * @zh 文本超载类型。
   */

  var Overflow;
  _exports.Overflow = Overflow;

  (function (Overflow) {
    Overflow[Overflow["NONE"] = 0] = "NONE";
    Overflow[Overflow["CLAMP"] = 1] = "CLAMP";
    Overflow[Overflow["SHRINK"] = 2] = "SHRINK";
    Overflow[Overflow["RESIZE_HEIGHT"] = 3] = "RESIZE_HEIGHT";
  })(Overflow || (_exports.Overflow = Overflow = {}));

  (0, _enum.ccenum)(Overflow);
  /**
   * @en Enum for cache mode.
   *
   * @zh 文本图集缓存类型。
   */

  var CacheMode;

  (function (CacheMode) {
    CacheMode[CacheMode["NONE"] = 0] = "NONE";
    CacheMode[CacheMode["BITMAP"] = 1] = "BITMAP";
    CacheMode[CacheMode["CHAR"] = 2] = "CHAR";
  })(CacheMode || (CacheMode = {}));

  (0, _enum.ccenum)(CacheMode);
  /**
   * @zh
   * Type 类型。
   */

  /**
   * @zh
   * TTF字体。
   */

  /**
   * @zh
   * 位图字体。
   */

  /**
   * @zh
   * 系统字体。
   */

  /**
   * @en
   * The Label Component.
   *
   * @zh
   * 文字标签组件。
   */

  var LabelComponent = (_dec = (0, _classDecorator.ccclass)('cc.LabelComponent'), _dec2 = (0, _classDecorator.help)('i18n:cc.LabelComponent'), _dec3 = (0, _classDecorator.executionOrder)(110), _dec4 = (0, _classDecorator.menu)('UI/Render/Label'), _dec5 = (0, _classDecorator.property)({
    displayOrder: 4,
    multiline: true,
    tooltip: 'Label 显示的文本内容字符串'
  }), _dec6 = (0, _classDecorator.property)({
    type: HorizontalTextAlignment,
    displayOrder: 5,
    tooltip: '文字水平对齐模式'
  }), _dec7 = (0, _classDecorator.property)({
    type: VerticalTextAlignment,
    displayOrder: 6,
    tooltip: '文字垂直对齐模式'
  }), _dec8 = (0, _classDecorator.property)({
    readonly: true,
    displayName: 'Actual Font Size',
    visible: false
  }), _dec9 = (0, _classDecorator.property)({
    displayOrder: 7,
    tooltip: '文字尺寸，以 point 为单位'
  }), _dec10 = (0, _classDecorator.property)({
    displayOrder: 8,
    tooltip: '文字字体名字'
  }), _dec11 = (0, _classDecorator.property)({
    displayOrder: 8,
    tooltip: '文字行高，以 point 为单位'
  }), _dec12 = (0, _classDecorator.property)({
    type: Overflow,
    displayOrder: 9,
    tooltip: '文字排版模式，包括以下三种：\n 1. CLAMP: 节点约束框之外的文字会被截断 \n 2. SHRINK: 自动根据节点约束框缩小文字\n 3. RESIZE_HEIGHT: 根据文本内容自动更新节点的 height 属性.'
  }), _dec13 = (0, _classDecorator.property)({
    displayOrder: 10,
    tooltip: '自动换行'
  }), _dec14 = (0, _classDecorator.property)({
    type: _index.Font,
    displayOrder: 11,
    tooltip: 'Label 使用的字体资源'
  }), _dec15 = (0, _classDecorator.property)({
    displayOrder: 12,
    tooltip: '是否使用系统默认字体'
  }), _dec16 = (0, _classDecorator.property)({
    type: CacheMode,
    displayOrder: 13,
    tooltip: '文本缓存模式，包括以下三种：\n 1. NONE: 不做任何缓存，文本内容进行一次绘制 \n 2. BITMAP: 将文本作为静态图像加入动态图集进行批次合并，但是不能频繁动态修改文本内容 \n 3. CHAR: 将文本拆分为字符并且把字符纹理缓存到一张字符图集中进行复用，适用于字符内容重复并且频繁更新的文本内容'
  }), _dec17 = (0, _classDecorator.property)({
    // visible: false,
    displayOrder: 15,
    tooltip: '字体加粗'
  }), _dec18 = (0, _classDecorator.property)({
    // visible: false,
    displayOrder: 16,
    tooltip: '字体倾斜'
  }), _dec19 = (0, _classDecorator.property)({
    // visible: false,
    displayOrder: 17,
    tooltip: '字体加下划线'
  }), _dec(_class = _dec2(_class = _dec3(_class = _dec4(_class = (_class2 = (_temp = _class3 = /*#__PURE__*/function (_UIRenderComponent) {
    _inherits(LabelComponent, _UIRenderComponent);

    _createClass(LabelComponent, [{
      key: "string",

      /**
       * @en
       * Content string of label.
       *
       * @zh
       * 标签显示的文本内容。
       */
      get: function get() {
        return this._string;
      },
      set: function set(value) {
        value = value.toString();

        if (this._string === value) {
          return;
        }

        this._string = value;
        this.updateRenderData();
      }
      /**
       * @en
       * Horizontal Alignment of label.
       *
       * @zh
       * 文本内容的水平对齐方式。
       */

    }, {
      key: "horizontalAlign",
      get: function get() {
        return this._horizontalAlign;
      },
      set: function set(value) {
        if (this._horizontalAlign === value) {
          return;
        }

        this._horizontalAlign = value;
        this.updateRenderData();
      }
      /**
       * @en
       * Vertical Alignment of label.
       *
       * @zh
       * 文本内容的垂直对齐方式。
       */

    }, {
      key: "verticalAlign",
      get: function get() {
        return this._verticalAlign;
      },
      set: function set(value) {
        if (this._verticalAlign === value) {
          return;
        }

        this._verticalAlign = value;
        this.updateRenderData();
      }
      /**
       * @en
       * The actual rendering font size in shrink mode.
       *
       * @zh
       * SHRINK 模式下面文本实际渲染的字体大小。
       */

    }, {
      key: "actualFontSize",
      get: function get() {
        return this._actualFontSize;
      },
      set: function set(value) {
        this._actualFontSize = value;
      }
      /**
       * @en
       * Font size of label.
       *
       * @zh
       * 文本字体大小。
       */

    }, {
      key: "fontSize",
      get: function get() {
        return this._fontSize;
      },
      set: function set(value) {
        if (this._fontSize === value) {
          return;
        }

        this._fontSize = value;
        this.updateRenderData();
      }
      /**
       * @en
       * Font family of label, only take effect when useSystemFont property is true.
       *
       * @zh
       * 文本字体名称, 只在 useSystemFont 属性为 true 的时候生效。
       */

    }, {
      key: "fontFamily",
      get: function get() {
        return this._fontFamily;
      },
      set: function set(value) {
        if (this._fontFamily === value) {
          return;
        }

        this._fontFamily = value;
        this.updateRenderData();
      }
      /**
       * @en
       * Line Height of label.
       *
       * @zh
       * 文本行高。
       */

    }, {
      key: "lineHeight",
      get: function get() {
        return this._lineHeight;
      },
      set: function set(value) {
        if (this._lineHeight === value) {
          return;
        }

        this._lineHeight = value;
        this.updateRenderData();
      }
      /**
       * @en
       * Overflow of label.
       *
       * @zh
       * 文字显示超出范围时的处理方式。
       */

    }, {
      key: "overflow",
      get: function get() {
        return this._overflow;
      },
      set: function set(value) {
        if (this._overflow === value) {
          return;
        }

        this._overflow = value;
        this.updateRenderData();
      }
      /**
       * @en
       * Whether auto wrap label when string width is large than label width.
       *
       * @zh
       * 是否自动换行。
       */

    }, {
      key: "enableWrapText",
      get: function get() {
        return this._enableWrapText;
      },
      set: function set(value) {
        if (this._enableWrapText === value) {
          return;
        }

        this._enableWrapText = value;
        this.updateRenderData();
      }
      /**
       * @en
       * The font of label.
       *
       * @zh
       * 文本字体。
       */

    }, {
      key: "font",
      get: function get() {
        // return this._N$file;
        return this._font;
      },
      set: function set(value) {
        if (this._font === value) {
          return;
        } // if delete the font, we should change isSystemFontUsed to true


        this._isSystemFontUsed = !value;

        if (_defaultConstants.EDITOR && value) {
          this._userDefinedFont = value;
        } // this._N$file = value;


        this._font = value; // if (value && this._isSystemFontUsed)
        //     this._isSystemFontUsed = false;

        if (typeof value === 'string') {
          (0, _debug.warnID)(4000);
        }

        if (this._renderData) {
          this.destroyRenderData();
          this._renderData = null;
        }

        this._fontAtlas = null;
        this.updateRenderData(true);
      }
      /**
       * @en
       * Whether use system font name or not.
       *
       * @zh
       * 是否使用系统字体。
       */

    }, {
      key: "useSystemFont",
      get: function get() {
        return this._isSystemFontUsed;
      },
      set: function set(value) {
        if (this._isSystemFontUsed === value) {
          return;
        }

        this.destroyRenderData();
        this._renderData = null;

        if (_defaultConstants.EDITOR) {
          if (!value && this._isSystemFontUsed && this._userDefinedFont) {
            this.font = this._userDefinedFont;
            this.spacingX = this._spacingX;
            return;
          }
        }

        this._isSystemFontUsed = !!value;

        if (value) {
          this.font = null;

          this._flushAssembler();

          this.updateRenderData();
        } // else if (!this._userDefinedFont) {
        //     this.disableRender();
        // }

      }
      /**
       * @en
       * The cache mode of label. This mode only supports system fonts.
       *
       * @zh
       * 文本缓存模式, 该模式只支持系统字体。
       */

    }, {
      key: "cacheMode",
      get: function get() {
        return this._cacheMode;
      },
      set: function set(value) {
        if (this._cacheMode === value) {
          return;
        } // if (this._cacheMode === CacheMode.BITMAP && !(this._font instanceof BitmapFont) && this._frame) {
        //     this._frame._resetDynamicAtlasFrame();
        // }


        if (this._cacheMode === CacheMode.CHAR) {
          this._ttfSpriteFrame = null;
        }

        this._cacheMode = value;
        this.updateRenderData(true);
      }
    }, {
      key: "spriteFrame",
      get: function get() {
        return this._texture;
      }
      /**
       * @en
       * Whether the font is bold.
       *
       * @zh
       * 字体是否加粗。
       */

    }, {
      key: "isBold",
      get: function get() {
        return this._isBold;
      },
      set: function set(value) {
        if (this._isBold === value) {
          return;
        }

        this._isBold = value;
        this.updateRenderData();
      }
      /**
       * @en
       * Whether the font is italic.
       *
       * @zh
       * 字体是否倾斜。
       */

    }, {
      key: "isItalic",
      get: function get() {
        return this._isItalic;
      },
      set: function set(value) {
        if (this._isItalic === value) {
          return;
        }

        this._isItalic = value;
        this.updateRenderData();
      }
      /**
       * @en
       * Whether the font is underline.
       *
       * @zh
       * 字体是否加下划线。
       */

    }, {
      key: "isUnderline",
      get: function get() {
        return this._isUnderline;
      },
      set: function set(value) {
        if (this._isUnderline === value) {
          return;
        }

        this._isUnderline = value;
        this.updateRenderData();
      }
    }, {
      key: "assemblerData",
      get: function get() {
        return this._assemblerData;
      }
    }, {
      key: "fontAtlas",
      get: function get() {
        return this._fontAtlas;
      },
      set: function set(value) {
        this._fontAtlas = value;
      }
    }, {
      key: "spacingX",
      get: function get() {
        return this._spacingX;
      },
      set: function set(value) {
        if (this._spacingX === value) {
          return;
        }

        this._spacingX = value;
        this.updateRenderData();
      }
    }, {
      key: "_bmFontOriginalSize",
      get: function get() {
        if (this._font instanceof _index.BitmapFont) {
          return this._font.fontSize;
        } else {
          return -1;
        }
      }
    }]);

    function LabelComponent() {
      var _this;

      _classCallCheck(this, LabelComponent);

      _this = _possibleConstructorReturn(this, _getPrototypeOf(LabelComponent).call(this));

      _initializerDefineProperty(_this, "_useOriginalSize", _descriptor, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_string", _descriptor2, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_horizontalAlign", _descriptor3, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_verticalAlign", _descriptor4, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_actualFontSize", _descriptor5, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_fontSize", _descriptor6, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_fontFamily", _descriptor7, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_lineHeight", _descriptor8, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_overflow", _descriptor9, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_enableWrapText", _descriptor10, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_font", _descriptor11, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_isSystemFontUsed", _descriptor12, _assertThisInitialized(_this));

      _this._spacingX = 0;

      _initializerDefineProperty(_this, "_isItalic", _descriptor13, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_isBold", _descriptor14, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_isUnderline", _descriptor15, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_cacheMode", _descriptor16, _assertThisInitialized(_this));

      _this._N$file = null;
      _this._texture = null;
      _this._ttfSpriteFrame = null;
      _this._userDefinedFont = null;
      _this._assemblerData = null;
      _this._fontAtlas = null;
      _this._letterTexture = null;

      if (_defaultConstants.EDITOR) {
        _this._userDefinedFont = null;
      }

      _this._ttfSpriteFrame = null;
      return _this;
    }

    _createClass(LabelComponent, [{
      key: "onEnable",
      value: function onEnable() {
        _get(_getPrototypeOf(LabelComponent.prototype), "onEnable", this).call(this); // TODO: Hack for barbarians


        if (!this._font && !this._isSystemFontUsed) {
          this.useSystemFont = true;
        } // Reapply default font family if necessary


        if (this._isSystemFontUsed && !this._fontFamily) {
          this.fontFamily = 'Arial';
        }

        this.updateRenderData(true);
      }
    }, {
      key: "onDisable",
      value: function onDisable() {
        _get(_getPrototypeOf(LabelComponent.prototype), "onDisable", this).call(this);
      }
    }, {
      key: "onDestroy",
      value: function onDestroy() {
        if (this._assembler && this._assembler.resetAssemblerData) {
          this._assembler.resetAssemblerData(this._assemblerData);
        }

        this._assemblerData = null;

        if (this._ttfSpriteFrame) {
          var tex = this._ttfSpriteFrame.texture;

          if (tex) {
            var tex2d = tex;

            if (tex2d.image) {
              tex2d.image.destroy();
            }

            tex.destroy();
          }

          this._ttfSpriteFrame = null;
        } // texture cannot be destroyed in here, lettertexture image source is public.


        this._letterTexture = null;

        _get(_getPrototypeOf(LabelComponent.prototype), "onDestroy", this).call(this);
      }
    }, {
      key: "updateRenderData",
      value: function updateRenderData() {
        var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        this.markForUpdateRenderData();

        if (force) {
          this._flushAssembler();

          this._applyFontTexture();
        }
      }
    }, {
      key: "_render",
      value: function _render(render) {
        render.commitComp(this, this._texture.getGFXTextureView(), this._assembler, this._texture.getGFXSampler());
      }
    }, {
      key: "_updateColor",
      value: function _updateColor() {
        if (this._font instanceof _index.BitmapFont) {
          _get(_getPrototypeOf(LabelComponent.prototype), "_updateColor", this).call(this);
        } else {
          this.updateRenderData(false);
        }
      }
    }, {
      key: "_canRender",
      value: function _canRender() {
        if (!_get(_getPrototypeOf(LabelComponent.prototype), "_canRender", this).call(this) || !this._string) {
          return false;
        }

        var font = this._font;

        if (font && font instanceof _index.BitmapFont) {
          var spriteFrame = font.spriteFrame; // cannot be activated if texture not loaded yet

          if (!spriteFrame || !spriteFrame.textureLoaded()) {
            return false;
          }
        }

        return true;
      }
    }, {
      key: "_flushAssembler",
      value: function _flushAssembler() {
        var assembler = LabelComponent.Assembler.getAssembler(this);

        if (this._assembler !== assembler) {
          this.destroyRenderData();
          this._assembler = assembler;
        }

        if (!this._renderData) {
          if (this._assembler && this._assembler.createData) {
            this._renderData = this._assembler.createData(this);
            this._renderData.material = this._material;
          }
        }
      }
    }, {
      key: "_flushMaterial",
      value: function _flushMaterial() {
        this._updateMaterial(this._material);
      }
    }, {
      key: "_applyFontTexture",
      value: function _applyFontTexture() {
        var _this2 = this;

        var font = this._font;

        if (font instanceof _index.BitmapFont) {
          var spriteFrame = font.spriteFrame;

          var onBMFontTextureLoaded = function onBMFontTextureLoaded() {
            // TODO: old texture in material have been released by loader
            _this2._texture = spriteFrame;

            _this2._flushMaterial();

            if (_this2._assembler) {
              _this2._assembler.updateRenderData(_this2);
            }
          }; // cannot be activated if texture not loaded yet


          if (spriteFrame) {
            if (spriteFrame.loaded || spriteFrame.textureLoaded) {
              onBMFontTextureLoaded();
            } else {
              spriteFrame.once('load', onBMFontTextureLoaded, this);
            }
          }
        } else {
          if (this.cacheMode === CacheMode.CHAR && _sys.sys.browserType !== _sys.sys.BROWSER_TYPE_WECHAT_GAME_SUB) {
            this._letterTexture = this._assembler.getAssemblerData();
            this._texture = this._letterTexture;
          } else if (!this._ttfSpriteFrame) {
            this._ttfSpriteFrame = new _index.SpriteFrame();
            this._assemblerData = this._assembler.getAssemblerData();
            var image = new _index.ImageAsset(this._assemblerData.canvas);
            var tex = image._texture;
            this._ttfSpriteFrame.texture = tex;
          }

          if (this.cacheMode !== CacheMode.CHAR) {
            // this._frame._refreshTexture(this._texture);
            this._texture = this._ttfSpriteFrame;
          }

          this._flushMaterial();

          if (this._assembler) {
            this._assembler.updateRenderData(this);
          }
        }
      }
    }]);

    return LabelComponent;
  }(_uiRenderComponent.UIRenderComponent), _class3.HorizontalAlign = HorizontalTextAlignment, _class3.VerticalAlign = VerticalTextAlignment, _class3.Overflow = Overflow, _class3.CacheMode = CacheMode, _class3._canvasPool = new _fontUtils.CanvasPool(), _temp), (_applyDecoratedDescriptor(_class2.prototype, "string", [_dec5], Object.getOwnPropertyDescriptor(_class2.prototype, "string"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "horizontalAlign", [_dec6], Object.getOwnPropertyDescriptor(_class2.prototype, "horizontalAlign"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "verticalAlign", [_dec7], Object.getOwnPropertyDescriptor(_class2.prototype, "verticalAlign"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "actualFontSize", [_dec8], Object.getOwnPropertyDescriptor(_class2.prototype, "actualFontSize"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "fontSize", [_dec9], Object.getOwnPropertyDescriptor(_class2.prototype, "fontSize"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "fontFamily", [_dec10], Object.getOwnPropertyDescriptor(_class2.prototype, "fontFamily"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "lineHeight", [_dec11], Object.getOwnPropertyDescriptor(_class2.prototype, "lineHeight"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "overflow", [_dec12], Object.getOwnPropertyDescriptor(_class2.prototype, "overflow"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "enableWrapText", [_dec13], Object.getOwnPropertyDescriptor(_class2.prototype, "enableWrapText"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "font", [_dec14], Object.getOwnPropertyDescriptor(_class2.prototype, "font"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "useSystemFont", [_dec15], Object.getOwnPropertyDescriptor(_class2.prototype, "useSystemFont"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "cacheMode", [_dec16], Object.getOwnPropertyDescriptor(_class2.prototype, "cacheMode"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "isBold", [_dec17], Object.getOwnPropertyDescriptor(_class2.prototype, "isBold"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "isItalic", [_dec18], Object.getOwnPropertyDescriptor(_class2.prototype, "isItalic"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "isUnderline", [_dec19], Object.getOwnPropertyDescriptor(_class2.prototype, "isUnderline"), _class2.prototype), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "_useOriginalSize", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return true;
    }
  }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "_string", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 'label';
    }
  }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "_horizontalAlign", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return HorizontalTextAlignment.CENTER;
    }
  }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "_verticalAlign", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return VerticalTextAlignment.CENTER;
    }
  }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "_actualFontSize", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "_fontSize", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 40;
    }
  }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "_fontFamily", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 'Arial';
    }
  }), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, "_lineHeight", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 40;
    }
  }), _descriptor9 = _applyDecoratedDescriptor(_class2.prototype, "_overflow", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return Overflow.NONE;
    }
  }), _descriptor10 = _applyDecoratedDescriptor(_class2.prototype, "_enableWrapText", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return true;
    }
  }), _descriptor11 = _applyDecoratedDescriptor(_class2.prototype, "_font", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return null;
    }
  }), _descriptor12 = _applyDecoratedDescriptor(_class2.prototype, "_isSystemFontUsed", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return true;
    }
  }), _descriptor13 = _applyDecoratedDescriptor(_class2.prototype, "_isItalic", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return false;
    }
  }), _descriptor14 = _applyDecoratedDescriptor(_class2.prototype, "_isBold", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return false;
    }
  }), _descriptor15 = _applyDecoratedDescriptor(_class2.prototype, "_isUnderline", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return false;
    }
  }), _descriptor16 = _applyDecoratedDescriptor(_class2.prototype, "_cacheMode", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return CacheMode.NONE;
    }
  })), _class2)) || _class) || _class) || _class) || _class);
  _exports.LabelComponent = LabelComponent;
  cc.LabelComponent = LabelComponent;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkY6L2plbmtpbnMvd29ya3NwYWNlL0NyZWF0b3JfM0QvZWRpdG9yLTNkL3Jlc291cmNlcy8zZC9lbmdpbmUvY29jb3MvdWkvY29tcG9uZW50cy9sYWJlbC1jb21wb25lbnQudHMiXSwibmFtZXMiOlsiSG9yaXpvbnRhbFRleHRBbGlnbm1lbnQiLCJWZXJ0aWNhbFRleHRBbGlnbm1lbnQiLCJPdmVyZmxvdyIsIkNhY2hlTW9kZSIsIkxhYmVsQ29tcG9uZW50IiwiZGlzcGxheU9yZGVyIiwibXVsdGlsaW5lIiwidG9vbHRpcCIsInR5cGUiLCJyZWFkb25seSIsImRpc3BsYXlOYW1lIiwidmlzaWJsZSIsIkZvbnQiLCJfc3RyaW5nIiwidmFsdWUiLCJ0b1N0cmluZyIsInVwZGF0ZVJlbmRlckRhdGEiLCJfaG9yaXpvbnRhbEFsaWduIiwiX3ZlcnRpY2FsQWxpZ24iLCJfYWN0dWFsRm9udFNpemUiLCJfZm9udFNpemUiLCJfZm9udEZhbWlseSIsIl9saW5lSGVpZ2h0IiwiX292ZXJmbG93IiwiX2VuYWJsZVdyYXBUZXh0IiwiX2ZvbnQiLCJfaXNTeXN0ZW1Gb250VXNlZCIsIkVESVRPUiIsIl91c2VyRGVmaW5lZEZvbnQiLCJfcmVuZGVyRGF0YSIsImRlc3Ryb3lSZW5kZXJEYXRhIiwiX2ZvbnRBdGxhcyIsImZvbnQiLCJzcGFjaW5nWCIsIl9zcGFjaW5nWCIsIl9mbHVzaEFzc2VtYmxlciIsIl9jYWNoZU1vZGUiLCJDSEFSIiwiX3R0ZlNwcml0ZUZyYW1lIiwiX3RleHR1cmUiLCJfaXNCb2xkIiwiX2lzSXRhbGljIiwiX2lzVW5kZXJsaW5lIiwiX2Fzc2VtYmxlckRhdGEiLCJCaXRtYXBGb250IiwiZm9udFNpemUiLCJfTiRmaWxlIiwiX2xldHRlclRleHR1cmUiLCJ1c2VTeXN0ZW1Gb250IiwiZm9udEZhbWlseSIsIl9hc3NlbWJsZXIiLCJyZXNldEFzc2VtYmxlckRhdGEiLCJ0ZXgiLCJ0ZXh0dXJlIiwidGV4MmQiLCJpbWFnZSIsImRlc3Ryb3kiLCJmb3JjZSIsIm1hcmtGb3JVcGRhdGVSZW5kZXJEYXRhIiwiX2FwcGx5Rm9udFRleHR1cmUiLCJyZW5kZXIiLCJjb21taXRDb21wIiwiZ2V0R0ZYVGV4dHVyZVZpZXciLCJnZXRHRlhTYW1wbGVyIiwic3ByaXRlRnJhbWUiLCJ0ZXh0dXJlTG9hZGVkIiwiYXNzZW1ibGVyIiwiQXNzZW1ibGVyIiwiZ2V0QXNzZW1ibGVyIiwiY3JlYXRlRGF0YSIsIm1hdGVyaWFsIiwiX21hdGVyaWFsIiwiX3VwZGF0ZU1hdGVyaWFsIiwib25CTUZvbnRUZXh0dXJlTG9hZGVkIiwiX2ZsdXNoTWF0ZXJpYWwiLCJsb2FkZWQiLCJvbmNlIiwiY2FjaGVNb2RlIiwic3lzIiwiYnJvd3NlclR5cGUiLCJCUk9XU0VSX1RZUEVfV0VDSEFUX0dBTUVfU1VCIiwiZ2V0QXNzZW1ibGVyRGF0YSIsIlNwcml0ZUZyYW1lIiwiSW1hZ2VBc3NldCIsImNhbnZhcyIsIlVJUmVuZGVyQ29tcG9uZW50IiwiSG9yaXpvbnRhbEFsaWduIiwiVmVydGljYWxBbGlnbiIsIl9jYW52YXNQb29sIiwiQ2FudmFzUG9vbCIsInByb3BlcnR5IiwiQ0VOVEVSIiwiTk9ORSIsImNjIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTBDQTs7Ozs7TUFLWUEsdUI7OzthQUFBQSx1QjtBQUFBQSxJQUFBQSx1QixDQUFBQSx1QjtBQUFBQSxJQUFBQSx1QixDQUFBQSx1QjtBQUFBQSxJQUFBQSx1QixDQUFBQSx1QjtLQUFBQSx1Qix3Q0FBQUEsdUI7O0FBcUJaLG9CQUFPQSx1QkFBUDtBQUVBOzs7Ozs7TUFLWUMscUI7OzthQUFBQSxxQjtBQUFBQSxJQUFBQSxxQixDQUFBQSxxQjtBQUFBQSxJQUFBQSxxQixDQUFBQSxxQjtBQUFBQSxJQUFBQSxxQixDQUFBQSxxQjtLQUFBQSxxQixzQ0FBQUEscUI7O0FBcUJaLG9CQUFPQSxxQkFBUDtBQUVBOzs7Ozs7TUFLWUMsUTs7O2FBQUFBLFE7QUFBQUEsSUFB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cUI7QUFDakIsaUJBQUtBLFVBQUwsQ0FBaUJsQyxnQkFBakIsQ0FBa0MsSUFBbEM7QUFDSDtBQUNKO0FBQ0o7Ozs7SUE3b0IrQnFFLG9DLFdBbWNsQkMsZSxHQUFrQnRGLHVCLFVBQ2xCdUYsYSxHQUFnQnRGLHFCLFVBQ2hCQyxRLEdBQVdBLFEsVUFDWEMsUyxHQUFZQSxTLFVBQ1pxRixXLEdBQWMsSUFBSUMscUJBQUosRSx5MkVBRTNCQyx3Qjs7Ozs7YUFDNEIsSTs7OEVBQzVCQSx3Qjs7Ozs7YUFDbUIsTzs7dUZBQ25CQSx3Qjs7Ozs7YUFDNEIxRix1QkFBdUIsQ0FBQzJGLE07O3FGQUNwREQsd0I7Ozs7O2FBQzBCekYscUJBQXFCLENBQUMwRixNOztzRkFDaERELHdCOzs7OzthQUMyQixDOztnRkFDM0JBLHdCOzs7OzthQUNxQixFOztrRkFDckJBLHdCOzs7OzthQUN1QixPOztrRkFDdkJBLHdCOzs7OzthQUN1QixFOztnRkFDdkJBLHdCOzs7OzthQUMrQnhGLFFBQVEsQ0FBQzBGLEk7O3VGQUN4Q0Ysd0I7Ozs7O2FBQzJCLEk7OzZFQUMzQkEsd0I7Ozs7O2FBQzhCLEk7O3lGQUM5QkEsd0I7Ozs7O2FBQzZCLEk7O2lGQUU3QkEsd0I7Ozs7O2FBQ3FCLEs7OytFQUNyQkEsd0I7Ozs7O2FBQ21CLEs7O29GQUNuQkEsd0I7Ozs7O2FBQ3dCLEs7O2tGQUN4QkEsd0I7Ozs7O2FBQ3NCdkYsU0FBUyxDQUFDeUYsSTs7OztBQXVLckNDLEVBQUFBLEVBQUUsQ0FBQ3pGLGNBQUgsR0FBb0JBLGNBQXBCIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuIENvcHlyaWdodCAoYykgMjAxMy0yMDE2IENodWtvbmcgVGVjaG5vbG9naWVzIEluYy5cclxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHA6Ly93d3cuY29jb3MuY29tXHJcblxyXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBlbmdpbmUgc291cmNlIGNvZGUgKHRoZSBcIlNvZnR3YXJlXCIpLCBhIGxpbWl0ZWQsXHJcbiAgd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxyXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcclxuICBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXHJcbiAgdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxyXG4gIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxyXG5cclxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXHJcbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG5cclxuLyoqXHJcbiAqIEBjYXRlZ29yeSB1aVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEJpdG1hcEZvbnQsIEZvbnQsIEltYWdlQXNzZXQsIFNwcml0ZUZyYW1lLCBUZXh0dXJlMkQgfSBmcm9tICcuLi8uLi9jb3JlL2Fzc2V0cyc7XHJcbmltcG9ydCB7IGNjY2xhc3MsIGhlbHAsIGV4ZWN1dGlvbk9yZGVyLCBtZW51LCBwcm9wZXJ0eSB9IGZyb20gJy4uLy4uL2NvcmUvZGF0YS9jbGFzcy1kZWNvcmF0b3InO1xyXG5pbXBvcnQgeyBjY2VudW0gfSBmcm9tICcuLi8uLi9jb3JlL3ZhbHVlLXR5cGVzL2VudW0nO1xyXG5pbXBvcnQgeyBVSSB9IGZyb20gJy4uLy4uL2NvcmUvcmVuZGVyZXIvdWkvdWknO1xyXG5pbXBvcnQgeyBGb250QXRsYXMgfSBmcm9tICcuLi9hc3NlbWJsZXIvbGFiZWwvYm1mb250VXRpbHMnO1xyXG5pbXBvcnQgeyBDYW52YXNQb29sLCBJU2hhcmVkTGFiZWxEYXRhIH0gZnJvbSAnLi4vYXNzZW1ibGVyL2xhYmVsL2ZvbnQtdXRpbHMnO1xyXG5pbXBvcnQgeyBMZXR0ZXJSZW5kZXJUZXh0dXJlIH0gZnJvbSAnLi4vYXNzZW1ibGVyL2xhYmVsL2xldHRlci1mb250JztcclxuaW1wb3J0IHsgVUlSZW5kZXJDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL2NvbXBvbmVudHMvdWktYmFzZS91aS1yZW5kZXItY29tcG9uZW50JztcclxuaW1wb3J0IHsgd2FybklEIH0gZnJvbSAnLi4vLi4vY29yZS9wbGF0Zm9ybS9kZWJ1Zyc7XHJcbmltcG9ydCB7IHN5cyB9IGZyb20gJy4uLy4uL2NvcmUvcGxhdGZvcm0vc3lzJztcclxuaW1wb3J0IHsgRURJVE9SIH0gZnJvbSAnaW50ZXJuYWw6Y29uc3RhbnRzJztcclxuXHJcbi8qKlxyXG4gKiBAZW4gRW51bSBmb3IgaG9yaXpvbnRhbCB0ZXh0IGFsaWdubWVudC5cclxuICpcclxuICogQHpoIOaWh+acrOaoquWQkeWvuem9kOexu+Wei+OAglxyXG4gKi9cclxuZXhwb3J0IGVudW0gSG9yaXpvbnRhbFRleHRBbGlnbm1lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQWxpZ25tZW50IGxlZnQgZm9yIHRleHQuXHJcbiAgICAgKlxyXG4gICAgICogQHpoIOW3puWvuem9kOOAglxyXG4gICAgICovXHJcbiAgICBMRUZUID0gMCxcclxuICAgIC8qKlxyXG4gICAgICogQGVuIEFsaWdubWVudCBjZW50ZXIgZm9yIHRleHQuXHJcbiAgICAgKlxyXG4gICAgICogQHpoIOS4reW/g+Wvuem9kOOAglxyXG4gICAgICovXHJcbiAgICBDRU5URVIgPSAxLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQWxpZ25tZW50IHJpZ2h0IGZvciB0ZXh0LlxyXG4gICAgICpcclxuICAgICAqIEB6aCDlj7Plr7npvZDjgIJcclxuICAgICAqL1xyXG4gICAgUklHSFQgPSAyLFxyXG59XHJcblxyXG5jY2VudW0oSG9yaXpvbnRhbFRleHRBbGlnbm1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIEBlbiBFbnVtIGZvciB2ZXJ0aWNhbCB0ZXh0IGFsaWdubWVudC5cclxuICpcclxuICogQHpoIOaWh+acrOWeguebtOWvuem9kOexu+Wei+OAglxyXG4gKi9cclxuZXhwb3J0IGVudW0gVmVydGljYWxUZXh0QWxpZ25tZW50IHtcclxuICAgIC8qKlxyXG4gICAgICogQGVuIEFsaWdubWVudCB0b3AgZm9yIHRleHQuXHJcbiAgICAgKlxyXG4gICAgICogQHpoIOS4iuWvuem9kOOAglxyXG4gICAgICovXHJcbiAgICBUT1AgPSAwLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQWxpZ25tZW50IGNlbnRlciBmb3IgdGV4dC5cclxuICAgICAqXHJcbiAgICAgKiBAemgg5Lit5b+D5a+56b2Q44CCXHJcbiAgICAgKi9cclxuICAgIENFTlRFUiA9IDEsXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBBbGlnbm1lbnQgYm90dG9tIGZvciB0ZXh0LlxyXG4gICAgICpcclxuICAgICAqIEB6aCDkuIvlr7npvZDjgIJcclxuICAgICAqL1xyXG4gICAgQk9UVE9NID0gMixcclxufVxyXG5cclxuY2NlbnVtKFZlcnRpY2FsVGV4dEFsaWdubWVudCk7XHJcblxyXG4vKipcclxuICogQGVuIEVudW0gZm9yIE92ZXJmbG93LlxyXG4gKlxyXG4gKiBAemgg5paH5pys6LaF6L2957G75Z6L44CCXHJcbiAqL1xyXG5leHBvcnQgZW51bSBPdmVyZmxvdyB7XHJcbiAgICAvKipcclxuICAgICAqIEBlbiBOb25lLlxyXG4gICAgICpcclxuICAgICAqIEB6aCDkuI3lgZrku7vkvZXpmZDliLbjgIJcclxuICAgICAqL1xyXG4gICAgTk9ORSA9IDAsXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBJbiBDTEFNUCBtb2RlLCB3aGVuIGxhYmVsIGNvbnRlbnQgZ29lcyBvdXQgb2YgdGhlIGJvdW5kaW5nIGJveCwgaXQgd2lsbCBiZSBjbGlwcGVkLlxyXG4gICAgICpcclxuICAgICAqIEB6aCBDTEFNUCDmqKHlvI/kuK3vvIzlvZPmlofmnKzlhoXlrrnotoXlh7rovrnnlYzmoYbml7bvvIzlpJrkvZnnmoTkvJrooqvmiKrmlq3jgIJcclxuICAgICAqL1xyXG4gICAgQ0xBTVAgPSAxLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gSW4gU0hSSU5LIG1vZGUsIHRoZSBmb250IHNpemUgd2lsbCBjaGFuZ2UgZHluYW1pY2FsbHkgdG8gYWRhcHQgdGhlIGNvbnRlbnQgc2l6ZS5cclxuICAgICAqIFRoaXMgbW9kZSBtYXkgdGFrZXMgdXAgbW9yZSBDUFUgcmVzb3VyY2VzIHdoZW4gdGhlIGxhYmVsIGlzIHJlZnJlc2hlZC5cclxuICAgICAqXHJcbiAgICAgKiBAemggU0hSSU5LIOaooeW8j++8jOWtl+S9k+Wkp+Wwj+S8muWKqOaAgeWPmOWMlu+8jOS7pemAguW6lOWGheWuueWkp+Wwj+OAglxyXG4gICAgICovXHJcbiAgICBTSFJJTksgPSAyLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gSW4gUkVTSVpFX0hFSUdIVCBtb2RlLCB5b3UgY2FuIG9ubHkgY2hhbmdlIHRoZSB3aWR0aCBvZiBsYWJlbCBhbmQgdGhlIGhlaWdodCBpcyBjaGFuZ2VkIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgKlxyXG4gICAgICogQHpoIOWcqCBSRVNJWkVfSEVJR0hUIOaooeW8j+S4i++8jOWPquiDveabtOaUueaWh+acrOeahOWuveW6pu+8jOmrmOW6puaYr+iHquWKqOaUueWPmOeahOOAglxyXG4gICAgICovXHJcbiAgICBSRVNJWkVfSEVJR0hUID0gMyxcclxufVxyXG5cclxuY2NlbnVtKE92ZXJmbG93KTtcclxuXHJcbi8qKlxyXG4gKiBAZW4gRW51bSBmb3IgY2FjaGUgbW9kZS5cclxuICpcclxuICogQHpoIOaWh+acrOWbvumbhue8k+WtmOexu+Wei+OAglxyXG4gKi9cclxuZW51bSBDYWNoZU1vZGUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gRG8gbm90IGRvIGFueSBjYWNoaW5nLlxyXG4gICAgICpcclxuICAgICAqIEB6aCDkuI3lgZrku7vkvZXnvJPlrZjjgIJcclxuICAgICAqL1xyXG4gICAgTk9ORSA9IDAsXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBJbiBCSVRNQVAgbW9kZSwgY2FjaGUgdGhlIGxhYmVsIGFzIGEgc3RhdGljIGltYWdlIGFuZCBhZGQgaXQgdG8gdGhlIGR5bmFtaWMgYXRsYXMgZm9yIGJhdGNoIHJlbmRlcmluZyxcclxuICAgICAqIGFuZCBjYW4gYmF0Y2hpbmcgd2l0aCBTcHJpdGVzIHVzaW5nIGJyb2tlbiBpbWFnZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHpoIEJJVE1BUCDmqKHlvI/vvIzlsIYgbGFiZWwg57yT5a2Y5oiQ6Z2Z5oCB5Zu+5YOP5bm25Yqg5YWl5Yiw5Yqo5oCB5Zu+6ZuG77yM5Lul5L6/6L+b6KGM5om55qyh5ZCI5bm277yM5Y+v5LiO5L2/55So56KO5Zu+55qEIFNwcml0ZSDov5vooYzlkIjmibnjgIJcclxuICAgICAqIO+8iOazqO+8muWKqOaAgeWbvumbhuWcqCBDaHJvbWUg5Lul5Y+K5b6u5L+h5bCP5ri45oiP5pqC5pe25YWz6Zet77yM6K+l5Yqf6IO95peg5pWI77yJ44CCXHJcbiAgICAgKi9cclxuICAgIEJJVE1BUCA9IDEsXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBJbiBDSEFSIG1vZGUsIHNwbGl0IHRleHQgaW50byBjaGFyYWN0ZXJzIGFuZCBjYWNoZSBjaGFyYWN0ZXJzIGludG8gYSBkeW5hbWljIGF0bGFzIHdoaWNoIHRoZSBzaXplIG9mIDEwMjQgKiAxMDI0LlxyXG4gICAgICpcclxuICAgICAqIEB6aCBDSEFSIOaooeW8j++8jOWwhuaWh+acrOaLhuWIhuS4uuWtl+espu+8jOW5tuWwhuWtl+espue8k+WtmOWIsOS4gOW8oOWNleeLrOeahOWkp+Wwj+S4uiAxMDI0ICogMTAyNCDnmoTlm77pm4bkuK3ov5vooYzph43lpI3kvb/nlKjvvIzkuI3lho3kvb/nlKjliqjmgIHlm77pm4bjgIJcclxuICAgICAqIO+8iOazqO+8muW9k+Wbvumbhua7oeaXtuWwhuS4jeWGjei/m+ihjOe8k+WtmO+8jOaaguaXtuS4jeaUr+aMgSBTSFJJTksg6Ieq6YCC5bqU5paH5pys5bC65a+477yI5ZCO57ut5a6M5ZaE77yJ77yJ44CCXHJcbiAgICAgKi9cclxuICAgIENIQVIgPSAyLFxyXG59XHJcblxyXG5jY2VudW0oQ2FjaGVNb2RlKTtcclxuXHJcbi8qKlxyXG4gKiBAemhcclxuICogVHlwZSDnsbvlnovjgIJcclxuICovXHJcbi8qKlxyXG4gKiBAemhcclxuICogVFRG5a2X5L2T44CCXHJcbiAqL1xyXG4vKipcclxuICogQHpoXHJcbiAqIOS9jeWbvuWtl+S9k+OAglxyXG4gKi9cclxuLyoqXHJcbiAqIEB6aFxyXG4gKiDns7vnu5/lrZfkvZPjgIJcclxuICovXHJcblxyXG4vKipcclxuICogQGVuXHJcbiAqIFRoZSBMYWJlbCBDb21wb25lbnQuXHJcbiAqXHJcbiAqIEB6aFxyXG4gKiDmloflrZfmoIfnrb7nu4Tku7bjgIJcclxuICovXHJcbkBjY2NsYXNzKCdjYy5MYWJlbENvbXBvbmVudCcpXHJcbkBoZWxwKCdpMThuOmNjLkxhYmVsQ29tcG9uZW50JylcclxuQGV4ZWN1dGlvbk9yZGVyKDExMClcclxuQG1lbnUoJ1VJL1JlbmRlci9MYWJlbCcpXHJcbmV4cG9ydCBjbGFzcyBMYWJlbENvbXBvbmVudCBleHRlbmRzIFVJUmVuZGVyQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBDb250ZW50IHN0cmluZyBvZiBsYWJlbC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOagh+etvuaYvuekuueahOaWh+acrOWGheWuueOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogNCxcclxuICAgICAgICBtdWx0aWxpbmU6IHRydWUsXHJcbiAgICAgICAgdG9vbHRpcDonTGFiZWwg5pi+56S655qE5paH5pys5YaF5a655a2X56ym5LiyJyxcclxuICAgIH0pXHJcbiAgICBnZXQgc3RyaW5nICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RyaW5nO1xyXG4gICAgfVxyXG4gICAgc2V0IHN0cmluZyAodmFsdWUpIHtcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0cmluZyA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc3RyaW5nID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIEhvcml6b250YWwgQWxpZ25tZW50IG9mIGxhYmVsLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5paH5pys5YaF5a6555qE5rC05bmz5a+56b2Q5pa55byP44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogSG9yaXpvbnRhbFRleHRBbGlnbm1lbnQsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiA1LFxyXG4gICAgICAgIHRvb2x0aXA6J+aWh+Wtl+awtOW5s+Wvuem9kOaooeW8jycsXHJcbiAgICB9KVxyXG4gICAgZ2V0IGhvcml6b250YWxBbGlnbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvcml6b250YWxBbGlnbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaG9yaXpvbnRhbEFsaWduICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9ob3Jpem9udGFsQWxpZ24gPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2hvcml6b250YWxBbGlnbiA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUmVuZGVyRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBWZXJ0aWNhbCBBbGlnbm1lbnQgb2YgbGFiZWwuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDmlofmnKzlhoXlrrnnmoTlnoLnm7Tlr7npvZDmlrnlvI/jgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBWZXJ0aWNhbFRleHRBbGlnbm1lbnQsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiA2LFxyXG4gICAgICAgIHRvb2x0aXA6J+aWh+Wtl+WeguebtOWvuem9kOaooeW8jycsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHZlcnRpY2FsQWxpZ24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJ0aWNhbEFsaWduO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB2ZXJ0aWNhbEFsaWduICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl92ZXJ0aWNhbEFsaWduID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl92ZXJ0aWNhbEFsaWduID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBhY3R1YWwgcmVuZGVyaW5nIGZvbnQgc2l6ZSBpbiBzaHJpbmsgbW9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIFNIUklOSyDmqKHlvI/kuIvpnaLmlofmnKzlrp7pmYXmuLLmn5PnmoTlrZfkvZPlpKflsI/jgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICByZWFkb25seTogdHJ1ZSxcclxuICAgICAgICBkaXNwbGF5TmFtZTogJ0FjdHVhbCBGb250IFNpemUnLFxyXG4gICAgICAgIHZpc2libGU6IGZhbHNlLFxyXG4gICAgfSlcclxuICAgIGdldCBhY3R1YWxGb250U2l6ZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdHVhbEZvbnRTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhY3R1YWxGb250U2l6ZSAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9hY3R1YWxGb250U2l6ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBGb250IHNpemUgb2YgbGFiZWwuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDmlofmnKzlrZfkvZPlpKflsI/jgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICBkaXNwbGF5T3JkZXI6IDcsXHJcbiAgICAgICAgdG9vbHRpcDon5paH5a2X5bC65a+477yM5LulIHBvaW50IOS4uuWNleS9jScsXHJcbiAgICB9KVxyXG4gICAgZ2V0IGZvbnRTaXplICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9udFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZvbnRTaXplICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9mb250U2l6ZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZm9udFNpemUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlckRhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogRm9udCBmYW1pbHkgb2YgbGFiZWwsIG9ubHkgdGFrZSBlZmZlY3Qgd2hlbiB1c2VTeXN0ZW1Gb250IHByb3BlcnR5IGlzIHRydWUuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDmlofmnKzlrZfkvZPlkI3np7AsIOWPquWcqCB1c2VTeXN0ZW1Gb250IOWxnuaAp+S4uiB0cnVlIOeahOaXtuWAmeeUn+aViOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogOCxcclxuICAgICAgICB0b29sdGlwOifmloflrZflrZfkvZPlkI3lrZcnLFxyXG4gICAgfSlcclxuICAgIGdldCBmb250RmFtaWx5ICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9udEZhbWlseTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm9udEZhbWlseSAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fZm9udEZhbWlseSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZm9udEZhbWlseSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUmVuZGVyRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBMaW5lIEhlaWdodCBvZiBsYWJlbC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOaWh+acrOihjOmrmOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogOCxcclxuICAgICAgICB0b29sdGlwOifmloflrZfooYzpq5jvvIzku6UgcG9pbnQg5Li65Y2V5L2NJyxcclxuICAgIH0pXHJcbiAgICBnZXQgbGluZUhlaWdodCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVIZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBzZXQgbGluZUhlaWdodCAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fbGluZUhlaWdodCA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbGluZUhlaWdodCA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUmVuZGVyRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBPdmVyZmxvdyBvZiBsYWJlbC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOaWh+Wtl+aYvuekuui2heWHuuiMg+WbtOaXtueahOWkhOeQhuaWueW8j+OAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHR5cGU6IE92ZXJmbG93LFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogOSxcclxuICAgICAgICB0b29sdGlwOifmloflrZfmjpLniYjmqKHlvI/vvIzljIXmi6zku6XkuIvkuInnp43vvJpcXG4gMS4gQ0xBTVA6IOiKgueCuee6puadn+ahhuS5i+WklueahOaWh+Wtl+S8muiiq+aIquaWrSBcXG4gMi4gU0hSSU5LOiDoh6rliqjmoLnmja7oioLngrnnuqbmnZ/moYbnvKnlsI/mloflrZdcXG4gMy4gUkVTSVpFX0hFSUdIVDog5qC55o2u5paH5pys5YaF5a656Ieq5Yqo5pu05paw6IqC54K555qEIGhlaWdodCDlsZ7mgKcuJyxcclxuICAgIH0pXHJcbiAgICBnZXQgb3ZlcmZsb3cgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vdmVyZmxvdztcclxuICAgIH1cclxuXHJcbiAgICBzZXQgb3ZlcmZsb3cgKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX292ZXJmbG93ID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9vdmVyZmxvdyA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUmVuZGVyRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBXaGV0aGVyIGF1dG8gd3JhcCBsYWJlbCB3aGVuIHN0cmluZyB3aWR0aCBpcyBsYXJnZSB0aGFuIGxhYmVsIHdpZHRoLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5piv5ZCm6Ieq5Yqo5o2i6KGM44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAxMCxcclxuICAgICAgICB0b29sdGlwOifoh6rliqjmjaLooYwnLFxyXG4gICAgfSlcclxuICAgIGdldCBlbmFibGVXcmFwVGV4dCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZVdyYXBUZXh0O1xyXG4gICAgfVxyXG4gICAgc2V0IGVuYWJsZVdyYXBUZXh0ICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9lbmFibGVXcmFwVGV4dCA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZW5hYmxlV3JhcFRleHQgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlckRhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIGZvbnQgb2YgbGFiZWwuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDmlofmnKzlrZfkvZPjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBGb250LFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMTEsXHJcbiAgICAgICAgdG9vbHRpcDonTGFiZWwg5L2/55So55qE5a2X5L2T6LWE5rqQJyxcclxuICAgIH0pXHJcbiAgICBnZXQgZm9udCAoKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuX04kZmlsZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9udDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm9udCAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fZm9udCA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgZGVsZXRlIHRoZSBmb250LCB3ZSBzaG91bGQgY2hhbmdlIGlzU3lzdGVtRm9udFVzZWQgdG8gdHJ1ZVxyXG4gICAgICAgIHRoaXMuX2lzU3lzdGVtRm9udFVzZWQgPSAhdmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChFRElUT1IgJiYgdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXNlckRlZmluZWRGb250ID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB0aGlzLl9OJGZpbGUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl9mb250ID0gdmFsdWU7XHJcbiAgICAgICAgLy8gaWYgKHZhbHVlICYmIHRoaXMuX2lzU3lzdGVtRm9udFVzZWQpXHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2lzU3lzdGVtRm9udFVzZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgd2FybklEKDQwMDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbmRlckRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95UmVuZGVyRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJEYXRhID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2ZvbnRBdGxhcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJEYXRhKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBXaGV0aGVyIHVzZSBzeXN0ZW0gZm9udCBuYW1lIG9yIG5vdC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOaYr+WQpuS9v+eUqOezu+e7n+Wtl+S9k+OAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMTIsXHJcbiAgICAgICAgdG9vbHRpcDon5piv5ZCm5L2/55So57O757uf6buY6K6k5a2X5L2TJyxcclxuICAgIH0pXHJcbiAgICBnZXQgdXNlU3lzdGVtRm9udCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzU3lzdGVtRm9udFVzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHVzZVN5c3RlbUZvbnQgKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzU3lzdGVtRm9udFVzZWQgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGVzdHJveVJlbmRlckRhdGEoKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJEYXRhID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKEVESVRPUikge1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlICYmIHRoaXMuX2lzU3lzdGVtRm9udFVzZWQgJiYgdGhpcy5fdXNlckRlZmluZWRGb250KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvbnQgPSB0aGlzLl91c2VyRGVmaW5lZEZvbnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwYWNpbmdYID0gdGhpcy5fc3BhY2luZ1g7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2lzU3lzdGVtRm9udFVzZWQgPSAhIXZhbHVlO1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmZvbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9mbHVzaEFzc2VtYmxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlckRhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZWxzZSBpZiAoIXRoaXMuX3VzZXJEZWZpbmVkRm9udCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmRpc2FibGVSZW5kZXIoKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgY2FjaGUgbW9kZSBvZiBsYWJlbC4gVGhpcyBtb2RlIG9ubHkgc3VwcG9ydHMgc3lzdGVtIGZvbnRzLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5paH5pys57yT5a2Y5qih5byPLCDor6XmqKHlvI/lj6rmlK/mjIHns7vnu5/lrZfkvZPjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBDYWNoZU1vZGUsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAxMyxcclxuICAgICAgICB0b29sdGlwOifmlofmnKznvJPlrZjmqKHlvI/vvIzljIXmi6zku6XkuIvkuInnp43vvJpcXG4gMS4gTk9ORTog5LiN5YGa5Lu75L2V57yT5a2Y77yM5paH5pys5YaF5a656L+b6KGM5LiA5qyh57uY5Yi2IFxcbiAyLiBCSVRNQVA6IOWwhuaWh+acrOS9nOS4uumdmeaAgeWbvuWDj+WKoOWFpeWKqOaAgeWbvumbhui/m+ihjOaJueasoeWQiOW5tu+8jOS9huaYr+S4jeiDvemikee5geWKqOaAgeS/ruaUueaWh+acrOWGheWuuSBcXG4gMy4gQ0hBUjog5bCG5paH5pys5ouG5YiG5Li65a2X56ym5bm25LiU5oqK5a2X56ym57q555CG57yT5a2Y5Yiw5LiA5byg5a2X56ym5Zu+6ZuG5Lit6L+b6KGM5aSN55So77yM6YCC55So5LqO5a2X56ym5YaF5a656YeN5aSN5bm25LiU6aKR57mB5pu05paw55qE5paH5pys5YaF5a65JyxcclxuICAgIH0pXHJcbiAgICBnZXQgY2FjaGVNb2RlICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVNb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjYWNoZU1vZGUgKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlTW9kZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgKHRoaXMuX2NhY2hlTW9kZSA9PT0gQ2FjaGVNb2RlLkJJVE1BUCAmJiAhKHRoaXMuX2ZvbnQgaW5zdGFuY2VvZiBCaXRtYXBGb250KSAmJiB0aGlzLl9mcmFtZSkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLl9mcmFtZS5fcmVzZXREeW5hbWljQXRsYXNGcmFtZSgpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlTW9kZSA9PT0gQ2FjaGVNb2RlLkNIQVIpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHRmU3ByaXRlRnJhbWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY2FjaGVNb2RlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJEYXRhKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzcHJpdGVGcmFtZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFdoZXRoZXIgdGhlIGZvbnQgaXMgYm9sZC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOWtl+S9k+aYr+WQpuWKoOeyl+OAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIC8vIHZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMTUsXHJcbiAgICAgICAgdG9vbHRpcDon5a2X5L2T5Yqg57KXJyxcclxuICAgIH0pXHJcbiAgICBnZXQgaXNCb2xkICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNCb2xkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpc0JvbGQgKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzQm9sZCA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5faXNCb2xkID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFdoZXRoZXIgdGhlIGZvbnQgaXMgaXRhbGljLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5a2X5L2T5piv5ZCm5YC+5pac44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgLy8gdmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAxNixcclxuICAgICAgICB0b29sdGlwOiflrZfkvZPlgL7mlpwnLFxyXG4gICAgfSlcclxuICAgIGdldCBpc0l0YWxpYyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzSXRhbGljO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpc0l0YWxpYyAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNJdGFsaWMgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2lzSXRhbGljID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFdoZXRoZXIgdGhlIGZvbnQgaXMgdW5kZXJsaW5lLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5a2X5L2T5piv5ZCm5Yqg5LiL5YiS57q/44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgLy8gdmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAxNyxcclxuICAgICAgICB0b29sdGlwOiflrZfkvZPliqDkuIvliJLnur8nLFxyXG4gICAgfSlcclxuICAgIGdldCBpc1VuZGVybGluZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVW5kZXJsaW5lO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpc1VuZGVybGluZSAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNVbmRlcmxpbmUgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2lzVW5kZXJsaW5lID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFzc2VtYmxlckRhdGEgKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Fzc2VtYmxlckRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZvbnRBdGxhcyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvbnRBdGxhcztcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm9udEF0bGFzICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2ZvbnRBdGxhcyA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzcGFjaW5nWCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NwYWNpbmdYO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzcGFjaW5nWCAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3BhY2luZ1ggPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NwYWNpbmdYID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9ibUZvbnRPcmlnaW5hbFNpemUgKCl7XHJcbiAgICAgICAgaWYgKHRoaXMuX2ZvbnQgaW5zdGFuY2VvZiBCaXRtYXBGb250KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mb250LmZvbnRTaXplO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIEhvcml6b250YWxBbGlnbiA9IEhvcml6b250YWxUZXh0QWxpZ25tZW50O1xyXG4gICAgcHVibGljIHN0YXRpYyBWZXJ0aWNhbEFsaWduID0gVmVydGljYWxUZXh0QWxpZ25tZW50O1xyXG4gICAgcHVibGljIHN0YXRpYyBPdmVyZmxvdyA9IE92ZXJmbG93O1xyXG4gICAgcHVibGljIHN0YXRpYyBDYWNoZU1vZGUgPSBDYWNoZU1vZGU7XHJcbiAgICBwdWJsaWMgc3RhdGljIF9jYW52YXNQb29sID0gbmV3IENhbnZhc1Bvb2woKTtcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfdXNlT3JpZ2luYWxTaXplID0gdHJ1ZTtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9zdHJpbmcgPSAnbGFiZWwnO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX2hvcml6b250YWxBbGlnbiA9IEhvcml6b250YWxUZXh0QWxpZ25tZW50LkNFTlRFUjtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF92ZXJ0aWNhbEFsaWduID0gVmVydGljYWxUZXh0QWxpZ25tZW50LkNFTlRFUjtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9hY3R1YWxGb250U2l6ZSA9IDA7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfZm9udFNpemUgPSA0MDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9mb250RmFtaWx5ID0gJ0FyaWFsJztcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9saW5lSGVpZ2h0ID0gNDA7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfb3ZlcmZsb3c6IE92ZXJmbG93ID0gT3ZlcmZsb3cuTk9ORTtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9lbmFibGVXcmFwVGV4dCA9IHRydWU7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfZm9udDogRm9udCB8IG51bGwgPSBudWxsO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX2lzU3lzdGVtRm9udFVzZWQgPSB0cnVlO1xyXG4gICAgcHJvdGVjdGVkIF9zcGFjaW5nWCA9IDA7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfaXNJdGFsaWMgPSBmYWxzZTtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9pc0JvbGQgPSBmYWxzZTtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9pc1VuZGVybGluZSA9IGZhbHNlO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX2NhY2hlTW9kZSA9IENhY2hlTW9kZS5OT05FO1xyXG5cclxuICAgIC8vIGRvbid0IG5lZWQgc2VyaWFsaXplXHJcbiAgICAvLyDov5nkuKrkv53lrZjkuobml6fpobnnm67nmoQgZmlsZSDmlbDmja5cclxuICAgIHByb3RlY3RlZCBfTiRmaWxlOiBGb250IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcm90ZWN0ZWQgX3RleHR1cmU6IFNwcml0ZUZyYW1lIHwgTGV0dGVyUmVuZGVyVGV4dHVyZSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJvdGVjdGVkIF90dGZTcHJpdGVGcmFtZTogU3ByaXRlRnJhbWUgfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBfdXNlckRlZmluZWRGb250OiBGb250IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcm90ZWN0ZWQgX2Fzc2VtYmxlckRhdGE6IElTaGFyZWRMYWJlbERhdGEgfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBfZm9udEF0bGFzOiBGb250QXRsYXMgfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBfbGV0dGVyVGV4dHVyZTogTGV0dGVyUmVuZGVyVGV4dHVyZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGlmIChFRElUT1IpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXNlckRlZmluZWRGb250ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3R0ZlNwcml0ZUZyYW1lID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25FbmFibGUgKCkge1xyXG4gICAgICAgIHN1cGVyLm9uRW5hYmxlKCk7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IEhhY2sgZm9yIGJhcmJhcmlhbnNcclxuICAgICAgICBpZiAoIXRoaXMuX2ZvbnQgJiYgIXRoaXMuX2lzU3lzdGVtRm9udFVzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy51c2VTeXN0ZW1Gb250ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVhcHBseSBkZWZhdWx0IGZvbnQgZmFtaWx5IGlmIG5lY2Vzc2FyeVxyXG4gICAgICAgIGlmICh0aGlzLl9pc1N5c3RlbUZvbnRVc2VkICYmICF0aGlzLl9mb250RmFtaWx5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9udEZhbWlseSA9ICdBcmlhbCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlckRhdGEodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uRGlzYWJsZSAoKSB7XHJcbiAgICAgICAgc3VwZXIub25EaXNhYmxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uRGVzdHJveSAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Fzc2VtYmxlciAmJiB0aGlzLl9hc3NlbWJsZXIucmVzZXRBc3NlbWJsZXJEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2VtYmxlci5yZXNldEFzc2VtYmxlckRhdGEodGhpcy5fYXNzZW1ibGVyRGF0YSEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fYXNzZW1ibGVyRGF0YSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuX3R0ZlNwcml0ZUZyYW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleCA9IHRoaXMuX3R0ZlNwcml0ZUZyYW1lLnRleHR1cmU7XHJcbiAgICAgICAgICAgIGlmICh0ZXgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleDJkID0gdGV4IGFzIFRleHR1cmUyRDtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXgyZC5pbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleDJkLmltYWdlLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRleC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdHRmU3ByaXRlRnJhbWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGV4dHVyZSBjYW5ub3QgYmUgZGVzdHJveWVkIGluIGhlcmUsIGxldHRlcnRleHR1cmUgaW1hZ2Ugc291cmNlIGlzIHB1YmxpYy5cclxuICAgICAgICB0aGlzLl9sZXR0ZXJUZXh0dXJlID0gbnVsbDtcclxuXHJcbiAgICAgICAgc3VwZXIub25EZXN0cm95KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVJlbmRlckRhdGEgKGZvcmNlID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLm1hcmtGb3JVcGRhdGVSZW5kZXJEYXRhKCk7XHJcblxyXG4gICAgICAgIGlmIChmb3JjZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9mbHVzaEFzc2VtYmxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBseUZvbnRUZXh0dXJlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfcmVuZGVyIChyZW5kZXI6IFVJKSB7XHJcbiAgICAgICAgcmVuZGVyLmNvbW1pdENvbXAodGhpcywgdGhpcy5fdGV4dHVyZSEuZ2V0R0ZYVGV4dHVyZVZpZXcoKSwgdGhpcy5fYXNzZW1ibGVyISwgdGhpcy5fdGV4dHVyZSEuZ2V0R0ZYU2FtcGxlcigpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZUNvbG9yICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZm9udCBpbnN0YW5jZW9mIEJpdG1hcEZvbnQpIHtcclxuICAgICAgICAgICBzdXBlci5fdXBkYXRlQ29sb3IoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlbmRlckRhdGEoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2NhblJlbmRlciAoKSB7XHJcbiAgICAgICAgaWYgKCFzdXBlci5fY2FuUmVuZGVyKCkgfHwgIXRoaXMuX3N0cmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmb250ID0gdGhpcy5fZm9udDtcclxuICAgICAgICBpZiAoZm9udCAmJiBmb250IGluc3RhbmNlb2YgQml0bWFwRm9udCkge1xyXG4gICAgICAgICAgICBjb25zdCBzcHJpdGVGcmFtZSA9IGZvbnQuc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgICAgIC8vIGNhbm5vdCBiZSBhY3RpdmF0ZWQgaWYgdGV4dHVyZSBub3QgbG9hZGVkIHlldFxyXG4gICAgICAgICAgICBpZiAoIXNwcml0ZUZyYW1lIHx8ICFzcHJpdGVGcmFtZS50ZXh0dXJlTG9hZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9mbHVzaEFzc2VtYmxlciAoKSB7XHJcbiAgICAgICAgY29uc3QgYXNzZW1ibGVyID0gTGFiZWxDb21wb25lbnQuQXNzZW1ibGVyIS5nZXRBc3NlbWJsZXIodGhpcyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9hc3NlbWJsZXIgIT09IGFzc2VtYmxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lSZW5kZXJEYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2VtYmxlciA9IGFzc2VtYmxlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5fcmVuZGVyRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYXNzZW1ibGVyICYmIHRoaXMuX2Fzc2VtYmxlci5jcmVhdGVEYXRhKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlckRhdGEgPSB0aGlzLl9hc3NlbWJsZXIuY3JlYXRlRGF0YSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlckRhdGEhLm1hdGVyaWFsID0gdGhpcy5fbWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9mbHVzaE1hdGVyaWFsICgpIHtcclxuICAgICAgICB0aGlzLl91cGRhdGVNYXRlcmlhbCh0aGlzLl9tYXRlcmlhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9hcHBseUZvbnRUZXh0dXJlICgpIHtcclxuICAgICAgICBjb25zdCBmb250ID0gdGhpcy5fZm9udDtcclxuICAgICAgICBpZiAoZm9udCBpbnN0YW5jZW9mIEJpdG1hcEZvbnQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3ByaXRlRnJhbWUgPSBmb250LnNwcml0ZUZyYW1lO1xyXG4gICAgICAgICAgICBjb25zdCBvbkJNRm9udFRleHR1cmVMb2FkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBvbGQgdGV4dHVyZSBpbiBtYXRlcmlhbCBoYXZlIGJlZW4gcmVsZWFzZWQgYnkgbG9hZGVyXHJcbiAgICAgICAgICAgICAgICB0aGlzLl90ZXh0dXJlID0gc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mbHVzaE1hdGVyaWFsKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fYXNzZW1ibGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXNzZW1ibGVyIS51cGRhdGVSZW5kZXJEYXRhKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBjYW5ub3QgYmUgYWN0aXZhdGVkIGlmIHRleHR1cmUgbm90IGxvYWRlZCB5ZXRcclxuICAgICAgICAgICAgaWYgKHNwcml0ZUZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ByaXRlRnJhbWUubG9hZGVkIHx8IHNwcml0ZUZyYW1lLnRleHR1cmVMb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvbkJNRm9udFRleHR1cmVMb2FkZWQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ByaXRlRnJhbWUub25jZSgnbG9hZCcsIG9uQk1Gb250VGV4dHVyZUxvYWRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jYWNoZU1vZGUgPT09IENhY2hlTW9kZS5DSEFSICYmIHN5cy5icm93c2VyVHlwZSAhPT0gc3lzLkJST1dTRVJfVFlQRV9XRUNIQVRfR0FNRV9TVUIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xldHRlclRleHR1cmUgPSB0aGlzLl9hc3NlbWJsZXIhLmdldEFzc2VtYmxlckRhdGEoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RleHR1cmUgPSB0aGlzLl9sZXR0ZXJUZXh0dXJlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl90dGZTcHJpdGVGcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHRmU3ByaXRlRnJhbWUgPSBuZXcgU3ByaXRlRnJhbWUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Fzc2VtYmxlckRhdGEgPSB0aGlzLl9hc3NlbWJsZXIhLmdldEFzc2VtYmxlckRhdGEoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlQXNzZXQodGhpcy5fYXNzZW1ibGVyRGF0YSEuY2FudmFzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleCA9IGltYWdlLl90ZXh0dXJlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHRmU3ByaXRlRnJhbWUudGV4dHVyZSA9IHRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FjaGVNb2RlICE9PSBDYWNoZU1vZGUuQ0hBUikge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5fZnJhbWUuX3JlZnJlc2hUZXh0dXJlKHRoaXMuX3RleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGV4dHVyZSA9IHRoaXMuX3R0ZlNwcml0ZUZyYW1lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9mbHVzaE1hdGVyaWFsKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hc3NlbWJsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Fzc2VtYmxlciEudXBkYXRlUmVuZGVyRGF0YSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2MuTGFiZWxDb21wb25lbnQgPSBMYWJlbENvbXBvbmVudDtcclxuIl19