(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../../core/utils/js.js", "../utils.js", "./bmfontUtils.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../../core/utils/js.js"), require("../utils.js"), require("./bmfontUtils.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.js, global.utils, global.bmfontUtils);
    global.bmfont = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, js, _utils, _bmfontUtils) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.bmfont = void 0;
  js = _interopRequireWildcard(js);

  function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

  /*
   Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.
  
   http://www.cocos.com
  
   Permission is hereby granted, free of charge, to any person obtaining a copy
   of this software and associated engine source code (the "Software"), a limited,
   worldwide, royalty-free, non-assignable, revocable and non-exclusive license
   to use Cocos Creator solely to develop games on your target platforms. You shall
   not use Cocos Creator software for developing other software or tools that's
   used for developing games. You are not granted to publish, distribute,
   sublicense, and/or sell copies of Cocos Creator.
  
   The software or tools in this License Agreement are licensed, not sold.
   Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.
  
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   THE SOFTWARE.
  */

  /**
   * @category ui-assembler
   */

  /**
   * bmfont 组装器
   * 可通过 cc.UI.bmfont 获取该组装器。
   */
  var bmfont = {
    createData: function createData(comp) {
      return comp.requestRenderData();
    },
    fillBuffers: function fillBuffers(comp, renderer) {
      var node = comp.node;
      (0, _utils.fillMeshVertices3D)(node, renderer, comp.renderData, comp.color);
    },
    appendQuad: function appendQuad(comp, spriteframe, rect, rotated, x, y, scale) {
      var renderData = comp.renderData;

      if (!renderData) {
        return;
      }

      var dataOffset = renderData.dataLength;
      renderData.dataLength += 4;
      renderData.vertexCount = renderData.dataLength;
      renderData.indiceCount = renderData.dataLength / 2 * 3;
      var datas = renderData.datas;
      var texw = spriteframe.width;
      var texh = spriteframe.height;
      var rectWidth = rect.width;
      var rectHeight = rect.height;
      var l = 0;
      var b = 0;
      var t = 0;
      var r = 0;

      if (!rotated) {
        l = rect.x / texw;
        r = (rect.x + rectWidth) / texw;
        b = (rect.y + rectHeight) / texh;
        t = rect.y / texh;
        datas[dataOffset].u = l;
        datas[dataOffset].v = b;
        datas[dataOffset + 1].u = r;
        datas[dataOffset + 1].v = b;
        datas[dataOffset + 2].u = l;
        datas[dataOffset + 2].v = t;
        datas[dataOffset + 3].u = r;
        datas[dataOffset + 3].v = t;
      } else {
        l = rect.x / texw;
        r = (rect.x + rectHeight) / texw;
        b = (rect.y + rectWidth) / texh;
        t = rect.y / texh;
        datas[dataOffset].u = l;
        datas[dataOffset].v = t;
        datas[dataOffset + 1].u = l;
        datas[dataOffset + 1].v = b;
        datas[dataOffset + 2].u = r;
        datas[dataOffset + 2].v = t;
        datas[dataOffset + 3].u = r;
        datas[dataOffset + 3].v = b;
      }

      datas[dataOffset].x = x;
      datas[dataOffset].y = y - rectHeight * scale;
      datas[dataOffset + 1].x = x + rectWidth * scale;
      datas[dataOffset + 1].y = y - rectHeight * scale;
      datas[dataOffset + 2].x = x;
      datas[dataOffset + 2].y = y;
      datas[dataOffset + 3].x = x + rectWidth * scale;
      datas[dataOffset + 3].y = y;
    }
  };
  _exports.bmfont = bmfont;
  js.addon(bmfont, _bmfontUtils.bmfontUtils);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkY6L2plbmtpbnMvd29ya3NwYWNlL0NyZWF0b3JfM0QvZWRpdG9yLTNkL3Jlc291cmNlcy8zZC9lbmdpbmUvY29jb3MvdWkvYXNzZW1ibGVyL2xhYmVsL2JtZm9udC50cyJdLCJuYW1lcyI6WyJibWZvbnQiLCJjcmVhdGVEYXRhIiwiY29tcCIsInJlcXVlc3RSZW5kZXJEYXRhIiwiZmlsbEJ1ZmZlcnMiLCJyZW5kZXJlciIsIm5vZGUiLCJyZW5kZXJEYXRhIiwiY29sb3IiLCJhcHBlbmRRdWFkIiwic3ByaXRlZnJhbWUiLCJyZWN0Iiwicm90YXRlZCIsIngiLCJ5Iiwic2NhbGUiLCJkYXRhT2Zmc2V0IiwiZGF0YUxlbmd0aCIsInZlcnRleENvdW50IiwiaW5kaWNlQ291bnQiLCJkYXRhcyIsInRleHciLCJ3aWR0aCIsInRleGgiLCJoZWlnaHQiLCJyZWN0V2lkdGgiLCJyZWN0SGVpZ2h0IiwibCIsImIiLCJ0IiwiciIsInUiLCJ2IiwianMiLCJhZGRvbiIsImJtZm9udFV0aWxzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5QkE7Ozs7QUFhQTs7OztBQUlPLE1BQU1BLE1BQWtCLEdBQUc7QUFDOUJDLElBQUFBLFVBRDhCLHNCQUNsQkMsSUFEa0IsRUFDSTtBQUM5QixhQUFPQSxJQUFJLENBQUNDLGlCQUFMLEVBQVA7QUFDSCxLQUg2QjtBQUs5QkMsSUFBQUEsV0FMOEIsdUJBS2pCRixJQUxpQixFQUtLRyxRQUxMLEVBS21CO0FBQzdDLFVBQU1DLElBQUksR0FBR0osSUFBSSxDQUFDSSxJQUFsQjtBQUNBLHFDQUFtQkEsSUFBbkIsRUFBeUJELFFBQXpCLEVBQW1DSCxJQUFJLENBQUNLLFVBQXhDLEVBQXFETCxJQUFJLENBQUNNLEtBQTFEO0FBQ0gsS0FSNkI7QUFVOUJDLElBQUFBLFVBVjhCLHNCQVVsQlAsSUFWa0IsRUFVSVEsV0FWSixFQVU4QkMsSUFWOUIsRUFVMENDLE9B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TUFBQUEsS0FBSyxDQUFDSixVQUFVLEdBQUcsQ0FBZCxDQUFMLENBQXNCSCxDQUF0QixHQUEwQkEsQ0FBQyxHQUFHWSxTQUFTLEdBQUdWLEtBQTFDO0FBQ0FLLE1BQUFBLEtBQUssQ0FBQ0osVUFBVSxHQUFHLENBQWQsQ0FBTCxDQUFzQkYsQ0FBdEIsR0FBMEJBLENBQTFCO0FBQ0g7QUF2RTZCLEdBQTNCOztBQTBFUG1CLEVBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTbEMsTUFBVCxFQUFpQm1DLHdCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cclxuXHJcbiBodHRwOi8vd3d3LmNvY29zLmNvbVxyXG5cclxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxyXG4gd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxyXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcclxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcclxuIHVzZWQgZm9yIGRldmVsb3BpbmcgZ2FtZXMuIFlvdSBhcmUgbm90IGdyYW50ZWQgdG8gcHVibGlzaCwgZGlzdHJpYnV0ZSxcclxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxyXG5cclxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXHJcbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG5cclxuLyoqXHJcbiAqIEBjYXRlZ29yeSB1aS1hc3NlbWJsZXJcclxuICovXHJcblxyXG5pbXBvcnQgeyBTcHJpdGVGcmFtZSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvYXNzZXRzL3Nwcml0ZS1mcmFtZSc7XHJcbmltcG9ydCAqIGFzIGpzIGZyb20gJy4uLy4uLy4uL2NvcmUvdXRpbHMvanMnO1xyXG5pbXBvcnQgeyBSZWN0IH0gZnJvbSAnLi4vLi4vLi4vY29yZS9tYXRoJztcclxuaW1wb3J0IHsgVUkgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3JlbmRlcmVyL3VpL3VpJztcclxuaW1wb3J0IHsgTGFiZWxDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2xhYmVsLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IElBc3NlbWJsZXIgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3JlbmRlcmVyL3VpL2Jhc2UnO1xyXG5pbXBvcnQgeyBmaWxsTWVzaFZlcnRpY2VzM0QgfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IGJtZm9udFV0aWxzIH0gZnJvbSAnLi9ibWZvbnRVdGlscyc7XHJcblxyXG4vKipcclxuICogYm1mb250IOe7hOijheWZqFxyXG4gKiDlj6/pgJrov4cgY2MuVUkuYm1mb250IOiOt+WPluivpee7hOijheWZqOOAglxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGJtZm9udDogSUFzc2VtYmxlciA9IHtcclxuICAgIGNyZWF0ZURhdGEgKGNvbXA6IExhYmVsQ29tcG9uZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbXAucmVxdWVzdFJlbmRlckRhdGEoKTtcclxuICAgIH0sXHJcblxyXG4gICAgZmlsbEJ1ZmZlcnMgKGNvbXA6IExhYmVsQ29tcG9uZW50LCByZW5kZXJlcjogVUkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gY29tcC5ub2RlO1xyXG4gICAgICAgIGZpbGxNZXNoVmVydGljZXMzRChub2RlLCByZW5kZXJlciwgY29tcC5yZW5kZXJEYXRhISwgY29tcC5jb2xvcik7XHJcbiAgICB9LFxyXG5cclxuICAgIGFwcGVuZFF1YWQgKGNvbXA6IExhYmVsQ29tcG9uZW50LCBzcHJpdGVmcmFtZTogU3ByaXRlRnJhbWUsIHJlY3Q6IFJlY3QsIHJvdGF0ZWQ6IGJvb2xlYW4sIHg6IG51bWJlciwgeTogbnVtYmVyLCBzY2FsZTogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgcmVuZGVyRGF0YSA9IGNvbXAucmVuZGVyRGF0YTtcclxuICAgICAgICBpZiAoIXJlbmRlckRhdGEpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRhT2Zmc2V0ID0gcmVuZGVyRGF0YS5kYXRhTGVuZ3RoO1xyXG5cclxuICAgICAgICByZW5kZXJEYXRhLmRhdGFMZW5ndGggKz0gNDtcclxuICAgICAgICByZW5kZXJEYXRhLnZlcnRleENvdW50ID0gcmVuZGVyRGF0YS5kYXRhTGVuZ3RoO1xyXG4gICAgICAgIHJlbmRlckRhdGEuaW5kaWNlQ291bnQgPSByZW5kZXJEYXRhLmRhdGFMZW5ndGggLyAyICogMztcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YXMgPSByZW5kZXJEYXRhLmRhdGFzO1xyXG4gICAgICAgIGNvbnN0IHRleHcgPSBzcHJpdGVmcmFtZS53aWR0aDtcclxuICAgICAgICBjb25zdCB0ZXhoID0gc3ByaXRlZnJhbWUuaGVpZ2h0O1xyXG5cclxuICAgICAgICBjb25zdCByZWN0V2lkdGggPSByZWN0LndpZHRoO1xyXG4gICAgICAgIGNvbnN0IHJlY3RIZWlnaHQgPSByZWN0LmhlaWdodDtcclxuXHJcbiAgICAgICAgbGV0IGwgPSAwO1xyXG4gICAgICAgIGxldCBiID0gMDtcclxuICAgICAgICBsZXQgdCA9IDA7XHJcbiAgICAgICAgbGV0IHIgPSAwO1xyXG4gICAgICAgIGlmICghcm90YXRlZCkge1xyXG4gICAgICAgICAgICBsID0gKHJlY3QueCkgLyB0ZXh3O1xyXG4gICAgICAgICAgICByID0gKHJlY3QueCArIHJlY3RXaWR0aCkgLyB0ZXh3O1xyXG4gICAgICAgICAgICBiID0gKHJlY3QueSArIHJlY3RIZWlnaHQpIC8gdGV4aDtcclxuICAgICAgICAgICAgdCA9IChyZWN0LnkpIC8gdGV4aDtcclxuXHJcbiAgICAgICAgICAgIGRhdGFzW2RhdGFPZmZzZXRdLnUgPSBsO1xyXG4gICAgICAgICAgICBkYXRhc1tkYXRhT2Zmc2V0XS52ID0gYjtcclxuICAgICAgICAgICAgZGF0YXNbZGF0YU9mZnNldCArIDFdLnUgPSByO1xyXG4gICAgICAgICAgICBkYXRhc1tkYXRhT2Zmc2V0ICsgMV0udiA9IGI7XHJcbiAgICAgICAgICAgIGRhdGFzW2RhdGFPZmZzZXQgKyAyXS51ID0gbDtcclxuICAgICAgICAgICAgZGF0YXNbZGF0YU9mZnNldCArIDJdLnYgPSB0O1xyXG4gICAgICAgICAgICBkYXRhc1tkYXRhT2Zmc2V0ICsgM10udSA9IHI7XHJcbiAgICAgICAgICAgIGRhdGFzW2RhdGFPZmZzZXQgKyAzXS52ID0gdDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsID0gKHJlY3QueCkgLyB0ZXh3O1xyXG4gICAgICAgICAgICByID0gKHJlY3QueCArIHJlY3RIZWlnaHQpIC8gdGV4dztcclxuICAgICAgICAgICAgYiA9IChyZWN0LnkgKyByZWN0V2lkdGgpIC8gdGV4aDtcclxuICAgICAgICAgICAgdCA9IChyZWN0LnkpIC8gdGV4aDtcclxuXHJcbiAgICAgICAgICAgIGRhdGFzW2RhdGFPZmZzZXRdLnUgPSBsO1xyXG4gICAgICAgICAgICBkYXRhc1tkYXRhT2Zmc2V0XS52ID0gdDtcclxuICAgICAgICAgICAgZGF0YXNbZGF0YU9mZnNldCArIDFdLnUgPSBsO1xyXG4gICAgICAgICAgICBkYXRhc1tkYXRhT2Zmc2V0ICsgMV0udiA9IGI7XHJcbiAgICAgICAgICAgIGRhdGFzW2RhdGFPZmZzZXQgKyAyXS51ID0gcjtcclxuICAgICAgICAgICAgZGF0YXNbZGF0YU9mZnNldCArIDJdLnYgPSB0O1xyXG4gICAgICAgICAgICBkYXRhc1tkYXRhT2Zmc2V0ICsgM10udSA9IHI7XHJcbiAgICAgICAgICAgIGRhdGFzW2RhdGFPZmZzZXQgKyAzXS52ID0gYjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGFzW2RhdGFPZmZzZXRdLnggPSB4O1xyXG4gICAgICAgIGRhdGFzW2RhdGFPZmZzZXRdLnkgPSB5IC0gcmVjdEhlaWdodCAqIHNjYWxlO1xyXG4gICAgICAgIGRhdGFzW2RhdGFPZmZzZXQgKyAxXS54ID0geCArIHJlY3RXaWR0aCAqIHNjYWxlO1xyXG4gICAgICAgIGRhdGFzW2RhdGFPZmZzZXQgKyAxXS55ID0geSAtIHJlY3RIZWlnaHQgKiBzY2FsZTtcclxuICAgICAgICBkYXRhc1tkYXRhT2Zmc2V0ICsgMl0ueCA9IHg7XHJcbiAgICAgICAgZGF0YXNbZGF0YU9mZnNldCArIDJdLnkgPSB5O1xyXG4gICAgICAgIGRhdGFzW2RhdGFPZmZzZXQgKyAzXS54ID0geCArIHJlY3RXaWR0aCAqIHNjYWxlO1xyXG4gICAgICAgIGRhdGFzW2RhdGFPZmZzZXQgKyAzXS55ID0geTtcclxuICAgIH0sXHJcbn07XHJcblxyXG5qcy5hZGRvbihibWZvbnQsIGJtZm9udFV0aWxzKTtcclxuIl19