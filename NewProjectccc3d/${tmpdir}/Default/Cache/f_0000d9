(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../core/components/index.js", "../../core/data/class-decorator.js", "../../core/math/index.js", "../../core/value-types/enum.js", "../../core/math/utils.js", "./sprite-component.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../core/components/index.js"), require("../../core/data/class-decorator.js"), require("../../core/math/index.js"), require("../../core/value-types/enum.js"), require("../../core/math/utils.js"), require("./sprite-component.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.index, global.classDecorator, global.index, global._enum, global.utils, global.spriteComponent);
    global.scrollBarComponent = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _index, _classDecorator, _index2, _enum, _utils, _spriteComponent) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.ScrollBarComponent = void 0;

  var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _class3, _temp;

  function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

  function _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  function _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }

  function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }

  var GETTINGSHORTERFACTOR = 20;
  var ZERO = new _index2.Vec3();

  var _tempPos_1 = new _index2.Vec3();

  var _tempPos_2 = new _index2.Vec3();

  var _tempSize = new _index2.Size();

  var _tempVec2 = new _index2.Vec2();

  var defaultAnchor = new _index2.Vec2();

  var _tempColor = new _index2.Color();
  /**
   * @en
   * Enum for ScrollBar direction.
   *
   * @zh
   * 滚动条方向。
   */


  var Direction;

  (function (Direction) {
    Direction[Direction["HORIZONTAL"] = 0] = "HORIZONTAL";
    Direction[Direction["VERTICAL"] = 1] = "VERTICAL";
  })(Direction || (Direction = {}));

  (0, _enum.ccenum)(Direction);
  /**
   * @en
   * The ScrollBar control allows the user to scroll an image or other view that is too large to see completely.
   *
   * @zh
   * 滚动条组件。
   */

  var ScrollBarComponent = (_dec = (0, _classDecorator.ccclass)('cc.ScrollBarComponent'), _dec2 = (0, _classDecorator.help)('i18n:cc.ScrollBarComponent'), _dec3 = (0, _classDecorator.executionOrder)(110), _dec4 = (0, _classDecorator.menu)('UI/ScrollBar'), _dec5 = (0, _classDecorator.property)({
    type: _spriteComponent.SpriteComponent,
    tooltip: '作为当前滚动区域位置显示的滑块 Sprite',
    displayOrder: 0
  }), _dec6 = (0, _classDecorator.property)({
    type: Direction,
    tooltip: 'ScrollBar 的滚动方向',
    displayOrder: 1
  }), _dec7 = (0, _classDecorator.property)({
    tooltip: '是否在没有滚动动作时自动隐藏 ScrollBar',
    displayOrder: 2
  }), _dec8 = (0, _classDecorator.property)({
    tooltip: '没有滚动动作后经过多久会自动隐藏。\n注意：只要当 “enableAutoHide” 为 true 时，才有效。',
    displayOrder: 3
  }), _dec(_class = _dec2(_class = _dec3(_class = _dec4(_class = (_class2 = (_temp = _class3 = /*#__PURE__*/function (_Component) {
    _inherits(ScrollBarComponent, _Component);

    function ScrollBarComponent() {
      var _getPrototypeOf2;

      var _this;

      _classCallCheck(this, ScrollBarComponent);

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ScrollBarComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));

      _initializerDefineProperty(_this, "_scrollView", _descriptor, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_handle", _descriptor2, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_direction", _descriptor3, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_enableAutoHide", _descriptor4, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_autoHideTime", _descriptor5, _assertThisInitialized(_this));

      _this._touching = false;
      _this._opacity = 255;
      _this._autoHideRemainingTime = 0;
      return _this;
    }

    _createClass(ScrollBarComponent, [{
      key: "hide",

      /**
       * @en
       * Hide ScrollBar.
       *
       * @zh
       * 滚动条隐藏。
       */
      value: function hide() {
        this._autoHideRemainingTime = 0;

        this._setOpacity(0);
      }
      /**
       * @en
       * Show ScrollBar.
       *
       * @zh
       * 滚动条显示。
       */

    }, {
      key: "show",
      value: function show() {
        this._autoHideRemainingTime = this._autoHideTime;

        this._setOpacity(this._opacity);
      }
      /**
       * @en
       * Reset the position of ScrollBar.
       *
       * @zh
       * 重置滚动条位置。
       *
       * @param outOfBoundary - 滚动位移。
       */

    }, {
      key: "onScroll",
      value: function onScroll(outOfBoundary) {
        if (!this._scrollView) {
          return;
        }

        var content = this._scrollView.content;

        if (!content) {
          return;
        }

        var contentSize = content.getContentSize();

        var scrollViewSize = this._scrollView.node.getContentSize();

        var barSize = this.node.getContentSize();

        if (this._conditionalDisableScrollBar(contentSize, scrollViewSize)) {
          return;
        }

        if (this._enableAutoHide) {
          this._autoHideRemainingTime = this._autoHideTime;

          this._setOpacity(this._opacity);
        }

        var contentMeasure = 0;
        var scrollViewMeasure = 0;
        var outOfBoundaryValue = 0;
        var contentPosition = 0;
        var handleNodeMeasure = 0;

        if (this._direction === Direction.HORIZONTAL) {
          contentMeasure = contentSize.width;
          scrollViewMeasure = scrollViewSize.width;
          handleNodeMeasure = barSize.width;
          outOfBoundaryValue = outOfBoundary.x;
          contentPosition = -this._convertToScrollViewSpace(content).x;
        } else if (this._direction === Direction.VERTICAL) {
          contentMeasure = contentSize.height;
          scrollViewMeasure = scrollViewSize.height;
          handleNodeMeasure = barSize.height;
          outOfBoundaryValue = outOfBoundary.y;
          contentPosition = -this._convertToScrollViewSpace(content).y;
        }

        var length = this._calculateLength(contentMeasure, scrollViewMeasure, handleNodeMeasure, outOfBoundaryValue);

        var position = this._calculatePosition(contentMeasure, scrollViewMeasure, handleNodeMeasure, contentPosition, outOfBoundaryValue, length);

        this._updateLength(length);

        this._updateHandlerPosition(position);
      }
      /**
       * @zh
       * 滚动视窗设置。
       *
       * @param scrollView - 滚动视窗。
       */

    }, {
      key: "setScrollView",
      value: function setScrollView(scrollView) {
        this._scrollView = scrollView;
      }
    }, {
      key: "onTouchBegan",
      value: function onTouchBegan() {
        if (!this._enableAutoHide) {
          return;
        }

        this._touching = true;
      }
    }, {
      key: "onTouchEnded",
      value: function onTouchEnded() {
        if (!this._enableAutoHide) {
          return;
        }

        this._touching = false;

        if (this._autoHideTime <= 0) {
          return;
        }

        if (this._scrollView) {
          var content = this._scrollView.content;

          if (content) {
            var contentSize = content.getContentSize();

            var scrollViewSize = this._scrollView.node.getContentSize();

            if (this._conditionalDisableScrollBar(contentSize, scrollViewSize)) {
              return;
            }
          }
        }

        this._autoHideRemainingTime = this._autoHideTime;
      }
    }, {
      key: "onEnable",
      value: function onEnable() {
        var renderComp = this.node.getComponent(_spriteComponent.SpriteComponent);

        if (renderComp) {
          this._opacity = renderComp.color.a;
        }
      }
    }, {
      key: "start",
      value: function start() {
        if (this._enableAutoHide) {
          this._setOpacity(0);
        }
      }
    }, {
      key: "update",
      value: function update(dt) {
        this._processAutoHide(dt);
      }
    }, {
      key: "_convertToScrollViewSpace",
      value: function _convertToScrollViewSpace(content) {
        if (!this._scrollView) {
          return ZERO;
        }

        var scrollTrans = this._scrollView.node._uiProps.uiTransformComp;
        var contentTrans = content._uiProps.uiTransformComp;

        if (!scrollTrans || !contentTrans) {
          return ZERO;
        }

        _tempPos_1.set(-content.anchorX * content.width, -content.anchorY * content.height, 0);

        contentTrans.convertToWorldSpaceAR(_tempPos_1, _tempPos_2);
        var scrollViewSpacePos = scrollTrans.convertToNodeSpaceAR(_tempPos_2);
        scrollViewSpacePos.x += scrollTrans.anchorX * scrollTrans.width;
        scrollViewSpacePos.y += scrollTrans.anchorY * scrollTrans.height;
        return scrollViewSpacePos;
      }
    }, {
      key: "_setOpacity",
      value: function _setOpacity(opacity) {
        if (this._handle) {
          var renderComp = this.node.getComponent(_spriteComponent.SpriteComponent);

          if (renderComp) {
            _tempColor.set(renderComp.color);

            _tempColor.a = opacity;
            renderComp.color = _tempColor;
          }

          renderComp = this._handle.getComponent(_spriteComponent.SpriteComponent);

          if (renderComp) {
            _tempColor.set(renderComp.color);

            _tempColor.a = opacity;
            renderComp.color = _tempColor;
          }
        }
      }
    }, {
      key: "_updateHandlerPosition",
      value: function _updateHandlerPosition(position) {
        if (this._handle) {
          var oldPosition = this._fixupHandlerPosition();

          this._handle.node.setPosition(position.x + oldPosition.x, position.y + oldPosition.y, oldPosition.z);
        }
      }
    }, {
      key: "_fixupHandlerPosition",
      value: function _fixupHandlerPosition() {
        var barSize = this.node.getContentSize();
        var barAnchor = this.node.getAnchorPoint();
        var handleSize = this.handle.node.getContentSize();
        var handleParent = this.handle.node.parent;

        _index2.Vec3.set(_tempPos_1, -barSize.width * barAnchor.x, -barSize.height * barAnchor.y, 0);

        var leftBottomWorldPosition = this.node._uiProps.uiTransformComp.convertToWorldSpaceAR(_tempPos_1, _tempPos_2);

        var fixupPosition = new _index2.Vec3();

        handleParent._uiProps.uiTransformComp.convertToNodeSpaceAR(leftBottomWorldPosition, fixupPosition);

        if (this.direction === Direction.HORIZONTAL) {
          fixupPosition = new _index2.Vec3(fixupPosition.x, fixupPosition.y + (barSize.height - handleSize.height) / 2, 0);
        } else if (this.direction === Direction.VERTICAL) {
          fixupPosition = new _index2.Vec3(fixupPosition.x + (barSize.width - handleSize.width) / 2, fixupPosition.y, 0);
        }

        this.handle.node.setPosition(fixupPosition);
        return fixupPosition;
      }
    }, {
      key: "_conditionalDisableScrollBar",
      value: function _conditionalDisableScrollBar(contentSize, scrollViewSize) {
        if (contentSize.width <= scrollViewSize.width && this._direction === Direction.HORIZONTAL) {
          return true;
        }

        if (contentSize.height <= scrollViewSize.height && this._direction === Direction.VERTICAL) {
          return true;
        }

        return false;
      }
    }, {
      key: "_calculateLength",
      value: function _calculateLength(contentMeasure, scrollViewMeasure, handleNodeMeasure, outOfBoundary) {
        var denominatorValue = contentMeasure;

        if (outOfBoundary) {
          denominatorValue += (outOfBoundary > 0 ? outOfBoundary : -outOfBoundary) * GETTINGSHORTERFACTOR;
        }

        var lengthRation = scrollViewMeasure / denominatorValue;
        return handleNodeMeasure * lengthRation;
      }
    }, {
      key: "_calculatePosition",
      value: function _calculatePosition(contentMeasure, scrollViewMeasure, handleNodeMeasure, contentPosition, outOfBoundary, actualLenth) {
        var denominatorValue = contentMeasure - scrollViewMeasure;

        if (outOfBoundary) {
          denominatorValue += Math.abs(outOfBoundary);
        }

        var positionRatio = 0;

        if (denominatorValue) {
          positionRatio = contentPosition / denominatorValue;
          positionRatio = (0, _utils.clamp01)(positionRatio);
        }

        var position = (handleNodeMeasure - actualLenth) * positionRatio;

        if (this._direction === Direction.VERTICAL) {
          return new _index2.Vec3(0, position, 0);
        } else {
          return new _index2.Vec3(position, 0, 0);
        }
      }
    }, {
      key: "_updateLength",
      value: function _updateLength(length) {
        if (this._handle) {
          var handleNode = this._handle.node;
          var handleNodeSize = handleNode.getContentSize();
          var anchor = handleNode.getAnchorPoint();

          if (anchor.x !== defaultAnchor.x || anchor.y !== defaultAnchor.y) {
            handleNode.setAnchorPoint(defaultAnchor);
          }

          if (this._direction === Direction.HORIZONTAL) {
            handleNode.setContentSize(length, handleNodeSize.height);
          } else {
            handleNode.setContentSize(handleNodeSize.width, length);
          }
        }
      }
    }, {
      key: "_processAutoHide",
      value: function _processAutoHide(deltaTime) {
        if (!this._enableAutoHide || this._autoHideRemainingTime <= 0) {
          return;
        } else if (this._touching) {
          return;
        }

        this._autoHideRemainingTime -= deltaTime;

        if (this._autoHideRemainingTime <= this._autoHideTime) {
          this._autoHideRemainingTime = Math.max(0, this._autoHideRemainingTime);
          var opacity = this._opacity * (this._autoHideRemainingTime / this._autoHideTime);

          this._setOpacity(opacity);
        }
      }
    }, {
      key: "handle",

      /**
       * @en
       * The "handle" part of the ScrollBar.
       *
       * @zh
       * 作为当前滚动区域位置显示的滑块 Sprite。
       */
      get: function get() {
        return this._handle;
      },
      set: function set(value) {
        if (this._handle === value) {
          return;
        }

        this._handle = value;
        this.onScroll(new _index2.Vec3(0, 0, 0));
      }
      /**
       * @en
       * The direction of scrolling.
       *
       * @zh
       * ScrollBar 的滚动方向。
       */

    }, {
      key: "direction",
      get: function get() {
        return this._direction;
      },
      set: function set(value) {
        if (this._direction === value) {
          return;
        }

        this._direction = value;
        this.onScroll(new _index2.Vec3());
      }
      /**
       * @en
       * Whether enable auto hide or not.
       *
       * @zh
       * 是否在没有滚动动作时自动隐藏 ScrollBar。
       */

    }, {
      key: "enableAutoHide",
      get: function get() {
        return this._enableAutoHide;
      },
      set: function set(value) {
        if (this._enableAutoHide === value) {
          return;
        }

        this._enableAutoHide = value;

        if (this._enableAutoHide) {
          this._setOpacity(0);
        }
      }
      /**
       * @en
       * The time to hide ScrollBar when scroll finished.
       * Note: This value is only useful when enableAutoHide is true.
       *
       * @zh
       * 没有滚动动作后经过多久会自动隐藏。<br/>
       * 注意：只要当 “enableAutoHide” 为 true 时，才有效。
       */

    }, {
      key: "autoHideTime",
      get: function get() {
        return this._autoHideTime;
      },
      set: function set(value) {
        if (this._autoHideTime === value) {
          return;
        }

        this._autoHideTime = value;
      }
    }]);

    return ScrollBarComponent;
  }(_index.Component), _class3.Direction = Direction, _temp), (_applyDecoratedDescriptor(_class2.prototype, "handle", [_dec5], Object.getOwnPropertyDescriptor(_class2.prototype, "handle"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "direction", [_dec6], Object.getOwnPropertyDescriptor(_class2.prototype, "direction"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "enableAutoHide", [_dec7], Object.getOwnPropertyDescriptor(_class2.prototype, "enableAutoHide"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "autoHideTime", [_dec8], Object.getOwnPropertyDescriptor(_class2.prototype, "autoHideTime"), _class2.prototype), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "_scrollView", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return null;
    }
  }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "_handle", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return null;
    }
  }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "_direction", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return Direction.HORIZONTAL;
    }
  }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "_enableAutoHide", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return false;
    }
  }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "_autoHideTime", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 1.0;
    }
  })), _class2)) || _class) || _class) || _class) || _class);
  _exports.ScrollBarComponent = ScrollBarComponent;
  cc.ScrollBarComponent = ScrollBarComponent;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkY6L2plbmtpbnMvd29ya3NwYWNlL0NyZWF0b3JfM0QvZWRpdG9yLTNkL3Jlc291cmNlcy8zZC9lbmdpbmUvY29jb3MvdWkvY29tcG9uZW50cy9zY3JvbGwtYmFyLWNvbXBvbmVudC50cyJdLCJuYW1lcyI6WyJHRVRUSU5HU0hPUlRFUkZBQ1RPUiIsIlpFUk8iLCJWZWMzIiwiX3RlbXBQb3NfMSIsIl90ZW1wUG9zXzIiLCJfdGVtcFNpemUiLCJTaXplIiwiX3RlbXBWZWMyIiwiVmVjMiIsImRlZmF1bHRBbmNob3IiLCJfdGVtcENvbG9yIiwiQ29sb3IiLCJEaXJlY3Rpb24iLCJTY3JvbGxCYXJDb21wb25lbnQiLCJ0eXBlIiwiU3ByaXRlQ29tcG9uZW50IiwidG9vbHRpcCIsImRpc3BsYXlPcmRlciIsIl90b3VjaGluZyIsIl9vcGFjaXR5IiwiX2F1dG9IaWRlUmVtYWluaW5nVGltZSIsIl9zZXRPcGFjaXR5IiwiX2F1dG9IaWRlVGltZSIsIm91dE9mQm91bmRhcnkiLCJfc2Nyb2xsVmlldyIsImNvbnRlbnQiLCJjb250ZW50U2l6ZSIsImdldENvbnRlbnRTaXplIiwic2Nyb2xsVmlld1NpemUiLCJub2RlIiwiYmFyU2l6ZSIsIl9jb25kaXRpb25hbERpc2FibGVTY3JvbGxCYXIiLCJfZW5hYmxlQXV0b0hpZGUiLCJjb250ZW50TWVhc3VyZSIsInNjcm9sbFZpZXdNZWFzdXJlIiwib3V0T2ZCb3VuZGFyeVZhbHVlIiwiY29udGVudFBvc2l0aW9uIiwiaGFuZGxlTm9kZU1lYXN1cmUiLCJfZGlyZWN0aW9uIiwiSE9SSVpPTlRBTCIsIndpZHRoIiwieCIsIl9jb252ZXJ0VG9TY3JvbGxWaWV3U3BhY2UiLCJWRVJUSUNBTCIsImhlaWdodCIsInkiLCJsZW5ndGgiLCJfY2FsY3VsYXRlTGVuZ3RoIiwicG9zaXRpb24iLCJfY2FsY3VsYXRlUG9zaXRpb24iLCJfdXBkYXRlTGVuZ3RoIiwiX3VwZGF0ZUhhbmRsZXJQb3NpdGlvbiIsInNjcm9sbFZpZXciLCJyZW5kZXJDb21wIiwiZ2V0Q29tcG9uZW50IiwiY29sb3IiLCJhIiwiZHQiLCJfcHJvY2Vzc0F1dG9IaWRlIiwic2Nyb2xsVHJhbnMiLCJfdWlQcm9wcyIsInVpVHJhbnNmb3JtQ29tcCIsImNvbnRlbnRUcmFucyIsInNldCIsImFuY2hvclgiLCJhbmNob3JZIiwiY29udmVydFRvV29ybGRTcGFjZUFSIiwic2Nyb2xsVmlld1NwYWNlUG9zIiwiY29udmVydFRvTm9kZVNwYWNlQVIiLCJvcGFjaXR5IiwiX2hhbmRsZSIsIm9sZFBvc2l0aW9uIiwiX2ZpeHVwSGFuZGxlclBvc2l0aW9uIiwic2V0UG9zaXRpb24iLCJ6IiwiYmFyQW5jaG9yIiwiZ2V0QW5jaG9yUG9pbnQiLCJoYW5kbGVTaXplIiwiaGFuZGxlIiwiaGFuZGxlUGFyZW50IiwicGFyZW50IiwibGVmdEJvdHRvbVdvcmxkUG9zaXRpb24iLCJmaXh1cFBvc2l0aW9uIiwiZGlyZWN0aW9uIiwiZGVub21pbmF0b3JWYWx1ZSIsImxlbmd0aFJhdGlvbiIsImFjdHVhbExlbnRoIiwiTWF0aCIsImFicyIsInBvc2l0aW9uUmF0aW8iLCJoYW5kbGVOb2RlIiwiaGFuZGxlTm9kZVNpemUiLCJhbmNob3IiLCJzZXRBbmNob3JQb2ludCIsInNldENvbnRlbnRTaXplIiwiZGVsdGFUaW1lIiwibWF4IiwidmFsdWUiLCJvblNjcm9sbCIsIkNvbXBvbmVudCIsInByb3BlcnR5IiwiY2MiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1Q0EsTUFBTUEsb0JBQW9CLEdBQUcsRUFBN0I7QUFDQSxNQUFNQyxJQUFJLEdBQUcsSUFBSUMsWUFBSixFQUFiOztBQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJRCxZQUFKLEVBQW5COztBQUNBLE1BQU1FLFVBQVUsR0FBRyxJQUFJRixZQUFKLEVBQW5COztBQUNBLE1BQU1HLFNBQVMsR0FBRyxJQUFJQyxZQUFKLEVBQWxCOztBQUNBLE1BQU1DLFNBQVMsR0FBRyxJQUFJ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QUN6QndGLHdCOzs7OzthQUNtRCxJOzs4RUFDbkRBLHdCOzs7OzthQUMyQyxJOztpRkFDM0NBLHdCOzs7OzthQUNzQnhGLFNBQVMsQ0FBQzJCLFU7O3NGQUNoQzZELHdCOzs7OzthQUMyQixLOztvRkFDM0JBLHdCOzs7OzthQUN5QixHOzs7O0FBNlM5QkMsRUFBQUEsRUFBRSxDQUFDeEYsa0JBQUgsR0FBd0JBLGtCQUF4QiIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNiBDaHVrb25nIFRlY2hub2xvZ2llcyBJbmMuXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cclxuXHJcbiBodHRwOi8vd3d3LmNvY29zLmNvbVxyXG5cclxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxyXG4gIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlLCBub24tYXNzaWduYWJsZSwgcmV2b2NhYmxlIGFuZCBub24tZXhjbHVzaXZlIGxpY2Vuc2VcclxuIHRvIHVzZSBDb2NvcyBDcmVhdG9yIHNvbGVseSB0byBkZXZlbG9wIGdhbWVzIG9uIHlvdXIgdGFyZ2V0IHBsYXRmb3Jtcy4gWW91IHNoYWxsXHJcbiAgbm90IHVzZSBDb2NvcyBDcmVhdG9yIHNvZnR3YXJlIGZvciBkZXZlbG9waW5nIG90aGVyIHNvZnR3YXJlIG9yIHRvb2xzIHRoYXQnc1xyXG4gIHVzZWQgZm9yIGRldmVsb3BpbmcgZ2FtZXMuIFlvdSBhcmUgbm90IGdyYW50ZWQgdG8gcHVibGlzaCwgZGlzdHJpYnV0ZSxcclxuICBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgQ29jb3MgQ3JlYXRvci5cclxuXHJcbiBUaGUgc29mdHdhcmUgb3IgdG9vbHMgaW4gdGhpcyBMaWNlbnNlIEFncmVlbWVudCBhcmUgbGljZW5zZWQsIG5vdCBzb2xkLlxyXG4gWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuIHJlc2VydmVzIGFsbCByaWdodHMgbm90IGV4cHJlc3NseSBncmFudGVkIHRvIHlvdS5cclxuXHJcbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cclxuIFRIRSBTT0ZUV0FSRS5cclxuKi9cclxuXHJcbi8qKlxyXG4gKiBAY2F0ZWdvcnkgdWlcclxuICovXHJcblxyXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL2NvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBjY2NsYXNzLCBoZWxwLCBleGVjdXRpb25PcmRlciwgbWVudSwgcHJvcGVydHkgfSBmcm9tICcuLi8uLi9jb3JlL2RhdGEvY2xhc3MtZGVjb3JhdG9yJztcclxuaW1wb3J0IHsgQ29sb3IsIFNpemUsIFZlYzIsIFZlYzMsIHNpemUgfSBmcm9tICcuLi8uLi9jb3JlL21hdGgnO1xyXG5pbXBvcnQgeyBjY2VudW0gfSBmcm9tICcuLi8uLi9jb3JlL3ZhbHVlLXR5cGVzL2VudW0nO1xyXG5pbXBvcnQgeyBjbGFtcDAxIH0gZnJvbSAnLi4vLi4vY29yZS9tYXRoL3V0aWxzJztcclxuaW1wb3J0IHsgU2Nyb2xsVmlld0NvbXBvbmVudCB9IGZyb20gJy4vc2Nyb2xsLXZpZXctY29tcG9uZW50JztcclxuaW1wb3J0IHsgU3ByaXRlQ29tcG9uZW50IH0gZnJvbSAnLi9zcHJpdGUtY29tcG9uZW50JztcclxuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uLy4uL2NvcmUnO1xyXG5cclxuY29uc3QgR0VUVElOR1NIT1JURVJGQUNUT1IgPSAyMDtcclxuY29uc3QgWkVSTyA9IG5ldyBWZWMzKCk7XHJcbmNvbnN0IF90ZW1wUG9zXzEgPSBuZXcgVmVjMygpO1xyXG5jb25zdCBfdGVtcFBvc18yID0gbmV3IFZlYzMoKTtcclxuY29uc3QgX3RlbXBTaXplID0gbmV3IFNpemUoKTtcclxuY29uc3QgX3RlbXBWZWMyID0gbmV3IFZlYzIoKTtcclxuY29uc3QgZGVmYXVsdEFuY2hvciA9IG5ldyBWZWMyKCk7XHJcbmNvbnN0IF90ZW1wQ29sb3IgPSBuZXcgQ29sb3IoKTtcclxuXHJcbi8qKlxyXG4gKiBAZW5cclxuICogRW51bSBmb3IgU2Nyb2xsQmFyIGRpcmVjdGlvbi5cclxuICpcclxuICogQHpoXHJcbiAqIOa7muWKqOadoeaWueWQkeOAglxyXG4gKi9cclxuZW51bSBEaXJlY3Rpb24ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIEhvcml6b250YWwgc2Nyb2xsLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5qiq5ZCR5rua5Yqo44CCXHJcbiAgICAgKi9cclxuICAgIEhPUklaT05UQUwgPSAwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBWZXJ0aWNhbCBzY3JvbGwuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDnurXlkJHmu5rliqjjgIJcclxuICAgICAqL1xyXG4gICAgVkVSVElDQUwgPSAxLFxyXG59XHJcblxyXG5jY2VudW0oRGlyZWN0aW9uKTtcclxuXHJcbi8qKlxyXG4gKiBAZW5cclxuICogVGhlIFNjcm9sbEJhciBjb250cm9sIGFsbG93cyB0aGUgdXNlciB0byBzY3JvbGwgYW4gaW1hZ2Ugb3Igb3RoZXIgdmlldyB0aGF0IGlzIHRvbyBsYXJnZSB0byBzZWUgY29tcGxldGVseS5cclxuICpcclxuICogQHpoXHJcbiAqIOa7muWKqOadoee7hOS7tuOAglxyXG4gKi9cclxuQGNjY2xhc3MoJ2NjLlNjcm9sbEJhckNvbXBvbmVudCcpXHJcbkBoZWxwKCdpMThuOmNjLlNjcm9sbEJhckNvbXBvbmVudCcpXHJcbkBleGVjdXRpb25PcmRlcigxMTApXHJcbkBtZW51KCdVSS9TY3JvbGxCYXInKVxyXG5leHBvcnQgY2xhc3MgU2Nyb2xsQmFyQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIFwiaGFuZGxlXCIgcGFydCBvZiB0aGUgU2Nyb2xsQmFyLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5L2c5Li65b2T5YmN5rua5Yqo5Yy65Z+f5L2N572u5pi+56S655qE5ruR5Z2XIFNwcml0ZeOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHR5cGU6IFNwcml0ZUNvbXBvbmVudCxcclxuICAgICAgICB0b29sdGlwOiAn5L2c5Li65b2T5YmN5rua5Yqo5Yy65Z+f5L2N572u5pi+56S655qE5ruR5Z2XIFNwcml0ZScsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAwLFxyXG4gICAgfSlcclxuICAgIGdldCBoYW5kbGUgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGhhbmRsZSAodmFsdWU6IFNwcml0ZUNvbXBvbmVudCB8IG51bGwpIHtcclxuICAgICAgICBpZiAodGhpcy5faGFuZGxlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2hhbmRsZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMub25TY3JvbGwobmV3IFZlYzMoMCwgMCwgMCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgZGlyZWN0aW9uIG9mIHNjcm9sbGluZy5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIFNjcm9sbEJhciDnmoTmu5rliqjmlrnlkJHjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBEaXJlY3Rpb24sXHJcbiAgICAgICAgdG9vbHRpcDogJ1Njcm9sbEJhciDnmoTmu5rliqjmlrnlkJEnLFxyXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMSxcclxuICAgIH0pXHJcbiAgICBnZXQgZGlyZWN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBkaXJlY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5vblNjcm9sbChuZXcgVmVjMygpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogV2hldGhlciBlbmFibGUgYXV0byBoaWRlIG9yIG5vdC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOaYr+WQpuWcqOayoeaciea7muWKqOWKqOS9nOaXtuiHquWKqOmakOiXjyBTY3JvbGxCYXLjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0b29sdGlwOiAn5piv5ZCm5Zyo5rKh5pyJ5rua5Yqo5Yqo5L2c5pe26Ieq5Yqo6ZqQ6JePIFNjcm9sbEJhcicsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAyLFxyXG4gICAgfSlcclxuICAgIGdldCBlbmFibGVBdXRvSGlkZSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZUF1dG9IaWRlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBlbmFibGVBdXRvSGlkZSAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fZW5hYmxlQXV0b0hpZGUgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2VuYWJsZUF1dG9IaWRlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VuYWJsZUF1dG9IaWRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldE9wYWNpdHkoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgdGltZSB0byBoaWRlIFNjcm9sbEJhciB3aGVuIHNjcm9sbCBmaW5pc2hlZC5cclxuICAgICAqIE5vdGU6IFRoaXMgdmFsdWUgaXMgb25seSB1c2VmdWwgd2hlbiBlbmFibGVBdXRvSGlkZSBpcyB0cnVlLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5rKh5pyJ5rua5Yqo5Yqo5L2c5ZCO57uP6L+H5aSa5LmF5Lya6Ieq5Yqo6ZqQ6JeP44CCPGJyLz5cclxuICAgICAqIOazqOaEj++8muWPquimgeW9kyDigJxlbmFibGVBdXRvSGlkZeKAnSDkuLogdHJ1ZSDml7bvvIzmiY3mnInmlYjjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0b29sdGlwOiAn5rKh5pyJ5rua5Yqo5Yqo5L2c5ZCO57uP6L+H5aSa5LmF5Lya6Ieq5Yqo6ZqQ6JeP44CCXFxu5rOo5oSP77ya5Y+q6KaB5b2TIOKAnGVuYWJsZUF1dG9IaWRl4oCdIOS4uiB0cnVlIOaXtu+8jOaJjeacieaViOOAgicsXHJcbiAgICAgICAgZGlzcGxheU9yZGVyOiAzLFxyXG4gICAgfSlcclxuICAgIGdldCBhdXRvSGlkZVRpbWUgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvSGlkZVRpbWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGF1dG9IaWRlVGltZSAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fYXV0b0hpZGVUaW1lID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9hdXRvSGlkZVRpbWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIERpcmVjdGlvbiA9IERpcmVjdGlvbjtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9zY3JvbGxWaWV3OiBTY3JvbGxWaWV3Q29tcG9uZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfaGFuZGxlOiBTcHJpdGVDb21wb25lbnQgfCBudWxsID0gbnVsbDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9kaXJlY3Rpb24gPSBEaXJlY3Rpb24uSE9SSVpPTlRBTDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9lbmFibGVBdXRvSGlkZSA9IGZhbHNlO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX2F1dG9IaWRlVGltZSA9IDEuMDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgX3RvdWNoaW5nID0gZmFsc2U7XHJcbiAgICBwcm90ZWN0ZWQgX29wYWNpdHkgPSAyNTU7XHJcbiAgICBwcm90ZWN0ZWQgX2F1dG9IaWRlUmVtYWluaW5nVGltZSA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIEhpZGUgU2Nyb2xsQmFyLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5rua5Yqo5p2h6ZqQ6JeP44CCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoaWRlICgpIHtcclxuICAgICAgICB0aGlzLl9hdXRvSGlkZVJlbWFpbmluZ1RpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuX3NldE9wYWNpdHkoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFNob3cgU2Nyb2xsQmFyLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5rua5Yqo5p2h5pi+56S644CCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzaG93ICgpIHtcclxuICAgICAgICB0aGlzLl9hdXRvSGlkZVJlbWFpbmluZ1RpbWUgPSB0aGlzLl9hdXRvSGlkZVRpbWU7XHJcbiAgICAgICAgdGhpcy5fc2V0T3BhY2l0eSh0aGlzLl9vcGFjaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogUmVzZXQgdGhlIHBvc2l0aW9uIG9mIFNjcm9sbEJhci5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOmHjee9rua7muWKqOadoeS9jee9ruOAglxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvdXRPZkJvdW5kYXJ5IC0g5rua5Yqo5L2N56e744CCXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvblNjcm9sbCAob3V0T2ZCb3VuZGFyeTogVmVjMykge1xyXG4gICAgICAgIGlmICghdGhpcy5fc2Nyb2xsVmlldykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5fc2Nyb2xsVmlldy5jb250ZW50O1xyXG4gICAgICAgIGlmICghY29udGVudCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb250ZW50U2l6ZSA9IGNvbnRlbnQuZ2V0Q29udGVudFNpemUoKTtcclxuICAgICAgICBjb25zdCBzY3JvbGxWaWV3U2l6ZSA9IHRoaXMuX3Njcm9sbFZpZXcubm9kZS5nZXRDb250ZW50U2l6ZSgpO1xyXG4gICAgICAgIGNvbnN0IGJhclNpemUgPSB0aGlzLm5vZGUuZ2V0Q29udGVudFNpemUoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbmRpdGlvbmFsRGlzYWJsZVNjcm9sbEJhcihjb250ZW50U2l6ZSwgc2Nyb2xsVmlld1NpemUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9lbmFibGVBdXRvSGlkZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9hdXRvSGlkZVJlbWFpbmluZ1RpbWUgPSB0aGlzLl9hdXRvSGlkZVRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldE9wYWNpdHkodGhpcy5fb3BhY2l0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY29udGVudE1lYXN1cmUgPSAwO1xyXG4gICAgICAgIGxldCBzY3JvbGxWaWV3TWVhc3VyZSA9IDA7XHJcbiAgICAgICAgbGV0IG91dE9mQm91bmRhcnlWYWx1ZSA9IDA7XHJcbiAgICAgICAgbGV0IGNvbnRlbnRQb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgbGV0IGhhbmRsZU5vZGVNZWFzdXJlID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2RpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkhPUklaT05UQUwpIHtcclxuICAgICAgICAgICAgY29udGVudE1lYXN1cmUgPSBjb250ZW50U2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgc2Nyb2xsVmlld01lYXN1cmUgPSBzY3JvbGxWaWV3U2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgaGFuZGxlTm9kZU1lYXN1cmUgPSBiYXJTaXplLndpZHRoO1xyXG4gICAgICAgICAgICBvdXRPZkJvdW5kYXJ5VmFsdWUgPSBvdXRPZkJvdW5kYXJ5Lng7XHJcblxyXG4gICAgICAgICAgICBjb250ZW50UG9zaXRpb24gPSAtdGhpcy5fY29udmVydFRvU2Nyb2xsVmlld1NwYWNlKGNvbnRlbnQpLng7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5WRVJUSUNBTCkge1xyXG4gICAgICAgICAgICBjb250ZW50TWVhc3VyZSA9IGNvbnRlbnRTaXplLmhlaWdodDtcclxuICAgICAgICAgICAgc2Nyb2xsVmlld01lYXN1cmUgPSBzY3JvbGxWaWV3U2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGhhbmRsZU5vZGVNZWFzdXJlID0gYmFyU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIG91dE9mQm91bmRhcnlWYWx1ZSA9IG91dE9mQm91bmRhcnkueTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRlbnRQb3NpdGlvbiA9IC10aGlzLl9jb252ZXJ0VG9TY3JvbGxWaWV3U3BhY2UoY29udGVudCkueTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX2NhbGN1bGF0ZUxlbmd0aChjb250ZW50TWVhc3VyZSwgc2Nyb2xsVmlld01lYXN1cmUsIGhhbmRsZU5vZGVNZWFzdXJlLCBvdXRPZkJvdW5kYXJ5VmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5fY2FsY3VsYXRlUG9zaXRpb24oY29udGVudE1lYXN1cmUsIHNjcm9sbFZpZXdNZWFzdXJlLCBoYW5kbGVOb2RlTWVhc3VyZSwgY29udGVudFBvc2l0aW9uLCBvdXRPZkJvdW5kYXJ5VmFsdWUsIGxlbmd0aCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUxlbmd0aChsZW5ndGgpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUhhbmRsZXJQb3NpdGlvbihwb3NpdGlvbik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDmu5rliqjop4bnqpforr7nva7jgIJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2Nyb2xsVmlldyAtIOa7muWKqOinhueql+OAglxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0U2Nyb2xsVmlldyAoc2Nyb2xsVmlldzogU2Nyb2xsVmlld0NvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMuX3Njcm9sbFZpZXcgPSBzY3JvbGxWaWV3O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvblRvdWNoQmVnYW4gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZW5hYmxlQXV0b0hpZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl90b3VjaGluZyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uVG91Y2hFbmRlZCAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9lbmFibGVBdXRvSGlkZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl90b3VjaGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYXV0b0hpZGVUaW1lIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3Njcm9sbFZpZXcpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuX3Njcm9sbFZpZXcuY29udGVudDtcclxuICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRTaXplID0gY29udGVudC5nZXRDb250ZW50U2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsVmlld1NpemUgPSB0aGlzLl9zY3JvbGxWaWV3Lm5vZGUuZ2V0Q29udGVudFNpemUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY29uZGl0aW9uYWxEaXNhYmxlU2Nyb2xsQmFyKGNvbnRlbnRTaXplLCBzY3JvbGxWaWV3U2l6ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2F1dG9IaWRlUmVtYWluaW5nVGltZSA9IHRoaXMuX2F1dG9IaWRlVGltZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25FbmFibGUgKCkge1xyXG4gICAgICAgIGNvbnN0IHJlbmRlckNvbXAgPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KFNwcml0ZUNvbXBvbmVudCk7XHJcbiAgICAgICAgaWYgKHJlbmRlckNvbXApIHtcclxuICAgICAgICAgICAgdGhpcy5fb3BhY2l0eSA9IHJlbmRlckNvbXAuY29sb3IuYTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXJ0ICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZW5hYmxlQXV0b0hpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0T3BhY2l0eSgwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHVwZGF0ZSAoZHQpIHtcclxuICAgICAgICB0aGlzLl9wcm9jZXNzQXV0b0hpZGUoZHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfY29udmVydFRvU2Nyb2xsVmlld1NwYWNlIChjb250ZW50OiBOb2RlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9zY3JvbGxWaWV3KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBaRVJPO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2Nyb2xsVHJhbnMgPSB0aGlzLl9zY3JvbGxWaWV3Lm5vZGUuX3VpUHJvcHMudWlUcmFuc2Zvcm1Db21wO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRUcmFucyA9IGNvbnRlbnQuX3VpUHJvcHMudWlUcmFuc2Zvcm1Db21wO1xyXG4gICAgICAgIGlmICghc2Nyb2xsVHJhbnMgfHwgIWNvbnRlbnRUcmFucykge1xyXG4gICAgICAgICAgICByZXR1cm4gWkVSTztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF90ZW1wUG9zXzEuc2V0KC1jb250ZW50LmFuY2hvclggKiBjb250ZW50LndpZHRoLCAtY29udGVudC5hbmNob3JZICogY29udGVudC5oZWlnaHQsIDApO1xyXG4gICAgICAgIGNvbnRlbnRUcmFucy5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoX3RlbXBQb3NfMSwgX3RlbXBQb3NfMik7XHJcbiAgICAgICAgY29uc3Qgc2Nyb2xsVmlld1NwYWNlUG9zID0gc2Nyb2xsVHJhbnMuY29udmVydFRvTm9kZVNwYWNlQVIoX3RlbXBQb3NfMik7XHJcbiAgICAgICAgc2Nyb2xsVmlld1NwYWNlUG9zLnggKz0gc2Nyb2xsVHJhbnMuYW5jaG9yWCAqIHNjcm9sbFRyYW5zLndpZHRoO1xyXG4gICAgICAgIHNjcm9sbFZpZXdTcGFjZVBvcy55ICs9IHNjcm9sbFRyYW5zLmFuY2hvclkgKiBzY3JvbGxUcmFucy5oZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIHNjcm9sbFZpZXdTcGFjZVBvcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3NldE9wYWNpdHkgKG9wYWNpdHk6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGUpIHtcclxuICAgICAgICAgICAgbGV0IHJlbmRlckNvbXAgPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KFNwcml0ZUNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIGlmIChyZW5kZXJDb21wKSB7XHJcbiAgICAgICAgICAgICAgICBfdGVtcENvbG9yLnNldChyZW5kZXJDb21wLmNvbG9yKTtcclxuICAgICAgICAgICAgICAgIF90ZW1wQ29sb3IuYSA9IG9wYWNpdHk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJDb21wLmNvbG9yID0gX3RlbXBDb2xvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVuZGVyQ29tcCA9IHRoaXMuX2hhbmRsZS5nZXRDb21wb25lbnQoU3ByaXRlQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgaWYgKHJlbmRlckNvbXApIHtcclxuICAgICAgICAgICAgICAgIF90ZW1wQ29sb3Iuc2V0KHJlbmRlckNvbXAuY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgX3RlbXBDb2xvci5hID0gb3BhY2l0eTtcclxuICAgICAgICAgICAgICAgIHJlbmRlckNvbXAuY29sb3IgPSBfdGVtcENvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfdXBkYXRlSGFuZGxlclBvc2l0aW9uIChwb3NpdGlvbjogVmVjMykge1xyXG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGUpIHtcclxuICAgICAgICAgICAgY29uc3Qgb2xkUG9zaXRpb24gPSB0aGlzLl9maXh1cEhhbmRsZXJQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlLm5vZGUuc2V0UG9zaXRpb24ocG9zaXRpb24ueCArIG9sZFBvc2l0aW9uLngsIHBvc2l0aW9uLnkgKyBvbGRQb3NpdGlvbi55LCBvbGRQb3NpdGlvbi56KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9maXh1cEhhbmRsZXJQb3NpdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgYmFyU2l6ZSA9IHRoaXMubm9kZS5nZXRDb250ZW50U2l6ZSgpO1xyXG4gICAgICAgIGNvbnN0IGJhckFuY2hvciA9IHRoaXMubm9kZS5nZXRBbmNob3JQb2ludCgpO1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZVNpemUgPSB0aGlzLmhhbmRsZSEubm9kZS5nZXRDb250ZW50U2l6ZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBoYW5kbGVQYXJlbnQgPSB0aGlzLmhhbmRsZSEubm9kZS5wYXJlbnQhO1xyXG5cclxuICAgICAgICBWZWMzLnNldChfdGVtcFBvc18xLCAtYmFyU2l6ZS53aWR0aCAqIGJhckFuY2hvci54LCAtYmFyU2l6ZS5oZWlnaHQgKiBiYXJBbmNob3IueSwgMCk7XHJcbiAgICAgICAgY29uc3QgbGVmdEJvdHRvbVdvcmxkUG9zaXRpb24gPSB0aGlzLm5vZGUhLl91aVByb3BzLnVpVHJhbnNmb3JtQ29tcCEuY29udmVydFRvV29ybGRTcGFjZUFSKF90ZW1wUG9zXzEsIF90ZW1wUG9zXzIpO1xyXG4gICAgICAgIGxldCBmaXh1cFBvc2l0aW9uID0gbmV3IFZlYzMoKTtcclxuICAgICAgICBoYW5kbGVQYXJlbnQuX3VpUHJvcHMudWlUcmFuc2Zvcm1Db21wIS5jb252ZXJ0VG9Ob2RlU3BhY2VBUihsZWZ0Qm90dG9tV29ybGRQb3NpdGlvbiwgZml4dXBQb3NpdGlvbik7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkhPUklaT05UQUwpIHtcclxuICAgICAgICAgICAgZml4dXBQb3NpdGlvbiA9IG5ldyBWZWMzKGZpeHVwUG9zaXRpb24ueCwgZml4dXBQb3NpdGlvbi55ICsgKGJhclNpemUuaGVpZ2h0IC0gaGFuZGxlU2l6ZS5oZWlnaHQpIC8gMiwgMCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlZFUlRJQ0FMKSB7XHJcbiAgICAgICAgICAgIGZpeHVwUG9zaXRpb24gPSBuZXcgVmVjMyhmaXh1cFBvc2l0aW9uLnggKyAoYmFyU2l6ZS53aWR0aCAtIGhhbmRsZVNpemUud2lkdGgpIC8gMiwgZml4dXBQb3NpdGlvbi55LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlIS5ub2RlLnNldFBvc2l0aW9uKGZpeHVwUG9zaXRpb24pO1xyXG5cclxuICAgICAgICByZXR1cm4gZml4dXBQb3NpdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2NvbmRpdGlvbmFsRGlzYWJsZVNjcm9sbEJhciAoY29udGVudFNpemU6IFNpemUsIHNjcm9sbFZpZXdTaXplOiBTaXplKSB7XHJcbiAgICAgICAgaWYgKGNvbnRlbnRTaXplLndpZHRoIDw9IHNjcm9sbFZpZXdTaXplLndpZHRoICYmIHRoaXMuX2RpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkhPUklaT05UQUwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudFNpemUuaGVpZ2h0IDw9IHNjcm9sbFZpZXdTaXplLmhlaWdodCAmJiB0aGlzLl9kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5WRVJUSUNBTCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfY2FsY3VsYXRlTGVuZ3RoIChjb250ZW50TWVhc3VyZTogbnVtYmVyLCBzY3JvbGxWaWV3TWVhc3VyZTogbnVtYmVyLCBoYW5kbGVOb2RlTWVhc3VyZTogbnVtYmVyLCBvdXRPZkJvdW5kYXJ5OiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgZGVub21pbmF0b3JWYWx1ZSA9IGNvbnRlbnRNZWFzdXJlO1xyXG4gICAgICAgIGlmIChvdXRPZkJvdW5kYXJ5KSB7XHJcbiAgICAgICAgICAgIGRlbm9taW5hdG9yVmFsdWUgKz0gKG91dE9mQm91bmRhcnkgPiAwID8gb3V0T2ZCb3VuZGFyeSA6IC1vdXRPZkJvdW5kYXJ5KSAqIEdFVFRJTkdTSE9SVEVSRkFDVE9SO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGVuZ3RoUmF0aW9uID0gc2Nyb2xsVmlld01lYXN1cmUgLyBkZW5vbWluYXRvclZhbHVlO1xyXG4gICAgICAgIHJldHVybiBoYW5kbGVOb2RlTWVhc3VyZSAqIGxlbmd0aFJhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2NhbGN1bGF0ZVBvc2l0aW9uIChcclxuICAgICAgICBjb250ZW50TWVhc3VyZTogbnVtYmVyLFxyXG4gICAgICAgIHNjcm9sbFZpZXdNZWFzdXJlOiBudW1iZXIsXHJcbiAgICAgICAgaGFuZGxlTm9kZU1lYXN1cmU6IG51bWJlcixcclxuICAgICAgICBjb250ZW50UG9zaXRpb246IG51bWJlcixcclxuICAgICAgICBvdXRPZkJvdW5kYXJ5OiBudW1iZXIsXHJcbiAgICAgICAgYWN0dWFsTGVudGg6IG51bWJlcixcclxuICAgICkge1xyXG4gICAgICAgIGxldCBkZW5vbWluYXRvclZhbHVlID0gY29udGVudE1lYXN1cmUgLSBzY3JvbGxWaWV3TWVhc3VyZTtcclxuICAgICAgICBpZiAob3V0T2ZCb3VuZGFyeSkge1xyXG4gICAgICAgICAgICBkZW5vbWluYXRvclZhbHVlICs9IE1hdGguYWJzKG91dE9mQm91bmRhcnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uUmF0aW8gPSAwO1xyXG4gICAgICAgIGlmIChkZW5vbWluYXRvclZhbHVlKSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uUmF0aW8gPSBjb250ZW50UG9zaXRpb24gLyBkZW5vbWluYXRvclZhbHVlO1xyXG4gICAgICAgICAgICBwb3NpdGlvblJhdGlvID0gY2xhbXAwMShwb3NpdGlvblJhdGlvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gKGhhbmRsZU5vZGVNZWFzdXJlIC0gYWN0dWFsTGVudGgpICogcG9zaXRpb25SYXRpbztcclxuICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uVkVSVElDQUwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKDAsIHBvc2l0aW9uLCAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlYzMocG9zaXRpb24sIDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VwZGF0ZUxlbmd0aCAobGVuZ3RoOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5faGFuZGxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZU5vZGUgPSB0aGlzLl9oYW5kbGUubm9kZTtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlTm9kZVNpemUgPSBoYW5kbGVOb2RlLmdldENvbnRlbnRTaXplKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IGhhbmRsZU5vZGUuZ2V0QW5jaG9yUG9pbnQoKTtcclxuICAgICAgICAgICAgaWYgKGFuY2hvci54ICE9PSBkZWZhdWx0QW5jaG9yLnggfHwgYW5jaG9yLnkgIT09IGRlZmF1bHRBbmNob3IueSl7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVOb2RlLnNldEFuY2hvclBvaW50KGRlZmF1bHRBbmNob3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uSE9SSVpPTlRBTCkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlTm9kZS5zZXRDb250ZW50U2l6ZShsZW5ndGgsIGhhbmRsZU5vZGVTaXplLmhlaWdodCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVOb2RlLnNldENvbnRlbnRTaXplKGhhbmRsZU5vZGVTaXplLndpZHRoLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfcHJvY2Vzc0F1dG9IaWRlIChkZWx0YVRpbWU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICghdGhpcy5fZW5hYmxlQXV0b0hpZGUgfHwgdGhpcy5fYXV0b0hpZGVSZW1haW5pbmdUaW1lIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fdG91Y2hpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fYXV0b0hpZGVSZW1haW5pbmdUaW1lIC09IGRlbHRhVGltZTtcclxuICAgICAgICBpZiAodGhpcy5fYXV0b0hpZGVSZW1haW5pbmdUaW1lIDw9IHRoaXMuX2F1dG9IaWRlVGltZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9hdXRvSGlkZVJlbWFpbmluZ1RpbWUgPSBNYXRoLm1heCgwLCB0aGlzLl9hdXRvSGlkZVJlbWFpbmluZ1RpbWUpO1xyXG4gICAgICAgICAgICBjb25zdCBvcGFjaXR5ID0gdGhpcy5fb3BhY2l0eSAqICh0aGlzLl9hdXRvSGlkZVJlbWFpbmluZ1RpbWUgLyB0aGlzLl9hdXRvSGlkZVRpbWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRPcGFjaXR5KG9wYWNpdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2MuU2Nyb2xsQmFyQ29tcG9uZW50ID0gU2Nyb2xsQmFyQ29tcG9uZW50O1xyXG4iXX0=