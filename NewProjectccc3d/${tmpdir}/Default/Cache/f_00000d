(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../default-constants.js", "../../platform/index.js", "../../platform/sys.js", "../define.js", "../device.js", "./webgl-binding-layout.js", "./webgl-buffer.js", "./webgl-command-allocator.js", "./webgl-command-buffer.js", "./webgl-commands.js", "./webgl-framebuffer.js", "./webgl-input-assembler.js", "./webgl-pipeline-layout.js", "./webgl-pipeline-state.js", "./webgl-primary-command-buffer.js", "./webgl-queue.js", "./webgl-render-pass.js", "./webgl-sampler.js", "./webgl-shader.js", "./webgl-state-cache.js", "./webgl-texture.js", "./webgl-texture-view.js", "./webgl-window.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../default-constants.js"), require("../../platform/index.js"), require("../../platform/sys.js"), require("../define.js"), require("../device.js"), require("./webgl-binding-layout.js"), require("./webgl-buffer.js"), require("./webgl-command-allocator.js"), require("./webgl-command-buffer.js"), require("./webgl-commands.js"), require("./webgl-framebuffer.js"), require("./webgl-input-assembler.js"), require("./webgl-pipeline-layout.js"), require("./webgl-pipeline-state.js"), require("./webgl-primary-command-buffer.js"), require("./webgl-queue.js"), require("./webgl-render-pass.js"), require("./webgl-sampler.js"), require("./webgl-shader.js"), require("./webgl-state-cache.js"), require("./webgl-texture.js"), require("./webgl-texture-view.js"), require("./webgl-window.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.defaultConstants, global.index, global.sys, global.define, global.device, global.webglBindingLayout, global.webglBuffer, global.webglCommandAllocator, global.webglCommandBuffer, global.webglCommands, global.webglFramebuffer, global.webglInputAssembler, global.webglPipelineLayout, global.webglPipelineState, global.webglPrimaryCommandBuffer, global.webglQueue, global.webglRenderPass, global.webglSampler, global.webglShader, global.webglStateCache, global.webglTexture, global.webglTextureView, global.webglWindow);
    global.webglDevice = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _defaultConstants, _index, _sys, _define, _device, _webglBindingLayout, _webglBuffer, _webglCommandAllocator, _webglCommandBuffer, _webglCommands, _webglFramebuffer, _webglInputAssembler, _webglPipelineLayout, _webglPipelineState, _webglPrimaryCommandBuffer, _webglQueue, _webglRenderPass, _webglSampler, _webglShader, _webglStateCache, _webglTexture, _webglTextureView, _webglWindow) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.WebGLGFXDevice = void 0;

  function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

  function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  var WebGLGFXDevice = /*#__PURE__*/function (_GFXDevice) {
    _inherits(WebGLGFXDevice, _GFXDevice);

    _createClass(WebGLGFXDevice, [{
      key: "gl",
      get: function get() {
        return this._webGLRC;
      }
    }, {
      key: "webGLQueue",
      get: function get() {
        return this._queue;
      }
    }, {
      key: "isAntialias",
      get: function get() {
        return this._isAntialias;
      }
    }, {
      key: "isPremultipliedAlpha",
      get: function get() {
        return this._isPremultipliedAlpha;
      }
    }, {
      key: "useVAO",
      get: function get() {
        return this._useVAO;
      }
    }, {
      key: "EXT_texture_filter_anisotropic",
      get: function get() {
        return this._EXT_texture_filter_anisotropic;
      }
    }, {
      key: "EXT_frag_depth",
      get: function get() {
        return this._EXT_frag_depth;
      }
    }, {
      key: "EXT_shader_texture_lod",
      get: function get() {
        return this._EXT_shader_texture_lod;
      }
    }, {
      key: "EXT_sRGB",
      get: function get() {
        return this._EXT_sRGB;
      }
    }, {
      key: "OES_vertex_array_object",
      get: function get() {
        return this._OES_vertex_array_object;
      }
    }, {
      key: "WEBGL_color_buffer_float",
      get: function get() {
        return this._WEBGL_color_buffer_float;
      }
    }, {
      key: "WEBGL_compressed_texture_etc1",
      get: function get() {
        return this._WEBGL_compressed_texture_etc1;
      }
    }, {
      key: "WEBGL_compressed_texture_pvrtc",
      get: function get() {
        return this._WEBGL_compressed_texture_pvrtc;
      }
    }, {
      key: "WEBGL_compressed_texture_astc",
      get: function get() {
        return this._WEBGL_compressed_texture_astc;
      }
    }, {
      key: "WEBGL_compressed_texture_s3tc",
      get: function get() {
        return this._WEBGL_compressed_texture_s3tc;
      }
    }, {
      key: "WEBGL_compressed_texture_s3tc_srgb",
      get: function get() {
        return this._WEBGL_compressed_texture_s3tc_srgb;
      }
    }, {
      key: "WEBGL_debug_shaders",
      get: function get() {
        return this._WEBGL_debug_shaders;
      }
    }, {
      key: "WEBGL_draw_buffers",
      get: function get() {
        return this._WEBGL_draw_buffers;
      }
    }, {
      key: "WEBGL_lose_context",
      get: function get() {
        return this._WEBGL_lose_context;
      }
    }, {
      key: "WEBGL_depth_texture",
      get: function get() {
        return this._WEBGL_depth_texture;
      }
    }, {
      key: "WEBGL_debug_renderer_info",
      get: function get() {
        return this._WEBGL_debug_renderer_info;
      }
    }, {
      key: "OES_texture_half_float",
      get: function get() {
        return this._OES_texture_half_float;
      }
    }, {
      key: "OES_texture_half_float_linear",
      get: function get() {
        return this._OES_texture_half_float_linear;
      }
    }, {
      key: "OES_texture_float",
      get: function get() {
        return this._OES_texture_float;
      }
    }, {
      key: "OES_standard_derivatives",
      get: function get() {
        return this._OES_standard_derivatives;
      }
    }, {
      key: "OES_element_index_uint",
      get: function get() {
        return this._OES_element_index_uint;
      }
    }, {
      key: "ANGLE_instanced_arrays",
      get: function get() {
        return this._ANGLE_instanced_arrays;
      }
    }]);

    function WebGLGFXDevice() {
      var _this;

      _classCallCheck(this, WebGLGFXDevice);

      _this = _possibleConstructorReturn(this, _getPrototypeOf(WebGLGFXDevice).call(this));
      _this.stateCache = new _webglStateCache.WebGLStateCache();
      _this.nullTex2D = null;
      _this.nullTexCube = null;
      _this._webGLRC = null;
      _this._isAntialias = true;
      _this._isPremultipliedAlpha = true;
      _this._useVAO = false;
      _this._extensions = null;
      _this._EXT_texture_filter_anisotropic = null;
      _this._EXT_frag_depth = null;
      _this._EXT_shader_texture_lod = null;
      _this._EXT_sRGB = null;
      _this._OES_vertex_array_object = null;
      _this._EXT_color_buffer_half_float = null;
      _this._WEBGL_color_buffer_float = null;
      _this._WEBGL_compressed_texture_etc1 = null;
      _this._WEBGL_compressed_texture_etc = null;
      _this._WEBGL_compressed_texture_pvrtc = null;
      _this._WEBGL_compressed_texture_astc = null;
      _this._WEBGL_compressed_texture_s3tc = null;
      _this._WEBGL_compressed_texture_s3tc_srgb = null;
      _this._WEBGL_debug_shaders = null;
      _this._WEBGL_draw_buffers = null;
      _this._WEBGL_lose_context = null;
      _this._WEBGL_depth_texture = null;
      _this._WEBGL_debug_renderer_info = null;
      _this._OES_texture_half_float = null;
      _this._OES_texture_half_float_linear = null;
      _this._OES_texture_float = null;
      _this._OES_texture_float_linear = null;
      _this._OES_standard_derivatives = null;
      _this._OES_element_index_uint = null;
      _this._ANGLE_instanced_arrays = null;
      return _this;
    }

    _createClass(WebGLGFXDevice, [{
      key: "initialize",
      value: function initialize(info) {
        this._canvas = info.canvasElm;
        this._isAntialias = info.isAntialias !== undefined ? info.isAntialias : true;
        this._isPremultipliedAlpha = info.isPremultipliedAlpha !== undefined ? info.isPremultipliedAlpha : true;

        try {
          var webGLCtxAttribs = {
            alpha: _index.macro.ENABLE_TRANSPARENT_CANVAS,
            antialias: this._isAntialias,
            depth: true,
            stencil: true,
            premultipliedAlpha: this._isPremultipliedAlpha,
            preserveDrawingBuffer: false,
            powerPreference: 'default',
            failIfMajorPerformanceCaveat: false
          };
          /*
          if (cc.sys.platform === cc.sys.WECHAT_GAME ||
              cc.sys.platform === cc.sys.QQ_PLAY) {
              webGLCtxAttribs.preserveDrawingBuffer = true;
          }
          */

          this._webGLRC = this._canvas.getContext('webgl', webGLCtxAttribs);
        } catch (err) {
          console.error(err);
          return false;
        }

        if (!this._webGLRC) {
          console.error('This device does not support WebGL.');
          return false;
        }

        this._canvas2D = document.createElement('canvas');
        console.info('WebGL device initialized.');
        this._gfxAPI = _device.GFXAPI.WEBGL;
        this._deviceName = 'WebGL';
        var gl = this._webGLRC;
        this._WEBGL_debug_renderer_info = this.getExtension('WEBGL_debug_renderer_info');

        if (this._WEBGL_debug_renderer_info) {
          this._renderer = gl.getParameter(this._WEBGL_debug_renderer_info.UNMASKED_RENDERER_WEBGL);
          this._vendor = gl.getParameter(this._WEBGL_debug_renderer_info.UNMASKED_VENDOR_WEBGL);
        } else {
          this._renderer = gl.getParameter(gl.RENDERER);
          this._vendor = gl.getParameter(gl.VENDOR);
        }

        this._version = gl.getParameter(gl.VERSION);
        this._maxVertexAttributes = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);
        this._maxVertexUniformVectors = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);
        this._maxFragmentUniformVectors = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);
        this._maxTextureUnits = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);
        this._maxVertexTextureUnits = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
        this._maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);
        this._maxCubeMapTextureSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);
        this._depthBits = gl.getParameter(gl.DEPTH_BITS);
        this._stencilBits = gl.getParameter(gl.STENCIL_BITS);

        if (_defaultConstants.ALIPAY) {
          this._depthBits = 24;
        }

        this._devicePixelRatio = info.devicePixelRatio || 1.0;
        this._width = this._canvas.width;
        this._height = this._canvas.height;
        this._nativeWidth = Math.max(info.nativeWidth || this._width, 0);
        this._nativeHeight = Math.max(info.nativeHeight || this._height, 0);
        this._colorFmt = _define.GFXFormat.RGBA8;

        if (this._depthBits === 24) {
          if (this._stencilBits === 8) {
            this._depthStencilFmt = _define.GFXFormat.D24S8;
          } else {
            this._depthStencilFmt = _define.GFXFormat.D24;
          }
        } else {
          if (this._stencilBits === 8) {
            this._depthStencilFmt = _define.GFXFormat.D16S8;
          } else {
            this._depthStencilFmt = _define.GFXFormat.D16;
          }
        }

        this._extensions = gl.getSupportedExtensions();
        var extensions = '';

        if (this._extensions) {
          var _iterator = _createForOfIteratorHelper(this._extensions),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var ext = _step.value;
              extensions += ext + ' ';
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }

          console.debug('EXTENSIONS: ' + extensions);
        }

        this._EXT_texture_filter_anisotropic = this.getExtension('EXT_texture_filter_anisotropic');
        this._EXT_frag_depth = this.getExtension('EXT_frag_depth');
        this._EXT_shader_texture_lod = this.getExtension('EXT_shader_texture_lod');
        this._EXT_sRGB = this.getExtension('EXT_sRGB');
        this._OES_vertex_array_object = this.getExtension('OES_vertex_array_object');
        this._EXT_color_buffer_half_float = this.getExtension('EXT_color_buffer_half_float');
        this._WEBGL_color_buffer_float = this.getExtension('WEBGL_color_buffer_float');
        this._WEBGL_compressed_texture_etc1 = this.getExtension('WEBGL_compressed_texture_etc1');
        this._WEBGL_compressed_texture_etc = this.getExtension('WEBGL_compressed_texture_etc');
        this._WEBGL_compressed_texture_pvrtc = this.getExtension('WEBGL_compressed_texture_pvrtc');
        this._WEBGL_compressed_texture_astc = this.getExtension('WEBGL_compressed_texture_astc');
        this._WEBGL_compressed_texture_s3tc = this.getExtension('WEBGL_compressed_texture_s3tc');
        this._WEBGL_compressed_texture_s3tc_srgb = this.getExtension('WEBGL_compressed_texture_s3tc_srgb');
        this._WEBGL_debug_shaders = this.getExtension('WEBGL_debug_shaders');
        this._WEBGL_draw_buffers = this.getExtension('WEBGL_draw_buffers');
        this._WEBGL_lose_context = this.getExtension('WEBGL_lose_context');
        this._WEBGL_depth_texture = this.getExtension('WEBGL_depth_texture');
        this._OES_texture_half_float = this.getExtension('OES_texture_half_float');
        this._OES_texture_half_float_linear = this.getExtension('OES_texture_half_float_linear');
        this._OES_texture_float = this.getExtension('OES_texture_float');
        this._OES_texture_float_linear = this.getExtension('OES_texture_float_linear');
        this._OES_standard_derivatives = this.getExtension('OES_standard_derivatives');
        this._OES_element_index_uint = this.getExtension('OES_element_index_uint');
        this._ANGLE_instanced_arrays = this.getExtension('ANGLE_instanced_arrays');

        if (_defaultConstants.ALIPAY) {
          this._WEBGL_depth_texture = {
            UNSIGNED_INT_24_8_WEBGL: 0x84FA
          };
        }

        if (_sys.sys.browserType === _sys.sys.BROWSER_TYPE_UC) {
          this._ANGLE_instanced_arrays = null; // UC browser implementation doesn't work
        }

        this._features.fill(false);

        if (this._WEBGL_color_buffer_float) {
          this._features[_device.GFXFeature.COLOR_FLOAT] = true;
        }

        if (this._EXT_color_buffer_half_float) {
          this._features[_device.GFXFeature.COLOR_HALF_FLOAT] = true;
        }

        if (this._OES_texture_float) {
          this._features[_device.GFXFeature.TEXTURE_FLOAT] = true;
        }

        if (this._OES_texture_half_float) {
          this._features[_device.GFXFeature.TEXTURE_HALF_FLOAT] = true;
        }

        if (this._OES_texture_float_linear) {
          this._features[_device.GFXFeature.TEXTURE_FLOAT_LINEAR] = true;
        }

        if (this._OES_texture_half_float_linear) {
          this._features[_device.GFXFeature.TEXTURE_HALF_FLOAT_LINEAR] = true;
        }

        if (this._WEBGL_depth_texture) {
          this._features[_device.GFXFeature.FORMAT_D24S8] = true;
        }

        if (this._OES_element_index_uint) {
          this._features[_device.GFXFeature.ELEMENT_INDEX_UINT] = true;
        }

        if (this._ANGLE_instanced_arrays) {
          this._features[_device.GFXFeature.INSTANCED_ARRAYS] = true;
        }

        var compressedFormat = '';

        if (this._WEBGL_compressed_texture_etc1) {
          this._features[_device.GFXFeature.FORMAT_ETC1] = true;
          compressedFormat += 'etc1 ';
        }

        if (this._WEBGL_compressed_texture_etc) {
          this._features[_device.GFXFeature.FORMAT_ETC2] = true;
          compressedFormat += 'etc2 ';
        }

        if (this._WEBGL_compressed_texture_s3tc) {
          this._features[_device.GFXFeature.FORMAT_DXT] = true;
          compressedFormat += 'dxt ';
        }

        if (this._WEBGL_compressed_texture_pvrtc) {
          this._features[_device.GFXFeature.FORMAT_PVRTC] = true;
          compressedFormat += 'pvrtc ';
        }

        if (this._WEBGL_compressed_texture_astc) {
          this._features[_device.GFXFeature.FORMAT_ASTC] = true;
          compressedFormat += 'astc ';
        }

        this._features[_device.GFXFeature.MSAA] = false;

        if (this._OES_vertex_array_object) {
          if (_defaultConstants.RUNTIME_BASED) {
            // @ts-ignore
            if (typeof loadRuntime === 'function' && typeof loadRuntime().getFeature === 'function' && loadRuntime().getFeature('webgl.extensions.oes_vertex_array_object.revision') > 0) {
              this._useVAO = true;
            }
          } else {
            this._useVAO = true;
          }
        }

        if (_sys.sys.platform === _sys.sys.WECHAT_GAME && _sys.sys.os === _sys.sys.OS_ANDROID) {
          gl.detachShader = function () {}; // Android WeChat may throw errors on detach shader

        }

        console.info('RENDERER: ' + this._renderer);
        console.info('VENDOR: ' + this._vendor);
        console.info('VERSION: ' + this._version);
        console.info('DPR: ' + this._devicePixelRatio);
        console.info('SCREEN_SIZE: ' + this._width + ' x ' + this._height);
        console.info('NATIVE_SIZE: ' + this._nativeWidth + ' x ' + this._nativeHeight); // console.info('COLOR_FORMAT: ' + GFXFormatInfos[this._colorFmt].name);
        // console.info('DEPTH_STENCIL_FORMAT: ' + GFXFormatInfos[this._depthStencilFmt].name);
        // console.info('MAX_VERTEX_ATTRIBS: ' + this._maxVertexAttributes);

        console.info('MAX_VERTEX_UNIFORM_VECTORS: ' + this._maxVertexUniformVectors); // console.info('MAX_FRAGMENT_UNIFORM_VECTORS: ' + this._maxFragmentUniformVectors);
        // console.info('MAX_TEXTURE_IMAGE_UNITS: ' + this._maxTextureUnits);
        // console.info('MAX_VERTEX_TEXTURE_IMAGE_UNITS: ' + this._maxVertexTextureUnits);

        console.info('DEPTH_BITS: ' + this._depthBits);
        console.info('STENCIL_BITS: ' + this._stencilBits);

        if (this._EXT_texture_filter_anisotropic) {
          console.info('MAX_TEXTURE_MAX_ANISOTROPY_EXT: ' + this._EXT_texture_filter_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
        }

        console.info('USE_VAO: ' + this._useVAO);
        console.info('COMPRESSED_FORMAT: ' + compressedFormat); // init states

        this.initStates(gl); // create queue

        this._queue = this.createQueue({
          type: _define.GFXQueueType.GRAPHICS
        }); // create primary window

        var canvas = this._webGLRC.canvas;
        this._mainWindow = this.createWindow({
          title: canvas.title || '',
          left: canvas.offsetLeft || 0,
          top: canvas.offsetTop || 0,
          width: this._webGLRC.drawingBufferWidth,
          height: this._webGLRC.drawingBufferHeight,
          colorFmt: this._colorFmt,
          depthStencilFmt: this._depthStencilFmt
        });
        this._cmdAllocator = this.createCommandAllocator({}); // create default null texture

        this.nullTex2D = new _webglTexture.WebGLGFXTexture(this);
        this.nullTex2D.initialize({
          type: _define.GFXTextureType.TEX2D,
          usage: _define.GFXTextureUsageBit.SAMPLED,
          format: _define.GFXFormat.RGBA8,
          width: 2,
          height: 2,
          flags: _define.GFXTextureFlagBit.GEN_MIPMAP
        });
        this.nullTexCube = new _webglTexture.WebGLGFXTexture(this);
        this.nullTexCube.initialize({
          type: _define.GFXTextureType.TEX2D,
          usage: _define.GFXTextureUsageBit.SAMPLED,
          format: _define.GFXFormat.RGBA8,
          width: 2,
          height: 2,
          arrayLayer: 6,
          flags: _define.GFXTextureFlagBit.CUBEMAP | _define.GFXTextureFlagBit.GEN_MIPMAP
        });
        var nullTexRegion = {
          buffOffset: 0,
          buffStride: 0,
          buffTexHeight: 0,
          texOffset: {
            x: 0,
            y: 0,
            z: 0
          },
          texExtent: {
            width: 2,
            height: 2,
            depth: 1
          },
          texSubres: {
            baseMipLevel: 0,
            levelCount: 1,
            baseArrayLayer: 0,
            layerCount: 1
          }
        };
        var nullTexBuff = new Uint8Array(this.nullTex2D.size);
        nullTexBuff.fill(0);
        this.copyBuffersToTexture([nullTexBuff], this.nullTex2D, [nullTexRegion]);
        nullTexRegion.texSubres.layerCount = 6;
        this.copyBuffersToTexture([nullTexBuff, nullTexBuff, nullTexBuff, nullTexBuff, nullTexBuff, nullTexBuff], this.nullTexCube, [nullTexRegion]);
        return true;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        if (this.nullTex2D) {
          this.nullTex2D.destroy();
          this.nullTex2D = null;
        }

        if (this.nullTexCube) {
          this.nullTexCube.destroy();
          this.nullTexCube = null;
        }

        if (this._mainWindow) {
          this._mainWindow.destroy();

          this._mainWindow = null;
        }

        if (this._cmdAllocator) {
          this._cmdAllocator.destroy();

          this._cmdAllocator = null;
        }

        if (this._queue) {
          this._queue.destroy();

          this._queue = null;
        }

        this._webGLRC = null;
      }
    }, {
      key: "resize",
      value: function resize(width, height) {
        if (this._width !== width || this._height !== height) {
          console.info('Resizing device: ' + width + 'x' + height);
          this._canvas.width = width;
          this._canvas.height = height;
          this._width = width;
          this._height = height;
        }
      }
    }, {
      key: "createBuffer",
      value: function createBuffer(info) {
        var buffer = new _webglBuffer.WebGLGFXBuffer(this);
        buffer.initialize(info);
        return buffer;
      }
    }, {
      key: "createTexture",
      value: function createTexture(info) {
        var texture = new _webglTexture.WebGLGFXTexture(this);
        texture.initialize(info);
        return texture;
      }
    }, {
      key: "createTextureView",
      value: function createTextureView(info) {
        var texView = new _webglTextureView.WebGLGFXTextureView(this);
        texView.initialize(info);
        return texView;
      }
    }, {
      key: "createSampler",
      value: function createSampler(info) {
        var sampler = new _webglSampler.WebGLGFXSampler(this);
        sampler.initialize(info);
        return sampler;
      }
    }, {
      key: "createBindingLayout",
      value: function createBindingLayout(info) {
        var bindingLayout = new _webglBindingLayout.WebGLGFXBindingLayout(this);
        bindingLayout.initialize(info);
        return bindingLayout;
      }
    }, {
      key: "createShader",
      value: function createShader(info) {
        var shader = new _webglShader.WebGLGFXShader(this);
        shader.initialize(info);
        return shader;
      }
    }, {
      key: "createInputAssembler",
      value: function createInputAssembler(info) {
        var inputAssembler = new _webglInputAssembler.WebGLGFXInputAssembler(this);
        inputAssembler.initialize(info);
        return inputAssembler;
      }
    }, {
      key: "createRenderPass",
      value: function createRenderPass(info) {
        var renderPass = new _webglRenderPass.WebGLGFXRenderPass(this);
        renderPass.initialize(info);
        return renderPass;
      }
    }, {
      key: "createFramebuffer",
      value: function createFramebuffer(info) {
        var framebuffer = new _webglFramebuffer.WebGLGFXFramebuffer(this);
        framebuffer.initialize(info);
        return framebuffer;
      }
    }, {
      key: "createPipelineLayout",
      value: function createPipelineLayout(info) {
        var pipelineLayout = new _webglPipelineLayout.WebGLGFXPipelineLayout(this);
        pipelineLayout.initialize(info);
        return pipelineLayout;
      }
    }, {
      key: "createPipelineState",
      value: function createPipelineState(info) {
        var pipelineState = new _webglPipelineState.WebGLGFXPipelineState(this);
        pipelineState.initialize(info);
        return pipelineState;
      }
    }, {
      key: "createCommandAllocator",
      value: function createCommandAllocator(info) {
        var cmdAllocator = new _webglCommandAllocator.WebGLGFXCommandAllocator(this);
        cmdAllocator.initialize(info);
        return cmdAllocator;
      }
    }, {
      key: "createCommandBuffer",
      value: function createCommandBuffer(info) {
        // const ctor = WebGLGFXCommandBuffer; // opt to instant invocation
        var ctor = info.type === _define.GFXCommandBufferType.PRIMARY ? _webglPrimaryCommandBuffer.WebGLGFXPrimaryCommandBuffer : _webglCommandBuffer.WebGLGFXCommandBuffer;
        var cmdBuff = new ctor(this);
        cmdBuff.initialize(info);
        return cmdBuff;
      }
    }, {
      key: "createQueue",
      value: function createQueue(info) {
        var queue = new _webglQueue.WebGLGFXQueue(this);
        queue.initialize(info);
        return queue;
      }
    }, {
      key: "createWindow",
      value: function createWindow(info) {
        var window = new _webglWindow.WebGLGFXWindow(this);
        window.initialize(info);
        return window;
      }
    }, {
      key: "present",
      value: function present() {
        this._cmdAllocator.releaseCmds();

        var queue = this._queue;
        this._numDrawCalls = queue.numDrawCalls;
        this._numInstances = queue.numInstances;
        this._numTris = queue.numTris;
        queue.clear();
      }
    }, {
      key: "copyBuffersToTexture",
      value: function copyBuffersToTexture(buffers, texture, regions) {
        (0, _webglCommands.WebGLCmdFuncCopyBuffersToTexture)(this, buffers, texture.gpuTexture, regions);
      }
    }, {
      key: "copyTexImagesToTexture",
      value: function copyTexImagesToTexture(texImages, texture, regions) {
        (0, _webglCommands.WebGLCmdFuncCopyTexImagesToTexture)(this, texImages, texture.gpuTexture, regions);
      }
    }, {
      key: "copyFramebufferToBuffer",
      value: function copyFramebufferToBuffer(srcFramebuffer, dstBuffer, regions) {
        var gl = this._webGLRC;
        var gpuFramebuffer = srcFramebuffer.gpuFramebuffer;
        var format = gpuFramebuffer.gpuColorViews[0].format;
        var glFormat = (0, _webglCommands.GFXFormatToWebGLFormat)(format, gl);
        var glType = (0, _webglCommands.GFXFormatToWebGLType)(format, gl);
        var ctor = (0, _define.getTypedArrayConstructor)(_define.GFXFormatInfos[format]);
        var curFBO = this.stateCache.glFramebuffer;

        if (this.stateCache.glFramebuffer !== gpuFramebuffer.glFramebuffer) {
          gl.bindFramebuffer(gl.FRAMEBUFFER, gpuFramebuffer.glFramebuffer);
          this.stateCache.glFramebuffer = gpuFramebuffer.glFramebuffer;
        }

        var view = new ctor(dstBuffer);

        var _iterator2 = _createForOfIteratorHelper(regions),
            _step2;

        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var region = _step2.value;
            var buffOffset = region.buffOffset + region.buffTexHeight * region.buffStride;
            var w = region.texExtent.width;
            var h = region.texExtent.height;
            var memSize = (0, _define.GFXFormatSize)(format, w, h, 1);
            var data = view.subarray(buffOffset, buffOffset + memSize);
            gl.readPixels(region.texOffset.x, region.texOffset.y, w, h, glFormat, glType, data);
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }

        if (this.stateCache.glFramebuffer !== curFBO) {
          gl.bindFramebuffer(gl.FRAMEBUFFER, curFBO);
          this.stateCache.glFramebuffer = curFBO;
        }
      }
    }, {
      key: "blitFramebuffer",
      value: function blitFramebuffer(src, dst, srcRect, dstRect, filter) {}
    }, {
      key: "getExtension",
      value: function getExtension(ext) {
        var prefixes = ['', 'WEBKIT_', 'MOZ_'];

        for (var i = 0; i < prefixes.length; ++i) {
          var _ext = this._webGLRC.getExtension(prefixes[i] + ext);

          if (_ext) {
            return _ext;
          }
        }

        return null;
      }
    }, {
      key: "initStates",
      value: function initStates(gl) {
        gl.activeTexture(gl.TEXTURE0);
        gl.pixelStorei(gl.PACK_ALIGNMENT, 1);
        gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);
        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0);
        gl.bindFramebuffer(gl.FRAMEBUFFER, null); // rasteriazer state

        gl.disable(gl.SCISSOR_TEST);
        gl.enable(gl.CULL_FACE);
        gl.cullFace(gl.BACK);
        gl.frontFace(gl.CCW);
        gl.disable(gl.POLYGON_OFFSET_FILL);
        gl.polygonOffset(0.0, 0.0); // depth stencil state

        gl.enable(gl.DEPTH_TEST);
        gl.depthMask(true);
        gl.depthFunc(gl.LESS);
        gl.depthRange(0.0, 1.0);
        gl.stencilFuncSeparate(gl.FRONT, gl.ALWAYS, 1, 0xffff);
        gl.stencilOpSeparate(gl.FRONT, gl.KEEP, gl.KEEP, gl.KEEP);
        gl.stencilMaskSeparate(gl.FRONT, 0xffff);
        gl.stencilFuncSeparate(gl.BACK, gl.ALWAYS, 1, 0xffff);
        gl.stencilOpSeparate(gl.BACK, gl.KEEP, gl.KEEP, gl.KEEP);
        gl.stencilMaskSeparate(gl.BACK, 0xffff);
        gl.disable(gl.STENCIL_TEST); // blend state

        gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);
        gl.disable(gl.BLEND);
        gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);
        gl.blendFuncSeparate(gl.ONE, gl.ZERO, gl.ONE, gl.ZERO);
        gl.colorMask(true, true, true, true);
        gl.blendColor(0.0, 0.0, 0.0, 0.0);
      }
    }]);

    return WebGLGFXDevice;
  }(_device.GFXDevice);

  _exports.WebGLGFXDevice = WebGLGFXDevice;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkY6L2plbmtpbnMvd29ya3NwYWNlL0NyZWF0b3JfM0QvZWRpdG9yLTNkL3Jlc291cmNlcy8zZC9lbmdpbmUvY29jb3MvY29yZS9nZngvd2ViZ2wvd2ViZ2wtZGV2aWNlLnRzIl0sIm5hbWVzIjpbIldlYkdMR0ZYRGV2aWNlIiwiX3dlYkdMUkMiLCJfcXVldWUiLCJfaXNBbnRpYWxpYXMiLCJfaXNQcmVtdWx0aXBsaWVkQWxwaGEiLCJfdXNlVkFPIiwiX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYyIsIl9FWFRfZnJhZ19kZXB0aCIsIl9FWFRfc2hhZGVyX3RleHR1cmVfbG9kIiwiX0VYVF9zUkdCIiwiX09FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0IiwiX1dFQkdMX2NvbG9yX2J1ZmZlcl9mbG9hdCIsIl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMSIsIl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMiLCJfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGMiLCJfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMiLCJfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNfc3JnYiIsIl9XRUJHTF9kZWJ1Z19zaGFkZXJzIiwiX1dFQkdMX2RyYXdfYnVmZmVycyIsIl9XRUJHTF9sb3NlX2NvbnRleHQiLCJfV0VCR0xfZGVwdGhfdGV4dHVyZSIsIl9XRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvIiwiX09FU190ZXh0dXJlX2hhbGZfZmxvYXQiLCJfT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXIiLCJfT0VTX3RleHR1cmVfZmxvYXQiLCJfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIiwiX09FU19lbGVtZW50X2luZGV4X3VpbnQiLCJfQU5HTEVfaW5zdGFuY2VkX2FycmF5cyIsInN0YXRlQ2FjaGUiLCJXZWJHTFN0YXRlQ2FjaGUiLCJudWxsVGV4MkQiLCJudWxsVGV4Q3ViZSIsIl9leHRlbnNpb25zIiwiX0VYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdCIsIl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjIiwiX09FU190ZXh0dXJlX2Zsb2F0X2xpbmVhciIsImluZm8iLCJfY2FudmFzIiwiY2FudmFzRWxtIiwiaXNBbnRpYWxpYXMiLCJ1bmRlZmluZWQiLCJpc1ByZW11bHRpcGxpZWRBbHBoYSIsIndlYkdMQ3R4QXR0cmlicyIsImFscGhhIiwibWFjcm8iLCJFTkFCTEVfVFJBTlNQQVJFTlRfQ0FOVkFTIiwiYW50aWFsaWFzIiwiZGVwdGgiLCJzdGVuY2lsIiwicHJlbXVsdGlwbGllZEFscGhhIiwicHJlc2VydmVEcmF3aW5nQnVmZmVyIiwicG93ZXJQcmVmZXJlbmNlIiwiZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdCIsImdldENvbnRleHQiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJfY2FudmFzMkQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJfZ2Z4QVBJIiwiR0ZYQVBJIiwiV0VCR0wiLCJfZGV2aWNlTmFtZSIsImdsIiwiZ2V0RXh0ZW5zaW9uIiwiX3JlbmRlcmVyIiwiZ2V0UGFyYW1ldGVyIiwiVU5NQVNLRURfUkVOREVSRVJfV0VCR0wiLCJfdmVuZG9yIiwiVU5NQVNLRURfVkVORE9SX1dFQkdMIiwiUkVOREVSRVIiLCJWRU5ET1IiLCJfdmVyc2lvbiIsIlZFUlNJT04iLCJfbWF4VmVydGV4QXR0cmlidXRlcyIsIk1BWF9WRVJURVhfQVRUUklCUyIsIl9tYXhWZXJ0ZXhVbmlmb3JtVmVjdG9ycyIsIk1BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTIiwiX21heEZyYWdtZW50VW5pZm9ybVZlY3RvcnMiLCJNQVhfRlJBR01FTlRfVU5JRk9STV9WRUNUT1JTIiwiX21heFRleHR1cmVVbml0cyIsIk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTIiwiX21heFZlcnRleFRleHR1cmVVbml0cyIsIk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUyIsIl9tYXhUZXh0dXJlU2l6ZSIsIk1BWF9URVhUVVJFX1NJWkUiLCJfbWF4Q3ViZU1hcFRleHR1cmVTaXplIiwiTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSIsIl9kZXB0aEJpdHMiLCJERVBUSF9CSVRTIiwiX3N0ZW5jaWxCaXRzIiwiU1RFTkNJTF9CSVRTIiwiQUxJUEFZIiwiX2RldmljZVBpeGVsUmF0aW8iLCJkZXZpY2VQaXhlbFJhdGlvIiwiX3dpZHRoIiwid2lkdGgiLCJfaGVpZ2h0IiwiaGVpZ2h0IiwiX25hdGl2ZVdpZHRoIiwiTWF0aCIsIm1heCIsIm5hdGl2ZVdpZHRoIiwiX25hdGl2ZUhlaWdodCIsIm5hdGl2ZUhlaWdodCIsIl9jb2xvckZtdCIsIkdGWEZvcm1hdCIsIlJHQkE4IiwiX2RlcHRoU3RlbmNpbEZtdCIsIkQyNFM4IiwiRDI0IiwiRDE2UzgiLCJEMTYiLCJnZXRTdXBwb3J0ZWRFeHRlbnNpb25zIiwiZXh0ZW5zaW9ucyIsImV4dCIsImRlYnVnIiwiVU5TSUdORURfSU5UXzI0XzhfV0VCR0wiLCJzeXMiLCJicm93c2VyVHlwZSIsIkJST1dTRVJfVFlQRV9VQyIsIl9mZWF0dXJlcyIsImZpbGwiLCJHRlhGZWF0dXJlIiwiQ09MT1JfRkxPQVQiLCJDT0xPUl9IQUxGX0ZMT0FUIiwiVEVYVFVSRV9GTE9BVCIsIlRFWFRVUkVfSEFMRl9GTE9BVCIsIlRFWFRVUkVfRkxPQVRfTElORUFSIiwiVEVYVFVSRV9IQUxGX0ZMT0FUX0xJTkVBUiIsIkZPUk1BVF9EMjRTOCIsIkVMRU1FTlRfSU5ERVhfVUlOVCIsIklOU1RBTkNFRF9BUlJBWVMiLCJjb21wcmVzc2VkRm9ybWF0IiwiRk9STUFUX0VUQzEiLCJGT1JNQVRfRVRDMiIsIkZPUk1BVF9EWFQiLCJGT1JNQVRfUFZSVEMiLCJGT1JNQVRfQVNUQyIsIk1TQUEiLCJSVU5USU1FX0JBU0VEIiwibG9hZFJ1bnRpbWUiLCJnZXRGZWF0dXJlIiwicGxhdGZvcm0iLCJXRUNIQVRfR0FNRSIsIm9zIiwiT1NfQU5EUk9JRCIsImRldGFjaFNoYWRlciIsIk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCIsImluaXRTdGF0ZXMiLCJjcmVhdGVRdWV1ZSIsInR5cGUiLCJHRlhRdWV1ZVR5cGUiLCJHUkFQSElDUyIsImNhbnZhcyIsIl9tYWluV2luZG93IiwiY3JlYXRlV2luZG93IiwidGl0bGUiLCJsZWZ0Iiwib2Zmc2V0TGVmdCIsInRvcCIsIm9mZnNldFRvcCIsImRyYXdpbmdCdWZmZXJXaWR0aCIsImRyYXdpbmdCdWZmZXJIZWlnaHQiLCJjb2xvckZtdCIsImRlcHRoU3RlbmNpbEZtdCIsIl9jbWRBbGxvY2F0b3IiLCJjcmVhdGVDb21tYW5kQWxsb2NhdG9yIiwiV2ViR0xHRlhUZXh0dXJlIiwiaW5pdGlhbGl6ZSIsIkdGWFRleHR1cmVUeXBlIiwiVEVYMkQiLCJ1c2FnZSIsIkdGWFRleHR1cmVVc2FnZUJpdCIsIlNBTVBMRUQiLCJmb3JtYXQiLCJmbGFncyIsIkdGWFRleHR1cmVGbGFnQml0IiwiR0VOX01JUE1BUCIsImFycmF5TGF5ZXIiLCJDVUJFTUFQIiwibnVsbFRleFJlZ2lvbiIsImJ1ZmZPZmZzZXQiLCJidWZmU3RyaWRlIiwiYnVmZlRleEhlaWdodCIsInRleE9mZnNldCIsIngiLCJ5IiwieiIsInRleEV4dGVudCIsInRleFN1YnJlcyIsImJhc2VNaXBMZXZlbCIsImxldmVsQ291bnQiLCJiYXNlQXJyYXlMYXllciIsImxheWVyQ291bnQiLCJudWxsVGV4QnVmZiIsIlVpbnQ4QXJyYXkiLCJzaXplIiwiY29weUJ1ZmZlcnNUb1RleHR1cmUiLCJkZXN0cm95IiwiYnVmZmVyIiwiV2ViR0xHRlhCdWZmZXIiLCJ0ZXh0dXJlIiwidGV4VmlldyIsIldlYkdMR0ZYVGV4dHVyZVZpZXciLCJzYW1wbGVyIiwiV2ViR0xHRlhTYW1wbGVyIiwiYmluZGluZ0xheW91dCIsIldlYkdMR0ZYQmluZGluZ0xheW91dCIsInNoYWRlciIsIldlYkdMR0ZYU2hhZGVyIiwiaW5wdXRBc3NlbWJsZXIiLCJXZWJHTEdGWElucHV0QXNzZW1ibGVyIiwicmVuZGVyUGFzcyIsIldlYkdMR0ZYUmVuZGVyUGFzcyIsImZyYW1lYnVmZmVyIiwiV2ViR0xHRlhGcmFtZWJ1ZmZlciIsInBpcGVsaW5lTGF5b3V0IiwiV2ViR0xHRlhQaXBlbGluZUxheW91dCIsInBpcGVsaW5lU3RhdGUiLCJXZWJHTEdGWFBpcGVsaW5lU3RhdGUiLCJjbWRBbGxvY2F0b3IiLCJXZWJHTEdGWENvbW1hbmRBbGxvY2F0b3IiLCJjdG9yIiwiR0ZYQ29tbWFuZEJ1ZmZlclR5cGUiLCJQUklNQVJZIiwiV2ViR0xHRlhQcmltYXJ5Q29tbWFuZEJ1ZmZlciIsIldlYkdMR0ZYQ29tbWFuZEJ1ZmZlciIsImNtZEJ1ZmYiLCJxdWV1ZSIsIldlYkdMR0ZYUXVldWUiLCJ3aW5kb3ciLCJXZWJHTEdGWFdpbmRvdyIsInJlbGVhc2VDbWRzIiwiX251bURyYXdDYWxscyIsIm51bURyYXdDYWxscyIsIl9udW1JbnN0YW5jZXMiLCJudW1JbnN0YW5jZXMiLCJfbnVtVHJpcyIsIm51bVRyaXMiLCJjbGVhciIsImJ1ZmZlcnMiLCJyZWdpb25zIiwiZ3B1VGV4dHVyZSIsInRleEltYWdlcyIsInNyY0ZyYW1lYnVmZmVyIiwiZHN0QnVmZmVyIiwiZ3B1RnJhbWVidWZmZXIiLCJncHVDb2xvclZpZXdzIiwiZ2xGb3JtYXQiLCJnbFR5cGUiLCJHRlhGb3JtYXRJbmZvcyIsImN1ckZCTyIsImdsRnJhbWVidWZmZXIiLCJiaW5kRnJhbWVidWZmZXIiLCJGUkFNRUJVRkZFUiIsInZpZXciLCJyZWdpb24iLCJ3IiwiaCIsIm1lbVNpemUiLCJkYXRhIiwic3ViYXJyYXkiLCJyZWFkUGl4ZWxzIiwic3JjIiwiZHN0Iiwic3JjUmVjdCIsImRzdFJlY3QiLCJmaWx0ZXIiLCJwcmVmaXhlcyIsImkiLCJsZW5ndGgiLCJfZXh0IiwiYWN0aXZlVGV4dHVyZSIsIlRFWFRVUkUwIiwicGl4ZWxTdG9yZWkiLCJQQUNLX0FMSUdOTUVOVCIsIlVOUEFDS19BTElHTk1FTlQiLCJVTlBBQ0tfRkxJUF9ZX1dFQkdMIiwiZGlzYWJsZSIsIlNDSVNTT1JfVEVTVCIsImVuYWJsZSIsIkNVTExfRkFDRSIsImN1bGxGYWNlIiwiQkFDSyIsImZyb250RmFjZSIsIkNDVyIsIlBPTFlHT05fT0ZGU0VUX0ZJTEwiLCJwb2x5Z29uT2Zmc2V0IiwiREVQVEhfVEVTVCIsImRlcHRoTWFzayIsImRlcHRoRnVuYyIsIkxFU1MiLCJkZXB0aFJhbmdlIiwic3RlbmNpbEZ1bmNTZXBhcmF0ZSIsIkZST05UIiwiQUxXQVlTIiwic3RlbmNpbE9wU2VwYXJhdGUiLCJLRUVQIiwic3RlbmNpbE1hc2tTZXBhcmF0ZSIsIlNURU5DSUxfVEVTVCIsIlNBTVBMRV9BTFBIQV9UT19DT1ZFUkFHRSIsIkJMRU5EIiwiYmxlbmRFcXVhdGlvblNlcGFyYXRlIiwiRlVOQ19BREQiLCJibGVuZEZ1bmNTZXBhcmF0ZSIsIk9ORSIsIlpFUk8iLCJjb2xvck1hc2siLCJibGVuZENvbG9yIiwiR0ZYRGV2aWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztNQW9EYUEsYzs7Ozs7MEJBRStCO0FBQ3BDLGVBQU8sS0FBS0MsUUFBWjtBQUNIOzs7MEJBRXVDO0FBQ3BDLGVBQU8sS0FBS0MsTUFBWjtBQUNIOzs7MEJBRWtDO0FBQy9CLGVBQU8sS0FBS0MsWUFBWjtBQUNIOzs7MEJBRTJDO0FBQ3hDLGVBQU8sS0FBS0MscUJBQVo7QUFDSDs7OzBCQUU2QjtBQUMxQixlQUFPLEtBQUtDLE9BQVo7QUFDSDs7OzBCQUVtRjtBQUNoRixlQUFPLEtBQUtDLCtCQUFaO0FBQ0g7OzswQkFFbUQ7QUFDaEQsZUFBTyxLQUFLQyxlQUFaO0FBQ0g7OzswQkFFbUU7QUFDaEUsZUFBTyxLQUFLQyx1QkFBWjtBQUNIOzs7MEJBRXVDO0FBQ3BDLGVBQU8sS0FBS0MsU0FBWjtBQUNIOzs7MEJBRXFFO0FBQ2xFLGVBQU8sS0FBS0Msd0JBQVo7QUFDSDs7OzBCQUV1RTtBQUNwRSxlQUFPLEtBQUtDLHlCQUFaO0FBQ0g7OzswQkFFaUY7QUFDOUUsZUFBTyxLQUFLQyw4QkFBWjtBQUNIOzs7MEJBRW1GO0FBQ2hGLGVB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QUM2TixJQUExQixFQUFnQyxNQUFoQztBQUVBN04sUUFBQUEsRUFBRSxDQUFDd04sT0FBSCxDQUFXeE4sRUFBRSxDQUFDNk8sWUFBZCxFQTlCMkMsQ0FnQzNDOztBQUNBN08sUUFBQUEsRUFBRSxDQUFDd04sT0FBSCxDQUFXeE4sRUFBRSxDQUFDOE8sd0JBQWQ7QUFDQTlPLFFBQUFBLEVBQUUsQ0FBQ3dOLE9BQUgsQ0FBV3hOLEVBQUUsQ0FBQytPLEtBQWQ7QUFDQS9PLFFBQUFBLEVBQUUsQ0FBQ2dQLHFCQUFILENBQXlCaFAsRUFBRSxDQUFDaVAsUUFBNUIsRUFBc0NqUCxFQUFFLENBQUNpUCxRQUF6QztBQUNBalAsUUFBQUEsRUFBRSxDQUFDa1AsaUJBQUgsQ0FBcUJsUCxFQUFFLENBQUNtUCxHQUF4QixFQUE2Qm5QLEVBQUUsQ0FBQ29QLElBQWhDLEVBQXNDcFAsRUFBRSxDQUFDbVAsR0FBekMsRUFBOENuUCxFQUFFLENBQUNvUCxJQUFqRDtBQUNBcFAsUUFBQUEsRUFBRSxDQUFDcVAsU0FBSCxDQUFhLElBQWIsRUFBbUIsSUFBbkIsRUFBeUIsSUFBekIsRUFBK0IsSUFBL0I7QUFDQXJQLFFBQUFBLEVBQUUsQ0FBQ3NQLFVBQUgsQ0FBYyxHQUFkLEVBQW1CLEdBQW5CLEVBQXdCLEdBQXhCLEVBQTZCLEdBQTdCO0FBQ0g7Ozs7SUF4c0IrQkMsaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBTElQQVksIFJVTlRJTUVfQkFTRUQgfSBmcm9tICdpbnRlcm5hbDpjb25zdGFudHMnO1xyXG5pbXBvcnQgeyBtYWNybyB9IGZyb20gJy4uLy4uL3BsYXRmb3JtJztcclxuaW1wb3J0IHsgc3lzIH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vc3lzJztcclxuaW1wb3J0IHsgR0ZYQmluZGluZ0xheW91dCwgSUdGWEJpbmRpbmdMYXlvdXRJbmZvIH0gZnJvbSAnLi4vYmluZGluZy1sYXlvdXQnO1xyXG5pbXBvcnQgeyBHRlhCdWZmZXIsIElHRlhCdWZmZXJJbmZvIH0gZnJvbSAnLi4vYnVmZmVyJztcclxuaW1wb3J0IHsgR0ZYQ29tbWFuZEFsbG9jYXRvciwgSUdGWENvbW1hbmRBbGxvY2F0b3JJbmZvIH0gZnJvbSAnLi4vY29tbWFuZC1hbGxvY2F0b3InO1xyXG5pbXBvcnQgeyBHRlhDb21tYW5kQnVmZmVyLCBJR0ZYQ29tbWFuZEJ1ZmZlckluZm8gfSBmcm9tICcuLi9jb21tYW5kLWJ1ZmZlcic7XHJcbmltcG9ydCB7XHJcbiAgICBnZXRUeXBlZEFycmF5Q29uc3RydWN0b3IsXHJcbiAgICBHRlhCdWZmZXJUZXh0dXJlQ29weSxcclxuICAgIEdGWENvbW1hbmRCdWZmZXJUeXBlLFxyXG4gICAgR0ZYRmlsdGVyLFxyXG4gICAgR0ZYRm9ybWF0LFxyXG4gICAgR0ZYRm9ybWF0SW5mb3MsXHJcbiAgICBHRlhGb3JtYXRTaXplLFxyXG4gICAgR0ZYUXVldWVUeXBlLFxyXG4gICAgR0ZYVGV4dHVyZUZsYWdCaXQsXHJcbiAgICBHRlhUZXh0dXJlVHlwZSxcclxuICAgIEdGWFRleHR1cmVVc2FnZUJpdCxcclxuICAgIElHRlhSZWN0LFxyXG59IGZyb20gJy4uL2RlZmluZSc7XHJcbmltcG9ydCB7IEdGWEFQSSwgR0ZYRGV2aWNlLCBHRlhGZWF0dXJlLCBJR0ZYRGV2aWNlSW5mbyB9IGZyb20gJy4uL2RldmljZSc7XHJcbmltcG9ydCB7IEdGWEZyYW1lYnVmZmVyLCBJR0ZYRnJhbWVidWZmZXJJbmZvIH0gZnJvbSAnLi4vZnJhbWVidWZmZXInO1xyXG5pbXBvcnQgeyBHRlhJbnB1dEFzc2VtYmxlciwgSUdGWElucHV0QXNzZW1ibGVySW5mbyB9IGZyb20gJy4uL2lucHV0LWFzc2VtYmxlcic7XHJcbmltcG9ydCB7IEdGWFBpcGVsaW5lTGF5b3V0LCBJR0ZYUGlwZWxpbmVMYXlvdXRJbmZvIH0gZnJvbSAnLi4vcGlwZWxpbmUtbGF5b3V0JztcclxuaW1wb3J0IHsgR0ZYUGlwZWxpbmVTdGF0ZSwgSUdGWFBpcGVsaW5lU3RhdGVJbmZvIH0gZnJvbSAnLi4vcGlwZWxpbmUtc3RhdGUnO1xyXG5pbXBvcnQgeyBHRlhRdWV1ZSwgSUdGWFF1ZXVlSW5mbyB9IGZyb20gJy4uL3F1ZXVlJztcclxuaW1wb3J0IHsgR0ZYUmVuZGVyUGFzcywgSUdGWFJlbmRlclBhc3NJbmZvIH0gZnJvbSAnLi4vcmVuZGVyLXBhc3MnO1xyXG5pbXBvcnQgeyBHRlhTYW1wbGVyLCBJR0ZYU2FtcGxlckluZm8gfSBmcm9tICcuLi9zYW1wbGVyJztcclxuaW1wb3J0IHsgR0ZYU2hhZGVyLCBJR0ZYU2hhZGVySW5mbyB9IGZyb20gJy4uL3NoYWRlcic7XHJcbmltcG9ydCB7IEdGWFRleHR1cmUsIElHRlhUZXh0dXJlSW5mbyB9IGZyb20gJy4uL3RleHR1cmUnO1xyXG5pbXBvcnQgeyBHRlhUZXh0dXJlVmlldywgSUdGWFRleHR1cmVWaWV3SW5mbyB9IGZyb20gJy4uL3RleHR1cmUtdmlldyc7XHJcbmltcG9ydCB7IEdGWFdpbmRvdywgSUdGWFdpbmRvd0luZm8gfSBmcm9tICcuLi93aW5kb3cnO1xyXG5pbXBvcnQgeyBXZWJHTEdGWEJpbmRpbmdMYXlvdXQgfSBmcm9tICcuL3dlYmdsLWJpbmRpbmctbGF5b3V0JztcclxuaW1wb3J0IHsgV2ViR0xHRlhCdWZmZXIgfSBmcm9tICcuL3dlYmdsLWJ1ZmZlcic7XHJcbmltcG9ydCB7IFdlYkdMR0ZYQ29tbWFuZEFsbG9jYXRvciB9IGZyb20gJy4vd2ViZ2wtY29tbWFuZC1hbGxvY2F0b3InO1xyXG5pbXBvcnQgeyBXZWJHTEdGWENvbW1hbmRCdWZmZXIgfSBmcm9tICcuL3dlYmdsLWNvbW1hbmQtYnVmZmVyJztcclxuaW1wb3J0IHsgR0ZYRm9ybWF0VG9XZWJHTEZvcm1hdCwgR0ZYRm9ybWF0VG9XZWJHTFR5cGUsIFdlYkdMQ21kRnVuY0NvcHlCdWZmZXJzVG9UZXh0dXJlLCBXZWJHTENtZEZ1bmNDb3B5VGV4SW1hZ2VzVG9UZXh0dXJlIH0gZnJvbSAnLi93ZWJnbC1jb21tYW5kcyc7XHJcbmltcG9ydCB7IFdlYkdMR0ZYRnJhbWVidWZmZXIgfSBmcm9tICcuL3dlYmdsLWZyYW1lYnVmZmVyJztcclxuaW1wb3J0IHsgV2ViR0xHRlhJbnB1dEFzc2VtYmxlciB9IGZyb20gJy4vd2ViZ2wtaW5wdXQtYXNzZW1ibGVyJztcclxuaW1wb3J0IHsgV2ViR0xHRlhQaXBlbGluZUxheW91dCB9IGZyb20gJy4vd2ViZ2wtcGlwZWxpbmUtbGF5b3V0JztcclxuaW1wb3J0IHsgV2ViR0xHRlhQaXBlbGluZVN0YXRlIH0gZnJvbSAnLi93ZWJnbC1waXBlbGluZS1zdGF0ZSc7XHJcbmltcG9ydCB7IFdlYkdMR0ZYUHJpbWFyeUNvbW1hbmRCdWZmZXIgfSBmcm9tICcuL3dlYmdsLXByaW1hcnktY29tbWFuZC1idWZmZXInO1xyXG5pbXBvcnQgeyBXZWJHTEdGWFF1ZXVlIH0gZnJvbSAnLi93ZWJnbC1xdWV1ZSc7XHJcbmltcG9ydCB7IFdlYkdMR0ZYUmVuZGVyUGFzcyB9IGZyb20gJy4vd2ViZ2wtcmVuZGVyLXBhc3MnO1xyXG5pbXBvcnQgeyBXZWJHTEdGWFNhbXBsZXIgfSBmcm9tICcuL3dlYmdsLXNhbXBsZXInO1xyXG5pbXBvcnQgeyBXZWJHTEdGWFNoYWRlciB9IGZyb20gJy4vd2ViZ2wtc2hhZGVyJztcclxuaW1wb3J0IHsgV2ViR0xTdGF0ZUNhY2hlIH0gZnJvbSAnLi93ZWJnbC1zdGF0ZS1jYWNoZSc7XHJcbmltcG9ydCB7IFdlYkdMR0ZYVGV4dHVyZSB9IGZyb20gJy4vd2ViZ2wtdGV4dHVyZSc7XHJcbmltcG9ydCB7IFdlYkdMR0ZYVGV4dHVyZVZpZXcgfSBmcm9tICcuL3dlYmdsLXRleHR1cmUtdmlldyc7XHJcbmltcG9ydCB7IFdlYkdMR0ZYV2luZG93IH0gZnJvbSAnLi93ZWJnbC13aW5kb3cnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdlYkdMR0ZYRGV2aWNlIGV4dGVuZHMgR0ZYRGV2aWNlIHtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGdsICgpOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93ZWJHTFJDIGFzIFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHdlYkdMUXVldWUgKCk6IFdlYkdMR0ZYUXVldWUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9xdWV1ZSBhcyBXZWJHTEdGWFF1ZXVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNBbnRpYWxpYXMgKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0FudGlhbGlhcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzUHJlbXVsdGlwbGllZEFscGhhICgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNQcmVtdWx0aXBsaWVkQWxwaGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB1c2VWQU8gKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VWQU87XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMgKCk6IEVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYyB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBFWFRfZnJhZ19kZXB0aCAoKTogRVhUX2ZyYWdfZGVwdGggfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fRVhUX2ZyYWdfZGVwdGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBFWFRfc2hhZGVyX3RleHR1cmVfbG9kICgpOiBFWFRfc2hhZGVyX3RleHR1cmVfbG9kIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX0VYVF9zaGFkZXJfdGV4dHVyZV9sb2Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBFWFRfc1JHQiAoKTogRVhUX3NSR0IgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fRVhUX3NSR0I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBPRVNfdmVydGV4X2FycmF5X29iamVjdCAoKTogT0VTX3ZlcnRleF9hcnJheV9vYmplY3QgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fT0VTX3ZlcnRleF9hcnJheV9vYmplY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQgKCk6IFdFQkdMX2NvbG9yX2J1ZmZlcl9mbG9hdCB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9XRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMSAoKTogV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzEgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMgKCk6IFdFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YyB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfYXN0YyAoKTogV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGMgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YyAoKTogV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y19zcmdiICgpOiBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y19zcmdiIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjX3NyZ2I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9kZWJ1Z19zaGFkZXJzICgpOiBXRUJHTF9kZWJ1Z19zaGFkZXJzIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX1dFQkdMX2RlYnVnX3NoYWRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9kcmF3X2J1ZmZlcnMgKCk6IFdFQkdMX2RyYXdfYnVmZmVycyB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9XRUJHTF9kcmF3X2J1ZmZlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9sb3NlX2NvbnRleHQgKCk6IFdFQkdMX2xvc2VfY29udGV4dCB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9XRUJHTF9sb3NlX2NvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9kZXB0aF90ZXh0dXJlICgpOiBXRUJHTF9kZXB0aF90ZXh0dXJlIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX1dFQkdMX2RlcHRoX3RleHR1cmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBXRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvICgpOiBXRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX1dFQkdMX2RlYnVnX3JlbmRlcmVyX2luZm87XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0ICgpOiBPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0IHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX09FU190ZXh0dXJlX2hhbGZfZmxvYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhciAoKTogT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXIgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBPRVNfdGV4dHVyZV9mbG9hdCAoKTogT0VTX3RleHR1cmVfZmxvYXQgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fT0VTX3RleHR1cmVfZmxvYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgKCk6IE9FU19zdGFuZGFyZF9kZXJpdmF0aXZlcyB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBPRVNfZWxlbWVudF9pbmRleF91aW50ICgpOiBPRVNfZWxlbWVudF9pbmRleF91aW50IHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX09FU19lbGVtZW50X2luZGV4X3VpbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzICgpOiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX0FOR0xFX2luc3RhbmNlZF9hcnJheXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRlQ2FjaGU6IFdlYkdMU3RhdGVDYWNoZSA9IG5ldyBXZWJHTFN0YXRlQ2FjaGUoKTtcclxuICAgIHB1YmxpYyBudWxsVGV4MkQ6IFdlYkdMR0ZYVGV4dHVyZSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHVibGljIG51bGxUZXhDdWJlOiBXZWJHTEdGWFRleHR1cmUgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIF93ZWJHTFJDOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX2lzQW50aWFsaWFzOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX2lzUHJlbXVsdGlwbGllZEFscGhhOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX3VzZVZBTzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfZXh0ZW5zaW9uczogc3RyaW5nW10gfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYzogRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9FWFRfZnJhZ19kZXB0aDogRVhUX2ZyYWdfZGVwdGggfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX0VYVF9zaGFkZXJfdGV4dHVyZV9sb2Q6IEVYVF9zaGFkZXJfdGV4dHVyZV9sb2QgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX0VYVF9zUkdCOiBFWFRfc1JHQiB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfT0VTX3ZlcnRleF9hcnJheV9vYmplY3Q6IE9FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9FWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXQ6IEVYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdCB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfV0VCR0xfY29sb3JfYnVmZmVyX2Zsb2F0OiBXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxOiBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzogV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YyB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjOiBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9hc3RjOiBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfYXN0YyB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGM6IFdFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y19zcmdiOiBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y19zcmdiIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9XRUJHTF9kZWJ1Z19zaGFkZXJzOiBXRUJHTF9kZWJ1Z19zaGFkZXJzIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9XRUJHTF9kcmF3X2J1ZmZlcnM6IFdFQkdMX2RyYXdfYnVmZmVycyB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfV0VCR0xfbG9zZV9jb250ZXh0OiBXRUJHTF9sb3NlX2NvbnRleHQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX1dFQkdMX2RlcHRoX3RleHR1cmU6IFdFQkdMX2RlcHRoX3RleHR1cmUgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX1dFQkdMX2RlYnVnX3JlbmRlcmVyX2luZm86IFdFQkdMX2RlYnVnX3JlbmRlcmVyX2luZm8gfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX09FU190ZXh0dXJlX2hhbGZfZmxvYXQ6IE9FU190ZXh0dXJlX2hhbGZfZmxvYXQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX09FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyOiBPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhciB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfT0VTX3RleHR1cmVfZmxvYXQ6IE9FU190ZXh0dXJlX2Zsb2F0IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9PRVNfdGV4dHVyZV9mbG9hdF9saW5lYXI6IE9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhciB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzOiBPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX09FU19lbGVtZW50X2luZGV4X3VpbnQ6IE9FU19lbGVtZW50X2luZGV4X3VpbnQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX0FOR0xFX2luc3RhbmNlZF9hcnJheXM6IEFOR0xFX2luc3RhbmNlZF9hcnJheXMgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZSAoaW5mbzogSUdGWERldmljZUluZm8pOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FudmFzID0gaW5mby5jYW52YXNFbG0gYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5faXNBbnRpYWxpYXMgPSBpbmZvLmlzQW50aWFsaWFzICE9PSB1bmRlZmluZWQgPyBpbmZvLmlzQW50aWFsaWFzIDogdHJ1ZTtcclxuICAgICAgICB0aGlzLl9pc1ByZW11bHRpcGxpZWRBbHBoYSA9IGluZm8uaXNQcmVtdWx0aXBsaWVkQWxwaGEgIT09IHVuZGVmaW5lZCA/IGluZm8uaXNQcmVtdWx0aXBsaWVkQWxwaGEgOiB0cnVlO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWJHTEN0eEF0dHJpYnM6IFdlYkdMQ29udGV4dEF0dHJpYnV0ZXMgPSB7XHJcbiAgICAgICAgICAgICAgICBhbHBoYTogbWFjcm8uRU5BQkxFX1RSQU5TUEFSRU5UX0NBTlZBUyxcclxuICAgICAgICAgICAgICAgIGFudGlhbGlhczogdGhpcy5faXNBbnRpYWxpYXMsXHJcbiAgICAgICAgICAgICAgICBkZXB0aDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHN0ZW5jaWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmVtdWx0aXBsaWVkQWxwaGE6IHRoaXMuX2lzUHJlbXVsdGlwbGllZEFscGhhLFxyXG4gICAgICAgICAgICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHBvd2VyUHJlZmVyZW5jZTogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDogZmFsc2UsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBpZiAoY2Muc3lzLnBsYXRmb3JtID09PSBjYy5zeXMuV0VDSEFUX0dBTUUgfHxcclxuICAgICAgICAgICAgICAgIGNjLnN5cy5wbGF0Zm9ybSA9PT0gY2Muc3lzLlFRX1BMQVkpIHtcclxuICAgICAgICAgICAgICAgIHdlYkdMQ3R4QXR0cmlicy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICB0aGlzLl93ZWJHTFJDID0gdGhpcy5fY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywgd2ViR0xDdHhBdHRyaWJzKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX3dlYkdMUkMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhpcyBkZXZpY2UgZG9lcyBub3Qgc3VwcG9ydCBXZWJHTC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY2FudmFzMkQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1dlYkdMIGRldmljZSBpbml0aWFsaXplZC4nKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZ2Z4QVBJID0gR0ZYQVBJLldFQkdMO1xyXG4gICAgICAgIHRoaXMuX2RldmljZU5hbWUgPSAnV2ViR0wnO1xyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5fd2ViR0xSQztcclxuXHJcbiAgICAgICAgdGhpcy5fV0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbyA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX1dFQkdMX2RlYnVnX3JlbmRlcmVyX2luZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSBnbC5nZXRQYXJhbWV0ZXIodGhpcy5fV0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mby5VTk1BU0tFRF9SRU5ERVJFUl9XRUJHTCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZlbmRvciA9IGdsLmdldFBhcmFtZXRlcih0aGlzLl9XRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvLlVOTUFTS0VEX1ZFTkRPUl9XRUJHTCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuUkVOREVSRVIpO1xyXG4gICAgICAgICAgICB0aGlzLl92ZW5kb3IgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVORE9SKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3ZlcnNpb24gPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVSU0lPTik7XHJcbiAgICAgICAgdGhpcy5fbWF4VmVydGV4QXR0cmlidXRlcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX0FUVFJJQlMpO1xyXG4gICAgICAgIHRoaXMuX21heFZlcnRleFVuaWZvcm1WZWN0b3JzID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTKTtcclxuICAgICAgICB0aGlzLl9tYXhGcmFnbWVudFVuaWZvcm1WZWN0b3JzID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9GUkFHTUVOVF9VTklGT1JNX1ZFQ1RPUlMpO1xyXG4gICAgICAgIHRoaXMuX21heFRleHR1cmVVbml0cyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7XHJcbiAgICAgICAgdGhpcy5fbWF4VmVydGV4VGV4dHVyZVVuaXRzID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7XHJcbiAgICAgICAgdGhpcy5fbWF4VGV4dHVyZVNpemUgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfU0laRSk7XHJcbiAgICAgICAgdGhpcy5fbWF4Q3ViZU1hcFRleHR1cmVTaXplID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9DVUJFX01BUF9URVhUVVJFX1NJWkUpO1xyXG4gICAgICAgIHRoaXMuX2RlcHRoQml0cyA9IGdsLmdldFBhcmFtZXRlcihnbC5ERVBUSF9CSVRTKTtcclxuICAgICAgICB0aGlzLl9zdGVuY2lsQml0cyA9IGdsLmdldFBhcmFtZXRlcihnbC5TVEVOQ0lMX0JJVFMpO1xyXG5cclxuICAgICAgICBpZiAoQUxJUEFZKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlcHRoQml0cyA9IDI0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyA9IGluZm8uZGV2aWNlUGl4ZWxSYXRpbyB8fCAxLjA7XHJcbiAgICAgICAgdGhpcy5fd2lkdGggPSB0aGlzLl9jYW52YXMud2lkdGg7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gdGhpcy5fY2FudmFzLmhlaWdodDtcclxuICAgICAgICB0aGlzLl9uYXRpdmVXaWR0aCA9IE1hdGgubWF4KGluZm8ubmF0aXZlV2lkdGggfHwgdGhpcy5fd2lkdGgsIDApO1xyXG4gICAgICAgIHRoaXMuX25hdGl2ZUhlaWdodCA9IE1hdGgubWF4KGluZm8ubmF0aXZlSGVpZ2h0IHx8IHRoaXMuX2hlaWdodCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbG9yRm10ID0gR0ZYRm9ybWF0LlJHQkE4O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fZGVwdGhCaXRzID09PSAyNCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc3RlbmNpbEJpdHMgPT09IDgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoU3RlbmNpbEZtdCA9IEdGWEZvcm1hdC5EMjRTODtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoU3RlbmNpbEZtdCA9IEdGWEZvcm1hdC5EMjQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc3RlbmNpbEJpdHMgPT09IDgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoU3RlbmNpbEZtdCA9IEdGWEZvcm1hdC5EMTZTODtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoU3RlbmNpbEZtdCA9IEdGWEZvcm1hdC5EMTY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2V4dGVuc2lvbnMgPSBnbC5nZXRTdXBwb3J0ZWRFeHRlbnNpb25zKCk7XHJcbiAgICAgICAgbGV0IGV4dGVuc2lvbnMgPSAnJztcclxuICAgICAgICBpZiAodGhpcy5fZXh0ZW5zaW9ucykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV4dCBvZiB0aGlzLl9leHRlbnNpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zICs9IGV4dCArICcgJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnRVhURU5TSU9OUzogJyArIGV4dGVuc2lvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljID0gdGhpcy5nZXRFeHRlbnNpb24oJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO1xyXG4gICAgICAgIHRoaXMuX0VYVF9mcmFnX2RlcHRoID0gdGhpcy5nZXRFeHRlbnNpb24oJ0VYVF9mcmFnX2RlcHRoJyk7XHJcbiAgICAgICAgdGhpcy5fRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdFWFRfc2hhZGVyX3RleHR1cmVfbG9kJyk7XHJcbiAgICAgICAgdGhpcy5fRVhUX3NSR0IgPSB0aGlzLmdldEV4dGVuc2lvbignRVhUX3NSR0InKTtcclxuICAgICAgICB0aGlzLl9PRVNfdmVydGV4X2FycmF5X29iamVjdCA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdPRVNfdmVydGV4X2FycmF5X29iamVjdCcpO1xyXG4gICAgICAgIHRoaXMuX0VYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdCA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdFWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXQnKTtcclxuICAgICAgICB0aGlzLl9XRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQgPSB0aGlzLmdldEV4dGVuc2lvbignV0VCR0xfY29sb3JfYnVmZmVyX2Zsb2F0Jyk7XHJcbiAgICAgICAgdGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzEgPSB0aGlzLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzEnKTtcclxuICAgICAgICB0aGlzLl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjID0gdGhpcy5nZXRFeHRlbnNpb24oJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMnKTtcclxuICAgICAgICB0aGlzLl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMgPSB0aGlzLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyk7XHJcbiAgICAgICAgdGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGMgPSB0aGlzLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGMnKTtcclxuICAgICAgICB0aGlzLl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YyA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpO1xyXG4gICAgICAgIHRoaXMuX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjX3NyZ2IgPSB0aGlzLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNfc3JnYicpO1xyXG4gICAgICAgIHRoaXMuX1dFQkdMX2RlYnVnX3NoYWRlcnMgPSB0aGlzLmdldEV4dGVuc2lvbignV0VCR0xfZGVidWdfc2hhZGVycycpO1xyXG4gICAgICAgIHRoaXMuX1dFQkdMX2RyYXdfYnVmZmVycyA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kcmF3X2J1ZmZlcnMnKTtcclxuICAgICAgICB0aGlzLl9XRUJHTF9sb3NlX2NvbnRleHQgPSB0aGlzLmdldEV4dGVuc2lvbignV0VCR0xfbG9zZV9jb250ZXh0Jyk7XHJcbiAgICAgICAgdGhpcy5fV0VCR0xfZGVwdGhfdGV4dHVyZSA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZXB0aF90ZXh0dXJlJyk7XHJcbiAgICAgICAgdGhpcy5fT0VTX3RleHR1cmVfaGFsZl9mbG9hdCA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0Jyk7XHJcbiAgICAgICAgdGhpcy5fT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXIgPSB0aGlzLmdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXInKTtcclxuICAgICAgICB0aGlzLl9PRVNfdGV4dHVyZV9mbG9hdCA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdCcpO1xyXG4gICAgICAgIHRoaXMuX09FU190ZXh0dXJlX2Zsb2F0X2xpbmVhciA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInKTtcclxuICAgICAgICB0aGlzLl9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgPSB0aGlzLmdldEV4dGVuc2lvbignT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJyk7XHJcbiAgICAgICAgdGhpcy5fT0VTX2VsZW1lbnRfaW5kZXhfdWludCA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdPRVNfZWxlbWVudF9pbmRleF91aW50Jyk7XHJcbiAgICAgICAgdGhpcy5fQU5HTEVfaW5zdGFuY2VkX2FycmF5cyA9IHRoaXMuZ2V0RXh0ZW5zaW9uKCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7XHJcblxyXG4gICAgICAgIGlmIChBTElQQVkpIHtcclxuICAgICAgICAgICAgdGhpcy5fV0VCR0xfZGVwdGhfdGV4dHVyZSA9IHsgVU5TSUdORURfSU5UXzI0XzhfV0VCR0w6IDB4ODRGQSB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN5cy5icm93c2VyVHlwZSA9PT0gc3lzLkJST1dTRVJfVFlQRV9VQykge1xyXG4gICAgICAgICAgICB0aGlzLl9BTkdMRV9pbnN0YW5jZWRfYXJyYXlzID0gbnVsbDsgLy8gVUMgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBkb2Vzbid0IHdvcmtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2ZlYXR1cmVzLmZpbGwoZmFsc2UpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fV0VCR0xfY29sb3JfYnVmZmVyX2Zsb2F0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZlYXR1cmVzW0dGWEZlYXR1cmUuQ09MT1JfRkxPQVRdID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9FWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmVhdHVyZXNbR0ZYRmVhdHVyZS5DT0xPUl9IQUxGX0ZMT0FUXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fT0VTX3RleHR1cmVfZmxvYXQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmVhdHVyZXNbR0ZYRmVhdHVyZS5URVhUVVJFX0ZMT0FUXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fT0VTX3RleHR1cmVfaGFsZl9mbG9hdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9mZWF0dXJlc1tHRlhGZWF0dXJlLlRFWFRVUkVfSEFMRl9GTE9BVF0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX09FU190ZXh0dXJlX2Zsb2F0X2xpbmVhcikge1xyXG4gICAgICAgICAgICB0aGlzLl9mZWF0dXJlc1tHRlhGZWF0dXJlLlRFWFRVUkVfRkxPQVRfTElORUFSXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmVhdHVyZXNbR0ZYRmVhdHVyZS5URVhUVVJFX0hBTEZfRkxPQVRfTElORUFSXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fV0VCR0xfZGVwdGhfdGV4dHVyZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9mZWF0dXJlc1tHRlhGZWF0dXJlLkZPUk1BVF9EMjRTOF0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX09FU19lbGVtZW50X2luZGV4X3VpbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmVhdHVyZXNbR0ZYRmVhdHVyZS5FTEVNRU5UX0lOREVYX1VJTlRdID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9BTkdMRV9pbnN0YW5jZWRfYXJyYXlzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZlYXR1cmVzW0dGWEZlYXR1cmUuSU5TVEFOQ0VEX0FSUkFZU10gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNvbXByZXNzZWRGb3JtYXQ6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzEpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmVhdHVyZXNbR0ZYRmVhdHVyZS5GT1JNQVRfRVRDMV0gPSB0cnVlO1xyXG4gICAgICAgICAgICBjb21wcmVzc2VkRm9ybWF0ICs9ICdldGMxICc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0Yykge1xyXG4gICAgICAgICAgICB0aGlzLl9mZWF0dXJlc1tHRlhGZWF0dXJlLkZPUk1BVF9FVEMyXSA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbXByZXNzZWRGb3JtYXQgKz0gJ2V0YzIgJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Yykge1xyXG4gICAgICAgICAgICB0aGlzLl9mZWF0dXJlc1tHRlhGZWF0dXJlLkZPUk1BVF9EWFRdID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29tcHJlc3NlZEZvcm1hdCArPSAnZHh0ICc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZlYXR1cmVzW0dGWEZlYXR1cmUuRk9STUFUX1BWUlRDXSA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbXByZXNzZWRGb3JtYXQgKz0gJ3B2cnRjICc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGMpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmVhdHVyZXNbR0ZYRmVhdHVyZS5GT1JNQVRfQVNUQ10gPSB0cnVlO1xyXG4gICAgICAgICAgICBjb21wcmVzc2VkRm9ybWF0ICs9ICdhc3RjICc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9mZWF0dXJlc1tHRlhGZWF0dXJlLk1TQUFdID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9PRVNfdmVydGV4X2FycmF5X29iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAoUlVOVElNRV9CQVNFRCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsb2FkUnVudGltZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgbG9hZFJ1bnRpbWUoKS5nZXRGZWF0dXJlID09PSAnZnVuY3Rpb24nICYmIGxvYWRSdW50aW1lKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldEZlYXR1cmUoJ3dlYmdsLmV4dGVuc2lvbnMub2VzX3ZlcnRleF9hcnJheV9vYmplY3QucmV2aXNpb24nKSA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXNlVkFPID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHsgdGhpcy5fdXNlVkFPID0gdHJ1ZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKChzeXMucGxhdGZvcm0gPT09IHN5cy5XRUNIQVRfR0FNRSAmJiBzeXMub3MgPT09IHN5cy5PU19BTkRST0lEKSkge1xyXG4gICAgICAgICAgICBnbC5kZXRhY2hTaGFkZXIgPSAoKSA9PiB7fTsgLy8gQW5kcm9pZCBXZUNoYXQgbWF5IHRocm93IGVycm9ycyBvbiBkZXRhY2ggc2hhZGVyXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmluZm8oJ1JFTkRFUkVSOiAnICsgdGhpcy5fcmVuZGVyZXIpO1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnVkVORE9SOiAnICsgdGhpcy5fdmVuZG9yKTtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1ZFUlNJT046ICcgKyB0aGlzLl92ZXJzaW9uKTtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ0RQUjogJyArIHRoaXMuX2RldmljZVBpeGVsUmF0aW8pO1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnU0NSRUVOX1NJWkU6ICcgKyB0aGlzLl93aWR0aCArICcgeCAnICsgdGhpcy5faGVpZ2h0KTtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ05BVElWRV9TSVpFOiAnICsgdGhpcy5fbmF0aXZlV2lkdGggKyAnIHggJyArIHRoaXMuX25hdGl2ZUhlaWdodCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5pbmZvKCdDT0xPUl9GT1JNQVQ6ICcgKyBHRlhGb3JtYXRJbmZvc1t0aGlzLl9jb2xvckZtdF0ubmFtZSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5pbmZvKCdERVBUSF9TVEVOQ0lMX0ZPUk1BVDogJyArIEdGWEZvcm1hdEluZm9zW3RoaXMuX2RlcHRoU3RlbmNpbEZtdF0ubmFtZSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5pbmZvKCdNQVhfVkVSVEVYX0FUVFJJQlM6ICcgKyB0aGlzLl9tYXhWZXJ0ZXhBdHRyaWJ1dGVzKTtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ01BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTOiAnICsgdGhpcy5fbWF4VmVydGV4VW5pZm9ybVZlY3RvcnMpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUuaW5mbygnTUFYX0ZSQUdNRU5UX1VOSUZPUk1fVkVDVE9SUzogJyArIHRoaXMuX21heEZyYWdtZW50VW5pZm9ybVZlY3RvcnMpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUuaW5mbygnTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFM6ICcgKyB0aGlzLl9tYXhUZXh0dXJlVW5pdHMpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUuaW5mbygnTUFYX1ZFUlRFWF9URVhUVVJFX0lNQUdFX1VOSVRTOiAnICsgdGhpcy5fbWF4VmVydGV4VGV4dHVyZVVuaXRzKTtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ0RFUFRIX0JJVFM6ICcgKyB0aGlzLl9kZXB0aEJpdHMpO1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnU1RFTkNJTF9CSVRTOiAnICsgdGhpcy5fc3RlbmNpbEJpdHMpO1xyXG4gICAgICAgIGlmICh0aGlzLl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdNQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQ6ICcgKyB0aGlzLl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMuTUFYX1RFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCdVU0VfVkFPOiAnICsgdGhpcy5fdXNlVkFPKTtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ0NPTVBSRVNTRURfRk9STUFUOiAnICsgY29tcHJlc3NlZEZvcm1hdCk7XHJcblxyXG4gICAgICAgIC8vIGluaXQgc3RhdGVzXHJcbiAgICAgICAgdGhpcy5pbml0U3RhdGVzKGdsKTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIHF1ZXVlXHJcbiAgICAgICAgdGhpcy5fcXVldWUgPSB0aGlzLmNyZWF0ZVF1ZXVlKHsgdHlwZTogR0ZYUXVldWVUeXBlLkdSQVBISUNTIH0pO1xyXG5cclxuICAgICAgICAvLyBjcmVhdGUgcHJpbWFyeSB3aW5kb3dcclxuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLl93ZWJHTFJDLmNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9tYWluV2luZG93ID0gdGhpcy5jcmVhdGVXaW5kb3coe1xyXG4gICAgICAgICAgICB0aXRsZTogY2FudmFzLnRpdGxlIHx8ICcnLFxyXG4gICAgICAgICAgICBsZWZ0OiBjYW52YXMub2Zmc2V0TGVmdCB8fCAwLFxyXG4gICAgICAgICAgICB0b3A6IGNhbnZhcy5vZmZzZXRUb3AgfHwgMCxcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMuX3dlYkdMUkMuZHJhd2luZ0J1ZmZlcldpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuX3dlYkdMUkMuZHJhd2luZ0J1ZmZlckhlaWdodCxcclxuICAgICAgICAgICAgY29sb3JGbXQ6IHRoaXMuX2NvbG9yRm10LFxyXG4gICAgICAgICAgICBkZXB0aFN0ZW5jaWxGbXQ6IHRoaXMuX2RlcHRoU3RlbmNpbEZtdCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fY21kQWxsb2NhdG9yID0gdGhpcy5jcmVhdGVDb21tYW5kQWxsb2NhdG9yKHt9KTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIGRlZmF1bHQgbnVsbCB0ZXh0dXJlXHJcbiAgICAgICAgdGhpcy5udWxsVGV4MkQgPSBuZXcgV2ViR0xHRlhUZXh0dXJlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubnVsbFRleDJELmluaXRpYWxpemUoe1xyXG4gICAgICAgICAgICB0eXBlOiBHRlhUZXh0dXJlVHlwZS5URVgyRCxcclxuICAgICAgICAgICAgdXNhZ2U6IEdGWFRleHR1cmVVc2FnZUJpdC5TQU1QTEVELFxyXG4gICAgICAgICAgICBmb3JtYXQ6IEdGWEZvcm1hdC5SR0JBOCxcclxuICAgICAgICAgICAgd2lkdGg6IDIsXHJcbiAgICAgICAgICAgIGhlaWdodDogMixcclxuICAgICAgICAgICAgZmxhZ3M6IEdGWFRleHR1cmVGbGFnQml0LkdFTl9NSVBNQVAsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMubnVsbFRleEN1YmUgPSBuZXcgV2ViR0xHRlhUZXh0dXJlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubnVsbFRleEN1YmUuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgIHR5cGU6IEdGWFRleHR1cmVUeXBlLlRFWDJELFxyXG4gICAgICAgICAgICB1c2FnZTogR0ZYVGV4dHVyZVVzYWdlQml0LlNBTVBMRUQsXHJcbiAgICAgICAgICAgIGZvcm1hdDogR0ZYRm9ybWF0LlJHQkE4LFxyXG4gICAgICAgICAgICB3aWR0aDogMixcclxuICAgICAgICAgICAgaGVpZ2h0OiAyLFxyXG4gICAgICAgICAgICBhcnJheUxheWVyOiA2LFxyXG4gICAgICAgICAgICBmbGFnczogR0ZYVGV4dHVyZUZsYWdCaXQuQ1VCRU1BUCB8ICBHRlhUZXh0dXJlRmxhZ0JpdC5HRU5fTUlQTUFQLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBudWxsVGV4UmVnaW9uOiBHRlhCdWZmZXJUZXh0dXJlQ29weSA9IHtcclxuICAgICAgICAgICAgYnVmZk9mZnNldDogMCxcclxuICAgICAgICAgICAgYnVmZlN0cmlkZTogMCxcclxuICAgICAgICAgICAgYnVmZlRleEhlaWdodDogMCxcclxuICAgICAgICAgICAgdGV4T2Zmc2V0OiB7XHJcbiAgICAgICAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgICAgIHo6IDAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRleEV4dGVudDoge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDIsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIsXHJcbiAgICAgICAgICAgICAgICBkZXB0aDogMSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGV4U3VicmVzOiB7XHJcbiAgICAgICAgICAgICAgICBiYXNlTWlwTGV2ZWw6IDAsXHJcbiAgICAgICAgICAgICAgICBsZXZlbENvdW50OiAxLFxyXG4gICAgICAgICAgICAgICAgYmFzZUFycmF5TGF5ZXI6IDAsXHJcbiAgICAgICAgICAgICAgICBsYXllckNvdW50OiAxLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG51bGxUZXhCdWZmID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5udWxsVGV4MkQuc2l6ZSk7XHJcbiAgICAgICAgbnVsbFRleEJ1ZmYuZmlsbCgwKTtcclxuICAgICAgICB0aGlzLmNvcHlCdWZmZXJzVG9UZXh0dXJlKFtudWxsVGV4QnVmZl0sIHRoaXMubnVsbFRleDJELCBbbnVsbFRleFJlZ2lvbl0pO1xyXG5cclxuICAgICAgICBudWxsVGV4UmVnaW9uLnRleFN1YnJlcy5sYXllckNvdW50ID0gNjtcclxuICAgICAgICB0aGlzLmNvcHlCdWZmZXJzVG9UZXh0dXJlKFxyXG4gICAgICAgICAgICBbbnVsbFRleEJ1ZmYsIG51bGxUZXhCdWZmLCBudWxsVGV4QnVmZiwgbnVsbFRleEJ1ZmYsIG51bGxUZXhCdWZmLCBudWxsVGV4QnVmZl0sXHJcbiAgICAgICAgICAgIHRoaXMubnVsbFRleEN1YmUsIFtudWxsVGV4UmVnaW9uXSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95ICgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubnVsbFRleDJEKSB7XHJcbiAgICAgICAgICAgIHRoaXMubnVsbFRleDJELmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5udWxsVGV4MkQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubnVsbFRleEN1YmUpIHtcclxuICAgICAgICAgICAgdGhpcy5udWxsVGV4Q3ViZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMubnVsbFRleEN1YmUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX21haW5XaW5kb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFpbldpbmRvdy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21haW5XaW5kb3cgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NtZEFsbG9jYXRvcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jbWRBbGxvY2F0b3IuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jbWRBbGxvY2F0b3IgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3F1ZXVlLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5fcXVldWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fd2ViR0xSQyA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlc2l6ZSAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fd2lkdGggIT09IHdpZHRoIHx8IHRoaXMuX2hlaWdodCAhPT0gaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnUmVzaXppbmcgZGV2aWNlOiAnICsgd2lkdGggKyAneCcgKyBoZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW52YXMhLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbnZhcyEuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVCdWZmZXIgKGluZm86IElHRlhCdWZmZXJJbmZvKTogR0ZYQnVmZmVyIHtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgV2ViR0xHRlhCdWZmZXIodGhpcyk7XHJcbiAgICAgICAgYnVmZmVyLmluaXRpYWxpemUoaW5mbyk7XHJcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlVGV4dHVyZSAoaW5mbzogSUdGWFRleHR1cmVJbmZvKTogR0ZYVGV4dHVyZSB7XHJcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IG5ldyBXZWJHTEdGWFRleHR1cmUodGhpcyk7XHJcbiAgICAgICAgdGV4dHVyZS5pbml0aWFsaXplKGluZm8pO1xyXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVUZXh0dXJlVmlldyAoaW5mbzogSUdGWFRleHR1cmVWaWV3SW5mbyk6IEdGWFRleHR1cmVWaWV3IHtcclxuICAgICAgICBjb25zdCB0ZXhWaWV3ID0gbmV3IFdlYkdMR0ZYVGV4dHVyZVZpZXcodGhpcyk7XHJcbiAgICAgICAgdGV4Vmlldy5pbml0aWFsaXplKGluZm8pO1xyXG4gICAgICAgIHJldHVybiB0ZXhWaWV3O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVTYW1wbGVyIChpbmZvOiBJR0ZYU2FtcGxlckluZm8pOiBHRlhTYW1wbGVyIHtcclxuICAgICAgICBjb25zdCBzYW1wbGVyID0gbmV3IFdlYkdMR0ZYU2FtcGxlcih0aGlzKTtcclxuICAgICAgICBzYW1wbGVyLmluaXRpYWxpemUoaW5mbyk7XHJcbiAgICAgICAgcmV0dXJuIHNhbXBsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZUJpbmRpbmdMYXlvdXQgKGluZm86IElHRlhCaW5kaW5nTGF5b3V0SW5mbyk6IEdGWEJpbmRpbmdMYXlvdXQge1xyXG4gICAgICAgIGNvbnN0IGJpbmRpbmdMYXlvdXQgPSBuZXcgV2ViR0xHRlhCaW5kaW5nTGF5b3V0KHRoaXMpO1xyXG4gICAgICAgIGJpbmRpbmdMYXlvdXQuaW5pdGlhbGl6ZShpbmZvKTtcclxuICAgICAgICByZXR1cm4gYmluZGluZ0xheW91dDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlU2hhZGVyIChpbmZvOiBJR0ZYU2hhZGVySW5mbyk6IEdGWFNoYWRlciB7XHJcbiAgICAgICAgY29uc3Qgc2hhZGVyID0gbmV3IFdlYkdMR0ZYU2hhZGVyKHRoaXMpO1xyXG4gICAgICAgIHNoYWRlci5pbml0aWFsaXplKGluZm8pO1xyXG4gICAgICAgIHJldHVybiBzaGFkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZUlucHV0QXNzZW1ibGVyIChpbmZvOiBJR0ZYSW5wdXRBc3NlbWJsZXJJbmZvKTogR0ZYSW5wdXRBc3NlbWJsZXIge1xyXG4gICAgICAgIGNvbnN0IGlucHV0QXNzZW1ibGVyID0gbmV3IFdlYkdMR0ZYSW5wdXRBc3NlbWJsZXIodGhpcyk7XHJcbiAgICAgICAgaW5wdXRBc3NlbWJsZXIuaW5pdGlhbGl6ZShpbmZvKTtcclxuICAgICAgICByZXR1cm4gaW5wdXRBc3NlbWJsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZVJlbmRlclBhc3MgKGluZm86IElHRlhSZW5kZXJQYXNzSW5mbyk6IEdGWFJlbmRlclBhc3Mge1xyXG4gICAgICAgIGNvbnN0IHJlbmRlclBhc3MgPSBuZXcgV2ViR0xHRlhSZW5kZXJQYXNzKHRoaXMpO1xyXG4gICAgICAgIHJlbmRlclBhc3MuaW5pdGlhbGl6ZShpbmZvKTtcclxuICAgICAgICByZXR1cm4gcmVuZGVyUGFzcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlRnJhbWVidWZmZXIgKGluZm86IElHRlhGcmFtZWJ1ZmZlckluZm8pOiBHRlhGcmFtZWJ1ZmZlciB7XHJcbiAgICAgICAgY29uc3QgZnJhbWVidWZmZXIgPSBuZXcgV2ViR0xHRlhGcmFtZWJ1ZmZlcih0aGlzKTtcclxuICAgICAgICBmcmFtZWJ1ZmZlci5pbml0aWFsaXplKGluZm8pO1xyXG4gICAgICAgIHJldHVybiBmcmFtZWJ1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlUGlwZWxpbmVMYXlvdXQgKGluZm86IElHRlhQaXBlbGluZUxheW91dEluZm8pOiBHRlhQaXBlbGluZUxheW91dCB7XHJcbiAgICAgICAgY29uc3QgcGlwZWxpbmVMYXlvdXQgPSBuZXcgV2ViR0xHRlhQaXBlbGluZUxheW91dCh0aGlzKTtcclxuICAgICAgICBwaXBlbGluZUxheW91dC5pbml0aWFsaXplKGluZm8pO1xyXG4gICAgICAgIHJldHVybiBwaXBlbGluZUxheW91dDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlUGlwZWxpbmVTdGF0ZSAoaW5mbzogSUdGWFBpcGVsaW5lU3RhdGVJbmZvKTogR0ZYUGlwZWxpbmVTdGF0ZSB7XHJcbiAgICAgICAgY29uc3QgcGlwZWxpbmVTdGF0ZSA9IG5ldyBXZWJHTEdGWFBpcGVsaW5lU3RhdGUodGhpcyk7XHJcbiAgICAgICAgcGlwZWxpbmVTdGF0ZS5pbml0aWFsaXplKGluZm8pO1xyXG4gICAgICAgIHJldHVybiBwaXBlbGluZVN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVDb21tYW5kQWxsb2NhdG9yIChpbmZvOiBJR0ZYQ29tbWFuZEFsbG9jYXRvckluZm8pOiBHRlhDb21tYW5kQWxsb2NhdG9yIHtcclxuICAgICAgICBjb25zdCBjbWRBbGxvY2F0b3IgPSBuZXcgV2ViR0xHRlhDb21tYW5kQWxsb2NhdG9yKHRoaXMpO1xyXG4gICAgICAgIGNtZEFsbG9jYXRvci5pbml0aWFsaXplKGluZm8pO1xyXG4gICAgICAgIHJldHVybiBjbWRBbGxvY2F0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZUNvbW1hbmRCdWZmZXIgKGluZm86IElHRlhDb21tYW5kQnVmZmVySW5mbyk6IEdGWENvbW1hbmRCdWZmZXIge1xyXG4gICAgICAgIC8vIGNvbnN0IGN0b3IgPSBXZWJHTEdGWENvbW1hbmRCdWZmZXI7IC8vIG9wdCB0byBpbnN0YW50IGludm9jYXRpb25cclxuICAgICAgICBjb25zdCBjdG9yID0gaW5mby50eXBlID09PSBHRlhDb21tYW5kQnVmZmVyVHlwZS5QUklNQVJZID8gV2ViR0xHRlhQcmltYXJ5Q29tbWFuZEJ1ZmZlciA6IFdlYkdMR0ZYQ29tbWFuZEJ1ZmZlcjtcclxuICAgICAgICBjb25zdCBjbWRCdWZmID0gbmV3IGN0b3IodGhpcyk7XHJcbiAgICAgICAgY21kQnVmZi5pbml0aWFsaXplKGluZm8pO1xyXG4gICAgICAgIHJldHVybiBjbWRCdWZmO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVRdWV1ZSAoaW5mbzogSUdGWFF1ZXVlSW5mbyk6IEdGWFF1ZXVlIHtcclxuICAgICAgICBjb25zdCBxdWV1ZSA9IG5ldyBXZWJHTEdGWFF1ZXVlKHRoaXMpO1xyXG4gICAgICAgIHF1ZXVlLmluaXRpYWxpemUoaW5mbyk7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVXaW5kb3cgKGluZm86IElHRlhXaW5kb3dJbmZvKTogR0ZYV2luZG93IHtcclxuICAgICAgICBjb25zdCB3aW5kb3cgPSBuZXcgV2ViR0xHRlhXaW5kb3codGhpcyk7XHJcbiAgICAgICAgd2luZG93LmluaXRpYWxpemUoaW5mbyk7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJlc2VudCAoKSB7XHJcbiAgICAgICAgKHRoaXMuX2NtZEFsbG9jYXRvciBhcyBXZWJHTEdGWENvbW1hbmRBbGxvY2F0b3IpLnJlbGVhc2VDbWRzKCk7XHJcbiAgICAgICAgY29uc3QgcXVldWUgPSAodGhpcy5fcXVldWUgYXMgV2ViR0xHRlhRdWV1ZSk7XHJcbiAgICAgICAgdGhpcy5fbnVtRHJhd0NhbGxzID0gcXVldWUubnVtRHJhd0NhbGxzO1xyXG4gICAgICAgIHRoaXMuX251bUluc3RhbmNlcyA9IHF1ZXVlLm51bUluc3RhbmNlcztcclxuICAgICAgICB0aGlzLl9udW1UcmlzID0gcXVldWUubnVtVHJpcztcclxuICAgICAgICBxdWV1ZS5jbGVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb3B5QnVmZmVyc1RvVGV4dHVyZSAoYnVmZmVyczogQXJyYXlCdWZmZXJWaWV3W10sIHRleHR1cmU6IEdGWFRleHR1cmUsIHJlZ2lvbnM6IEdGWEJ1ZmZlclRleHR1cmVDb3B5W10pIHtcclxuICAgICAgICBXZWJHTENtZEZ1bmNDb3B5QnVmZmVyc1RvVGV4dHVyZShcclxuICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgYnVmZmVycyxcclxuICAgICAgICAgICAgKHRleHR1cmUgYXMgV2ViR0xHRlhUZXh0dXJlKS5ncHVUZXh0dXJlLFxyXG4gICAgICAgICAgICByZWdpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29weVRleEltYWdlc1RvVGV4dHVyZSAoXHJcbiAgICAgICAgdGV4SW1hZ2VzOiBUZXhJbWFnZVNvdXJjZVtdLFxyXG4gICAgICAgIHRleHR1cmU6IEdGWFRleHR1cmUsXHJcbiAgICAgICAgcmVnaW9uczogR0ZYQnVmZmVyVGV4dHVyZUNvcHlbXSkge1xyXG5cclxuICAgICAgICBXZWJHTENtZEZ1bmNDb3B5VGV4SW1hZ2VzVG9UZXh0dXJlKFxyXG4gICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICB0ZXhJbWFnZXMsXHJcbiAgICAgICAgICAgICh0ZXh0dXJlIGFzIFdlYkdMR0ZYVGV4dHVyZSkuZ3B1VGV4dHVyZSxcclxuICAgICAgICAgICAgcmVnaW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvcHlGcmFtZWJ1ZmZlclRvQnVmZmVyIChcclxuICAgICAgICBzcmNGcmFtZWJ1ZmZlcjogR0ZYRnJhbWVidWZmZXIsXHJcbiAgICAgICAgZHN0QnVmZmVyOiBBcnJheUJ1ZmZlcixcclxuICAgICAgICByZWdpb25zOiBHRlhCdWZmZXJUZXh0dXJlQ29weVtdKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5fd2ViR0xSQyE7XHJcbiAgICAgICAgY29uc3QgZ3B1RnJhbWVidWZmZXIgPSAoc3JjRnJhbWVidWZmZXIgYXMgV2ViR0xHRlhGcmFtZWJ1ZmZlcikuZ3B1RnJhbWVidWZmZXI7XHJcbiAgICAgICAgY29uc3QgZm9ybWF0ID0gZ3B1RnJhbWVidWZmZXIuZ3B1Q29sb3JWaWV3c1swXS5mb3JtYXQ7XHJcbiAgICAgICAgY29uc3QgZ2xGb3JtYXQgPSBHRlhGb3JtYXRUb1dlYkdMRm9ybWF0KGZvcm1hdCwgZ2wpO1xyXG4gICAgICAgIGNvbnN0IGdsVHlwZSA9IEdGWEZvcm1hdFRvV2ViR0xUeXBlKGZvcm1hdCwgZ2wpO1xyXG4gICAgICAgIGNvbnN0IGN0b3IgPSBnZXRUeXBlZEFycmF5Q29uc3RydWN0b3IoR0ZYRm9ybWF0SW5mb3NbZm9ybWF0XSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1ckZCTyA9IHRoaXMuc3RhdGVDYWNoZS5nbEZyYW1lYnVmZmVyO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZUNhY2hlLmdsRnJhbWVidWZmZXIgIT09IGdwdUZyYW1lYnVmZmVyLmdsRnJhbWVidWZmZXIpIHtcclxuICAgICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBncHVGcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUNhY2hlLmdsRnJhbWVidWZmZXIgPSBncHVGcmFtZWJ1ZmZlci5nbEZyYW1lYnVmZmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBjdG9yKGRzdEJ1ZmZlcik7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnVmZk9mZnNldCA9IHJlZ2lvbi5idWZmT2Zmc2V0ICsgcmVnaW9uLmJ1ZmZUZXhIZWlnaHQgKiByZWdpb24uYnVmZlN0cmlkZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHcgPSByZWdpb24udGV4RXh0ZW50LndpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBoID0gcmVnaW9uLnRleEV4dGVudC5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtZW1TaXplID0gR0ZYRm9ybWF0U2l6ZShmb3JtYXQsIHcsIGgsIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdmlldy5zdWJhcnJheShidWZmT2Zmc2V0LCBidWZmT2Zmc2V0ICsgbWVtU2l6ZSk7XHJcblxyXG4gICAgICAgICAgICBnbC5yZWFkUGl4ZWxzKHJlZ2lvbi50ZXhPZmZzZXQueCwgcmVnaW9uLnRleE9mZnNldC55LCB3LCBoLCBnbEZvcm1hdCwgZ2xUeXBlLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlQ2FjaGUuZ2xGcmFtZWJ1ZmZlciAhPT0gY3VyRkJPKSB7XHJcbiAgICAgICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgY3VyRkJPKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUNhY2hlLmdsRnJhbWVidWZmZXIgPSBjdXJGQk87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBibGl0RnJhbWVidWZmZXIgKHNyYzogR0ZYRnJhbWVidWZmZXIsIGRzdDogR0ZYRnJhbWVidWZmZXIsIHNyY1JlY3Q6IElHRlhSZWN0LCBkc3RSZWN0OiBJR0ZYUmVjdCwgZmlsdGVyOiBHRlhGaWx0ZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEV4dGVuc2lvbiAoZXh0OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHByZWZpeGVzID0gWycnLCAnV0VCS0lUXycsICdNT1pfJ107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBjb25zdCBfZXh0ID0gdGhpcy5fd2ViR0xSQyEuZ2V0RXh0ZW5zaW9uKHByZWZpeGVzW2ldICsgZXh0KTtcclxuICAgICAgICAgICAgaWYgKF9leHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdFN0YXRlcyAoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG5cclxuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcclxuICAgICAgICBnbC5waXhlbFN0b3JlaShnbC5QQUNLX0FMSUdOTUVOVCwgMSk7XHJcbiAgICAgICAgZ2wucGl4ZWxTdG9yZWkoZ2wuVU5QQUNLX0FMSUdOTUVOVCwgMSk7XHJcbiAgICAgICAgZ2wucGl4ZWxTdG9yZWkoZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwgMCk7XHJcblxyXG4gICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XHJcblxyXG4gICAgICAgIC8vIHJhc3RlcmlhemVyIHN0YXRlXHJcbiAgICAgICAgZ2wuZGlzYWJsZShnbC5TQ0lTU09SX1RFU1QpO1xyXG4gICAgICAgIGdsLmVuYWJsZShnbC5DVUxMX0ZBQ0UpO1xyXG4gICAgICAgIGdsLmN1bGxGYWNlKGdsLkJBQ0spO1xyXG4gICAgICAgIGdsLmZyb250RmFjZShnbC5DQ1cpO1xyXG4gICAgICAgIGdsLmRpc2FibGUoZ2wuUE9MWUdPTl9PRkZTRVRfRklMTCk7XHJcbiAgICAgICAgZ2wucG9seWdvbk9mZnNldCgwLjAsIDAuMCk7XHJcblxyXG4gICAgICAgIC8vIGRlcHRoIHN0ZW5jaWwgc3RhdGVcclxuICAgICAgICBnbC5lbmFibGUoZ2wuREVQVEhfVEVTVCk7XHJcbiAgICAgICAgZ2wuZGVwdGhNYXNrKHRydWUpO1xyXG4gICAgICAgIGdsLmRlcHRoRnVuYyhnbC5MRVNTKTtcclxuICAgICAgICBnbC5kZXB0aFJhbmdlKDAuMCwgMS4wKTtcclxuXHJcbiAgICAgICAgZ2wuc3RlbmNpbEZ1bmNTZXBhcmF0ZShnbC5GUk9OVCwgZ2wuQUxXQVlTLCAxLCAweGZmZmYpO1xyXG4gICAgICAgIGdsLnN0ZW5jaWxPcFNlcGFyYXRlKGdsLkZST05ULCBnbC5LRUVQLCBnbC5LRUVQLCBnbC5LRUVQKTtcclxuICAgICAgICBnbC5zdGVuY2lsTWFza1NlcGFyYXRlKGdsLkZST05ULCAweGZmZmYpO1xyXG4gICAgICAgIGdsLnN0ZW5jaWxGdW5jU2VwYXJhdGUoZ2wuQkFDSywgZ2wuQUxXQVlTLCAxLCAweGZmZmYpO1xyXG4gICAgICAgIGdsLnN0ZW5jaWxPcFNlcGFyYXRlKGdsLkJBQ0ssIGdsLktFRVAsIGdsLktFRVAsIGdsLktFRVApO1xyXG4gICAgICAgIGdsLnN0ZW5jaWxNYXNrU2VwYXJhdGUoZ2wuQkFDSywgMHhmZmZmKTtcclxuXHJcbiAgICAgICAgZ2wuZGlzYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xyXG5cclxuICAgICAgICAvLyBibGVuZCBzdGF0ZVxyXG4gICAgICAgIGdsLmRpc2FibGUoZ2wuU0FNUExFX0FMUEhBX1RPX0NPVkVSQUdFKTtcclxuICAgICAgICBnbC5kaXNhYmxlKGdsLkJMRU5EKTtcclxuICAgICAgICBnbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoZ2wuRlVOQ19BREQsIGdsLkZVTkNfQUREKTtcclxuICAgICAgICBnbC5ibGVuZEZ1bmNTZXBhcmF0ZShnbC5PTkUsIGdsLlpFUk8sIGdsLk9ORSwgZ2wuWkVSTyk7XHJcbiAgICAgICAgZ2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xyXG4gICAgICAgIGdsLmJsZW5kQ29sb3IoMC4wLCAwLjAsIDAuMCwgMC4wKTtcclxuICAgIH1cclxufVxyXG4iXX0=