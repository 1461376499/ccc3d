(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "../../core/components/component.js", "../../core/data/class-decorator.js", "../../core/math/index.js", "../../core/value-types/enum.js", "../../core/components/ui-base/ui-transform-component.js", "../../core/platform/event-manager/event-enum.js", "../../core/director.js", "../../core/scene-graph/node-enum.js", "../../core/default-constants.js"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("../../core/components/component.js"), require("../../core/data/class-decorator.js"), require("../../core/math/index.js"), require("../../core/value-types/enum.js"), require("../../core/components/ui-base/ui-transform-component.js"), require("../../core/platform/event-manager/event-enum.js"), require("../../core/director.js"), require("../../core/scene-graph/node-enum.js"), require("../../core/default-constants.js"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.component, global.classDecorator, global.index, global._enum, global.uiTransformComponent, global.eventEnum, global.director, global.nodeEnum, global.defaultConstants);
    global.layoutComponent = mod.exports;
  }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (_exports, _component, _classDecorator, _index, _enum, _uiTransformComponent, _eventEnum, _director, _nodeEnum, _defaultConstants) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.LayoutComponent = void 0;

  var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _descriptor11, _descriptor12, _descriptor13, _descriptor14, _class3, _temp;

  function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

  function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

  function _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  function _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }

  function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }

  var NodeEvent = _eventEnum.SystemEventType;
  /**
   * @en Enum for layout.
   *
   * @zh 布局类型。
   */

  var Type;

  (function (Type) {
    Type[Type["NONE"] = 0] = "NONE";
    Type[Type["HORIZONTAL"] = 1] = "HORIZONTAL";
    Type[Type["VERTICAL"] = 2] = "VERTICAL";
    Type[Type["GRID"] = 3] = "GRID";
  })(Type || (Type = {}));

  (0, _enum.ccenum)(Type);
  /**
   * @en Enum for Layout Resize Mode.
   *
   * @zh 缩放模式。
   */

  var ResizeMode;

  (function (ResizeMode) {
    ResizeMode[ResizeMode["NONE"] = 0] = "NONE";
    ResizeMode[ResizeMode["CONTAINER"] = 1] = "CONTAINER";
    ResizeMode[ResizeMode["CHILDREN"] = 2] = "CHILDREN";
  })(ResizeMode || (ResizeMode = {}));

  (0, _enum.ccenum)(ResizeMode);
  /**
   * @en Enum for Grid Layout start axis direction.
   *
   * @zh 布局轴向，只用于 GRID 布局。
   */

  var AxisDirection;

  (function (AxisDirection) {
    AxisDirection[AxisDirection["HORIZONTAL"] = 0] = "HORIZONTAL";
    AxisDirection[AxisDirection["VERTICAL"] = 1] = "VERTICAL";
  })(AxisDirection || (AxisDirection = {}));

  (0, _enum.ccenum)(AxisDirection);
  /**
   * @en Enum for vertical layout direction.
   *
   * @zh 垂直方向布局方式。
   */

  var VerticalDirection;

  (function (VerticalDirection) {
    VerticalDirection[VerticalDirection["BOTTOM_TO_TOP"] = 0] = "BOTTOM_TO_TOP";
    VerticalDirection[VerticalDirection["TOP_TO_BOTTOM"] = 1] = "TOP_TO_BOTTOM";
  })(VerticalDirection || (VerticalDirection = {}));

  (0, _enum.ccenum)(VerticalDirection);
  /**
   * @en Enum for horizontal layout direction.
   *
   * @zh 水平方向布局方式。
   */

  var HorizontalDirection;

  (function (HorizontalDirection) {
    HorizontalDirection[HorizontalDirection["LEFT_TO_RIGHT"] = 0] = "LEFT_TO_RIGHT";
    HorizontalDirection[HorizontalDirection["RIGHT_TO_LEFT"] = 1] = "RIGHT_TO_LEFT";
  })(HorizontalDirection || (HorizontalDirection = {}));

  (0, _enum.ccenum)(HorizontalDirection);

  var _tempPos = new _index.Vec3();

  var _tempScale = new _index.Vec3();
  /**
   * @en
   * The Layout is a container component, use it to arrange child elements easily.<br>
   * Note：<br>
   * 1.Scaling and rotation of child nodes are not considered.<br>
   * 2.After setting the Layout, the results need to be updated until the next frame,unless you manually call.[[updateLayout]]
   *
   * @zh
   * Layout 组件相当于一个容器，能自动对它的所有子节点进行统一排版。<br>
   * 注意：<br>
   * 1.不会考虑子节点的缩放和旋转。<br>
   * 2.对 Layout 设置后结果需要到下一帧才会更新，除非你设置完以后手动调用。[[updateLayout]]
   */


  var LayoutComponent = (_dec = (0, _classDecorator.ccclass)('cc.LayoutComponent'), _dec2 = (0, _classDecorator.help)('i18n:cc.LayoutComponent'), _dec3 = (0, _classDecorator.executionOrder)(110), _dec4 = (0, _classDecorator.menu)('UI/Layout'), _dec5 = (0, _classDecorator.requireComponent)(_uiTransformComponent.UITransformComponent), _dec6 = (0, _classDecorator.property)({
    type: Type,
    tooltip: '自动布局模式，包括：\n 1. NONE，不会对子节点进行自动布局 \n 2. HORIZONTAL，横向自动排布子物体 \n 3. VERTICAL，垂直自动排布子物体\n 4. GRID, 采用网格方式对子物体自动进行布局'
  }), _dec7 = (0, _classDecorator.property)({
    type: ResizeMode,
    tooltip: '缩放模式，包括：\n 1. NONE，不会对子节点和容器进行大小缩放 \n 2. CONTAINER, 对容器的大小进行缩放 \n 3. CHILDREN, 对子节点的大小进行缩放'
  }), _dec8 = (0, _classDecorator.property)({
    tooltip: '每个格子的大小，只有布局类型为 GRID 的时候才有效'
  }), _dec9 = (0, _classDecorator.property)({
    type: AxisDirection,
    tooltip: '起始轴方向类型，可进行水平和垂直布局排列，只有布局类型为 GRID 的时候才有效'
  }), _dec10 = (0, _classDecorator.property)({
    tooltip: '容器内左边距，只会在一个布局方向上生效'
  }), _dec11 = (0, _classDecorator.property)({
    tooltip: '容器内右边距，只会在一个布局方向上生效'
  }), _dec12 = (0, _classDecorator.property)({
    tooltip: '容器内上边距，只会在一个布局方向上生效'
  }), _dec13 = (0, _classDecorator.property)({
    tooltip: '容器内下边距，只会在一个布局方向上生效'
  }), _dec14 = (0, _classDecorator.property)({
    tooltip: '子节点之间的水平间距'
  }), _dec15 = (0, _classDecorator.property)({
    tooltip: '子节点之间的垂直间距'
  }), _dec16 = (0, _classDecorator.property)({
    type: VerticalDirection,
    tooltip: '垂直排列子节点的方向'
  }), _dec17 = (0, _classDecorator.property)({
    type: HorizontalDirection,
    tooltip: '水平排列子节点的方向'
  }), _dec18 = (0, _classDecorator.property)({
    tooltip: '容器内边距，该属性会在四个布局方向上生效'
  }), _dec19 = (0, _classDecorator.property)({
    tooltip: '子节点缩放比例是否影响布局'
  }), _dec(_class = _dec2(_class = _dec3(_class = _dec4(_class = _dec5(_class = (0, _classDecorator.executeInEditMode)(_class = (_class2 = (_temp = _class3 = /*#__PURE__*/function (_Component) {
    _inherits(LayoutComponent, _Component);

    function LayoutComponent() {
      var _getPrototypeOf2;

      var _this;

      _classCallCheck(this, LayoutComponent);

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LayoutComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));

      _initializerDefineProperty(_this, "_resizeMode", _descriptor, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_N$layoutType", _descriptor2, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_N$padding", _descriptor3, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_cellSize", _descriptor4, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_startAxis", _descriptor5, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_paddingLeft", _descriptor6, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_paddingRight", _descriptor7, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_paddingTop", _descriptor8, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_paddingBottom", _descriptor9, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_spacingX", _descriptor10, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_spacingY", _descriptor11, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_verticalDirection", _descriptor12, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_horizontalDirection", _descriptor13, _assertThisInitialized(_this));

      _initializerDefineProperty(_this, "_affectedByScale", _descriptor14, _assertThisInitialized(_this));

      _this._layoutSize = new _index.Size(300, 200);
      _this._layoutDirty = true;
      _this._isAlign = false;
      return _this;
    }

    _createClass(LayoutComponent, [{
      key: "updateLayout",

      /**
       * @en
       * Perform the layout update.
       *
       * @zh
       * 立即执行更新布局。
       *
       * @example
       * ```typescript
       * layout.type = cc.LayoutComponent.HORIZONTAL;
       * layout.node.addChild(childNode);
       * cc.log(childNode.x); // not yet changed
       * layout.updateLayout();
       * cc.log(childNode.x); // changed
       * ```
       */
      value: function updateLayout() {
        if (this._layoutDirty && this.node.children.length > 0) {
          this._doLayout();

          this._layoutDirty = false;
        }
      }
    }, {
      key: "onEnable",
      value: function onEnable() {
        this._addEventListeners();

        if (this.node.getContentSize().equals(new _index.Size())) {
          this.node.setContentSize(this._layoutSize);
        }

        if (this._N$padding !== 0) {
          this._migratePaddingData();
        }

        this._doLayoutDirty();
      }
    }, {
      key: "onDisable",
      value: function onDisable() {
        this._removeEventListeners();
      }
    }, {
      key: "_migratePaddingData",
      value: function _migratePaddingData() {
        this._paddingLeft = this._N$padding;
        this._paddingRight = this._N$padding;
        this._paddingTop = this._N$padding;
        this._paddingBottom = this._N$padding;
        this._N$padding = 0;
      }
    }, {
      key: "_addEventListeners",
      value: function _addEventListeners() {
        _director.director.on(_director.Director.EVENT_AFTER_UPDATE, this.updateLayout, this);

        this.node.on(NodeEvent.SIZE_CHANGED, this._resized, this);
        this.node.on(NodeEvent.ANCHOR_CHANGED, this._doLayoutDirty, this);
        this.node.on(NodeEvent.CHILD_ADDED, this._childAdded, this);
        this.node.on(NodeEvent.CHILD_REMOVED, this._childRemoved, this); // this.node.on(NodeEvent.CHILD_REORDER, this._doLayoutDirty, this);

        this._addChildrenEventListeners();
      }
    }, {
      key: "_removeEventListeners",
      value: function _removeEventListeners() {
        _director.director.off(_director.Director.EVENT_AFTER_UPDATE, this.updateLayout, this);

        this.node.off(NodeEvent.SIZE_CHANGED, this._resized, this);
        this.node.off(NodeEvent.ANCHOR_CHANGED, this._doLayoutDirty, this);
        this.node.off(NodeEvent.CHILD_ADDED, this._childAdded, this);
        this.node.off(NodeEvent.CHILD_REMOVED, this._childRemoved, this); // this.node.off(NodeEvent.CHILD_REORDER, this._doLayoutDirty, this);

        this._removeChildrenEventListeners();
      }
    }, {
      key: "_addChildrenEventListeners",
      value: function _addChildrenEventListeners() {
        var children = this.node.children;

        var _iterator = _createForOfIteratorHelper(children),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var child = _step.value;
            child.on(NodeEvent.TRANSFORM_CHANGED, this._doScaleDirty, this);
            child.on(NodeEvent.SIZE_CHANGED, this._doLayoutDirty, this);
            child.on(NodeEvent.TRANSFORM_CHANGED, this._transformDirty, this);
            child.on(NodeEvent.ANCHOR_CHANGED, this._doLayoutDirty, this);
            child.on('active-in-hierarchy-changed', this._doLayoutDirty, this);
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
    }, {
      key: "_removeChildrenEventListeners",
      value: function _removeChildrenEventListeners() {
        var children = this.node.children;

        var _iterator2 = _createForOfIteratorHelper(children),
            _step2;

        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var child = _step2.value;
            child.off(NodeEvent.TRANSFORM_CHANGED, this._doScaleDirty, this);
            child.off(NodeEvent.SIZE_CHANGED, this._doLayoutDirty, this);
            child.off(NodeEvent.TRANSFORM_CHANGED, this._transformDirty, this);
            child.off(NodeEvent.ANCHOR_CHANGED, this._doLayoutDirty, this);
            child.off('active-in-hierarchy-changed', this._doLayoutDirty, this);
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    }, {
      key: "_childAdded",
      value: function _childAdded(child) {
        child.on(NodeEvent.TRANSFORM_CHANGED, this._doScaleDirty, this);
        child.on(NodeEvent.SIZE_CHANGED, this._doLayoutDirty, this);
        child.on(NodeEvent.TRANSFORM_CHANGED, this._transformDirty, this);
        child.on(NodeEvent.ANCHOR_CHANGED, this._doLayoutDirty, this);
        child.on('active-in-hierarchy-changed', this._doLayoutDirty, this);

        this._doLayoutDirty();
      }
    }, {
      key: "_childRemoved",
      value: function _childRemoved(child) {
        child.off(NodeEvent.TRANSFORM_CHANGED, this._doScaleDirty, this);
        child.off(NodeEvent.SIZE_CHANGED, this._doLayoutDirty, this);
        child.off(NodeEvent.TRANSFORM_CHANGED, this._transformDirty, this);
        child.off(NodeEvent.ANCHOR_CHANGED, this._doLayoutDirty, this);
        child.off('active-in-hierarchy-changed', this._doLayoutDirty, this);

        this._doLayoutDirty();
      }
    }, {
      key: "_resized",
      value: function _resized() {
        this._layoutSize = this.node.getContentSize();

        this._doLayoutDirty();
      }
    }, {
      key: "_doLayoutHorizontally",
      value: function _doLayoutHorizontally(baseWidth, rowBreak, fnPositionY, applyChildren) {
        var layoutAnchor = this.node.getAnchorPoint();
        var children = this.node.children;
        var sign = 1;
        var paddingX = this._paddingLeft;
        var startPos = -layoutAnchor.x * baseWidth;

        if (this._horizontalDirection === HorizontalDirection.RIGHT_TO_LEFT) {
          sign = -1;
          startPos = (1 - layoutAnchor.x) * baseWidth;
          paddingX = this._paddingRight;
        }

        var nextX = startPos + sign * paddingX - sign * this._spacingX;
        var rowMaxHeight = 0;
        var tempMaxHeight = 0;
        var secondMaxHeight = 0;
        var row = 0;
        var containerResizeBoundary = 0;
        var maxHeightChildAnchorY = 0;
        var activeChildCount = 0;

        var _iterator3 = _createForOfIteratorHelper(children),
            _step3;

        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var child = _step3.value;

            if (child.activeInHierarchy) {
              activeChildCount++;
            }
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }

        var newChildWidth = this._cellSize.width;

        if (this._N$layoutType !== Type.GRID && this._resizeMode === ResizeMode.CHILDREN) {
          newChildWidth = (baseWidth - (this._paddingLeft + this._paddingRight) - (activeChildCount - 1) * this._spacingX) / activeChildCount;
        }

        var _iterator4 = _createForOfIteratorHelper(children),
            _step4;

        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var _child = _step4.value;

            if (!_child.activeInHierarchy) {
              continue;
            }

            _child.getScale(_tempScale);

            var childScaleX = this._getUsedScaleValue(_tempScale.x);

            var childScaleY = this._getUsedScaleValue(_tempScale.y); // for resizing children


            if (this._resizeMode === ResizeMode.CHILDREN) {
              _child.width = newChildWidth / childScaleX;

              if (this._N$layoutType === Type.GRID) {
                _child.height = this._cellSize.height / childScaleY;
              }
            }

            var anchorX = _child.anchorX;
            var childBoundingBoxWidth = _child.width * childScaleX;
            var childBoundingBoxHeight = _child.height * childScaleY;

            if (secondMaxHeight > tempMaxHeight) {
              tempMaxHeight = secondMaxHeight;
            }

            if (childBoundingBoxHeight >= tempMaxHeight) {
              secondMaxHeight = tempMaxHeight;
              tempMaxHeight = childBoundingBoxHeight;
              maxHeightChildAnchorY = _child.getAnchorPoint().y;
            }

            if (this._horizontalDirection === HorizontalDirection.RIGHT_TO_LEFT) {
              anchorX = 1 - _child.anchorX;
            }

            nextX = nextX + sign * anchorX * childBoundingBoxWidth + sign * this._spacingX;
            var rightBoundaryOfChild = sign * (1 - anchorX) * childBoundingBoxWidth;

            if (rowBreak) {
              var rowBreakBoundary = nextX + rightBoundaryOfChild + sign * (sign > 0 ? this._paddingRight : this._paddingLeft);
              var leftToRightRowBreak = false;

              if (this._horizontalDirection === HorizontalDirection.LEFT_TO_RIGHT && rowBreakBoundary > (1 - layoutAnchor.x) * baseWidth) {
                leftToRightRowBreak = true;
              }

              var rightToLeftRowBreak = false;

              if (this._horizontalDirection === HorizontalDirection.RIGHT_TO_LEFT && rowBreakBoundary < -layoutAnchor.x * baseWidth) {
                rightToLeftRowBreak = true;
              }

              if (leftToRightRowBreak || rightToLeftRowBreak) {
                if (childBoundingBoxHeight >= tempMaxHeight) {
                  if (secondMaxHeight === 0) {
                    secondMaxHeight = tempMaxHeight;
                  }

                  rowMaxHeight += secondMaxHeight;
                  secondMaxHeight = tempMaxHeight;
                } else {
                  rowMaxHeight += tempMaxHeight;
                  secondMaxHeight = childBoundingBoxHeight;
                  tempMaxHeight = 0;
                }

                nextX = startPos + sign * (paddingX + anchorX * childBoundingBoxWidth);
                row++;
              }
            }

            var finalPositionY = fnPositionY(_child, rowMaxHeight, row);

            if (baseWidth >= childBoundingBoxWidth + this._paddingLeft + this._paddingRight) {
              if (applyChildren) {
                _child.getPosition(_tempPos);

                _child.setPosition(nextX, finalPositionY, _tempPos.z);
              }
            }

            var signX = 1;
            var tempFinalPositionY = void 0;
            var topMargin = tempMaxHeight === 0 ? childBoundingBoxHeight : tempMaxHeight;

            if (this._verticalDirection === VerticalDirection.TOP_TO_BOTTOM) {
              containerResizeBoundary = containerResizeBoundary || this.node.getContentSize().height;
              signX = -1;
              tempFinalPositionY = finalPositionY + signX * (topMargin * maxHeightChildAnchorY + this._paddingBottom);

              if (tempFinalPositionY < containerResizeBoundary) {
                containerResizeBoundary = tempFinalPositionY;
              }
            } else {
              containerResizeBoundary = containerResizeBoundary || -this.node.getContentSize().height;
              tempFinalPositionY = finalPositionY + signX * (topMargin * maxHeightChildAnchorY + this._paddingTop);

              if (tempFinalPositionY > containerResizeBoundary) {
                containerResizeBoundary = tempFinalPositionY;
              }
            }

            nextX += rightBoundaryOfChild;
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }

        return containerResizeBoundary;
      }
    }, {
      key: "_doLayoutVertically",
      value: function _doLayoutVertically(baseHeight, columnBreak, fnPositionX, applyChildren) {
        var layoutAnchor = this.node.getAnchorPoint();
        var children = this.node.children;
        var sign = 1;
        var paddingY = this._paddingBottom;
        var bottomBoundaryOfLayout = -layoutAnchor.y * baseHeight;

        if (this._verticalDirection === VerticalDirection.TOP_TO_BOTTOM) {
          sign = -1;
          bottomBoundaryOfLayout = (1 - layoutAnchor.y) * baseHeight;
          paddingY = this._paddingTop;
        }

        var nextY = bottomBoundaryOfLayout + sign * paddingY - sign * this._spacingY;
        var columnMaxWidth = 0;
        var tempMaxWidth = 0;
        var secondMaxWidth = 0;
        var column = 0;
        var containerResizeBoundary = 0;
        var maxWidthChildAnchorX = 0;
        var activeChildCount = 0;

        var _iterator5 = _createForOfIteratorHelper(children),
            _step5;

        try {
          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
            var child = _step5.value;

            if (child.activeInHierarchy) {
              activeChildCount++;
            }
          }
        } catch (err) {
          _iterator5.e(err);
        } finally {
          _iterator5.f();
        }

        var newChildHeight = this._cellSize.height;

        if (this._N$layoutType !== Type.GRID && this._resizeMode === ResizeMode.CHILDREN) {
          newChildHeight = (baseHeight - (this._paddingTop + this._paddingBottom) - (activeChildCount - 1) * this._spacingY) / activeChildCount;
        }

        var _iterator6 = _createForOfIteratorHelper(children),
            _step6;

        try {
          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
            var _child2 = _step6.value;

            if (!_child2) {
              continue;
            }

            var scale = _child2.getScale();

            var childScaleX = this._getUsedScaleValue(scale.x);

            var childScaleY = this._getUsedScaleValue(scale.y);

            if (!_child2.activeInHierarchy) {
              continue;
            } // for resizing children


            if (this._resizeMode === ResizeMode.CHILDREN) {
              _child2.height = newChildHeight / childScaleY;

              if (this._N$layoutType === Type.GRID) {
                _child2.width = this._cellSize.width / childScaleX;
              }
            }

            var anchorY = _child2.anchorY;
            var childBoundingBoxWidth = _child2.width * childScaleX;
            var childBoundingBoxHeight = _child2.height * childScaleY;

            if (secondMaxWidth > tempMaxWidth) {
              tempMaxWidth = secondMaxWidth;
            }

            if (childBoundingBoxWidth >= tempMaxWidth) {
              secondMaxWidth = tempMaxWidth;
              tempMaxWidth = childBoundingBoxWidth;
              maxWidthChildAnchorX = _child2.getAnchorPoint().x;
            }

            if (this._verticalDirection === VerticalDirection.TOP_TO_BOTTOM) {
              anchorY = 1 - _child2.anchorY;
            }

            nextY = nextY + sign * anchorY * childBoundingBoxHeight + sign * this._spacingY;
            var topBoundaryOfChild = sign * (1 - anchorY) * childBoundingBoxHeight;

            if (columnBreak) {
              var columnBreakBoundary = nextY + topBoundaryOfChild + sign * (sign > 0 ? this._paddingTop : this._paddingBottom);
              var bottomToTopColumnBreak = false;

              if (this._verticalDirection === VerticalDirection.BOTTOM_TO_TOP && columnBreakBoundary > (1 - layoutAnchor.y) * baseHeight) {
                bottomToTopColumnBreak = true;
              }

              var topToBottomColumnBreak = false;

              if (this._verticalDirection === VerticalDirection.TOP_TO_BOTTOM && columnBreakBoundary < -layoutAnchor.y * baseHeight) {
                topToBottomColumnBreak = true;
              }

              if (bottomToTopColumnBreak || topToBottomColumnBreak) {
                if (childBoundingBoxWidth >= tempMaxWidth) {
                  if (secondMaxWidth === 0) {
                    secondMaxWidth = tempMaxWidth;
                  }

                  columnMaxWidth += secondMaxWidth;
                  secondMaxWidth = tempMaxWidth;
                } else {
                  columnMaxWidth += tempMaxWidth;
                  secondMaxWidth = childBoundingBoxWidth;
                  tempMaxWidth = 0;
                }

                nextY = bottomBoundaryOfLayout + sign * (paddingY + anchorY * childBoundingBoxHeight);
                column++;
              }
            }

            var finalPositionX = fnPositionX(_child2, columnMaxWidth, column);

            if (baseHeight >= childBoundingBoxHeight + (this._paddingTop + this._paddingBottom)) {
              if (applyChildren) {
                _child2.getPosition(_tempPos);

                _child2.setPosition(finalPositionX, nextY, _tempPos.z);
              }
            }

            var signX = 1;
            var tempFinalPositionX = void 0; // when the item is the last column break item, the tempMaxWidth will be 0.

            var rightMargin = tempMaxWidth === 0 ? childBoundingBoxWidth : tempMaxWidth;

            if (this._horizontalDirection === HorizontalDirection.RIGHT_TO_LEFT) {
              signX = -1;
              containerResizeBoundary = containerResizeBoundary || this.node.getContentSize().width;
              tempFinalPositionX = finalPositionX + signX * (rightMargin * maxWidthChildAnchorX + this._paddingLeft);

              if (tempFinalPositionX < containerResizeBoundary) {
                containerResizeBoundary = tempFinalPositionX;
              }
            } else {
              containerResizeBoundary = containerResizeBoundary || -this.node.getContentSize().width;
              tempFinalPositionX = finalPositionX + signX * (rightMargin * maxWidthChildAnchorX + this._paddingRight);

              if (tempFinalPositionX > containerResizeBoundary) {
                containerResizeBoundary = tempFinalPositionX;
              }
            }

            nextY += topBoundaryOfChild;
          }
        } catch (err) {
          _iterator6.e(err);
        } finally {
          _iterator6.f();
        }

        return containerResizeBoundary;
      }
    }, {
      key: "_doLayoutBasic",
      value: function _doLayoutBasic() {
        var children = this.node.children;
        var allChildrenBoundingBox = null;

        var _iterator7 = _createForOfIteratorHelper(children),
            _step7;

        try {
          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
            var child = _step7.value;
            var childTransform = child.getComponent(_uiTransformComponent.UITransformComponent);

            if (!childTransform) {
              continue;
            }

            if (child.activeInHierarchy) {
              if (!allChildrenBoundingBox) {
                allChildrenBoundingBox = childTransform.getBoundingBoxToWorld();
              } else {
                _index.Rect.union(allChildrenBoundingBox, allChildrenBoundingBox, childTransform.getBoundingBoxToWorld());
              }
            }
          }
        } catch (err) {
          _iterator7.e(err);
        } finally {
          _iterator7.f();
        }

        if (allChildrenBoundingBox) {
          var parentTransform = this.node.parent.getComponent(_uiTransformComponent.UITransformComponent);

          if (!parentTransform) {
            return;
          }

          _index.Vec3.set(_tempPos, allChildrenBoundingBox.x, allChildrenBoundingBox.y, 0);

          var leftBottomInParentSpace = new _index.Vec3();
          parentTransform.convertToNodeSpaceAR(_tempPos, leftBottomInParentSpace);

          _index.Vec3.set(leftBottomInParentSpace, leftBottomInParentSpace.x - this._paddingLeft, leftBottomInParentSpace.y - this._paddingBottom, leftBottomInParentSpace.z);

          _index.Vec3.set(_tempPos, allChildrenBoundingBox.x + allChildrenBoundingBox.width, allChildrenBoundingBox.y + allChildrenBoundingBox.height, 0);

          var rightTopInParentSpace = new _index.Vec3();
          parentTransform.convertToNodeSpaceAR(_tempPos, rightTopInParentSpace);

          _index.Vec3.set(rightTopInParentSpace, rightTopInParentSpace.x + this._paddingRight, rightTopInParentSpace.y + this._paddingTop, rightTopInParentSpace.z);

          var newSize = cc.size(parseFloat((rightTopInParentSpace.x - leftBottomInParentSpace.x).toFixed(2)), parseFloat((rightTopInParentSpace.y - leftBottomInParentSpace.y).toFixed(2)));
          this.node.getPosition(_tempPos);

          if (newSize.width !== 0) {
            var newAnchorX = (_tempPos.x - leftBottomInParentSpace.x) / newSize.width;
            this.node.anchorX = parseFloat(newAnchorX.toFixed(2));
          }

          if (newSize.height !== 0) {
            var newAnchorY = (_tempPos.y - leftBottomInParentSpace.y) / newSize.height;
            this.node.anchorY = parseFloat(newAnchorY.toFixed(2));
          }

          this.node.setContentSize(newSize);
        }
      }
    }, {
      key: "_doLayoutGridAxisHorizontal",
      value: function _doLayoutGridAxisHorizontal(layoutAnchor, layoutSize) {
        var _this2 = this;

        var baseWidth = layoutSize.width;
        var sign = 1;
        var bottomBoundaryOfLayout = -layoutAnchor.y * layoutSize.height;
        var paddingY = this._paddingBottom;

        if (this._verticalDirection === VerticalDirection.TOP_TO_BOTTOM) {
          sign = -1;
          bottomBoundaryOfLayout = (1 - layoutAnchor.y) * layoutSize.height;
          paddingY = this._paddingTop;
        }

        var self = this;

        var fnPositionY = function fnPositionY(child, topOffset, row) {
          return bottomBoundaryOfLayout + sign * (topOffset + child.anchorY * child.height * self._getUsedScaleValue(child.getScale().y) + paddingY + row * _this2._spacingY);
        };

        var newHeight = 0;

        if (this._resizeMode === ResizeMode.CONTAINER) {
          // calculate the new height of container, it won't change the position of it's children
          var boundary = this._doLayoutHorizontally(baseWidth, true, fnPositionY, false);

          newHeight = bottomBoundaryOfLayout - boundary;

          if (newHeight < 0) {
            newHeight *= -1;
          }

          bottomBoundaryOfLayout = -layoutAnchor.y * newHeight;

          if (this._verticalDirection === VerticalDirection.TOP_TO_BOTTOM) {
            sign = -1;
            bottomBoundaryOfLayout = (1 - layoutAnchor.y) * newHeight;
          }
        }

        this._doLayoutHorizontally(baseWidth, true, fnPositionY, true);

        if (this._resizeMode === ResizeMode.CONTAINER) {
          this.node.setContentSize(baseWidth, newHeight);
        }
      }
    }, {
      key: "_doLayoutGridAxisVertical",
      value: function _doLayoutGridAxisVertical(layoutAnchor, layoutSize) {
        var _this3 = this;

        var baseHeight = layoutSize.height;
        var sign = 1;
        var leftBoundaryOfLayout = -layoutAnchor.x * layoutSize.width;
        var paddingX = this._paddingLeft;

        if (this._horizontalDirection === HorizontalDirection.RIGHT_TO_LEFT) {
          sign = -1;
          leftBoundaryOfLayout = (1 - layoutAnchor.x) * layoutSize.width;
          paddingX = this._paddingRight;
        }

        var self = this;

        var fnPositionX = function fnPositionX(child, leftOffset, column) {
          return leftBoundaryOfLayout + sign * (leftOffset + child.anchorX * child.width * self._getUsedScaleValue(child.getScale().x) + paddingX + column * _this3._spacingX);
        };

        var newWidth = 0;

        if (this._resizeMode === ResizeMode.CONTAINER) {
          var boundary = this._doLayoutVertically(baseHeight, true, fnPositionX, false);

          newWidth = leftBoundaryOfLayout - boundary;

          if (newWidth < 0) {
            newWidth *= -1;
          }

          leftBoundaryOfLayout = -layoutAnchor.x * newWidth;

          if (this._horizontalDirection === HorizontalDirection.RIGHT_TO_LEFT) {
            sign = -1;
            leftBoundaryOfLayout = (1 - layoutAnchor.x) * newWidth;
          }
        }

        this._doLayoutVertically(baseHeight, true, fnPositionX, true);

        if (this._resizeMode === ResizeMode.CONTAINER) {
          this.node.setContentSize(newWidth, baseHeight);
        }
      }
    }, {
      key: "_doLayoutGrid",
      value: function _doLayoutGrid() {
        var layoutAnchor = this.node.getAnchorPoint();
        var layoutSize = this.node.getContentSize();

        if (this.startAxis === AxisDirection.HORIZONTAL) {
          this._doLayoutGridAxisHorizontal(layoutAnchor, layoutSize);
        } else if (this.startAxis === AxisDirection.VERTICAL) {
          this._doLayoutGridAxisVertical(layoutAnchor, layoutSize);
        }
      }
    }, {
      key: "_getHorizontalBaseWidth",
      value: function _getHorizontalBaseWidth(children) {
        var newWidth = 0;
        var activeChildCount = 0;

        if (this._resizeMode === ResizeMode.CONTAINER) {
          var _iterator8 = _createForOfIteratorHelper(children),
              _step8;

          try {
            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
              var child = _step8.value;
              child.getScale(_tempScale);

              if (child.activeInHierarchy) {
                activeChildCount++;
                newWidth += child.width * this._getUsedScaleValue(_tempScale.x);
              }
            }
          } catch (err) {
            _iterator8.e(err);
          } finally {
            _iterator8.f();
          }

          newWidth += (activeChildCount - 1) * this._spacingX + this._paddingLeft + this._paddingRight;
        } else {
          newWidth = this.node.getContentSize().width;
        }

        return newWidth;
      }
    }, {
      key: "_getVerticalBaseHeight",
      value: function _getVerticalBaseHeight(children) {
        var newHeight = 0;
        var activeChildCount = 0;

        if (this._resizeMode === ResizeMode.CONTAINER) {
          var _iterator9 = _createForOfIteratorHelper(children),
              _step9;

          try {
            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
              var child = _step9.value;
              child.getScale(_tempScale);

              if (child.activeInHierarchy) {
                activeChildCount++;
                newHeight += child.height * this._getUsedScaleValue(_tempScale.y);
              }
            }
          } catch (err) {
            _iterator9.e(err);
          } finally {
            _iterator9.f();
          }

          newHeight += (activeChildCount - 1) * this._spacingY + this._paddingBottom + this._paddingTop;
        } else {
          newHeight = this.node.getContentSize().height;
        }

        return newHeight;
      }
    }, {
      key: "_doLayout",
      value: function _doLayout() {
        var _this4 = this;

        if (this._N$layoutType === Type.HORIZONTAL) {
          var newWidth = this._getHorizontalBaseWidth(this.node.children);

          var fnPositionY = function fnPositionY(child) {
            var pos = _this4._isAlign ? _index.Vec3.ZERO : child.position;
            return pos.y;
          };

          this._doLayoutHorizontally(newWidth, false, fnPositionY, true);

          this._isAlign = false;
          this.node.width = newWidth;
        } else if (this._N$layoutType === Type.VERTICAL) {
          var newHeight = this._getVerticalBaseHeight(this.node.children);

          var fnPositionX = function fnPositionX(child) {
            var pos = _this4._isAlign ? _index.Vec3.ZERO : child.position;
            return pos.x;
          };

          this._doLayoutVertically(newHeight, false, fnPositionX, true);

          this._isAlign = false;
          this.node.height = newHeight;
        } else if (this._N$layoutType === Type.NONE) {
          if (this._resizeMode === ResizeMode.CONTAINER) {
            this._doLayoutBasic();
          }
        } else if (this._N$layoutType === Type.GRID) {
          this._doLayoutGrid();
        }
      }
    }, {
      key: "_getUsedScaleValue",
      value: function _getUsedScaleValue(value) {
        return this._affectedByScale ? Math.abs(value) : 1;
      }
    }, {
      key: "_transformDirty",
      value: function _transformDirty(type) {
        if (!(type & _nodeEnum.TransformBit.POSITION)) {
          return;
        }

        this._doLayoutDirty();
      }
    }, {
      key: "_doLayoutDirty",
      value: function _doLayoutDirty() {
        this._layoutDirty = true;
      }
    }, {
      key: "_doScaleDirty",
      value: function _doScaleDirty(type) {
        if (type & _nodeEnum.TransformBit.SCALE) {
          this._layoutDirty = this._layoutDirty || this._affectedByScale;
        }
      }
    }, {
      key: "type",

      /**
       * @en
       * The layout type.
       *
       * @zh
       * 布局类型。
       */
      get: function get() {
        return this._N$layoutType;
      },
      set: function set(value) {
        this._N$layoutType = value;

        if (_defaultConstants.EDITOR && this._N$layoutType !== Type.NONE && this._resizeMode === ResizeMode.CONTAINER
        /*&& !cc.engine.isPlaying*/
        ) {// const reLayouted = _Scene.DetectConflict.checkConflict_Layout(this);
            // if (reLayouted) {
            //     return;
            // }
          }

        this._isAlign = true;

        this._doLayoutDirty();
      }
      /**
       * @en
       * The are three resize modes for Layout. None, resize Container and resize children.
       *
       * @zh
       * 缩放模式。
       */

    }, {
      key: "resizeMode",
      get: function get() {
        return this._resizeMode;
      },
      set: function set(value) {
        if (this._N$layoutType === Type.NONE && value === ResizeMode.CHILDREN) {
          return;
        }

        this._resizeMode = value;

        if (_defaultConstants.EDITOR && value === ResizeMode.CONTAINER
        /*&& !cc.engine.isPlaying*/
        ) {// const reLayouted = _Scene.DetectConflict.checkConflict_Layout(this);
            // if (reLayouted) {
            //     return;
            // }
          }

        this._doLayoutDirty();
      }
      /**
       * @en
       * The cell size for grid layout.
       *
       * @zh
       * 每个格子的大小，只有布局类型为 GRID 的时候才有效。
       */

    }, {
      key: "cellSize",
      get: function get() {
        return this._cellSize;
      },
      set: function set(value) {
        if (this._cellSize === value) {
          return;
        }

        this._cellSize.set(value);

        this._doLayoutDirty();
      }
      /**
       * @en
       * The start axis for grid layout. If you choose horizontal, then children will layout horizontally at first,
       * and then break line on demand. Choose vertical if you want to layout vertically at first .
       *
       * @zh
       * 起始轴方向类型，可进行水平和垂直布局排列，只有布局类型为 GRID 的时候才有效。
       */

    }, {
      key: "startAxis",
      get: function get() {
        return this._startAxis;
      },
      set: function set(value) {
        if (this._startAxis === value) {
          return;
        }

        if (_defaultConstants.EDITOR && this._resizeMode === ResizeMode.CONTAINER && !cc.engine.isPlaying) {// const reLayouted = _Scene.DetectConflict.checkConflict_Layout(this);
          // if (reLayouted) {
          //     return;
          // }
        }

        this._startAxis = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * The left padding of layout, it only effect the layout in one direction.
       *
       * @zh
       * 容器内左边距，只会在一个布局方向上生效。
       */

    }, {
      key: "paddingLeft",
      get: function get() {
        return this._paddingLeft;
      },
      set: function set(value) {
        if (this._paddingLeft === value) {
          return;
        }

        this._paddingLeft = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * The right padding of layout, it only effect the layout in one direction.
       *
       * @zh
       * 容器内右边距，只会在一个布局方向上生效。
       */

    }, {
      key: "paddingRight",
      get: function get() {
        return this._paddingRight;
      },
      set: function set(value) {
        if (this._paddingRight === value) {
          return;
        }

        this._paddingRight = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * The top padding of layout, it only effect the layout in one direction.
       *
       * @zh
       * 容器内上边距，只会在一个布局方向上生效。
       */

    }, {
      key: "paddingTop",
      get: function get() {
        return this._paddingTop;
      },
      set: function set(value) {
        if (this._paddingTop === value) {
          return;
        }

        this._paddingTop = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * The bottom padding of layout, it only effect the layout in one direction.
       *
       * @zh
       * 容器内下边距，只会在一个布局方向上生效。
       */

    }, {
      key: "paddingBottom",
      get: function get() {
        return this._paddingBottom;
      },
      set: function set(value) {
        if (this._paddingBottom === value) {
          return;
        }

        this._paddingBottom = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * The distance in x-axis between each element in layout.
       *
       * @zh
       * 子节点之间的水平间距。
       */

    }, {
      key: "spacingX",
      get: function get() {
        return this._spacingX;
      },
      set: function set(value) {
        if (this._spacingX === value) {
          return;
        }

        this._spacingX = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * The distance in y-axis between each element in layout.
       *
       * @zh
       * 子节点之间的垂直间距。
       */

    }, {
      key: "spacingY",
      get: function get() {
        return this._spacingY;
      },
      set: function set(value) {
        if (this._spacingY === value) {
          return;
        }

        this._spacingY = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * Only take effect in Vertical layout mode.
       * This option changes the start element's positioning.
       *
       * @zh
       * 垂直排列子节点的方向。
       */

    }, {
      key: "verticalDirection",
      get: function get() {
        return this._verticalDirection;
      },
      set: function set(value) {
        if (this._verticalDirection === value) {
          return;
        }

        this._verticalDirection = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * Only take effect in horizontal layout mode.
       * This option changes the start element's positioning.
       *
       * @zh
       * 水平排列子节点的方向。
       */

    }, {
      key: "horizontalDirection",
      get: function get() {
        return this._horizontalDirection;
      },
      set: function set(value) {
        if (this._horizontalDirection === value) {
          return;
        }

        this._horizontalDirection = value;

        this._doLayoutDirty();
      }
      /**
       * @en
       * The padding of layout, it will effect the layout in horizontal and vertical direction.
       *
       * @zh
       * 容器内边距，该属性会在四个布局方向上生效。
       */

    }, {
      key: "padding",
      get: function get() {
        return this._paddingLeft;
      },
      set: function set(value) {
        this._N$padding = value;

        this._migratePaddingData();

        this._doLayoutDirty();
      }
      /**
       * @en
       * Adjust the layout if the children scaled.
       *
       * @zh
       * 子节点缩放比例是否影响布局。
       */

    }, {
      key: "affectedByScale",
      get: function get() {
        return this._affectedByScale;
      },
      set: function set(value) {
        this._affectedByScale = value;

        this._doLayoutDirty();
      }
    }]);

    return LayoutComponent;
  }(_component.Component), _class3.Type = Type, _class3.VerticalDirection = VerticalDirection, _class3.HorizontalDirection = HorizontalDirection, _class3.ResizeMode = ResizeMode, _class3.AxisDirection = AxisDirection, _temp), (_applyDecoratedDescriptor(_class2.prototype, "type", [_dec6], Object.getOwnPropertyDescriptor(_class2.prototype, "type"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "resizeMode", [_dec7], Object.getOwnPropertyDescriptor(_class2.prototype, "resizeMode"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "cellSize", [_dec8], Object.getOwnPropertyDescriptor(_class2.prototype, "cellSize"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "startAxis", [_dec9], Object.getOwnPropertyDescriptor(_class2.prototype, "startAxis"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "paddingLeft", [_dec10], Object.getOwnPropertyDescriptor(_class2.prototype, "paddingLeft"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "paddingRight", [_dec11], Object.getOwnPropertyDescriptor(_class2.prototype, "paddingRight"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "paddingTop", [_dec12], Object.getOwnPropertyDescriptor(_class2.prototype, "paddingTop"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "paddingBottom", [_dec13], Object.getOwnPropertyDescriptor(_class2.prototype, "paddingBottom"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "spacingX", [_dec14], Object.getOwnPropertyDescriptor(_class2.prototype, "spacingX"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "spacingY", [_dec15], Object.getOwnPropertyDescriptor(_class2.prototype, "spacingY"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "verticalDirection", [_dec16], Object.getOwnPropertyDescriptor(_class2.prototype, "verticalDirection"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "horizontalDirection", [_dec17], Object.getOwnPropertyDescriptor(_class2.prototype, "horizontalDirection"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "padding", [_dec18], Object.getOwnPropertyDescriptor(_class2.prototype, "padding"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "affectedByScale", [_dec19], Object.getOwnPropertyDescriptor(_class2.prototype, "affectedByScale"), _class2.prototype), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "_resizeMode", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return ResizeMode.NONE;
    }
  }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "_N$layoutType", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return Type.NONE;
    }
  }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "_N$padding", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "_cellSize", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return new _index.Size(40, 40);
    }
  }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "_startAxis", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return AxisDirection.HORIZONTAL;
    }
  }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "_paddingLeft", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "_paddingRight", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, "_paddingTop", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor9 = _applyDecoratedDescriptor(_class2.prototype, "_paddingBottom", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor10 = _applyDecoratedDescriptor(_class2.prototype, "_spacingX", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor11 = _applyDecoratedDescriptor(_class2.prototype, "_spacingY", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return 0;
    }
  }), _descriptor12 = _applyDecoratedDescriptor(_class2.prototype, "_verticalDirection", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return VerticalDirection.TOP_TO_BOTTOM;
    }
  }), _descriptor13 = _applyDecoratedDescriptor(_class2.prototype, "_horizontalDirection", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return HorizontalDirection.LEFT_TO_RIGHT;
    }
  }), _descriptor14 = _applyDecoratedDescriptor(_class2.prototype, "_affectedByScale", [_classDecorator.property], {
    configurable: true,
    enumerable: true,
    writable: true,
    initializer: function initializer() {
      return false;
    }
  })), _class2)) || _class) || _class) || _class) || _class) || _class) || _class);
  _exports.LayoutComponent = LayoutComponent;
  cc.LayoutComponent = LayoutComponent;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkY6L2plbmtpbnMvd29ya3NwYWNlL0NyZWF0b3JfM0QvZWRpdG9yLTNkL3Jlc291cmNlcy8zZC9lbmdpbmUvY29jb3MvdWkvY29tcG9uZW50cy9sYXlvdXQtY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbIk5vZGVFdmVudCIsIlN5c3RlbUV2ZW50VHlwZSIsIlR5cGUiLCJSZXNpemVNb2RlIiwiQXhpc0RpcmVjdGlvbiIsIlZlcnRpY2FsRGlyZWN0aW9uIiwiSG9yaXpvbnRhbERpcmVjdGlvbiIsIl90ZW1wUG9zIiwiVmVjMyIsIl90ZW1wU2NhbGUiLCJMYXlvdXRDb21wb25lbnQiLCJVSVRyYW5zZm9ybUNvbXBvbmVudCIsInR5cGUiLCJ0b29sdGlwIiwiZXhlY3V0ZUluRWRpdE1vZGUiLCJfbGF5b3V0U2l6ZSIsIlNpemUiLCJfbGF5b3V0RGlydHkiLCJfaXNBbGlnbiIsIm5vZGUiLCJjaGlsZHJlbiIsImxlbmd0aCIsIl9kb0xheW91dCIsIl9hZGRFdmVudExpc3RlbmVycyIsImdldENvbnRlbnRTaXplIiwiZXF1YWxzIiwic2V0Q29udGVudFNpemUiLCJfTiRwYWRkaW5nIiwiX21pZ3JhdGVQYWRkaW5nRGF0YSIsIl9kb0xheW91dERpcnR5IiwiX3JlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX3BhZGRpbmdMZWZ0IiwiX3BhZGRpbmdSaWdodCIsIl9wYWRkaW5nVG9wIiwiX3BhZGRpbmdCb3R0b20iLCJkaXJlY3RvciIsIm9uIiwiRGlyZWN0b3IiLCJFVkVOVF9BRlRFUl9VUERBVEUiLCJ1cGRhdGVMYXlvdXQiLCJTSVpFX0NIQU5HRUQiLCJfcmVzaXplZCIsIkFOQ0hPUl9DSEFOR0VEIiwiQ0hJTERfQURERUQiLCJfY2hpbGRBZGRlZCIsIkNISUxEX1JFTU9WRUQiLCJfY2hpbGRSZW1vdmVkIiwiX2FkZENoaWxkcmVuRXZlbnRMaXN0ZW5lcnMiLCJvZmYiLCJfcmVtb3ZlQ2hpbGRyZW5FdmVudExpc3RlbmVycyIsImNoaWxkIiwiVFJBTlNGT1JNX0NIQU5HRUQiLCJfZG9TY2FsZURpcnR5IiwiX3RyYW5zZm9ybURpcnR5IiwiYmFzZVdpZHRoIiwicm93QnJlYWsiLCJmblBvc2l0aW9uWSIsImFwcGx5Q2hpbGRyZW4iLCJsYXlvdXRBbmNob3IiLCJnZXRBbmNob3JQb2ludCIsInNpZ24iLCJwYWRkaW5nWCIsInN0YXJ0UG9zIiwieCIsIl9ob3Jpem9udGFsRGlyZWN0aW9uIiwiUklHSFRfVE9fTEVGVCIsIm5leHRYIiwiX3NwYWNpbmdYIiwicm93TWF4SGVpZ2h0IiwidGVtcE1heEhlaWdodCIsInNlY29uZE1heEhlaWdodCIsInJvdyIsImNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5IiwibWF4SGVpZ2h0Q2hpbGRBbmNob3JZIiwiYWN0aXZlQ2hpbGRDb3VudCIsImFjdGl2ZUluSGllcmFyY2h5IiwibmV3Q2hpbGRXaWR0aCIsIl9jZWxsU2l6ZSIsIndpZHRoIiwiX04kbGF5b3V0VHlwZSIsIkdSSUQiLCJfcmVzaXplTW9kZSIsIkNISUxEUkVOIiwiZ2V0U2NhbGUiLCJjaGlsZFNjYWxlWCIsIl9nZXRVc2VkU2NhbGVWYWx1ZSIsImNoaWxkU2NhbGVZIiwieSIsImhlaWdodCIsImFuY2hvclgiLCJjaGlsZEJvdW5kaW5nQm94V2lkdGgiLCJjaGlsZEJvdW5kaW5nQm94SGVpZ2h0IiwicmlnaHRCb3VuZGFyeU9mQ2hpbGQiLCJyb3dCcmVha0JvdW5kYXJ5IiwibGVmdFRvUmlnaHRSb3dCcmVhayIsIkxFRlRfVE9fUklHSFQiLCJyaWdodFRvTGVmdFJvd0JyZWFrIiwiZmluYWxQb3NpdGlvblkiLCJnZXRQb3NpdGlvbiIsInNldFBvc2l0aW9uIiwieiIsInNpZ25YIiwidGVtcEZpbmFsUG9zaXRpb25ZIiwidG9wTWFyZ2luIiwiX3ZlcnRpY2FsRGlyZWN0aW9uIiwiVE9QX1RPX0JPVFRPTSIsImJhc2VIZWlnaHQiLCJjb2x1bW5CcmVhayIsImZuUG9zaXRpb25YIiwicGFkZGluZ1kiLCJib3R0b21Cb3VuZGFyeU9mTGF5b3V0IiwibmV4dFkiLCJfc3BhY2luZ1kiLCJjb2x1bW5NYXhXaWR0aCIsInRlbXBNYXhXaWR0aCIsInNlY29uZE1heFdpZHRoIiwiY29sdW1uIiwibWF4V2lkdGhDaGlsZEFuY2hvclgiLCJuZXdDaGlsZEhlaWdodCIsInNjYWxlIiwiYW5jaG9yWSIsInRvcEJvdW5kYXJ5T2ZDaGlsZCIsImNvbHVtbkJyZWFrQm91bmRhcnkiLCJib3R0b21Ub1RvcENvbHVtbkJyZWFrIiwiQk9UVE9NX1RPX1RPUCIsInRvcFRvQm90dG9tQ29sdW1uQnJlYWsiLCJmaW5hbFBvc2l0aW9uWCIsInRlbXBGaW5hbFBvc2l0aW9uWCIsInJpZ2h0TWFyZ2luIiwiYWxsQ2hpbGRyZW5Cb3VuZGluZ0JveCIsImNoaWxkVHJhbnNmb3JtIiwiZ2V0Q29tcG9uZW50IiwiZ2V0Qm91bmRpbmdCb3hUb1dvcmxkIiwiUmVjdCIsInVuaW9uIiwicGFyZW50VHJhbnNmb3JtIiwicGFyZW50Iiwic2V0IiwibGVmdEJvdHRvbUluUGFyZW50U3BhY2UiLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsInJpZ2h0VG9wSW5QYXJlbnRTcGFjZSIsIm5ld1NpemUiLCJjYyIsInNpemUiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsIm5ld0FuY2hvclgiLCJuZXdBbmNob3JZIiwibGF5b3V0U2l6ZSIsInNlbGYiLCJ0b3BPZmZzZXQiLCJuZXdIZWlnaHQiLCJDT05UQUlORVIiLCJib3VuZGFyeSIsIl9kb0xheW91dEhvcml6b250YWxseSIsImxlZnRCb3VuZGFyeU9mTGF5b3V0IiwibGVmdE9mZnNldCIsIm5ld1dpZHRoIiwiX2RvTGF5b3V0VmVydGljYWxseSIsInN0YXJ0QXhpcyIsIkhPUklaT05UQUwiLCJfZG9MYXlvdXRHcmlkQXhpc0hvcml6b250YWwiLCJWRVJUSUNBTCIsIl9kb0xheW91dEdyaWRBeGlzVmVydGljYWwiLCJfZ2V0SG9yaXpvbnRhbEJhc2VXaWR0aCIsInBvcyIsIlpFUk8iLCJwb3NpdGlvbiIsIl9nZXRWZXJ0aWNhbEJhc2VIZWlnaHQiLCJOT05FIiwiX2RvTGF5b3V0QmFzaWMiLCJfZG9MYXlvdXRHcmlkIiwidmFsdWUiLCJfYWZmZWN0ZWRCeVNjYWxlIiwiTWF0aCIsImFicyIsIlRyYW5zZm9ybUJpdCIsIlBPU0lUSU9OIiwiU0NBTEUiLCJFRElUT1IiLCJfc3RhcnRBeGlzIiwiZW5naW5lIiwiaXNQbGF5aW5nIiwiQ29tcG9uZW50IiwicHJvcGVydHkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3Q0EsTUFBTUEsU0FBUyxHQUFHQywwQkFBbEI7QUFDQTs7Ozs7O01BS0tDLEk7O2FBQUFBLEk7QUFBQUEsSUFBQUEsSSxDQUFBQSxJO0FBQUFBLElBQUFBLEksQ0FBQUEsSTtBQUFBQSxJQUFBQSxJLENBQUFBLEk7QUFBQUEsSUFBQUEsSSxDQUFBQSxJO0tBQUFBLEksS0FBQUEsSTs7QUE0Qkwsb0JBQU9BLElBQVA7QUFFQTs7Ozs7O01BS0tDLFU7O2FBQUFBLFU7QUFBQUEsSUFBQUEsVSxDQUFBQSxVO0FBQUFBLElBQUFBLFUsQ0FBQUEsVTtBQUFBQSxJQUFBQSxVLENBQUFBLFU7S0FBQUEsVSxLQUFBQSxVOztBQXFCTCxvQkFBT0EsVUFBUDtBQUVBOzs7Ozs7TUFLS0MsYTs7YUFBQUEsYTtBQUFBQSxJQUFBQSxhLENBQUFBLGE7QUFBQUEsSUFBQUEsYSxDQUFBQSxhO0tBQUFBLGEsS0FBQUEsYTs7QUFlTCxvQkFBT0EsYUFBUDtBQUVBOzs7Ozs7TUFLS0MsaUI7O2FBQUFBLGlCO0FBQUFBLElBQUFBLGlCLENBQUFBLGlCO0FBQUFBLElBQUFBLGlCLENBQUFBLGlCO0tBQUFBLGlCLEtBQUFBLGlCOztBQWNMLG9CQUFPQSxpQkFBUDtBQUVBOzs7Ozs7TUFLS0MsbUI7O2FBQUFBLG1CO0FBQUFBLElBQUFBLG1CLENBQUFBLG1CO0FBQUFBLElBQUFBLG1CLENBQUFBLG1CO0tBQUFBLG1CLEtBQUFBLG1COztBQWNMLG9CQUFPQSxtQkFBUDs7QUFFQSxNQUFNQyxRQUFRLEdBQUcsSUFBSUMsV0FBSixF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OztvRkFDeEJBLHdCOzs7OzthQUN5QixDOztrRkFDekJBLHdCOzs7OzthQUN1QixDOztxRkFDdkJBLHdCOzs7OzthQUMwQixDOztpRkFDMUJBLHdCOzs7OzthQUNxQixDOztpRkFDckJBLHdCOzs7OzthQUNxQixDOzswRkFDckJBLHdCOzs7OzthQUM4Qm5MLGlCQUFpQixDQUFDb0csYTs7NEZBQ2hEK0Usd0I7Ozs7O2FBQ2dDbEwsbUJBQW1CLENBQUN5RixhOzt3RkFDcER5Rix3Qjs7Ozs7YUFDNEIsSzs7OztBQW1vQmpDMUMsRUFBQUEsRUFBRSxDQUFDcEksZUFBSCxHQUFxQkEsZUFBckIiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gQ29weXJpZ2h0IChjKSAyMDEzLTIwMTYgQ2h1a29uZyBUZWNobm9sb2dpZXMgSW5jLlxyXG4gQ29weXJpZ2h0IChjKSAyMDE3LTIwMTggWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuXHJcblxyXG4gaHR0cDovL3d3dy5jb2Nvcy5jb21cclxuXHJcbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcclxuICB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXHJcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxyXG4gIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcclxuICB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXHJcbiAgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXHJcblxyXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cclxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXHJcblxyXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXHJcbiBUSEUgU09GVFdBUkUuXHJcbiovXHJcblxyXG4vKipcclxuICogQGNhdGVnb3J5IHVpXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9jb21wb25lbnRzL2NvbXBvbmVudCc7XHJcbmltcG9ydCB7IGNjY2xhc3MsIGhlbHAsIGV4ZWN1dGVJbkVkaXRNb2RlLCBleGVjdXRpb25PcmRlciwgbWVudSwgcHJvcGVydHksIHJlcXVpcmVDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb3JlL2RhdGEvY2xhc3MtZGVjb3JhdG9yJztcclxuaW1wb3J0IHsgUmVjdCwgU2l6ZSwgVmVjMiwgVmVjMyB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aCc7XHJcbmltcG9ydCB7IGNjZW51bSB9IGZyb20gJy4uLy4uL2NvcmUvdmFsdWUtdHlwZXMvZW51bSc7XHJcbmltcG9ydCB7IFVJVHJhbnNmb3JtQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29yZS9jb21wb25lbnRzL3VpLWJhc2UvdWktdHJhbnNmb3JtLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFN5c3RlbUV2ZW50VHlwZSB9IGZyb20gJy4uLy4uL2NvcmUvcGxhdGZvcm0vZXZlbnQtbWFuYWdlci9ldmVudC1lbnVtJztcclxuaW1wb3J0IHsgZGlyZWN0b3IsIERpcmVjdG9yIH0gZnJvbSAnLi4vLi4vY29yZS9kaXJlY3Rvcic7XHJcbmltcG9ydCB7IFRyYW5zZm9ybUJpdCB9IGZyb20gJy4uLy4uL2NvcmUvc2NlbmUtZ3JhcGgvbm9kZS1lbnVtJztcclxuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uLy4uL2NvcmUnO1xyXG5pbXBvcnQgeyBFRElUT1IgfSBmcm9tICdpbnRlcm5hbDpjb25zdGFudHMnO1xyXG5jb25zdCBOb2RlRXZlbnQgPSBTeXN0ZW1FdmVudFR5cGU7XHJcbi8qKlxyXG4gKiBAZW4gRW51bSBmb3IgbGF5b3V0LlxyXG4gKlxyXG4gKiBAemgg5biD5bGA57G75Z6L44CCXHJcbiAqL1xyXG5lbnVtIFR5cGUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gTm9uZSBMYXlvdXQuXHJcbiAgICAgKlxyXG4gICAgICogQHpoIOWPlua2iOW4g+WxgOOAglxyXG4gICAgICovXHJcbiAgICBOT05FID0gMCxcclxuICAgIC8qKlxyXG4gICAgICogQGVuIEhvcml6b250YWwgTGF5b3V0LlxyXG4gICAgICpcclxuICAgICAqIEB6aCDmsLTlubPluIPlsYDjgIJcclxuICAgICAqL1xyXG4gICAgSE9SSVpPTlRBTCA9IDEsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gVmVydGljYWwgTGF5b3V0LlxyXG4gICAgICpcclxuICAgICAqIEB6aCDlnoLnm7TluIPlsYDjgIJcclxuICAgICAqL1xyXG4gICAgVkVSVElDQUwgPSAyLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gR3JpZCBMYXlvdXQuXHJcbiAgICAgKlxyXG4gICAgICogQHpoIOe9keagvOW4g+WxgOOAglxyXG4gICAgICovXHJcbiAgICBHUklEID0gMyxcclxufVxyXG5cclxuY2NlbnVtKFR5cGUpO1xyXG5cclxuLyoqXHJcbiAqIEBlbiBFbnVtIGZvciBMYXlvdXQgUmVzaXplIE1vZGUuXHJcbiAqXHJcbiAqIEB6aCDnvKnmlL7mqKHlvI/jgIJcclxuICovXHJcbmVudW0gUmVzaXplTW9kZSB7XHJcbiAgICAvKipcclxuICAgICAqIEBlbiBEb24ndCBzY2FsZS5cclxuICAgICAqXHJcbiAgICAgKiBAemgg5LiN5YGa5Lu75L2V57yp5pS+44CCXHJcbiAgICAgKi9cclxuICAgIE5PTkUgPSAwLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gVGhlIGNvbnRhaW5lciBzaXplIHdpbGwgYmUgZXhwYW5kZWQgd2l0aCBpdHMgY2hpbGRyZW4ncyBzaXplLlxyXG4gICAgICpcclxuICAgICAqIEB6aCDlrrnlmajnmoTlpKflsI/kvJrmoLnmja7lrZDoioLngrnnmoTlpKflsI/oh6rliqjnvKnmlL7jgIJcclxuICAgICAqL1xyXG4gICAgQ09OVEFJTkVSID0gMSxcclxuICAgIC8qKlxyXG4gICAgICogQGVuIENoaWxkIGl0ZW0gc2l6ZSB3aWxsIGJlIGFkanVzdGVkIHdpdGggdGhlIGNvbnRhaW5lcidzIHNpemUuXHJcbiAgICAgKlxyXG4gICAgICogQHpoIOWtkOiKgueCueeahOWkp+Wwj+S8mumaj+edgOWuueWZqOeahOWkp+Wwj+iHquWKqOe8qeaUvuOAglxyXG4gICAgICovXHJcbiAgICBDSElMRFJFTiA9IDIsXHJcbn1cclxuXHJcbmNjZW51bShSZXNpemVNb2RlKTtcclxuXHJcbi8qKlxyXG4gKiBAZW4gRW51bSBmb3IgR3JpZCBMYXlvdXQgc3RhcnQgYXhpcyBkaXJlY3Rpb24uXHJcbiAqXHJcbiAqIEB6aCDluIPlsYDovbTlkJHvvIzlj6rnlKjkuo4gR1JJRCDluIPlsYDjgIJcclxuICovXHJcbmVudW0gQXhpc0RpcmVjdGlvbiB7XHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgaG9yaXpvbnRhbCBheGlzLlxyXG4gICAgICpcclxuICAgICAqIEB6aCDov5vooYzmsLTlubPmlrnlkJHluIPlsYDjgIJcclxuICAgICAqL1xyXG4gICAgSE9SSVpPTlRBTCA9IDAsXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgdmVydGljYWwgYXhpcy5cclxuICAgICAqXHJcbiAgICAgKiBAemgg6L+b6KGM5Z6C55u05pa55ZCR5biD5bGA44CCXHJcbiAgICAgKi9cclxuICAgIFZFUlRJQ0FMID0gMSxcclxufVxyXG5cclxuY2NlbnVtKEF4aXNEaXJlY3Rpb24pO1xyXG5cclxuLyoqXHJcbiAqIEBlbiBFbnVtIGZvciB2ZXJ0aWNhbCBsYXlvdXQgZGlyZWN0aW9uLlxyXG4gKlxyXG4gKiBAemgg5Z6C55u05pa55ZCR5biD5bGA5pa55byP44CCXHJcbiAqL1xyXG5lbnVtIFZlcnRpY2FsRGlyZWN0aW9uIHtcclxuICAgIC8qKlxyXG4gICAgICogQGVuIEl0ZW1zIGFycmFuZ2VkIGZyb20gYm90dG9tIHRvIHRvcC5cclxuICAgICAqXHJcbiAgICAgKiBAemgg5LuO5LiL5Yiw5LiK5o6S5YiX44CCXHJcbiAgICAgKi9cclxuICAgIEJPVFRPTV9UT19UT1AgPSAwLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gSXRlbXMgYXJyYW5nZWQgZnJvbSB0b3AgdG8gYm90dG9tLlxyXG4gICAgICogQHpoIOS7juS4iuWIsOS4i+aOkuWIl+OAglxyXG4gICAgICovXHJcbiAgICBUT1BfVE9fQk9UVE9NID0gMSxcclxufVxyXG5cclxuY2NlbnVtKFZlcnRpY2FsRGlyZWN0aW9uKTtcclxuXHJcbi8qKlxyXG4gKiBAZW4gRW51bSBmb3IgaG9yaXpvbnRhbCBsYXlvdXQgZGlyZWN0aW9uLlxyXG4gKlxyXG4gKiBAemgg5rC05bmz5pa55ZCR5biD5bGA5pa55byP44CCXHJcbiAqL1xyXG5lbnVtIEhvcml6b250YWxEaXJlY3Rpb24ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gSXRlbXMgYXJyYW5nZWQgZnJvbSBsZWZ0IHRvIHJpZ2h0LlxyXG4gICAgICpcclxuICAgICAqIEB6aCDku47lt6blvoDlj7PmjpLliJfjgIJcclxuICAgICAqL1xyXG4gICAgTEVGVF9UT19SSUdIVCA9IDAsXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBJdGVtcyBhcnJhbmdlZCBmcm9tIHJpZ2h0IHRvIGxlZnQuXHJcbiAgICAgKiBAemgg5LuO5Y+z5b6A5bem5o6S5YiX44CCXHJcbiAgICAgKi9cclxuICAgIFJJR0hUX1RPX0xFRlQgPSAxLFxyXG59XHJcblxyXG5jY2VudW0oSG9yaXpvbnRhbERpcmVjdGlvbik7XHJcblxyXG5jb25zdCBfdGVtcFBvcyA9IG5ldyBWZWMzKCk7XHJcbmNvbnN0IF90ZW1wU2NhbGUgPSBuZXcgVmVjMygpO1xyXG5cclxuLyoqXHJcbiAqIEBlblxyXG4gKiBUaGUgTGF5b3V0IGlzIGEgY29udGFpbmVyIGNvbXBvbmVudCwgdXNlIGl0IHRvIGFycmFuZ2UgY2hpbGQgZWxlbWVudHMgZWFzaWx5Ljxicj5cclxuICogTm90Ze+8mjxicj5cclxuICogMS5TY2FsaW5nIGFuZCByb3RhdGlvbiBvZiBjaGlsZCBub2RlcyBhcmUgbm90IGNvbnNpZGVyZWQuPGJyPlxyXG4gKiAyLkFmdGVyIHNldHRpbmcgdGhlIExheW91dCwgdGhlIHJlc3VsdHMgbmVlZCB0byBiZSB1cGRhdGVkIHVudGlsIHRoZSBuZXh0IGZyYW1lLHVubGVzcyB5b3UgbWFudWFsbHkgY2FsbC5bW3VwZGF0ZUxheW91dF1dXHJcbiAqXHJcbiAqIEB6aFxyXG4gKiBMYXlvdXQg57uE5Lu255u45b2T5LqO5LiA5Liq5a655Zmo77yM6IO96Ieq5Yqo5a+55a6D55qE5omA5pyJ5a2Q6IqC54K56L+b6KGM57uf5LiA5o6S54mI44CCPGJyPlxyXG4gKiDms6jmhI/vvJo8YnI+XHJcbiAqIDEu5LiN5Lya6ICD6JmR5a2Q6IqC54K555qE57yp5pS+5ZKM5peL6L2s44CCPGJyPlxyXG4gKiAyLuWvuSBMYXlvdXQg6K6+572u5ZCO57uT5p6c6ZyA6KaB5Yiw5LiL5LiA5bin5omN5Lya5pu05paw77yM6Zmk6Z2e5L2g6K6+572u5a6M5Lul5ZCO5omL5Yqo6LCD55So44CCW1t1cGRhdGVMYXlvdXRdXVxyXG4gKi9cclxuQGNjY2xhc3MoJ2NjLkxheW91dENvbXBvbmVudCcpXHJcbkBoZWxwKCdpMThuOmNjLkxheW91dENvbXBvbmVudCcpXHJcbkBleGVjdXRpb25PcmRlcigxMTApXHJcbkBtZW51KCdVSS9MYXlvdXQnKVxyXG5AcmVxdWlyZUNvbXBvbmVudChVSVRyYW5zZm9ybUNvbXBvbmVudClcclxuQGV4ZWN1dGVJbkVkaXRNb2RlXHJcbmV4cG9ydCBjbGFzcyBMYXlvdXRDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgbGF5b3V0IHR5cGUuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDluIPlsYDnsbvlnovjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBUeXBlLFxyXG4gICAgICAgIHRvb2x0aXA6J+iHquWKqOW4g+WxgOaooeW8j++8jOWMheaLrO+8mlxcbiAxLiBOT05F77yM5LiN5Lya5a+55a2Q6IqC54K56L+b6KGM6Ieq5Yqo5biD5bGAIFxcbiAyLiBIT1JJWk9OVEFM77yM5qiq5ZCR6Ieq5Yqo5o6S5biD5a2Q54mp5L2TIFxcbiAzLiBWRVJUSUNBTO+8jOWeguebtOiHquWKqOaOkuW4g+WtkOeJqeS9k1xcbiA0LiBHUklELCDph4fnlKjnvZHmoLzmlrnlvI/lr7nlrZDniankvZPoh6rliqjov5vooYzluIPlsYAnLFxyXG4gICAgfSlcclxuICAgIGdldCB0eXBlICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fTiRsYXlvdXRUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB0eXBlICh2YWx1ZTogVHlwZSkge1xyXG4gICAgICAgIHRoaXMuX04kbGF5b3V0VHlwZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoRURJVE9SICYmIHRoaXMuX04kbGF5b3V0VHlwZSAhPT0gVHlwZS5OT05FICYmIHRoaXMuX3Jlc2l6ZU1vZGUgPT09IFJlc2l6ZU1vZGUuQ09OVEFJTkVSIC8qJiYgIWNjLmVuZ2luZS5pc1BsYXlpbmcqLykge1xyXG4gICAgICAgICAgICAvLyBjb25zdCByZUxheW91dGVkID0gX1NjZW5lLkRldGVjdENvbmZsaWN0LmNoZWNrQ29uZmxpY3RfTGF5b3V0KHRoaXMpO1xyXG4gICAgICAgICAgICAvLyBpZiAocmVMYXlvdXRlZCkge1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9pc0FsaWduID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9kb0xheW91dERpcnR5KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIGFyZSB0aHJlZSByZXNpemUgbW9kZXMgZm9yIExheW91dC4gTm9uZSwgcmVzaXplIENvbnRhaW5lciBhbmQgcmVzaXplIGNoaWxkcmVuLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog57yp5pS+5qih5byP44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogUmVzaXplTW9kZSxcclxuICAgICAgICB0b29sdGlwOifnvKnmlL7mqKHlvI/vvIzljIXmi6zvvJpcXG4gMS4gTk9ORe+8jOS4jeS8muWvueWtkOiKgueCueWSjOWuueWZqOi/m+ihjOWkp+Wwj+e8qeaUviBcXG4gMi4gQ09OVEFJTkVSLCDlr7nlrrnlmajnmoTlpKflsI/ov5vooYznvKnmlL4gXFxuIDMuIENISUxEUkVOLCDlr7nlrZDoioLngrnnmoTlpKflsI/ov5vooYznvKnmlL4nLFxyXG4gICAgfSlcclxuICAgIGdldCByZXNpemVNb2RlICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVzaXplTW9kZTtcclxuICAgIH1cclxuICAgIHNldCByZXNpemVNb2RlICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9OJGxheW91dFR5cGUgPT09IFR5cGUuTk9ORSAmJiB2YWx1ZSA9PT0gUmVzaXplTW9kZS5DSElMRFJFTikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9yZXNpemVNb2RlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKEVESVRPUiAmJiB2YWx1ZSA9PT0gUmVzaXplTW9kZS5DT05UQUlORVIgLyomJiAhY2MuZW5naW5lLmlzUGxheWluZyovKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IHJlTGF5b3V0ZWQgPSBfU2NlbmUuRGV0ZWN0Q29uZmxpY3QuY2hlY2tDb25mbGljdF9MYXlvdXQodGhpcyk7XHJcbiAgICAgICAgICAgIC8vIGlmIChyZUxheW91dGVkKSB7XHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZG9MYXlvdXREaXJ0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgY2VsbCBzaXplIGZvciBncmlkIGxheW91dC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOavj+S4quagvOWtkOeahOWkp+Wwj++8jOWPquacieW4g+WxgOexu+Wei+S4uiBHUklEIOeahOaXtuWAmeaJjeacieaViOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICfmr4/kuKrmoLzlrZDnmoTlpKflsI/vvIzlj6rmnInluIPlsYDnsbvlnovkuLogR1JJRCDnmoTml7blgJnmiY3mnInmlYgnLFxyXG4gICAgfSlcclxuICAgIC8vIEBjb25zdGdldFxyXG4gICAgZ2V0IGNlbGxTaXplICgpOiBSZWFkb25seTxTaXplPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NlbGxTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjZWxsU2l6ZSAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fY2VsbFNpemUgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2NlbGxTaXplLnNldCh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fZG9MYXlvdXREaXJ0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgc3RhcnQgYXhpcyBmb3IgZ3JpZCBsYXlvdXQuIElmIHlvdSBjaG9vc2UgaG9yaXpvbnRhbCwgdGhlbiBjaGlsZHJlbiB3aWxsIGxheW91dCBob3Jpem9udGFsbHkgYXQgZmlyc3QsXHJcbiAgICAgKiBhbmQgdGhlbiBicmVhayBsaW5lIG9uIGRlbWFuZC4gQ2hvb3NlIHZlcnRpY2FsIGlmIHlvdSB3YW50IHRvIGxheW91dCB2ZXJ0aWNhbGx5IGF0IGZpcnN0IC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOi1t+Wni+i9tOaWueWQkeexu+Wei++8jOWPr+i/m+ihjOawtOW5s+WSjOWeguebtOW4g+WxgOaOkuWIl++8jOWPquacieW4g+WxgOexu+Wei+S4uiBHUklEIOeahOaXtuWAmeaJjeacieaViOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHR5cGU6IEF4aXNEaXJlY3Rpb24sXHJcbiAgICAgICAgdG9vbHRpcDogJ+i1t+Wni+i9tOaWueWQkeexu+Wei++8jOWPr+i/m+ihjOawtOW5s+WSjOWeguebtOW4g+WxgOaOkuWIl++8jOWPquacieW4g+WxgOexu+Wei+S4uiBHUklEIOeahOaXtuWAmeaJjeacieaViCcsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHN0YXJ0QXhpcyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0QXhpcztcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc3RhcnRBeGlzICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9zdGFydEF4aXMgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChFRElUT1IgJiYgdGhpcy5fcmVzaXplTW9kZSA9PT0gUmVzaXplTW9kZS5DT05UQUlORVIgJiYgIWNjLmVuZ2luZS5pc1BsYXlpbmcpIHtcclxuICAgICAgICAgICAgLy8gY29uc3QgcmVMYXlvdXRlZCA9IF9TY2VuZS5EZXRlY3RDb25mbGljdC5jaGVja0NvbmZsaWN0X0xheW91dCh0aGlzKTtcclxuICAgICAgICAgICAgLy8gaWYgKHJlTGF5b3V0ZWQpIHtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc3RhcnRBeGlzID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZG9MYXlvdXREaXJ0eSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBsZWZ0IHBhZGRpbmcgb2YgbGF5b3V0LCBpdCBvbmx5IGVmZmVjdCB0aGUgbGF5b3V0IGluIG9uZSBkaXJlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDlrrnlmajlhoXlt6bovrnot53vvIzlj6rkvJrlnKjkuIDkuKrluIPlsYDmlrnlkJHkuIrnlJ/mlYjjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0b29sdGlwOiAn5a655Zmo5YaF5bem6L656Led77yM5Y+q5Lya5Zyo5LiA5Liq5biD5bGA5pa55ZCR5LiK55Sf5pWIJyxcclxuICAgIH0pXHJcbiAgICBnZXQgcGFkZGluZ0xlZnQgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYWRkaW5nTGVmdDtcclxuICAgIH1cclxuICAgIHNldCBwYWRkaW5nTGVmdCAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fcGFkZGluZ0xlZnQgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3BhZGRpbmdMZWZ0ID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZG9MYXlvdXREaXJ0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgcmlnaHQgcGFkZGluZyBvZiBsYXlvdXQsIGl0IG9ubHkgZWZmZWN0IHRoZSBsYXlvdXQgaW4gb25lIGRpcmVjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOWuueWZqOWGheWPs+i+uei3ne+8jOWPquS8muWcqOS4gOS4quW4g+WxgOaWueWQkeS4iueUn+aViOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICflrrnlmajlhoXlj7Povrnot53vvIzlj6rkvJrlnKjkuIDkuKrluIPlsYDmlrnlkJHkuIrnlJ/mlYgnLFxyXG4gICAgfSlcclxuICAgIGdldCBwYWRkaW5nUmlnaHQgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYWRkaW5nUmlnaHQ7XHJcbiAgICB9XHJcbiAgICBzZXQgcGFkZGluZ1JpZ2h0ICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wYWRkaW5nUmlnaHQgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3BhZGRpbmdSaWdodCA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2RvTGF5b3V0RGlydHkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIHRvcCBwYWRkaW5nIG9mIGxheW91dCwgaXQgb25seSBlZmZlY3QgdGhlIGxheW91dCBpbiBvbmUgZGlyZWN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5a655Zmo5YaF5LiK6L656Led77yM5Y+q5Lya5Zyo5LiA5Liq5biD5bGA5pa55ZCR5LiK55Sf5pWI44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ+WuueWZqOWGheS4iui+uei3ne+8jOWPquS8muWcqOS4gOS4quW4g+WxgOaWueWQkeS4iueUn+aViCcsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHBhZGRpbmdUb3AgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYWRkaW5nVG9wO1xyXG4gICAgfVxyXG4gICAgc2V0IHBhZGRpbmdUb3AgKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3BhZGRpbmdUb3AgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3BhZGRpbmdUb3AgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl9kb0xheW91dERpcnR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW5cclxuICAgICAqIFRoZSBib3R0b20gcGFkZGluZyBvZiBsYXlvdXQsIGl0IG9ubHkgZWZmZWN0IHRoZSBsYXlvdXQgaW4gb25lIGRpcmVjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOWuueWZqOWGheS4i+i+uei3ne+8jOWPquS8muWcqOS4gOS4quW4g+WxgOaWueWQkeS4iueUn+aViOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICflrrnlmajlhoXkuIvovrnot53vvIzlj6rkvJrlnKjkuIDkuKrluIPlsYDmlrnlkJHkuIrnlJ/mlYgnLFxyXG4gICAgfSlcclxuICAgIGdldCBwYWRkaW5nQm90dG9tICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGFkZGluZ0JvdHRvbTtcclxuICAgIH1cclxuICAgIHNldCBwYWRkaW5nQm90dG9tICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wYWRkaW5nQm90dG9tID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9wYWRkaW5nQm90dG9tID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZG9MYXlvdXREaXJ0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgZGlzdGFuY2UgaW4geC1heGlzIGJldHdlZW4gZWFjaCBlbGVtZW50IGluIGxheW91dC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOWtkOiKgueCueS5i+mXtOeahOawtOW5s+mXtOi3neOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICflrZDoioLngrnkuYvpl7TnmoTmsLTlubPpl7Tot50nLFxyXG4gICAgfSlcclxuICAgIGdldCBzcGFjaW5nWCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NwYWNpbmdYO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzcGFjaW5nWCAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3BhY2luZ1ggPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NwYWNpbmdYID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZG9MYXlvdXREaXJ0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBUaGUgZGlzdGFuY2UgaW4geS1heGlzIGJldHdlZW4gZWFjaCBlbGVtZW50IGluIGxheW91dC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOWtkOiKgueCueS5i+mXtOeahOWeguebtOmXtOi3neOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICflrZDoioLngrnkuYvpl7TnmoTlnoLnm7Tpl7Tot50nLFxyXG4gICAgfSlcclxuICAgIGdldCBzcGFjaW5nWSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NwYWNpbmdZO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzcGFjaW5nWSAodmFsdWUpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3BhY2luZ1kgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NwYWNpbmdZID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZG9MYXlvdXREaXJ0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBPbmx5IHRha2UgZWZmZWN0IGluIFZlcnRpY2FsIGxheW91dCBtb2RlLlxyXG4gICAgICogVGhpcyBvcHRpb24gY2hhbmdlcyB0aGUgc3RhcnQgZWxlbWVudCdzIHBvc2l0aW9uaW5nLlxyXG4gICAgICpcclxuICAgICAqIEB6aFxyXG4gICAgICog5Z6C55u05o6S5YiX5a2Q6IqC54K555qE5pa55ZCR44CCXHJcbiAgICAgKi9cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdHlwZTogVmVydGljYWxEaXJlY3Rpb24sXHJcbiAgICAgICAgdG9vbHRpcDogJ+WeguebtOaOkuWIl+WtkOiKgueCueeahOaWueWQkScsXHJcbiAgICB9KVxyXG4gICAgZ2V0IHZlcnRpY2FsRGlyZWN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmVydGljYWxEaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHZlcnRpY2FsRGlyZWN0aW9uICh2YWx1ZTogVmVydGljYWxEaXJlY3Rpb24pIHtcclxuICAgICAgICBpZiAodGhpcy5fdmVydGljYWxEaXJlY3Rpb24gPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsRGlyZWN0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZG9MYXlvdXREaXJ0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuXHJcbiAgICAgKiBPbmx5IHRha2UgZWZmZWN0IGluIGhvcml6b250YWwgbGF5b3V0IG1vZGUuXHJcbiAgICAgKiBUaGlzIG9wdGlvbiBjaGFuZ2VzIHRoZSBzdGFydCBlbGVtZW50J3MgcG9zaXRpb25pbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHpoXHJcbiAgICAgKiDmsLTlubPmjpLliJflrZDoioLngrnnmoTmlrnlkJHjgIJcclxuICAgICAqL1xyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0eXBlOiBIb3Jpem9udGFsRGlyZWN0aW9uLFxyXG4gICAgICAgIHRvb2x0aXA6ICfmsLTlubPmjpLliJflrZDoioLngrnnmoTmlrnlkJEnLFxyXG4gICAgfSlcclxuICAgIGdldCBob3Jpem9udGFsRGlyZWN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faG9yaXpvbnRhbERpcmVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaG9yaXpvbnRhbERpcmVjdGlvbiAodmFsdWU6IEhvcml6b250YWxEaXJlY3Rpb24pIHtcclxuICAgICAgICBpZiAodGhpcy5faG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5faG9yaXpvbnRhbERpcmVjdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2RvTGF5b3V0RGlydHkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogVGhlIHBhZGRpbmcgb2YgbGF5b3V0LCBpdCB3aWxsIGVmZmVjdCB0aGUgbGF5b3V0IGluIGhvcml6b250YWwgYW5kIHZlcnRpY2FsIGRpcmVjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOWuueWZqOWGhei+uei3ne+8jOivpeWxnuaAp+S8muWcqOWbm+S4quW4g+WxgOaWueWQkeS4iueUn+aViOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICflrrnlmajlhoXovrnot53vvIzor6XlsZ7mgKfkvJrlnKjlm5vkuKrluIPlsYDmlrnlkJHkuIrnlJ/mlYgnLFxyXG4gICAgfSlcclxuICAgIGdldCBwYWRkaW5nICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGFkZGluZ0xlZnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBhZGRpbmcgKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fTiRwYWRkaW5nID0gdmFsdWU7XHJcblxyXG4gICAgICAgIHRoaXMuX21pZ3JhdGVQYWRkaW5nRGF0YSgpO1xyXG4gICAgICAgIHRoaXMuX2RvTGF5b3V0RGlydHkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogQWRqdXN0IHRoZSBsYXlvdXQgaWYgdGhlIGNoaWxkcmVuIHNjYWxlZC5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOWtkOiKgueCuee8qeaUvuavlOS+i+aYr+WQpuW9seWTjeW4g+WxgOOAglxyXG4gICAgICovXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICflrZDoioLngrnnvKnmlL7mr5TkvovmmK/lkKblvbHlk43luIPlsYAnLFxyXG4gICAgfSlcclxuICAgIGdldCBhZmZlY3RlZEJ5U2NhbGUgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZmZlY3RlZEJ5U2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGFmZmVjdGVkQnlTY2FsZSAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9hZmZlY3RlZEJ5U2NhbGUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl9kb0xheW91dERpcnR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBUeXBlID0gVHlwZTtcclxuICAgIHB1YmxpYyBzdGF0aWMgVmVydGljYWxEaXJlY3Rpb24gPSBWZXJ0aWNhbERpcmVjdGlvbjtcclxuICAgIHB1YmxpYyBzdGF0aWMgSG9yaXpvbnRhbERpcmVjdGlvbiA9IEhvcml6b250YWxEaXJlY3Rpb247XHJcbiAgICBwdWJsaWMgc3RhdGljIFJlc2l6ZU1vZGUgPSBSZXNpemVNb2RlO1xyXG4gICAgcHVibGljIHN0YXRpYyBBeGlzRGlyZWN0aW9uID0gQXhpc0RpcmVjdGlvbjtcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfcmVzaXplTW9kZSA9IFJlc2l6ZU1vZGUuTk9ORTtcclxuICAgIC8vIFRPRE86IHJlZmFjdG9yaW5nIHRoaXMgbmFtZSBhZnRlciBkYXRhIHVwZ3JhZGUgbWFjaGFuaXNtIGlzIG91dC5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9OJGxheW91dFR5cGUgPSBUeXBlLk5PTkU7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfTiRwYWRkaW5nID0gMDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9jZWxsU2l6ZSA9IG5ldyBTaXplKDQwLCA0MCk7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfc3RhcnRBeGlzID0gQXhpc0RpcmVjdGlvbi5IT1JJWk9OVEFMO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX3BhZGRpbmdMZWZ0ID0gMDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9wYWRkaW5nUmlnaHQgPSAwO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX3BhZGRpbmdUb3AgPSAwO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX3BhZGRpbmdCb3R0b20gPSAwO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX3NwYWNpbmdYID0gMDtcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgcHJvdGVjdGVkIF9zcGFjaW5nWSA9IDA7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfdmVydGljYWxEaXJlY3Rpb24gPSBWZXJ0aWNhbERpcmVjdGlvbi5UT1BfVE9fQk9UVE9NO1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcm90ZWN0ZWQgX2hvcml6b250YWxEaXJlY3Rpb24gPSBIb3Jpem9udGFsRGlyZWN0aW9uLkxFRlRfVE9fUklHSFQ7XHJcbiAgICBAcHJvcGVydHlcclxuICAgIHByb3RlY3RlZCBfYWZmZWN0ZWRCeVNjYWxlID0gZmFsc2U7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9sYXlvdXRTaXplID0gbmV3IFNpemUoMzAwLCAyMDApO1xyXG4gICAgcHJvdGVjdGVkIF9sYXlvdXREaXJ0eSA9IHRydWU7XHJcbiAgICBwcm90ZWN0ZWQgX2lzQWxpZ24gPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlblxyXG4gICAgICogUGVyZm9ybSB0aGUgbGF5b3V0IHVwZGF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBAemhcclxuICAgICAqIOeri+WNs+aJp+ihjOabtOaWsOW4g+WxgOOAglxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGB0eXBlc2NyaXB0XHJcbiAgICAgKiBsYXlvdXQudHlwZSA9IGNjLkxheW91dENvbXBvbmVudC5IT1JJWk9OVEFMO1xyXG4gICAgICogbGF5b3V0Lm5vZGUuYWRkQ2hpbGQoY2hpbGROb2RlKTtcclxuICAgICAqIGNjLmxvZyhjaGlsZE5vZGUueCk7IC8vIG5vdCB5ZXQgY2hhbmdlZFxyXG4gICAgICogbGF5b3V0LnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICogY2MubG9nKGNoaWxkTm9kZS54KTsgLy8gY2hhbmdlZFxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVMYXlvdXQgKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9sYXlvdXREaXJ0eSAmJiB0aGlzLm5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kb0xheW91dCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9sYXlvdXREaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25FbmFibGUgKCkge1xyXG4gICAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm5vZGUuZ2V0Q29udGVudFNpemUoKS5lcXVhbHMobmV3IFNpemUoKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnNldENvbnRlbnRTaXplKHRoaXMuX2xheW91dFNpemUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX04kcGFkZGluZyAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9taWdyYXRlUGFkZGluZ0RhdGEoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2RvTGF5b3V0RGlydHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25EaXNhYmxlICgpIHtcclxuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfbWlncmF0ZVBhZGRpbmdEYXRhICgpIHtcclxuICAgICAgICB0aGlzLl9wYWRkaW5nTGVmdCA9IHRoaXMuX04kcGFkZGluZztcclxuICAgICAgICB0aGlzLl9wYWRkaW5nUmlnaHQgPSB0aGlzLl9OJHBhZGRpbmc7XHJcbiAgICAgICAgdGhpcy5fcGFkZGluZ1RvcCA9IHRoaXMuX04kcGFkZGluZztcclxuICAgICAgICB0aGlzLl9wYWRkaW5nQm90dG9tID0gdGhpcy5fTiRwYWRkaW5nO1xyXG4gICAgICAgIHRoaXMuX04kcGFkZGluZyA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9hZGRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgZGlyZWN0b3Iub24oRGlyZWN0b3IuRVZFTlRfQUZURVJfVVBEQVRFLCB0aGlzLnVwZGF0ZUxheW91dCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKE5vZGVFdmVudC5TSVpFX0NIQU5HRUQsIHRoaXMuX3Jlc2l6ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihOb2RlRXZlbnQuQU5DSE9SX0NIQU5HRUQsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihOb2RlRXZlbnQuQ0hJTERfQURERUQsIHRoaXMuX2NoaWxkQWRkZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihOb2RlRXZlbnQuQ0hJTERfUkVNT1ZFRCwgdGhpcy5fY2hpbGRSZW1vdmVkLCB0aGlzKTtcclxuICAgICAgICAvLyB0aGlzLm5vZGUub24oTm9kZUV2ZW50LkNISUxEX1JFT1JERVIsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2FkZENoaWxkcmVuRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3JlbW92ZUV2ZW50TGlzdGVuZXJzICgpIHtcclxuICAgICAgICBkaXJlY3Rvci5vZmYoRGlyZWN0b3IuRVZFTlRfQUZURVJfVVBEQVRFLCB0aGlzLnVwZGF0ZUxheW91dCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9mZihOb2RlRXZlbnQuU0laRV9DSEFOR0VELCB0aGlzLl9yZXNpemVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm5vZGUub2ZmKE5vZGVFdmVudC5BTkNIT1JfQ0hBTkdFRCwgdGhpcy5fZG9MYXlvdXREaXJ0eSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9mZihOb2RlRXZlbnQuQ0hJTERfQURERUQsIHRoaXMuX2NoaWxkQWRkZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubm9kZS5vZmYoTm9kZUV2ZW50LkNISUxEX1JFTU9WRUQsIHRoaXMuX2NoaWxkUmVtb3ZlZCwgdGhpcyk7XHJcbiAgICAgICAgLy8gdGhpcy5ub2RlLm9mZihOb2RlRXZlbnQuQ0hJTERfUkVPUkRFUiwgdGhpcy5fZG9MYXlvdXREaXJ0eSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlQ2hpbGRyZW5FdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfYWRkQ2hpbGRyZW5FdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLm5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xyXG4gICAgICAgICAgICBjaGlsZC5vbihOb2RlRXZlbnQuVFJBTlNGT1JNX0NIQU5HRUQsIHRoaXMuX2RvU2NhbGVEaXJ0eSwgdGhpcyk7XHJcbiAgICAgICAgICAgIGNoaWxkLm9uKE5vZGVFdmVudC5TSVpFX0NIQU5HRUQsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgICAgICBjaGlsZC5vbihOb2RlRXZlbnQuVFJBTlNGT1JNX0NIQU5HRUQsIHRoaXMuX3RyYW5zZm9ybURpcnR5LCB0aGlzKTtcclxuICAgICAgICAgICAgY2hpbGQub24oTm9kZUV2ZW50LkFOQ0hPUl9DSEFOR0VELCB0aGlzLl9kb0xheW91dERpcnR5LCB0aGlzKTtcclxuICAgICAgICAgICAgY2hpbGQub24oJ2FjdGl2ZS1pbi1oaWVyYXJjaHktY2hhbmdlZCcsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3JlbW92ZUNoaWxkcmVuRXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5ub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgY2hpbGQub2ZmKE5vZGVFdmVudC5UUkFOU0ZPUk1fQ0hBTkdFRCwgdGhpcy5fZG9TY2FsZURpcnR5LCB0aGlzKTtcclxuICAgICAgICAgICAgY2hpbGQub2ZmKE5vZGVFdmVudC5TSVpFX0NIQU5HRUQsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgICAgICBjaGlsZC5vZmYoTm9kZUV2ZW50LlRSQU5TRk9STV9DSEFOR0VELCB0aGlzLl90cmFuc2Zvcm1EaXJ0eSwgdGhpcyk7XHJcbiAgICAgICAgICAgIGNoaWxkLm9mZihOb2RlRXZlbnQuQU5DSE9SX0NIQU5HRUQsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgICAgICBjaGlsZC5vZmYoJ2FjdGl2ZS1pbi1oaWVyYXJjaHktY2hhbmdlZCcsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2NoaWxkQWRkZWQgKGNoaWxkOiBOb2RlKSB7XHJcbiAgICAgICAgY2hpbGQub24oTm9kZUV2ZW50LlRSQU5TRk9STV9DSEFOR0VELCB0aGlzLl9kb1NjYWxlRGlydHksIHRoaXMpO1xyXG4gICAgICAgIGNoaWxkLm9uKE5vZGVFdmVudC5TSVpFX0NIQU5HRUQsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgIGNoaWxkLm9uKE5vZGVFdmVudC5UUkFOU0ZPUk1fQ0hBTkdFRCwgdGhpcy5fdHJhbnNmb3JtRGlydHksIHRoaXMpO1xyXG4gICAgICAgIGNoaWxkLm9uKE5vZGVFdmVudC5BTkNIT1JfQ0hBTkdFRCwgdGhpcy5fZG9MYXlvdXREaXJ0eSwgdGhpcyk7XHJcbiAgICAgICAgY2hpbGQub24oJ2FjdGl2ZS1pbi1oaWVyYXJjaHktY2hhbmdlZCcsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLl9kb0xheW91dERpcnR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9jaGlsZFJlbW92ZWQgKGNoaWxkOiBOb2RlKSB7XHJcbiAgICAgICAgY2hpbGQub2ZmKE5vZGVFdmVudC5UUkFOU0ZPUk1fQ0hBTkdFRCwgdGhpcy5fZG9TY2FsZURpcnR5LCB0aGlzKTtcclxuICAgICAgICBjaGlsZC5vZmYoTm9kZUV2ZW50LlNJWkVfQ0hBTkdFRCwgdGhpcy5fZG9MYXlvdXREaXJ0eSwgdGhpcyk7XHJcbiAgICAgICAgY2hpbGQub2ZmKE5vZGVFdmVudC5UUkFOU0ZPUk1fQ0hBTkdFRCwgdGhpcy5fdHJhbnNmb3JtRGlydHksIHRoaXMpO1xyXG4gICAgICAgIGNoaWxkLm9mZihOb2RlRXZlbnQuQU5DSE9SX0NIQU5HRUQsIHRoaXMuX2RvTGF5b3V0RGlydHksIHRoaXMpO1xyXG4gICAgICAgIGNoaWxkLm9mZignYWN0aXZlLWluLWhpZXJhcmNoeS1jaGFuZ2VkJywgdGhpcy5fZG9MYXlvdXREaXJ0eSwgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2RvTGF5b3V0RGlydHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3Jlc2l6ZWQgKCkge1xyXG4gICAgICAgIHRoaXMuX2xheW91dFNpemUgPSB0aGlzLm5vZGUuZ2V0Q29udGVudFNpemUoKTtcclxuICAgICAgICB0aGlzLl9kb0xheW91dERpcnR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9kb0xheW91dEhvcml6b250YWxseSAoYmFzZVdpZHRoOiBudW1iZXIsIHJvd0JyZWFrOiBib29sZWFuLCBmblBvc2l0aW9uWTogRnVuY3Rpb24sIGFwcGx5Q2hpbGRyZW46IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBsYXlvdXRBbmNob3IgPSB0aGlzLm5vZGUuZ2V0QW5jaG9yUG9pbnQoKTtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMubm9kZS5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgbGV0IHNpZ24gPSAxO1xyXG4gICAgICAgIGxldCBwYWRkaW5nWCA9IHRoaXMuX3BhZGRpbmdMZWZ0O1xyXG4gICAgICAgIGxldCBzdGFydFBvcyA9IC1sYXlvdXRBbmNob3IueCAqIGJhc2VXaWR0aDtcclxuICAgICAgICBpZiAodGhpcy5faG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gSG9yaXpvbnRhbERpcmVjdGlvbi5SSUdIVF9UT19MRUZUKSB7XHJcbiAgICAgICAgICAgIHNpZ24gPSAtMTtcclxuICAgICAgICAgICAgc3RhcnRQb3MgPSAoMSAtIGxheW91dEFuY2hvci54KSAqIGJhc2VXaWR0aDtcclxuICAgICAgICAgICAgcGFkZGluZ1ggPSB0aGlzLl9wYWRkaW5nUmlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbmV4dFggPSBzdGFydFBvcyArIHNpZ24gKiBwYWRkaW5nWCAtIHNpZ24gKiB0aGlzLl9zcGFjaW5nWDtcclxuICAgICAgICBsZXQgcm93TWF4SGVpZ2h0ID0gMDtcclxuICAgICAgICBsZXQgdGVtcE1heEhlaWdodCA9IDA7XHJcbiAgICAgICAgbGV0IHNlY29uZE1heEhlaWdodCA9IDA7XHJcbiAgICAgICAgbGV0IHJvdyA9IDA7XHJcbiAgICAgICAgbGV0IGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5ID0gMDtcclxuXHJcbiAgICAgICAgbGV0IG1heEhlaWdodENoaWxkQW5jaG9yWSA9IDA7XHJcblxyXG4gICAgICAgIGxldCBhY3RpdmVDaGlsZENvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hpbGQuYWN0aXZlSW5IaWVyYXJjaHkpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUNoaWxkQ291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5ld0NoaWxkV2lkdGggPSB0aGlzLl9jZWxsU2l6ZS53aWR0aDtcclxuICAgICAgICBpZiAodGhpcy5fTiRsYXlvdXRUeXBlICE9PSBUeXBlLkdSSUQgJiYgdGhpcy5fcmVzaXplTW9kZSA9PT0gUmVzaXplTW9kZS5DSElMRFJFTikge1xyXG4gICAgICAgICAgICBuZXdDaGlsZFdpZHRoID0gKGJhc2VXaWR0aCAtICh0aGlzLl9wYWRkaW5nTGVmdCArIHRoaXMuX3BhZGRpbmdSaWdodCkgLSAoYWN0aXZlQ2hpbGRDb3VudCAtIDEpICogdGhpcy5fc3BhY2luZ1gpIC8gYWN0aXZlQ2hpbGRDb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgaWYgKCFjaGlsZC5hY3RpdmVJbkhpZXJhcmNoeSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNoaWxkLmdldFNjYWxlKF90ZW1wU2NhbGUpO1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZFNjYWxlWCA9IHRoaXMuX2dldFVzZWRTY2FsZVZhbHVlKF90ZW1wU2NhbGUueCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkU2NhbGVZID0gdGhpcy5fZ2V0VXNlZFNjYWxlVmFsdWUoX3RlbXBTY2FsZS55KTtcclxuICAgICAgICAgICAgLy8gZm9yIHJlc2l6aW5nIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZXNpemVNb2RlID09PSBSZXNpemVNb2RlLkNISUxEUkVOKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC53aWR0aCA9IG5ld0NoaWxkV2lkdGggLyBjaGlsZFNjYWxlWDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9OJGxheW91dFR5cGUgPT09IFR5cGUuR1JJRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmhlaWdodCA9IHRoaXMuX2NlbGxTaXplLmhlaWdodCAvIGNoaWxkU2NhbGVZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgYW5jaG9yWCA9IGNoaWxkLmFuY2hvclg7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkQm91bmRpbmdCb3hXaWR0aCA9IGNoaWxkLndpZHRoISAqIGNoaWxkU2NhbGVYO1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZEJvdW5kaW5nQm94SGVpZ2h0ID0gY2hpbGQuaGVpZ2h0ISAqIGNoaWxkU2NhbGVZO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlY29uZE1heEhlaWdodCA+IHRlbXBNYXhIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBNYXhIZWlnaHQgPSBzZWNvbmRNYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjaGlsZEJvdW5kaW5nQm94SGVpZ2h0ID49IHRlbXBNYXhIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHNlY29uZE1heEhlaWdodCA9IHRlbXBNYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0ZW1wTWF4SGVpZ2h0ID0gY2hpbGRCb3VuZGluZ0JveEhlaWdodDtcclxuICAgICAgICAgICAgICAgIG1heEhlaWdodENoaWxkQW5jaG9yWSA9IGNoaWxkLmdldEFuY2hvclBvaW50KCkueTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2hvcml6b250YWxEaXJlY3Rpb24gPT09IEhvcml6b250YWxEaXJlY3Rpb24uUklHSFRfVE9fTEVGVCkge1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yWCA9IDEgLSBjaGlsZC5hbmNob3JYITtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXh0WCA9IG5leHRYICsgc2lnbiAqIGFuY2hvclghICogY2hpbGRCb3VuZGluZ0JveFdpZHRoICsgc2lnbiAqIHRoaXMuX3NwYWNpbmdYO1xyXG4gICAgICAgICAgICBjb25zdCByaWdodEJvdW5kYXJ5T2ZDaGlsZCA9IHNpZ24gKiAoMSAtIGFuY2hvclghKSAqIGNoaWxkQm91bmRpbmdCb3hXaWR0aDtcclxuXHJcbiAgICAgICAgICAgIGlmIChyb3dCcmVhaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93QnJlYWtCb3VuZGFyeSA9IG5leHRYICsgcmlnaHRCb3VuZGFyeU9mQ2hpbGQgKyBzaWduICogKHNpZ24gPiAwID8gdGhpcy5fcGFkZGluZ1JpZ2h0IDogdGhpcy5fcGFkZGluZ0xlZnQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxlZnRUb1JpZ2h0Um93QnJlYWsgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9ob3Jpem9udGFsRGlyZWN0aW9uID09PSBIb3Jpem9udGFsRGlyZWN0aW9uLkxFRlRfVE9fUklHSFQgJiYgcm93QnJlYWtCb3VuZGFyeSA+ICgxIC0gbGF5b3V0QW5jaG9yLngpICogYmFzZVdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdFRvUmlnaHRSb3dCcmVhayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHJpZ2h0VG9MZWZ0Um93QnJlYWsgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9ob3Jpem9udGFsRGlyZWN0aW9uID09PSBIb3Jpem9udGFsRGlyZWN0aW9uLlJJR0hUX1RPX0xFRlQgJiYgcm93QnJlYWtCb3VuZGFyeSA8IC1sYXlvdXRBbmNob3IueCAqIGJhc2VXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0VG9MZWZ0Um93QnJlYWsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsZWZ0VG9SaWdodFJvd0JyZWFrIHx8IHJpZ2h0VG9MZWZ0Um93QnJlYWspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkQm91bmRpbmdCb3hIZWlnaHQgPj0gdGVtcE1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kTWF4SGVpZ2h0ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRNYXhIZWlnaHQgPSB0ZW1wTWF4SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd01heEhlaWdodCArPSBzZWNvbmRNYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZE1heEhlaWdodCA9IHRlbXBNYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93TWF4SGVpZ2h0ICs9IHRlbXBNYXhIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZE1heEhlaWdodCA9IGNoaWxkQm91bmRpbmdCb3hIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBNYXhIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBuZXh0WCA9IHN0YXJ0UG9zICsgc2lnbiAqIChwYWRkaW5nWCArIGFuY2hvclghICogY2hpbGRCb3VuZGluZ0JveFdpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICByb3crKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZmluYWxQb3NpdGlvblkgPSBmblBvc2l0aW9uWShjaGlsZCwgcm93TWF4SGVpZ2h0LCByb3cpO1xyXG4gICAgICAgICAgICBpZiAoYmFzZVdpZHRoID49IChjaGlsZEJvdW5kaW5nQm94V2lkdGggKyB0aGlzLl9wYWRkaW5nTGVmdCArIHRoaXMuX3BhZGRpbmdSaWdodCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcHBseUNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuZ2V0UG9zaXRpb24oX3RlbXBQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLnNldFBvc2l0aW9uKG5leHRYLCBmaW5hbFBvc2l0aW9uWSwgX3RlbXBQb3Mueik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBzaWduWCA9IDE7XHJcbiAgICAgICAgICAgIGxldCB0ZW1wRmluYWxQb3NpdGlvblk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcE1hcmdpbiA9ICh0ZW1wTWF4SGVpZ2h0ID09PSAwKSA/IGNoaWxkQm91bmRpbmdCb3hIZWlnaHQgOiB0ZW1wTWF4SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3ZlcnRpY2FsRGlyZWN0aW9uID09PSBWZXJ0aWNhbERpcmVjdGlvbi5UT1BfVE9fQk9UVE9NKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJSZXNpemVCb3VuZGFyeSA9IGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5IHx8IHRoaXMubm9kZS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIHNpZ25YID0gLTE7XHJcbiAgICAgICAgICAgICAgICB0ZW1wRmluYWxQb3NpdGlvblkgPSBmaW5hbFBvc2l0aW9uWSArIHNpZ25YICogKHRvcE1hcmdpbiAqIG1heEhlaWdodENoaWxkQW5jaG9yWSArIHRoaXMuX3BhZGRpbmdCb3R0b20pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBGaW5hbFBvc2l0aW9uWSA8IGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUmVzaXplQm91bmRhcnkgPSB0ZW1wRmluYWxQb3NpdGlvblk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJSZXNpemVCb3VuZGFyeSA9IGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5IHx8IC10aGlzLm5vZGUuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0ZW1wRmluYWxQb3NpdGlvblkgPSBmaW5hbFBvc2l0aW9uWSArIHNpZ25YICogKHRvcE1hcmdpbiAqIG1heEhlaWdodENoaWxkQW5jaG9yWSArIHRoaXMuX3BhZGRpbmdUb3ApO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBGaW5hbFBvc2l0aW9uWSA+IGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUmVzaXplQm91bmRhcnkgPSB0ZW1wRmluYWxQb3NpdGlvblk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5leHRYICs9IHJpZ2h0Qm91bmRhcnlPZkNoaWxkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZG9MYXlvdXRWZXJ0aWNhbGx5IChcclxuICAgICAgICBiYXNlSGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgY29sdW1uQnJlYWs6IGJvb2xlYW4sXHJcbiAgICAgICAgZm5Qb3NpdGlvblg6IEZ1bmN0aW9uLFxyXG4gICAgICAgIGFwcGx5Q2hpbGRyZW46IGJvb2xlYW4sXHJcbiAgICApIHtcclxuICAgICAgICBjb25zdCBsYXlvdXRBbmNob3IgPSB0aGlzLm5vZGUuZ2V0QW5jaG9yUG9pbnQoKTtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMubm9kZS5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgbGV0IHNpZ24gPSAxO1xyXG4gICAgICAgIGxldCBwYWRkaW5nWSA9IHRoaXMuX3BhZGRpbmdCb3R0b207XHJcbiAgICAgICAgbGV0IGJvdHRvbUJvdW5kYXJ5T2ZMYXlvdXQgPSAtbGF5b3V0QW5jaG9yLnkgKiBiYXNlSGVpZ2h0O1xyXG4gICAgICAgIGlmICh0aGlzLl92ZXJ0aWNhbERpcmVjdGlvbiA9PT0gVmVydGljYWxEaXJlY3Rpb24uVE9QX1RPX0JPVFRPTSkge1xyXG4gICAgICAgICAgICBzaWduID0gLTE7XHJcbiAgICAgICAgICAgIGJvdHRvbUJvdW5kYXJ5T2ZMYXlvdXQgPSAoMSAtIGxheW91dEFuY2hvci55KSAqIGJhc2VIZWlnaHQ7XHJcbiAgICAgICAgICAgIHBhZGRpbmdZID0gdGhpcy5fcGFkZGluZ1RvcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBuZXh0WSA9IGJvdHRvbUJvdW5kYXJ5T2ZMYXlvdXQgKyBzaWduICogcGFkZGluZ1kgLSBzaWduICogdGhpcy5fc3BhY2luZ1k7XHJcbiAgICAgICAgbGV0IGNvbHVtbk1heFdpZHRoID0gMDtcclxuICAgICAgICBsZXQgdGVtcE1heFdpZHRoID0gMDtcclxuICAgICAgICBsZXQgc2Vjb25kTWF4V2lkdGggPSAwO1xyXG4gICAgICAgIGxldCBjb2x1bW4gPSAwO1xyXG4gICAgICAgIGxldCBjb250YWluZXJSZXNpemVCb3VuZGFyeSA9IDA7XHJcbiAgICAgICAgbGV0IG1heFdpZHRoQ2hpbGRBbmNob3JYID0gMDtcclxuXHJcbiAgICAgICAgbGV0IGFjdGl2ZUNoaWxkQ291bnQgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkLmFjdGl2ZUluSGllcmFyY2h5KSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVDaGlsZENvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBuZXdDaGlsZEhlaWdodCA9IHRoaXMuX2NlbGxTaXplLmhlaWdodDtcclxuICAgICAgICBpZiAodGhpcy5fTiRsYXlvdXRUeXBlICE9PSBUeXBlLkdSSUQgJiYgdGhpcy5fcmVzaXplTW9kZSA9PT0gUmVzaXplTW9kZS5DSElMRFJFTikge1xyXG4gICAgICAgICAgICBuZXdDaGlsZEhlaWdodCA9IChiYXNlSGVpZ2h0IC0gKHRoaXMuX3BhZGRpbmdUb3AgKyB0aGlzLl9wYWRkaW5nQm90dG9tKSAtIChhY3RpdmVDaGlsZENvdW50IC0gMSkgKiB0aGlzLl9zcGFjaW5nWSkgLyBhY3RpdmVDaGlsZENvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xyXG4gICAgICAgICAgICBpZiAoIWNoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBjaGlsZC5nZXRTY2FsZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZFNjYWxlWCA9IHRoaXMuX2dldFVzZWRTY2FsZVZhbHVlKHNjYWxlLngpO1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZFNjYWxlWSA9IHRoaXMuX2dldFVzZWRTY2FsZVZhbHVlKHNjYWxlLnkpO1xyXG4gICAgICAgICAgICBpZiAoIWNoaWxkLmFjdGl2ZUluSGllcmFyY2h5KSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gZm9yIHJlc2l6aW5nIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZXNpemVNb2RlID09PSBSZXNpemVNb2RlLkNISUxEUkVOKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5oZWlnaHQgPSBuZXdDaGlsZEhlaWdodCAvIGNoaWxkU2NhbGVZO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX04kbGF5b3V0VHlwZSA9PT0gVHlwZS5HUklEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQud2lkdGggPSB0aGlzLl9jZWxsU2l6ZS53aWR0aCAvIGNoaWxkU2NhbGVYO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgYW5jaG9yWSA9IGNoaWxkLmFuY2hvclk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkQm91bmRpbmdCb3hXaWR0aCA9IGNoaWxkLndpZHRoISAqIGNoaWxkU2NhbGVYO1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZEJvdW5kaW5nQm94SGVpZ2h0ID0gY2hpbGQuaGVpZ2h0ISAqIGNoaWxkU2NhbGVZO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlY29uZE1heFdpZHRoID4gdGVtcE1heFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wTWF4V2lkdGggPSBzZWNvbmRNYXhXaWR0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNoaWxkQm91bmRpbmdCb3hXaWR0aCA+PSB0ZW1wTWF4V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHNlY29uZE1heFdpZHRoID0gdGVtcE1heFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGVtcE1heFdpZHRoID0gY2hpbGRCb3VuZGluZ0JveFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgbWF4V2lkdGhDaGlsZEFuY2hvclggPSBjaGlsZC5nZXRBbmNob3JQb2ludCgpLng7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl92ZXJ0aWNhbERpcmVjdGlvbiA9PT0gVmVydGljYWxEaXJlY3Rpb24uVE9QX1RPX0JPVFRPTSkge1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yWSA9IDEgLSBjaGlsZC5hbmNob3JZITtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXh0WSA9IG5leHRZICsgc2lnbiAqIGFuY2hvclkhICogY2hpbGRCb3VuZGluZ0JveEhlaWdodCArIHNpZ24gKiB0aGlzLl9zcGFjaW5nWTtcclxuICAgICAgICAgICAgY29uc3QgdG9wQm91bmRhcnlPZkNoaWxkID0gc2lnbiAqICgxIC0gYW5jaG9yWSEpICogY2hpbGRCb3VuZGluZ0JveEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb2x1bW5CcmVhaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sdW1uQnJlYWtCb3VuZGFyeSA9IG5leHRZICsgdG9wQm91bmRhcnlPZkNoaWxkICsgc2lnbiAqIChzaWduID4gMCA/IHRoaXMuX3BhZGRpbmdUb3AgOiB0aGlzLl9wYWRkaW5nQm90dG9tKTtcclxuICAgICAgICAgICAgICAgIGxldCBib3R0b21Ub1RvcENvbHVtbkJyZWFrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdmVydGljYWxEaXJlY3Rpb24gPT09IFZlcnRpY2FsRGlyZWN0aW9uLkJPVFRPTV9UT19UT1AgJiYgY29sdW1uQnJlYWtCb3VuZGFyeSA+ICgxIC0gbGF5b3V0QW5jaG9yLnkpICogYmFzZUhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbVRvVG9wQ29sdW1uQnJlYWsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0b3BUb0JvdHRvbUNvbHVtbkJyZWFrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdmVydGljYWxEaXJlY3Rpb24gPT09IFZlcnRpY2FsRGlyZWN0aW9uLlRPUF9UT19CT1RUT00gJiYgY29sdW1uQnJlYWtCb3VuZGFyeSA8IC1sYXlvdXRBbmNob3IueSAqIGJhc2VIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3BUb0JvdHRvbUNvbHVtbkJyZWFrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYm90dG9tVG9Ub3BDb2x1bW5CcmVhayB8fCB0b3BUb0JvdHRvbUNvbHVtbkJyZWFrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkQm91bmRpbmdCb3hXaWR0aCA+PSB0ZW1wTWF4V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZE1heFdpZHRoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRNYXhXaWR0aCA9IHRlbXBNYXhXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5NYXhXaWR0aCArPSBzZWNvbmRNYXhXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kTWF4V2lkdGggPSB0ZW1wTWF4V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uTWF4V2lkdGggKz0gdGVtcE1heFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRNYXhXaWR0aCA9IGNoaWxkQm91bmRpbmdCb3hXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcE1heFdpZHRoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFkgPSBib3R0b21Cb3VuZGFyeU9mTGF5b3V0ICsgc2lnbiAqIChwYWRkaW5nWSArIGFuY2hvclkhICogY2hpbGRCb3VuZGluZ0JveEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsUG9zaXRpb25YID0gZm5Qb3NpdGlvblgoY2hpbGQsIGNvbHVtbk1heFdpZHRoLCBjb2x1bW4pO1xyXG4gICAgICAgICAgICBpZiAoYmFzZUhlaWdodCA+PSAoY2hpbGRCb3VuZGluZ0JveEhlaWdodCArICh0aGlzLl9wYWRkaW5nVG9wICsgdGhpcy5fcGFkZGluZ0JvdHRvbSkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwbHlDaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmdldFBvc2l0aW9uKF90ZW1wUG9zKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5zZXRQb3NpdGlvbihmaW5hbFBvc2l0aW9uWCwgbmV4dFksIF90ZW1wUG9zLnopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgc2lnblggPSAxO1xyXG4gICAgICAgICAgICBsZXQgdGVtcEZpbmFsUG9zaXRpb25YO1xyXG4gICAgICAgICAgICAvLyB3aGVuIHRoZSBpdGVtIGlzIHRoZSBsYXN0IGNvbHVtbiBicmVhayBpdGVtLCB0aGUgdGVtcE1heFdpZHRoIHdpbGwgYmUgMC5cclxuICAgICAgICAgICAgY29uc3QgcmlnaHRNYXJnaW4gPSAodGVtcE1heFdpZHRoID09PSAwKSA/IGNoaWxkQm91bmRpbmdCb3hXaWR0aCA6IHRlbXBNYXhXaWR0aDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9ob3Jpem9udGFsRGlyZWN0aW9uID09PSBIb3Jpem9udGFsRGlyZWN0aW9uLlJJR0hUX1RPX0xFRlQpIHtcclxuICAgICAgICAgICAgICAgIHNpZ25YID0gLTE7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJSZXNpemVCb3VuZGFyeSA9IGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5IHx8IHRoaXMubm9kZS5nZXRDb250ZW50U2l6ZSgpLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGVtcEZpbmFsUG9zaXRpb25YID0gZmluYWxQb3NpdGlvblggKyBzaWduWCAqIChyaWdodE1hcmdpbiAqIG1heFdpZHRoQ2hpbGRBbmNob3JYICsgdGhpcy5fcGFkZGluZ0xlZnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBGaW5hbFBvc2l0aW9uWCA8IGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUmVzaXplQm91bmRhcnkgPSB0ZW1wRmluYWxQb3NpdGlvblg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJSZXNpemVCb3VuZGFyeSA9IGNvbnRhaW5lclJlc2l6ZUJvdW5kYXJ5IHx8IC10aGlzLm5vZGUuZ2V0Q29udGVudFNpemUoKS53aWR0aDtcclxuICAgICAgICAgICAgICAgIHRlbXBGaW5hbFBvc2l0aW9uWCA9IGZpbmFsUG9zaXRpb25YICsgc2lnblggKiAocmlnaHRNYXJnaW4gKiBtYXhXaWR0aENoaWxkQW5jaG9yWCArIHRoaXMuX3BhZGRpbmdSaWdodCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGVtcEZpbmFsUG9zaXRpb25YID4gY29udGFpbmVyUmVzaXplQm91bmRhcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJSZXNpemVCb3VuZGFyeSA9IHRlbXBGaW5hbFBvc2l0aW9uWDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5leHRZICs9IHRvcEJvdW5kYXJ5T2ZDaGlsZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXJSZXNpemVCb3VuZGFyeTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2RvTGF5b3V0QmFzaWMgKCkge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5ub2RlLmNoaWxkcmVuO1xyXG5cclxuICAgICAgICBsZXQgYWxsQ2hpbGRyZW5Cb3VuZGluZ0JveDogUmVjdCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkVHJhbnNmb3JtID0gY2hpbGQuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgaWYgKCFjaGlsZFRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5hY3RpdmVJbkhpZXJhcmNoeSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxDaGlsZHJlbkJvdW5kaW5nQm94KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsQ2hpbGRyZW5Cb3VuZGluZ0JveCA9IGNoaWxkVHJhbnNmb3JtLmdldEJvdW5kaW5nQm94VG9Xb3JsZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSZWN0LnVuaW9uKGFsbENoaWxkcmVuQm91bmRpbmdCb3gsIGFsbENoaWxkcmVuQm91bmRpbmdCb3gsIGNoaWxkVHJhbnNmb3JtLmdldEJvdW5kaW5nQm94VG9Xb3JsZCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGFsbENoaWxkcmVuQm91bmRpbmdCb3gpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gdGhpcy5ub2RlLnBhcmVudCEuZ2V0Q29tcG9uZW50KFVJVHJhbnNmb3JtQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgaWYgKCFwYXJlbnRUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVmVjMy5zZXQoX3RlbXBQb3MsIGFsbENoaWxkcmVuQm91bmRpbmdCb3gueCwgYWxsQ2hpbGRyZW5Cb3VuZGluZ0JveC55LCAwKTtcclxuICAgICAgICAgICAgY29uc3QgbGVmdEJvdHRvbUluUGFyZW50U3BhY2UgPSBuZXcgVmVjMygpO1xyXG4gICAgICAgICAgICBwYXJlbnRUcmFuc2Zvcm0uY29udmVydFRvTm9kZVNwYWNlQVIoX3RlbXBQb3MsIGxlZnRCb3R0b21JblBhcmVudFNwYWNlKTtcclxuICAgICAgICAgICAgVmVjMy5zZXQobGVmdEJvdHRvbUluUGFyZW50U3BhY2UsXHJcbiAgICAgICAgICAgICAgICBsZWZ0Qm90dG9tSW5QYXJlbnRTcGFjZS54IC0gdGhpcy5fcGFkZGluZ0xlZnQsIGxlZnRCb3R0b21JblBhcmVudFNwYWNlLnkgLSB0aGlzLl9wYWRkaW5nQm90dG9tLFxyXG4gICAgICAgICAgICAgICAgbGVmdEJvdHRvbUluUGFyZW50U3BhY2Uueik7XHJcblxyXG4gICAgICAgICAgICBWZWMzLnNldChfdGVtcFBvcywgYWxsQ2hpbGRyZW5Cb3VuZGluZ0JveC54ICsgYWxsQ2hpbGRyZW5Cb3VuZGluZ0JveC53aWR0aCwgYWxsQ2hpbGRyZW5Cb3VuZGluZ0JveC55ICsgYWxsQ2hpbGRyZW5Cb3VuZGluZ0JveC5oZWlnaHQsIDApO1xyXG4gICAgICAgICAgICBjb25zdCByaWdodFRvcEluUGFyZW50U3BhY2UgPSBuZXcgVmVjMygpO1xyXG4gICAgICAgICAgICBwYXJlbnRUcmFuc2Zvcm0uY29udmVydFRvTm9kZVNwYWNlQVIoX3RlbXBQb3MsIHJpZ2h0VG9wSW5QYXJlbnRTcGFjZSk7XHJcbiAgICAgICAgICAgIFZlYzMuc2V0KHJpZ2h0VG9wSW5QYXJlbnRTcGFjZSwgcmlnaHRUb3BJblBhcmVudFNwYWNlLnggKyB0aGlzLl9wYWRkaW5nUmlnaHQsIHJpZ2h0VG9wSW5QYXJlbnRTcGFjZS55ICsgdGhpcy5fcGFkZGluZ1RvcCwgcmlnaHRUb3BJblBhcmVudFNwYWNlLnopO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbmV3U2l6ZSA9IGNjLnNpemUocGFyc2VGbG9hdCgocmlnaHRUb3BJblBhcmVudFNwYWNlLnggLSBsZWZ0Qm90dG9tSW5QYXJlbnRTcGFjZS54KS50b0ZpeGVkKDIpKSxcclxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoKHJpZ2h0VG9wSW5QYXJlbnRTcGFjZS55IC0gbGVmdEJvdHRvbUluUGFyZW50U3BhY2UueSkudG9GaXhlZCgyKSkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ub2RlLmdldFBvc2l0aW9uKF90ZW1wUG9zKTtcclxuICAgICAgICAgICAgaWYgKG5ld1NpemUud2lkdGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FuY2hvclggPSAoX3RlbXBQb3MueCAtIGxlZnRCb3R0b21JblBhcmVudFNwYWNlLngpIC8gbmV3U2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5hbmNob3JYID0gcGFyc2VGbG9hdChuZXdBbmNob3JYLnRvRml4ZWQoMikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChuZXdTaXplLmhlaWdodCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QW5jaG9yWSA9IChfdGVtcFBvcy55IC0gbGVmdEJvdHRvbUluUGFyZW50U3BhY2UueSkgLyBuZXdTaXplLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5hbmNob3JZID0gcGFyc2VGbG9hdChuZXdBbmNob3JZLnRvRml4ZWQoMikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5zZXRDb250ZW50U2l6ZShuZXdTaXplKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9kb0xheW91dEdyaWRBeGlzSG9yaXpvbnRhbCAobGF5b3V0QW5jaG9yLCBsYXlvdXRTaXplKSB7XHJcbiAgICAgICAgY29uc3QgYmFzZVdpZHRoID0gbGF5b3V0U2l6ZS53aWR0aDtcclxuXHJcbiAgICAgICAgbGV0IHNpZ24gPSAxO1xyXG4gICAgICAgIGxldCBib3R0b21Cb3VuZGFyeU9mTGF5b3V0ID0gLWxheW91dEFuY2hvci55ICogbGF5b3V0U2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgbGV0IHBhZGRpbmdZID0gdGhpcy5fcGFkZGluZ0JvdHRvbTtcclxuICAgICAgICBpZiAodGhpcy5fdmVydGljYWxEaXJlY3Rpb24gPT09IFZlcnRpY2FsRGlyZWN0aW9uLlRPUF9UT19CT1RUT00pIHtcclxuICAgICAgICAgICAgc2lnbiA9IC0xO1xyXG4gICAgICAgICAgICBib3R0b21Cb3VuZGFyeU9mTGF5b3V0ID0gKDEgLSBsYXlvdXRBbmNob3IueSkgKiBsYXlvdXRTaXplLmhlaWdodDtcclxuICAgICAgICAgICAgcGFkZGluZ1kgPSB0aGlzLl9wYWRkaW5nVG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnN0IGZuUG9zaXRpb25ZID0gKGNoaWxkOiBOb2RlLCB0b3BPZmZzZXQ6IG51bWJlciwgcm93OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGJvdHRvbUJvdW5kYXJ5T2ZMYXlvdXQgK1xyXG4gICAgICAgICAgICAgICAgc2lnbiAqICh0b3BPZmZzZXQgKyBjaGlsZC5hbmNob3JZICogY2hpbGQuaGVpZ2h0ICogc2VsZi5fZ2V0VXNlZFNjYWxlVmFsdWUoY2hpbGQuZ2V0U2NhbGUoKS55KSArIHBhZGRpbmdZICsgcm93ICogdGhpcy5fc3BhY2luZ1kpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBuZXdIZWlnaHQgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLl9yZXNpemVNb2RlID09PSBSZXNpemVNb2RlLkNPTlRBSU5FUikge1xyXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIG5ldyBoZWlnaHQgb2YgY29udGFpbmVyLCBpdCB3b24ndCBjaGFuZ2UgdGhlIHBvc2l0aW9uIG9mIGl0J3MgY2hpbGRyZW5cclxuICAgICAgICAgICAgY29uc3QgYm91bmRhcnkgPSB0aGlzLl9kb0xheW91dEhvcml6b250YWxseShiYXNlV2lkdGgsIHRydWUsIGZuUG9zaXRpb25ZLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIG5ld0hlaWdodCA9IGJvdHRvbUJvdW5kYXJ5T2ZMYXlvdXQgLSBib3VuZGFyeTtcclxuICAgICAgICAgICAgaWYgKG5ld0hlaWdodCA8IDApIHtcclxuICAgICAgICAgICAgICAgIG5ld0hlaWdodCAqPSAtMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYm90dG9tQm91bmRhcnlPZkxheW91dCA9IC1sYXlvdXRBbmNob3IueSAqIG5ld0hlaWdodDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl92ZXJ0aWNhbERpcmVjdGlvbiA9PT0gVmVydGljYWxEaXJlY3Rpb24uVE9QX1RPX0JPVFRPTSkge1xyXG4gICAgICAgICAgICAgICAgc2lnbiA9IC0xO1xyXG4gICAgICAgICAgICAgICAgYm90dG9tQm91bmRhcnlPZkxheW91dCA9ICgxIC0gbGF5b3V0QW5jaG9yLnkpICogbmV3SGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kb0xheW91dEhvcml6b250YWxseShiYXNlV2lkdGgsIHRydWUsIGZuUG9zaXRpb25ZLCB0cnVlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZU1vZGUgPT09IFJlc2l6ZU1vZGUuQ09OVEFJTkVSKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5zZXRDb250ZW50U2l6ZShiYXNlV2lkdGgsIG5ld0hlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfZG9MYXlvdXRHcmlkQXhpc1ZlcnRpY2FsIChsYXlvdXRBbmNob3I6IFZlYzIsIGxheW91dFNpemU6IFNpemUpIHtcclxuICAgICAgICBjb25zdCBiYXNlSGVpZ2h0ID0gbGF5b3V0U2l6ZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGxldCBzaWduID0gMTtcclxuICAgICAgICBsZXQgbGVmdEJvdW5kYXJ5T2ZMYXlvdXQgPSAtbGF5b3V0QW5jaG9yLnggKiBsYXlvdXRTaXplLndpZHRoO1xyXG4gICAgICAgIGxldCBwYWRkaW5nWCA9IHRoaXMuX3BhZGRpbmdMZWZ0O1xyXG4gICAgICAgIGlmICh0aGlzLl9ob3Jpem9udGFsRGlyZWN0aW9uID09PSBIb3Jpem9udGFsRGlyZWN0aW9uLlJJR0hUX1RPX0xFRlQpIHtcclxuICAgICAgICAgICAgc2lnbiA9IC0xO1xyXG4gICAgICAgICAgICBsZWZ0Qm91bmRhcnlPZkxheW91dCA9ICgxIC0gbGF5b3V0QW5jaG9yLngpICogbGF5b3V0U2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgcGFkZGluZ1ggPSB0aGlzLl9wYWRkaW5nUmlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICBjb25zdCBmblBvc2l0aW9uWCA9IChjaGlsZDogTm9kZSwgbGVmdE9mZnNldDogbnVtYmVyLCBjb2x1bW46IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGVmdEJvdW5kYXJ5T2ZMYXlvdXQgK1xyXG4gICAgICAgICAgICAgICAgc2lnbiAqIChsZWZ0T2Zmc2V0ICsgY2hpbGQuYW5jaG9yWCAqIGNoaWxkLndpZHRoICogc2VsZi5fZ2V0VXNlZFNjYWxlVmFsdWUoY2hpbGQuZ2V0U2NhbGUoKS54KSArIHBhZGRpbmdYICsgY29sdW1uICogdGhpcy5fc3BhY2luZ1gpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBuZXdXaWR0aCA9IDA7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZU1vZGUgPT09IFJlc2l6ZU1vZGUuQ09OVEFJTkVSKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kYXJ5ID0gdGhpcy5fZG9MYXlvdXRWZXJ0aWNhbGx5KGJhc2VIZWlnaHQsIHRydWUsIGZuUG9zaXRpb25YLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIG5ld1dpZHRoID0gbGVmdEJvdW5kYXJ5T2ZMYXlvdXQgLSBib3VuZGFyeTtcclxuICAgICAgICAgICAgaWYgKG5ld1dpZHRoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgbmV3V2lkdGggKj0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxlZnRCb3VuZGFyeU9mTGF5b3V0ID0gLWxheW91dEFuY2hvci54ICogbmV3V2lkdGg7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5faG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gSG9yaXpvbnRhbERpcmVjdGlvbi5SSUdIVF9UT19MRUZUKSB7XHJcbiAgICAgICAgICAgICAgICBzaWduID0gLTE7XHJcbiAgICAgICAgICAgICAgICBsZWZ0Qm91bmRhcnlPZkxheW91dCA9ICgxIC0gbGF5b3V0QW5jaG9yLngpICogbmV3V2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2RvTGF5b3V0VmVydGljYWxseShiYXNlSGVpZ2h0LCB0cnVlLCBmblBvc2l0aW9uWCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9yZXNpemVNb2RlID09PSBSZXNpemVNb2RlLkNPTlRBSU5FUikge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuc2V0Q29udGVudFNpemUobmV3V2lkdGgsIGJhc2VIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2RvTGF5b3V0R3JpZCAoKSB7XHJcbiAgICAgICAgY29uc3QgbGF5b3V0QW5jaG9yID0gdGhpcy5ub2RlLmdldEFuY2hvclBvaW50KCk7XHJcbiAgICAgICAgY29uc3QgbGF5b3V0U2l6ZSA9IHRoaXMubm9kZS5nZXRDb250ZW50U2l6ZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGFydEF4aXMgPT09IEF4aXNEaXJlY3Rpb24uSE9SSVpPTlRBTCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kb0xheW91dEdyaWRBeGlzSG9yaXpvbnRhbChsYXlvdXRBbmNob3IsIGxheW91dFNpemUpO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhcnRBeGlzID09PSBBeGlzRGlyZWN0aW9uLlZFUlRJQ0FMKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RvTGF5b3V0R3JpZEF4aXNWZXJ0aWNhbChsYXlvdXRBbmNob3IsIGxheW91dFNpemUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9nZXRIb3Jpem9udGFsQmFzZVdpZHRoIChjaGlsZHJlbjogUmVhZG9ubHk8Tm9kZVtdPikge1xyXG4gICAgICAgIGxldCBuZXdXaWR0aCA9IDA7XHJcbiAgICAgICAgbGV0IGFjdGl2ZUNoaWxkQ291bnQgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLl9yZXNpemVNb2RlID09PSBSZXNpemVNb2RlLkNPTlRBSU5FUikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5nZXRTY2FsZShfdGVtcFNjYWxlKTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5hY3RpdmVJbkhpZXJhcmNoeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNoaWxkQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICBuZXdXaWR0aCArPSBjaGlsZC53aWR0aCEgKiB0aGlzLl9nZXRVc2VkU2NhbGVWYWx1ZShfdGVtcFNjYWxlLngpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ld1dpZHRoICs9IChhY3RpdmVDaGlsZENvdW50IC0gMSkgKiB0aGlzLl9zcGFjaW5nWCArIHRoaXMuX3BhZGRpbmdMZWZ0ICsgdGhpcy5fcGFkZGluZ1JpZ2h0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ld1dpZHRoID0gdGhpcy5ub2RlLmdldENvbnRlbnRTaXplKCkud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdXaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2dldFZlcnRpY2FsQmFzZUhlaWdodCAoY2hpbGRyZW46IFJlYWRvbmx5PE5vZGVbXT4pIHtcclxuICAgICAgICBsZXQgbmV3SGVpZ2h0ID0gMDtcclxuICAgICAgICBsZXQgYWN0aXZlQ2hpbGRDb3VudCA9IDA7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZU1vZGUgPT09IFJlc2l6ZU1vZGUuQ09OVEFJTkVSKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLmdldFNjYWxlKF90ZW1wU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmFjdGl2ZUluSGllcmFyY2h5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ2hpbGRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0hlaWdodCArPSBjaGlsZC5oZWlnaHQhICogdGhpcy5fZ2V0VXNlZFNjYWxlVmFsdWUoX3RlbXBTY2FsZS55KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3SGVpZ2h0ICs9IChhY3RpdmVDaGlsZENvdW50IC0gMSkgKiB0aGlzLl9zcGFjaW5nWSArIHRoaXMuX3BhZGRpbmdCb3R0b20gKyB0aGlzLl9wYWRkaW5nVG9wO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ld0hlaWdodCA9IHRoaXMubm9kZS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld0hlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2RvTGF5b3V0ICgpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX04kbGF5b3V0VHlwZSA9PT0gVHlwZS5IT1JJWk9OVEFMKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gdGhpcy5fZ2V0SG9yaXpvbnRhbEJhc2VXaWR0aCh0aGlzLm5vZGUuY2hpbGRyZW4pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZm5Qb3NpdGlvblkgPSAoY2hpbGQ6IE5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuX2lzQWxpZ24gPyBWZWMzLlpFUk8gOiBjaGlsZC5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb3MueTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RvTGF5b3V0SG9yaXpvbnRhbGx5KG5ld1dpZHRoLCBmYWxzZSwgZm5Qb3NpdGlvblksIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9pc0FsaWduID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS53aWR0aCA9IG5ld1dpZHRoO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fTiRsYXlvdXRUeXBlID09PSBUeXBlLlZFUlRJQ0FMKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IHRoaXMuX2dldFZlcnRpY2FsQmFzZUhlaWdodCh0aGlzLm5vZGUuY2hpbGRyZW4pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZm5Qb3NpdGlvblggPSAoY2hpbGQ6IE5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuX2lzQWxpZ24gPyBWZWMzLlpFUk8gOiBjaGlsZC5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb3MueDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RvTGF5b3V0VmVydGljYWxseShuZXdIZWlnaHQsIGZhbHNlLCBmblBvc2l0aW9uWCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzQWxpZ24gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmhlaWdodCA9IG5ld0hlaWdodDtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX04kbGF5b3V0VHlwZSA9PT0gVHlwZS5OT05FKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZXNpemVNb2RlID09PSBSZXNpemVNb2RlLkNPTlRBSU5FUikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZG9MYXlvdXRCYXNpYygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9OJGxheW91dFR5cGUgPT09IFR5cGUuR1JJRCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kb0xheW91dEdyaWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9nZXRVc2VkU2NhbGVWYWx1ZSAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWZmZWN0ZWRCeVNjYWxlID8gTWF0aC5hYnModmFsdWUpIDogMTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3RyYW5zZm9ybURpcnR5ICh0eXBlOiBUcmFuc2Zvcm1CaXQpIHtcclxuICAgICAgICBpZiAoISh0eXBlICYgVHJhbnNmb3JtQml0LlBPU0lUSU9OKSl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2RvTGF5b3V0RGlydHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2RvTGF5b3V0RGlydHkgKCkge1xyXG4gICAgICAgIHRoaXMuX2xheW91dERpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2RvU2NhbGVEaXJ0eSAodHlwZTogVHJhbnNmb3JtQml0KSB7XHJcbiAgICAgICAgaWYgKHR5cGUgJiBUcmFuc2Zvcm1CaXQuU0NBTEUpe1xyXG4gICAgICAgICAgICB0aGlzLl9sYXlvdXREaXJ0eSA9IHRoaXMuX2xheW91dERpcnR5IHx8IHRoaXMuX2FmZmVjdGVkQnlTY2FsZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jYy5MYXlvdXRDb21wb25lbnQgPSBMYXlvdXRDb21wb25lbnQ7XHJcbiJdfQ==